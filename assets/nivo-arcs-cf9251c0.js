import{aU as ge,aV as T,aJ as ke,aW as J,aX as S,aY as oe,aZ as pe,a_ as he,a$ as Re,b0 as Ce,b1 as V,b2 as P,c as B,b3 as be,K as ve,z as $,M as _,Y as xe,n as le,v as de,b4 as Le,t as z,D as X,S as se,aM as Pe,o as ee,s as me,b5 as Te}from"./nivo-legends-8449b232.js";import{r as w,j as q}from"./index-4a4eb967.js";import{w as Oe,F as je}from"./line-0b77d4b1.js";function Ee(e){return e.innerRadius}function Ie(e){return e.outerRadius}function We(e){return e.startAngle}function we(e){return e.endAngle}function Se(e){return e&&e.padAngle}function Ye(e,t,n,r,s,l,i,a){var g=n-e,d=r-t,u=i-s,h=a-l,c=h*g-u*d;if(!(c*c<T))return c=(u*(t-l)-h*(e-s))/c,[e+c*g,t+c*d]}function Z(e,t,n,r,s,l,i){var a=e-n,g=t-r,d=(i?l:-l)/V(a*a+g*g),u=d*g,h=-d*a,c=e+u,p=t+h,m=n+u,v=r+h,C=(c+m)/2,x=(p+v)/2,k=m-c,o=v-p,A=k*k+o*o,R=s-l,L=c*v-m*p,O=(o<0?-1:1)*V(be(0,R*R*A-L*L)),j=(L*o-k*O)/A,E=(-L*k-o*O)/A,y=(L*o+k*O)/A,I=(-L*k+o*O)/A,W=j-C,f=E-x,M=y-C,D=I-x;return W*W+f*f>M*M+D*D&&(j=y,E=I),{cx:j,cy:E,x01:-u,y01:-h,x11:j*(s/R-1),y11:E*(s/R-1)}}function qe(){var e=Ee,t=Ie,n=B(0),r=null,s=We,l=we,i=Se,a=null,g=Oe(d);function d(){var u,h,c=+e.apply(this,arguments),p=+t.apply(this,arguments),m=s.apply(this,arguments)-ge,v=l.apply(this,arguments)-ge,C=pe(v-m),x=v>m;if(a||(a=u=g()),p<c&&(h=p,p=c,c=h),!(p>T))a.moveTo(0,0);else if(C>ke-T)a.moveTo(p*J(m),p*S(m)),a.arc(0,0,p,m,v,!x),c>T&&(a.moveTo(c*J(v),c*S(v)),a.arc(0,0,c,v,m,x));else{var k=m,o=v,A=m,R=v,L=C,O=C,j=i.apply(this,arguments)/2,E=j>T&&(r?+r.apply(this,arguments):V(c*c+p*p)),y=oe(pe(p-c)/2,+n.apply(this,arguments)),I=y,W=y,f,M;if(E>T){var D=he(E/c*S(j)),F=he(E/p*S(j));(L-=D*2)>T?(D*=x?1:-1,A+=D,R-=D):(L=0,A=R=(m+v)/2),(O-=F*2)>T?(F*=x?1:-1,k+=F,o-=F):(O=0,k=o=(m+v)/2)}var K=p*J(k),U=p*S(k),G=c*J(R),H=c*S(R);if(y>T){var N=p*J(o),Q=p*S(o),te=c*J(A),ne=c*S(A),Y;if(C<Re)if(Y=Ye(K,U,te,ne,N,Q,G,H)){var re=K-Y[0],ae=U-Y[1],ie=N-Y[0],ue=Q-Y[1],ce=1/S(Ce((re*ie+ae*ue)/(V(re*re+ae*ae)*V(ie*ie+ue*ue)))/2),fe=V(Y[0]*Y[0]+Y[1]*Y[1]);I=oe(y,(c-fe)/(ce-1)),W=oe(y,(p-fe)/(ce+1))}else I=W=0}O>T?W>T?(f=Z(te,ne,K,U,p,W,x),M=Z(N,Q,G,H,p,W,x),a.moveTo(f.cx+f.x01,f.cy+f.y01),W<y?a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,p,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),!x),a.arc(M.cx,M.cy,W,P(M.y11,M.x11),P(M.y01,M.x01),!x))):(a.moveTo(K,U),a.arc(0,0,p,k,o,!x)):a.moveTo(K,U),!(c>T)||!(L>T)?a.lineTo(G,H):I>T?(f=Z(G,H,N,Q,c,-I,x),M=Z(K,U,te,ne,c,-I,x),a.lineTo(f.cx+f.x01,f.cy+f.y01),I<y?a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,c,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),x),a.arc(M.cx,M.cy,I,P(M.y11,M.x11),P(M.y01,M.x01),!x))):a.arc(0,0,c,R,A,x)}if(a.closePath(),u)return a=null,u+""||null}return d.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2-Re/2;return[J(h)*u,S(h)*u]},d.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:B(+u),d):e},d.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:B(+u),d):t},d.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:B(+u),d):n},d.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:B(+u),d):r},d.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:B(+u),d):s},d.endAngle=function(u){return arguments.length?(l=typeof u=="function"?u:B(+u),d):l},d.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:B(+u),d):i},d.context=function(u){return arguments.length?(a=u??null,d):a},d}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(null,arguments)}var Be={pointerEvents:"none"},De=function(e){var t=e.label,n=e.style,r=$();return q.jsx(ee.g,{transform:n.transform,opacity:n.progress,style:Be,children:q.jsx(me,{textAnchor:"middle",dominantBaseline:"central",style:b({},r.labels.text,{fill:n.textColor}),children:t})})},Ae=function(e){var t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t},Je=function(e,t){return e.filter(function(n){return Math.abs(xe(n.arc.endAngle-n.arc.startAngle))>=t})},Ke={startAngle:{enter:function(e){return b({},e,{endAngle:e.startAngle})},update:function(e){return e},leave:function(e){return b({},e,{startAngle:e.endAngle})}},middleAngle:{enter:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return b({},e,{startAngle:t,endAngle:t})},update:function(e){return e},leave:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return b({},e,{startAngle:t,endAngle:t})}},endAngle:{enter:function(e){return b({},e,{startAngle:e.endAngle})},update:function(e){return e},leave:function(e){return b({},e,{endAngle:e.startAngle})}},innerRadius:{enter:function(e){return b({},e,{outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.outerRadius})}},centerRadius:{enter:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return b({},e,{innerRadius:t,outerRadius:t})},update:function(e){return e},leave:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return b({},e,{innerRadius:t,outerRadius:t})}},outerRadius:{enter:function(e){return b({},e,{innerRadius:e.outerRadius})},update:function(e){return e},leave:function(e){return b({},e,{outerRadius:e.innerRadius})}},pushIn:{enter:function(e){return b({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})}},pushOut:{enter:function(e){return b({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})}}},ye=function(e,t){return w.useMemo(function(){var n=Ke[e];return{enter:function(r){return b({progress:0},n.enter(r.arc),t?t.enter(r):{})},update:function(r){return b({progress:1},n.update(r.arc),t?t.update(r):{})},leave:function(r){return b({progress:0},n.leave(r.arc),t?t.leave(r):{})}}},[e,t])},Ue=function(e,t){var n=Te(e)-Math.PI/2,r=e.innerRadius+(e.outerRadius-e.innerRadius)*t;return X(n,r)},Ve=function(e){return function(t,n,r,s){return z([t,n,r,s],function(l,i,a,g){var d=Ue({startAngle:l,endAngle:i,innerRadius:a,outerRadius:g},e);return"translate("+d.x+","+d.y+")"})}},Xe=function(e,t,n,r){t===void 0&&(t=.5),n===void 0&&(n="innerRadius");var s=le(),l=s.animate,i=s.config,a=ye(n,r);return{transition:de(e,{keys:function(g){return g.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:i,immediate:!l}),interpolate:Ve(t)}},it=function(e){var t=e.center,n=e.data,r=e.transitionMode,s=e.label,l=e.radiusOffset,i=e.skipAngle,a=e.skipRadius,g=e.textColor,d=e.component,u=d===void 0?De:d,h=ve(s),c=$(),p=_(g,c),m=w.useMemo(function(){return n.filter(function(o){var A=Math.abs(xe(o.arc.endAngle-o.arc.startAngle)),R=Math.abs(o.arc.outerRadius-o.arc.innerRadius);return A>=i&&R>=a})},[n,i,a]),v=Xe(m,l,r),C=v.transition,x=v.interpolate,k=u;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(o,A){return w.createElement(k,{key:A.id,datum:A,label:h(A),style:{progress:o.progress,transform:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius),textColor:p(A)}})})})},$e=function(e){var t=e.label,n=e.style,r=$();return q.jsxs(ee.g,{opacity:n.opacity,children:[q.jsx(ee.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),q.jsx(me,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:b({},r.labels.text,{fill:n.textColor}),children:t})]})},ze=function(e){var t=Ae(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2);return t<Math.PI/2||t>1.5*Math.PI?"start":"end"},Me=function(e,t,n,r){var s,l,i=Ae(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2),a=X(i,e.outerRadius+t),g=X(i,e.outerRadius+t+n);return i<Math.PI/2||i>1.5*Math.PI?(s="after",l={x:g.x+r,y:g.y}):(s="before",l={x:g.x-r,y:g.y}),{side:s,points:[a,g,l]}},Fe=je().x(function(e){return e.x}).y(function(e){return e.y}),Ge=function(e,t,n,r,s,l,i){return z([e,t,n,r,s,l,i],function(a,g,d,u,h,c,p){var m=Me({startAngle:a,endAngle:g,innerRadius:d,outerRadius:u},h,c,p).points;return Fe(m)})},He=function(e,t,n,r){return z([e,t,n,r],function(s,l,i,a){return ze({startAngle:s,endAngle:l,innerRadius:i,outerRadius:a})})},Ne=function(e,t,n,r,s,l,i,a){return z([e,t,n,r,s,l,i,a],function(g,d,u,h,c,p,m,v){var C=Me({startAngle:g,endAngle:d,innerRadius:u,outerRadius:h},c,p,m),x=C.points,k=C.side,o=x[2];return k==="before"?o.x-=v:o.x+=v,"translate("+o.x+","+o.y+")"})},Qe=function(e){var t=e.data,n=e.offset,r=n===void 0?0:n,s=e.diagonalLength,l=e.straightLength,i=e.skipAngle,a=i===void 0?0:i,g=e.textOffset,d=e.linkColor,u=e.textColor,h=le(),c=h.animate,p=h.config,m=$(),v=_(d,m),C=_(u,m),x=function(o,A){return w.useMemo(function(){return Je(o,A)},[o,A])}(t,a),k=function(o){var A=o.offset,R=o.diagonalLength,L=o.straightLength,O=o.textOffset,j=o.getLinkColor,E=o.getTextColor;return w.useMemo(function(){return{enter:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}},update:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:R,straightLength:L,textOffset:O,linkColor:j(y),textColor:E(y),opacity:1}},leave:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}}}},[R,L,O,j,E,A])}({offset:r,diagonalLength:s,straightLength:l,textOffset:g,getLinkColor:v,getTextColor:C});return{transition:de(x,{keys:function(o){return o.id},initial:k.update,from:k.enter,enter:k.update,update:k.update,leave:k.leave,config:p,immediate:!c}),interpolateLink:Ge,interpolateTextAnchor:He,interpolateTextPosition:Ne}},ut=function(e){var t=e.center,n=e.data,r=e.label,s=e.skipAngle,l=e.offset,i=e.diagonalLength,a=e.straightLength,g=e.strokeWidth,d=e.textOffset,u=e.textColor,h=e.linkColor,c=e.component,p=c===void 0?$e:c,m=ve(r),v=Qe({data:n,skipAngle:s,offset:l,diagonalLength:i,straightLength:a,textOffset:d,linkColor:h,textColor:u}),C=v.transition,x=v.interpolateLink,k=v.interpolateTextAnchor,o=v.interpolateTextPosition,A=p;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(R,L){return w.createElement(A,{key:L.id,datum:L,label:m(L),style:b({},R,{thickness:g,path:x(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength),textAnchor:k(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius),textPosition:o(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength,R.textOffset)})})})})},Ze=function(e){var t=e.datum,n=e.style,r=e.onClick,s=e.onMouseEnter,l=e.onMouseMove,i=e.onMouseLeave,a=w.useCallback(function(h){return r==null?void 0:r(t,h)},[r,t]),g=w.useCallback(function(h){return s==null?void 0:s(t,h)},[s,t]),d=w.useCallback(function(h){return l==null?void 0:l(t,h)},[l,t]),u=w.useCallback(function(h){return i==null?void 0:i(t,h)},[i,t]);return q.jsx(ee.path,{d:n.path,opacity:n.opacity,fill:t.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?a:void 0,onMouseEnter:s?g:void 0,onMouseMove:l?d:void 0,onMouseLeave:i?u:void 0,"data-testid":"arc."+t.id})},_e=function(e,t,n,r,s){return z([e,t,n,r],function(l,i,a,g){return s({startAngle:l,endAngle:i,innerRadius:Math.max(0,a),outerRadius:Math.max(0,g)})})},et=function(e,t,n){t===void 0&&(t="innerRadius");var r=le(),s=r.animate,l=r.config,i=ye(t,n);return{transition:de(e,{keys:function(a){return a.id},initial:i.update,from:i.enter,enter:i.update,update:i.update,leave:i.leave,config:l,immediate:!s}),interpolate:_e}},ot=function(e){var t=e.center,n=e.data,r=e.arcGenerator,s=e.borderWidth,l=e.borderColor,i=e.onClick,a=e.onMouseEnter,g=e.onMouseMove,d=e.onMouseLeave,u=e.transitionMode,h=e.component,c=h===void 0?Ze:h,p=$(),m=_(l,p),v=et(n,u,{enter:function(o){return{opacity:0,color:o.color,borderColor:m(o)}},update:function(o){return{opacity:1,color:o.color,borderColor:m(o)}},leave:function(o){return{opacity:0,color:o.color,borderColor:m(o)}}}),C=v.transition,x=v.interpolate,k=c;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(o,A){return w.createElement(k,{key:A.id,datum:A,style:b({},o,{borderWidth:s,path:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius,r)}),onClick:i,onMouseEnter:a,onMouseMove:g,onMouseLeave:d})})})},st=function(e,t,n,r,s,l){l===void 0&&(l=!0);var i=[],a=X(se(r),n);i.push([a.x,a.y]);var g=X(se(s),n);i.push([g.x,g.y]);for(var d=Math.round(Math.min(r,s));d<=Math.round(Math.max(r,s));d++)if(d%90==0){var u=X(se(d),n);i.push([u.x,u.y])}i=i.map(function(C){var x=C[0],k=C[1];return[e+x,t+k]}),l&&i.push([e,t]);var h=i.map(function(C){return C[0]}),c=i.map(function(C){return C[1]}),p=Math.min.apply(Math,h),m=Math.max.apply(Math,h),v=Math.min.apply(Math,c);return{points:i,x:p,y:v,width:m-p,height:Math.max.apply(Math,c)-v}},tt=function(e,t,n,r,s,l){var i=Pe(s,l,e,t);return i<n&&i>r},lt=function(e,t,n,r,s,l,i){if(tt(e,t,n,r,l,i)){var a=Le(l,i,e,t);return s.find(function(g){var d=g.startAngle,u=g.endAngle;return a>=d&&a<u})}},dt=function(e){var t=e===void 0?{}:e,n=t.cornerRadius,r=n===void 0?0:n,s=t.padAngle,l=s===void 0?0:s;return w.useMemo(function(){return qe().innerRadius(function(i){return i.innerRadius}).outerRadius(function(i){return i.outerRadius}).cornerRadius(r).padAngle(l)},[r,l])};export{qe as T,ut as Y,lt as d,dt as f,it as q,st as s,ot as u};
