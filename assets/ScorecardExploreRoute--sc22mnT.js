import{r as x,F as We,az as Te,j as r,u as bt,R as ve,b as Yt,a1 as Ue,J as _e,I as et,ae as $t,U as qt,aw as Kt,al as Zt,d as tt,bK as Qt,bL as Jt,D as Xt,N as _t,e as er,a2 as tr,h as rr,T as nr}from"./index-DoFy0rzg.js";import{L as or}from"./LoadingDisplay-C8XjJeky.js";import{u as ir}from"./useData-Cjwib9jX.js";import{u as lr}from"./usePageTitle-BWK8oBW7.js";import{_ as sr,N as ar,a as cr,l as dr}from"./lockStats-EumqWaxn.js";import{E as ur}from"./ErrorMessage-BZUTYlvg.js";import{b as Ie,a as fr}from"./chartDefaults-pV7GKcxU.js";import{L as se}from"./Link-DntdBEUT.js";import{D as Ct,f as hr}from"./DataContext-BesrldAc.js";import{r as rt}from"./index-Cp8YFAer.js";import{e as nt}from"./entryName-Ci--lztI.js";import{B as pr}from"./BeltStripeMini-Be1V6wxw.js";import{a as Bt,b as ue,c as ot,d as it,T as gr,e as lt}from"./TableRow-BXmtuECf.js";import{V as mr}from"./ViewFilterButtons-CyJphRsy.js";import{b as kr}from"./sortFields-ChCLUnX8.js";import{F as xr,I as yr,S as vr}from"./Select-7qD0ckoA.js";import{C as br}from"./Collapse-B-M2nbka.js";import{l as Cr}from"./uniq-F6XgysW4.js";import{p as Br,q as jr,O as wr,A as Lr,I as Or,v as Sr,z as jt,G as Pr,H as st,B as Mr,C as Dr,b7 as Tr,b8 as Ir,S as He,b9 as Ar,F as zr,u as wt,x as Lt,n as Ot,T as at,aQ as ct}from"./nivo-legends-ClsgunBt.js";import{r as Fr}from"./_baseClone-BVOhaW6G.js";import{F as dt}from"./line-CjQSZloI.js";import{a as Ae}from"./adminChartDefaults-CBhS7ojG.js";import{e as Er}from"./filterFields-B7RfUktP.js";import{c as Rr}from"./collectionStatsById-DY1NVZ7h.js";import{a as Nr,d as Ur,q as Wr,p as Hr,s as Gr,b as Vr,e as Yr,c as $r,f as qr}from"./dataUrls-DkJe4Pqg.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-CDQTewhs.js";import"./nivo-arcs-B6Xhq9AN.js";import"./Sort-CVK3pyhu.js";import"./Chip-AZ0OGfny.js";import"./FilterAlt-Dgie4R4t.js";import"./Box-CH5EZw2o.js";import"./LockListContext-DHqxGvp9.js";import"./ToggleButtonGroup-CXhR6YeK.js";import"./Cancel-egGMAstr.js";function ut(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o<l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o<i||o===void 0&&i>=i)&&(o=i)}return o}function St(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o>l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o>i||o===void 0&&i>=i)&&(o=i)}return o}function ze(e,n){let o=0;if(n===void 0)for(let l of e)(l=+l)&&(o+=l);else{let l=-1;for(let i of e)(i=+n(i,++l,e))&&(o+=i)}return o}const Kr={Total:3614},Zr={Total:8120},ft={discord:Kr,reddit:Zr};function Qr({data:e}){const{scorecardStats:n,discordBeltCounts:o,redditBeltCounts:l}=e,{userCounts:i}=n,{filters:B,addFilter:k,removeFilters:w}=x.useContext(We),A=Jr(),p=B!=null&&B.dataset?B==null?void 0:B.dataset:"pickerData",[L,P]=x.useState(p),j=x.useCallback(t=>{k("dataset",t,!0),P(t)},[k]),M=9435-i.totalUsers,d=x.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:i.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:M}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},u={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:i.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:i.totalUsers-i.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},f={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:i.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:i.scorecardUsers-i.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},s={parent:"Scorecard Users",data:Object.keys(i.belts).sort((C,F)=>Te(C,F)).map(C=>({id:C,label:C,value:i.belts[C]})),colors:Ie,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},c={parent:"Imported Belts",data:Object.keys(i.dans).sort((C,F)=>parseInt(C)-parseInt(F)).map(C=>({id:ht(C),label:ht(C),value:i.dans[C]})),colors:pt,description:"Dan Breakdown"},S={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:ft.discord.Total},{id:"Reddit",label:"Reddit",value:ft.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},z=Object.keys(o).reduce((C,F)=>{const J=F.replace(" Belt","").trim();return C[J]=o[F],C},{}),G={parent:"Other LPU Pickers",data:Object.keys(z).filter(C=>!C.includes("Dan")).sort((C,F)=>Te(C,F)).map(C=>{const F=C==="Black"?"Black Belt":C;return{id:F,label:F,value:z[C]}}),colors:Ie,description:r.jsxs("span",{children:["Discord Belt Breakdown | ",r.jsx(se,{onClick:()=>j("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},W={parent:"Discord",data:Object.keys(o).filter(C=>C.includes("Dan")).sort((C,F)=>parseInt(C)-parseInt(F)).map(C=>({id:C,label:C,value:o[C]})),colors:pt,description:"Discord Dan Breakdown"},H=Object.keys(l).reduce((C,F)=>{const J=F.replace(" Belt","").trim();return C[J]=l[F],C},{}),Y={parent:"Other LPU Pickers",data:Object.keys(H).filter(C=>!C.includes("Dan")).sort((C,F)=>Te(C,F)).map(C=>({id:C,label:C,value:H[C]})),colors:Ie,description:r.jsxs("span",{children:["Reddit Belt Breakdown | ",r.jsx(se,{onClick:()=>j("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:t,"LPUbelts Users":u,"Scorecard Users":f,"Imported Belts":s,Black:c,"Other LPU Pickers":S,Discord:G,"Black Belt":W,Reddit:Y}},[o,j,M,l,i]),E=d[L].data,D=d[L].data.reduce((t,u)=>t+u.value,0),v=x.useCallback(t=>{d[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",j(t.id)},200))},[j,d]),O=x.useCallback(()=>{d[d[L].parent].parent?k("dataset",d[L].parent,!0):w(["dataset"]),P(d[L].parent)},[k,d,L,w]),g=x.useCallback((t,u)=>{d[t.id]&&(u.currentTarget.style.cursor="pointer")},[d]),{width:a}=bt(),I=a<=360,y=a<=395,m=a<=428,h=a<=560,R={top:30,right:0,bottom:30,left:0};let N=320;I?N=175:y?N=190:m?N=230:h&&(N=240);const K="1.0rem",Z=h?5:4,ee=h?10:8,Q=h?0:8;return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:d[L].description}),r.jsxs("div",{style:{height:N,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[r.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:r.jsx(sr,{data:E,theme:fr,colors:d[L].colors,margin:R,startAngle:d[L].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:Z,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/D*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:Q,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:ee,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{v(t)},onMouseEnter:(t,u)=>{g(t,u)},tooltip:t=>{const u=(t.datum.arc.angleDeg>Z,t.datum.label+": "),f=t.datum.value;return r.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:h||A?"none":"block"},children:r.jsxs("div",{children:[u,f]})})}})}),r.jsx("div",{style:{width:"100%",position:"absolute",top:N/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:d[L].parent&&r.jsx(se,{onClick:O,style:{color:"#ccc",cursor:"pointer",fontSize:K},children:"back"})})]},"pickPie")]})}function ht(e){const n=["st","nd","rd","th"];return e+""+n[Math.min(4,parseInt(e))-1]}const pt=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function Jr(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function gt({entry:e,index:n,collapse:o=!1}){const l=Yt(),B=nt(e).replace(/[\s/]/g,"_").replace(/\W/g,""),k=x.useCallback(A=>{const p=`/locks?tab=search&search=${A.id}&id=${A.id}&name=${B}`;l(p)},[l,B]),w=e.belt==="Unranked"?"#bbb":"#fff";return r.jsxs(Bt,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[r.jsx(ue,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:r.jsx(pr,{value:e.belt})}),r.jsx(ue,{align:"left",style:{alignItems:"center"},children:r.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:r.jsx(se,{onClick:()=>k(e),style:{color:w},children:nt(e)})})}),r.jsx(ue,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:e.currentPicks})]},n)}function Xr(){var I;const{visibleEntries:e=[]}=x.useContext(Ct),{filters:n,addFilter:o,removeFilters:l}=x.useContext(We),{userBelt:i="All Belts",sort:B}=n,[k,w]=x.useState(B);x.useEffect(()=>{w(!!B)},[B]);const A=60;let p=((I=e.find(y=>y.displayRank===A))==null?void 0:I.currentPicks)||0;p=p>2?p:0;const L=x.useMemo(()=>e.filter(y=>y.currentPicks>=p),[e,p]),P=x.useMemo(()=>e.filter(y=>y.currentPicks<p),[e,p]),j=x.useMemo(()=>["All Belts",...Ue],[]),M=x.useCallback(()=>{const y=j.findIndex(h=>h===i),m=y<j.length-1?y+1:0;o("userBelt",j[m],!0)},[o,j,i]),d=x.useCallback(()=>{const y=j.findIndex(h=>h===i),m=y>0?y-1:j.length-1;o("userBelt",j[m],!0)},[o,j,i]),[E,D]=x.useState(!1),v=x.useCallback(()=>D(!1),[]),O=x.useCallback(()=>D(!0),[]),g=x.useCallback(y=>{y.target.value!=="All Belts"?o("userBelt",y.target.value,!0):l(["userBelt"]),v()},[o,v,l]),a=x.useCallback(()=>{w(!k)},[k]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[r.jsx(_e,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(et,{onClick:d,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(ar,{})})}),r.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:r.jsxs(xr,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[r.jsx(yr,{style:{color:"#bbb"},children:"User Belt"}),r.jsx(vr,{id:"beltSelect",value:i||"All Belts",label:"Brand",open:E,onClose:v,onOpen:O,onChange:g,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:j.map((y,m)=>r.jsx($t,{value:j[m],children:j[m]},m))})]})}),r.jsx(_e,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(et,{onClick:M,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(cr,{})})})]})}),r.jsx(mr,{sortValues:kr,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[r.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsxs(it,{style:{backgroundColor:"#1c1c1c"},children:[r.jsx(gr,{children:r.jsxs(Bt,{style:{padding:"0px",fontWeight:700},children:[r.jsx(ue,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),r.jsx(ue,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),r.jsx(lt,{children:L.map((y,m)=>r.jsx(gt,{entry:y,index:m},m))})]})}),r.jsx(br,{in:!!k,timeout:"auto",unmountOnExit:!0,children:r.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsx(it,{style:{backgroundColor:"#1c1c1c"},children:r.jsx(lt,{children:P.map((y,m)=>r.jsx(gt,{entry:y,index:m},m))})})})})]})}),P.length>0&&r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:r.jsx(se,{onClick:a,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!k&&"Show More"||"Show Less"})})})]})}function _r(e){return e.target.depth}function en(e){return e.depth}function tn(e,n){return n-1-e.height}function Pt(e,n){return e.sourceLinks.length?e.depth:n-1}function rn(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?St(e.sourceLinks,_r)-1:0}function xe(e){return function(){return e}}function mt(e,n){return ye(e.source,n.source)||e.index-n.index}function kt(e,n){return ye(e.target,n.target)||e.index-n.index}function ye(e,n){return e.y0-n.y0}function Fe(e){return e.value}function nn(e){return e.index}function on(e){return e.nodes}function ln(e){return e.links}function xt(e,n){const o=e.get(n);if(!o)throw new Error("missing: "+n);return o}function yt({nodes:e}){for(const n of e){let o=n.y0,l=o;for(const i of n.sourceLinks)i.y0=o+i.width/2,o+=i.width;for(const i of n.targetLinks)i.y1=l+i.width/2,l+=i.width}}function sn(){let e=0,n=0,o=1,l=1,i=24,B=8,k,w=nn,A=Pt,p,L,P=on,j=ln,M=6;function d(){const t={nodes:P.apply(null,arguments),links:j.apply(null,arguments)};return E(t),D(t),v(t),O(t),I(t),yt(t),t}d.update=function(t){return yt(t),t},d.nodeId=function(t){return arguments.length?(w=typeof t=="function"?t:xe(t),d):w},d.nodeAlign=function(t){return arguments.length?(A=typeof t=="function"?t:xe(t),d):A},d.nodeSort=function(t){return arguments.length?(p=t,d):p},d.nodeWidth=function(t){return arguments.length?(i=+t,d):i},d.nodePadding=function(t){return arguments.length?(B=k=+t,d):B},d.nodes=function(t){return arguments.length?(P=typeof t=="function"?t:xe(t),d):P},d.links=function(t){return arguments.length?(j=typeof t=="function"?t:xe(t),d):j},d.linkSort=function(t){return arguments.length?(L=t,d):L},d.size=function(t){return arguments.length?(e=n=0,o=+t[0],l=+t[1],d):[o-e,l-n]},d.extent=function(t){return arguments.length?(e=+t[0][0],o=+t[1][0],n=+t[0][1],l=+t[1][1],d):[[e,n],[o,l]]},d.iterations=function(t){return arguments.length?(M=+t,d):M};function E({nodes:t,links:u}){for(const[s,c]of t.entries())c.index=s,c.sourceLinks=[],c.targetLinks=[];const f=new Map(t.map((s,c)=>[w(s,c,t),s]));for(const[s,c]of u.entries()){c.index=s;let{source:S,target:z}=c;typeof S!="object"&&(S=c.source=xt(f,S)),typeof z!="object"&&(z=c.target=xt(f,z)),S.sourceLinks.push(c),z.targetLinks.push(c)}if(L!=null)for(const{sourceLinks:s,targetLinks:c}of t)s.sort(L),c.sort(L)}function D({nodes:t}){for(const u of t)u.value=u.fixedValue===void 0?Math.max(ze(u.sourceLinks,Fe),ze(u.targetLinks,Fe)):u.fixedValue}function v({nodes:t}){const u=t.length;let f=new Set(t),s=new Set,c=0;for(;f.size;){for(const S of f){S.depth=c;for(const{target:z}of S.sourceLinks)s.add(z)}if(++c>u)throw new Error("circular link");f=s,s=new Set}}function O({nodes:t}){const u=t.length;let f=new Set(t),s=new Set,c=0;for(;f.size;){for(const S of f){S.height=c;for(const{source:z}of S.targetLinks)s.add(z)}if(++c>u)throw new Error("circular link");f=s,s=new Set}}function g({nodes:t}){const u=ut(t,c=>c.depth)+1,f=(o-e-i)/(u-1),s=new Array(u);for(const c of t){const S=Math.max(0,Math.min(u-1,Math.floor(A.call(null,c,u))));c.layer=S,c.x0=e+S*f,c.x1=c.x0+i,s[S]?s[S].push(c):s[S]=[c]}if(p)for(const c of s)c.sort(p);return s}function a(t){const u=St(t,f=>(l-n-(f.length-1)*k)/ze(f,Fe));for(const f of t){let s=n;for(const c of f){c.y0=s,c.y1=s+c.value*u,s=c.y1+k;for(const S of c.sourceLinks)S.width=S.value*u}s=(l-s+k)/(f.length+1);for(let c=0;c<f.length;++c){const S=f[c];S.y0+=s*(c+1),S.y1+=s*(c+1)}Z(f)}}function I(t){const u=g(t);k=Math.min(B,(l-n)/(ut(u,f=>f.length)-1)),a(u);for(let f=0;f<M;++f){const s=Math.pow(.99,f),c=Math.max(1-s,(f+1)/M);m(u,s,c),y(u,s,c)}}function y(t,u,f){for(let s=1,c=t.length;s<c;++s){const S=t[s];for(const z of S){let G=0,W=0;for(const{source:Y,value:C}of z.targetLinks){let F=C*(z.layer-Y.layer);G+=ee(Y,z)*F,W+=F}if(!(W>0))continue;let H=(G/W-z.y0)*u;z.y0+=H,z.y1+=H,K(z)}p===void 0&&S.sort(ye),h(S,f)}}function m(t,u,f){for(let s=t.length,c=s-2;c>=0;--c){const S=t[c];for(const z of S){let G=0,W=0;for(const{target:Y,value:C}of z.sourceLinks){let F=C*(Y.layer-z.layer);G+=Q(z,Y)*F,W+=F}if(!(W>0))continue;let H=(G/W-z.y0)*u;z.y0+=H,z.y1+=H,K(z)}p===void 0&&S.sort(ye),h(S,f)}}function h(t,u){const f=t.length>>1,s=t[f];N(t,s.y0-k,f-1,u),R(t,s.y1+k,f+1,u),N(t,l,t.length-1,u),R(t,n,0,u)}function R(t,u,f,s){for(;f<t.length;++f){const c=t[f],S=(u-c.y0)*s;S>1e-6&&(c.y0+=S,c.y1+=S),u=c.y1+k}}function N(t,u,f,s){for(;f>=0;--f){const c=t[f],S=(c.y1-u)*s;S>1e-6&&(c.y0-=S,c.y1-=S),u=c.y0-k}}function K({sourceLinks:t,targetLinks:u}){if(L===void 0){for(const{source:{sourceLinks:f}}of u)f.sort(kt);for(const{target:{targetLinks:f}}of t)f.sort(mt)}}function Z(t){if(L===void 0)for(const{sourceLinks:u,targetLinks:f}of t)u.sort(kt),f.sort(mt)}function ee(t,u){let f=t.y0-(t.sourceLinks.length-1)*k/2;for(const{target:s,width:c}of t.sourceLinks){if(s===u)break;f+=c+k}for(const{source:s,width:c}of u.targetLinks){if(s===t)break;f-=c}return f}function Q(t,u){let f=u.y0-(u.targetLinks.length-1)*k/2;for(const{source:s,width:c}of u.targetLinks){if(s===t)break;f+=c+k}for(const{target:s,width:c}of t.sourceLinks){if(s===u)break;f-=c}return f}return d}var Ee,vt;function an(){if(vt)return Ee;vt=1;var e=Fr(),n=1,o=4;function l(i){return e(i,n|o)}return Ee=l,Ee}var cn=an();const dn=qt(cn);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},oe.apply(null,arguments)}var Re={container:{display:"flex",alignItems:"center"},sourceChip:{marginRight:7},targetChip:{marginLeft:7,marginRight:7}},un={center:rn,justify:Pt,start:en,end:tn},fn=function(e){return un[e]},T={layout:"horizontal",align:"center",sort:"auto",colors:{scheme:"nivo"},nodeOpacity:.75,nodeHoverOpacity:1,nodeHoverOthersOpacity:.15,nodeThickness:12,nodeInnerPadding:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:0,linkOpacity:.25,linkHoverOpacity:.6,linkHoverOthersOpacity:.15,linkContract:0,linkBlendMode:"multiply",enableLinkGradient:!1,enableLabels:!0,label:"id",labelPosition:"inside",labelPadding:9,labelOrientation:"horizontal",labelTextColor:{from:"color",modifiers:[["darker",.8]]},labelComponent:Lr,isInteractive:!0,nodeTooltip:function(e){var n=e.node;return r.jsx(at,{id:n.label,enableChip:!0,color:n.color})},linkTooltip:function(e){var n=e.link;return r.jsx(at,{id:r.jsxs("span",{style:Re.container,children:[r.jsx(ct,{color:n.source.color,style:Re.sourceChip}),r.jsx("strong",{children:n.source.label})," > ",r.jsx("strong",{children:n.target.label}),r.jsx(ct,{color:n.target.color,style:Re.targetChip}),r.jsx("strong",{children:n.formattedValue})]})})},legends:[],layers:["links","nodes","labels","legends"],role:"img",animate:!0,motionConfig:"gentle"},hn=function(e){return e.id},pn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=e.width,B=e.height,k=e.sort,w=e.align,A=e.colors,p=e.nodeThickness,L=e.nodeSpacing,P=e.nodeInnerPadding,j=e.nodeBorderColor,M=e.label,d=e.labelTextColor,E=x.useState(null),D=E[0],v=E[1],O=x.useState(null),g=O[0],a=O[1],I=x.useMemo(function(){if(k!=="auto")return k==="input"?null:k==="ascending"?function(s,c){return s.value-c.value}:k==="descending"?function(s,c){return c.value-s.value}:k},[k]),y=k==="input"?null:void 0,m=x.useMemo(function(){return typeof w=="function"?w:fn(w)},[w]),h=jt(),R=Pr(A,"id"),N=st(j,h),K=Mr(M),Z=st(d,h),ee=Dr(o),Q=x.useMemo(function(){return function(s){var c=s.data,S=s.formatValue,z=s.layout,G=s.alignFunction,W=s.sortFunction,H=s.linkSortMode,Y=s.nodeThickness,C=s.nodeSpacing,F=s.nodeInnerPadding,J=s.width,fe=s.height,he=s.getColor,be=s.getLabel,pe=sn().nodeAlign(G).nodeSort(W).linkSort(H).nodeWidth(Y).nodePadding(C).size(z==="horizontal"?[J,fe]:[fe,J]).nodeId(hn),ie=dn(c);return pe(ie),ie.nodes.forEach(function(b){if(b.color=he(b),b.label=be(b),b.formattedValue=S(b.value),z==="horizontal")b.x=b.x0+F,b.y=b.y0,b.width=Math.max(b.x1-b.x0-2*F,0),b.height=Math.max(b.y1-b.y0,0);else{b.x=b.y0,b.y=b.x0+F,b.width=Math.max(b.y1-b.y0,0),b.height=Math.max(b.x1-b.x0-2*F,0);var Ce=b.x0,ge=b.x1;b.x0=b.y0,b.x1=b.y1,b.y0=Ce,b.y1=ge}}),ie.links.forEach(function(b){b.formattedValue=S(b.value),b.color=b.source.color,b.pos0=b.y0,b.pos1=b.y1,b.thickness=b.width,delete b.y0,delete b.y1,delete b.width}),ie}({data:n,formatValue:ee,layout:l,alignFunction:m,sortFunction:I,linkSortMode:y,nodeThickness:p,nodeSpacing:L,nodeInnerPadding:P,width:i,height:B,getColor:R,getLabel:K})},[n,ee,l,m,I,y,p,L,P,i,B,R,K]),t=Q.nodes,u=Q.links,f=x.useMemo(function(){return t.map(function(s){return{id:s.id,label:s.label,color:s.color}})},[t]);return{nodes:t,links:u,legendData:f,getNodeBorderColor:N,currentNode:D,setCurrentNode:v,currentLink:g,setCurrentLink:a,getLabelTextColor:Z}},gn=function(e){var n=e.node,o=e.x,l=e.y,i=e.width,B=e.height,k=e.color,w=e.opacity,A=e.borderWidth,p=e.borderColor,L=e.borderRadius,P=e.setCurrent,j=e.isInteractive,M=e.onClick,d=e.tooltip,E=He(),D=E.animate,v=E.config,O=wt({x:o,y:l,width:i,height:B,opacity:w,color:k,config:v,immediate:!D}),g=Lt(),a=g.showTooltipFromEvent,I=g.hideTooltip,y=x.useCallback(function(N){P(n),a(x.createElement(d,{node:n}),N,"left")},[P,n,a,d]),m=x.useCallback(function(N){a(x.createElement(d,{node:n}),N,"left")},[a,n,d]),h=x.useCallback(function(){P(null),I()},[P,I]),R=x.useCallback(function(N){M==null||M(n,N)},[M,n]);return r.jsx(Ot.rect,{x:O.x,y:O.y,rx:L,ry:L,width:O.width.to(function(N){return Math.max(N,0)}),height:O.height.to(function(N){return Math.max(N,0)}),fill:O.color,fillOpacity:O.opacity,strokeWidth:A,stroke:p,strokeOpacity:w,onMouseEnter:j?y:void 0,onMouseMove:j?m:void 0,onMouseLeave:j?h:void 0,onClick:j?R:void 0})},mn=function(e){var n=e.nodes,o=e.nodeOpacity,l=e.nodeHoverOpacity,i=e.nodeHoverOthersOpacity,B=e.borderWidth,k=e.getBorderColor,w=e.borderRadius,A=e.setCurrentNode,p=e.currentNode,L=e.currentLink,P=e.isCurrentNode,j=e.isInteractive,M=e.onClick,d=e.tooltip,E=function(D){return p||L?P(D)?l:i:o};return r.jsx(r.Fragment,{children:n.map(function(D){return r.jsx(gn,{node:D,x:D.x,y:D.y,width:D.width,height:D.height,color:D.color,opacity:E(D),borderWidth:B,borderColor:k(D),borderRadius:w,setCurrent:A,isInteractive:j,onClick:M,tooltip:d},D.id)})})},kn=function(e){var n=e.id,o=e.layout,l=e.startColor,i=e.endColor;return r.jsxs("linearGradient",oe({id:n,spreadMethod:"pad"},o==="horizontal"?{x1:"0%",x2:"100%",y1:"0%",y2:"0%"}:{x1:"0%",x2:"0%",y1:"0%",y2:"100%"},{children:[r.jsx("stop",{offset:"0%",stopColor:l}),r.jsx("stop",{offset:"100%",stopColor:i})]}))},xn=function(e){var n=e.link,o=e.layout,l=e.path,i=e.color,B=e.opacity,k=e.blendMode,w=e.enableGradient,A=e.setCurrent,p=e.tooltip,L=e.isInteractive,P=e.onClick,j=n.source.id+"."+n.target.id+"."+n.index,M=He(),d=M.animate,E=M.config,D=zr(l),v=wt({color:i,opacity:B,config:E,immediate:!d}),O=Lt(),g=O.showTooltipFromEvent,a=O.hideTooltip,I=x.useCallback(function(R){A(n),g(x.createElement(p,{link:n}),R,"left")},[A,n,g,p]),y=x.useCallback(function(R){g(x.createElement(p,{link:n}),R,"left")},[g,n,p]),m=x.useCallback(function(){A(null),a()},[A,a]),h=x.useCallback(function(R){P==null||P(n,R)},[P,n]);return r.jsxs(r.Fragment,{children:[w&&r.jsx(kn,{id:j,layout:o,startColor:n.startColor||n.source.color,endColor:n.endColor||n.target.color}),r.jsx(Ot.path,{fill:w?'url("#'+encodeURI(j)+'")':v.color,d:D,fillOpacity:v.opacity,onMouseEnter:L?I:void 0,onMouseMove:L?y:void 0,onMouseLeave:L?m:void 0,onClick:L?h:void 0,style:{mixBlendMode:k}})]})},yn=function(e){var n=e.links,o=e.layout,l=e.linkOpacity,i=e.linkHoverOpacity,B=e.linkHoverOthersOpacity,k=e.linkContract,w=e.linkBlendMode,A=e.enableLinkGradient,p=e.setCurrentLink,L=e.currentLink,P=e.currentNode,j=e.isCurrentLink,M=e.isInteractive,d=e.onClick,E=e.tooltip,D=function(O){return P||L?j(O)?i:B:l},v=x.useMemo(function(){return o==="horizontal"?(O=dt().curve(Tr),function(g,a){var I=Math.max(1,g.thickness-2*a)/2,y=.12*(g.target.x0-g.source.x1),m=[[g.source.x1,g.pos0-I],[g.source.x1+y,g.pos0-I],[g.target.x0-y,g.pos1-I],[g.target.x0,g.pos1-I],[g.target.x0,g.pos1+I],[g.target.x0-y,g.pos1+I],[g.source.x1+y,g.pos0+I],[g.source.x1,g.pos0+I],[g.source.x1,g.pos0-I]];return O(m)+"Z"}):function(){var g=dt().curve(Ir);return function(a,I){var y=Math.max(1,a.thickness-2*I)/2,m=.12*(a.target.y0-a.source.y1),h=[[a.pos0+y,a.source.y1],[a.pos0+y,a.source.y1+m],[a.pos1+y,a.target.y0-m],[a.pos1+y,a.target.y0],[a.pos1-y,a.target.y0],[a.pos1-y,a.target.y0-m],[a.pos0-y,a.source.y1+m],[a.pos0-y,a.source.y1],[a.pos0+y,a.source.y1]];return g(h)+"Z"}}();var O},[o]);return r.jsx(r.Fragment,{children:n.map(function(O){return r.jsx(xn,{link:O,layout:o,path:v(O,k),color:O.color,opacity:D(O),blendMode:w,enableGradient:A,setCurrent:p,isInteractive:M,onClick:d,tooltip:E},O.source.id+"."+O.target.id+"."+O.index)})})},vn=function(e){var n=e.nodes,o=e.layout,l=e.width,i=e.height,B=e.labelPosition,k=e.labelPadding,w=e.labelOrientation,A=e.getLabelTextColor,p=e.labelComponent,L=jt(),P=w==="vertical"?-90:0,j=n.map(function(v){var O,g,a;return o==="horizontal"?(g=v.y+v.height/2,v.x<l/2?B==="inside"?(O=v.x1+k,a=w==="vertical"?"middle":"start"):(O=v.x-k,a=w==="vertical"?"middle":"end"):B==="inside"?(O=v.x-k,a=w==="vertical"?"middle":"end"):(O=v.x1+k,a=w==="vertical"?"middle":"start")):o==="vertical"&&(O=v.x+v.width/2,v.y<i/2?B==="inside"?(g=v.y1+k,a=w==="vertical"?"end":"middle"):(g=v.y-k,a=w==="vertical"?"start":"middle"):B==="inside"?(g=v.y-k,a=w==="vertical"?"start":"middle"):(g=v.y1+k,a=w==="vertical"?"end":"middle")),{id:v.id,label:v.label,x:O,y:g,textAnchor:a,color:A(v)}}),M=He(),d=M.animate,E=M.config,D=Ar(j.length,j.map(function(v){return{transform:"translate("+v.x+", "+v.y+") rotate("+P+")",color:v.color,config:E,immediate:!d}}));return r.jsx(r.Fragment,{children:D.map(function(v,O){var g=j[O];return r.jsx(p,{dominantBaseline:"central",textAnchor:g.textAnchor,transform:v.transform,style:oe({},L.labels.text,{fill:v.color,pointerEvents:"none"}),node:n[O],children:g.label},g.id)})})},bn=["isInteractive","animate","motionConfig","theme","renderWrapper"],Cn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=l===void 0?T.layout:l,B=e.sort,k=B===void 0?T.sort:B,w=e.align,A=w===void 0?T.align:w,p=e.width,L=e.height,P=e.margin,j=e.colors,M=j===void 0?T.colors:j,d=e.nodeThickness,E=d===void 0?T.nodeThickness:d,D=e.nodeSpacing,v=D===void 0?T.nodeThickness:D,O=e.nodeInnerPadding,g=O===void 0?T.nodeInnerPadding:O,a=e.nodeBorderColor,I=a===void 0?T.nodeBorderColor:a,y=e.nodeOpacity,m=y===void 0?T.nodeOpacity:y,h=e.nodeHoverOpacity,R=h===void 0?T.nodeHoverOpacity:h,N=e.nodeHoverOthersOpacity,K=N===void 0?T.nodeHoverOthersOpacity:N,Z=e.nodeBorderWidth,ee=Z===void 0?T.nodeBorderWidth:Z,Q=e.nodeBorderRadius,t=Q===void 0?T.nodeBorderRadius:Q,u=e.linkOpacity,f=u===void 0?T.linkOpacity:u,s=e.linkHoverOpacity,c=s===void 0?T.linkHoverOpacity:s,S=e.linkHoverOthersOpacity,z=S===void 0?T.linkHoverOthersOpacity:S,G=e.linkContract,W=G===void 0?T.linkContract:G,H=e.linkBlendMode,Y=H===void 0?T.linkBlendMode:H,C=e.enableLinkGradient,F=C===void 0?T.enableLinkGradient:C,J=e.enableLabels,fe=J===void 0?T.enableLabels:J,he=e.labelComponent,be=he===void 0?T.labelComponent:he,pe=e.labelPosition,ie=pe===void 0?T.labelPosition:pe,b=e.labelPadding,Ce=b===void 0?T.labelPadding:b,ge=e.labelOrientation,Mt=ge===void 0?T.labelOrientation:ge,Ge=e.label,Dt=Ge===void 0?T.label:Ge,Ve=e.labelTextColor,Tt=Ve===void 0?T.labelTextColor:Ve,Ye=e.nodeTooltip,It=Ye===void 0?T.nodeTooltip:Ye,$e=e.linkTooltip,At=$e===void 0?T.linkTooltip:$e,qe=e.isInteractive,me=qe===void 0?T.isInteractive:qe,Ke=e.onClick,Ze=e.legends,zt=Ze===void 0?T.legends:Ze,Qe=e.layers,ae=Qe===void 0?T.layers:Qe,Je=e.role,Ft=Je===void 0?T.role:Je,Et=e.ariaLabel,Rt=e.ariaLabelledBy,Nt=e.ariaDescribedBy,Ut=e.forwardedRef,ce=wr(p,L,P),Be=ce.margin,je=ce.innerWidth,we=ce.innerHeight,Le=ce.outerWidth,Oe=ce.outerHeight,X=pn({data:n,valueFormat:o,layout:i,width:je,height:we,sort:k,align:A,colors:M,nodeThickness:E,nodeSpacing:v,nodeInnerPadding:g,nodeBorderColor:I,label:Dt,labelTextColor:Tt}),ke=X.nodes,de=X.links,Wt=X.legendData,Ht=X.getNodeBorderColor,$=X.currentNode,Se=X.setCurrentNode,q=X.currentLink,Pe=X.setCurrentLink,Gt=X.getLabelTextColor,Xe=x.useMemo(function(){var _=function(){return!1},re=function(){return!1};if(q&&(_=function(U){var V=U.id;return V===q.source.id||V===q.target.id},re=function(U){var V=U.source,ne=U.target;return V.id===q.source.id&&ne.id===q.target.id}),$){var te=[$.id];de.filter(function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id}).forEach(function(U){var V=U.source,ne=U.target;te.push(V.id),te.push(ne.id)}),te=Cr(te),_=function(U){var V=U.id;return te.includes(V)},re=function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id}}return{isCurrentNode:_,isCurrentLink:re}},[q,$,de]),Me=Xe.isCurrentNode,De=Xe.isCurrentLink,Vt=x.useMemo(function(){return{links:de,nodes:ke,margin:Be,width:p,height:L,outerWidth:Le,outerHeight:Oe,currentNode:$,isCurrentNode:Me,setCurrentNode:Se,currentLink:q,isCurrentLink:De,setCurrentLink:Pe,isInteractive:me}},[de,ke,Be,p,L,Le,Oe,$,Me,Se,q,De,Pe,me]),le={links:null,nodes:null,labels:null,legends:null};return ae.includes("links")&&(le.links=r.jsx(yn,{links:de,layout:i,linkContract:W,linkOpacity:f,linkHoverOpacity:c,linkHoverOthersOpacity:z,linkBlendMode:Y,enableLinkGradient:F,setCurrentLink:Pe,currentNode:$,currentLink:q,isCurrentLink:De,isInteractive:me,onClick:Ke,tooltip:At},"links")),ae.includes("nodes")&&(le.nodes=r.jsx(mn,{nodes:ke,nodeOpacity:m,nodeHoverOpacity:R,nodeHoverOthersOpacity:K,borderWidth:ee,borderRadius:t,getBorderColor:Ht,setCurrentNode:Se,currentNode:$,currentLink:q,isCurrentNode:Me,isInteractive:me,onClick:Ke,tooltip:It},"nodes")),ae.includes("labels")&&fe&&(le.labels=r.jsx(vn,{nodes:ke,layout:i,width:je,height:we,labelPosition:ie,labelPadding:Ce,labelOrientation:Mt,getLabelTextColor:Gt,labelComponent:be},"labels")),ae.includes("legends")&&(le.legends=r.jsx(x.Fragment,{children:zt.map(function(_,re){return r.jsx(Or,oe({},_,{containerWidth:je,containerHeight:we,data:Wt}),"legend"+re)})},"legends")),r.jsx(Sr,{width:Le,height:Oe,margin:Be,role:Ft,ariaLabel:Et,ariaLabelledBy:Rt,ariaDescribedBy:Nt,ref:Ut,children:ae.map(function(_,re){var te;return typeof _=="function"?r.jsx(x.Fragment,{children:x.createElement(_,Vt)},re):(te=le==null?void 0:le[_])!=null?te:null})})},Bn=x.forwardRef(function(e,n){var o=e.isInteractive,l=o===void 0?T.isInteractive:o,i=e.animate,B=i===void 0?T.animate:i,k=e.motionConfig,w=k===void 0?T.motionConfig:k,A=e.theme,p=e.renderWrapper,L=function(P,j){if(P==null)return{};var M={};for(var d in P)if({}.hasOwnProperty.call(P,d)){if(j.indexOf(d)!==-1)continue;M[d]=P[d]}return M}(e,bn);return r.jsx(jr,{animate:B,isInteractive:l,motionConfig:w,renderWrapper:p,theme:A,children:r.jsx(Cn,oe({isInteractive:l},L,{forwardedRef:n}))})}),jn=function(e,n){return r.jsx(Br,{children:function(o){var l=o.width,i=o.height;return r.jsx(Bn,oe({width:l,height:i},e,{ref:n}))}})},wn=x.forwardRef(jn);const Ln=[{id:"White",group:1,total:430},{id:"Yellow",group:1,total:749},{id:"Orange",group:1,total:1204},{id:"Green",group:1,total:609},{id:"Blue",group:1,total:243},{id:"Purple",group:1,total:123},{id:"Brown",group:1,total:81},{id:"Red",group:1,total:70},{id:"Black",group:1,total:169}],On=[{source:"White",target:"Yellow",value:533},{source:"White",target:"Orange",value:119},{source:"White",target:"Green",value:13},{source:"White",target:"Blue",value:4},{source:"White",target:"Purple",value:3},{source:"White",target:"Brown",value:1},{source:"White",target:"Red",value:1},{source:"Yellow",target:"Orange",value:728},{source:"Yellow",target:"Green",value:82},{source:"Yellow",target:"Blue",value:9},{source:"Yellow",target:"Purple",value:1},{source:"Yellow",target:"Red",value:1},{source:"Orange",target:"Green",value:512},{source:"Orange",target:"Blue",value:28},{source:"Orange",target:"Purple",value:3},{source:"Orange",target:"Black",value:2},{source:"Green",target:"Blue",value:337},{source:"Green",target:"Purple",value:41},{source:"Green",target:"Brown",value:10},{source:"Green",target:"Red",value:7},{source:"Green",target:"Black",value:4},{source:"Blue",target:"Purple",value:194},{source:"Blue",target:"Brown",value:27},{source:"Blue",target:"Red",value:6},{source:"Blue",target:"Black",value:9},{source:"Purple",target:"Brown",value:146},{source:"Purple",target:"Red",value:15},{source:"Purple",target:"Black",value:10},{source:"Brown",target:"Red",value:117},{source:"Brown",target:"Black",value:12},{source:"Red",target:"Black",value:98}],Ne={nodes:Ln,links:On};function Sn(){const[e,n]=x.useState(Ne),[o,l]=x.useState(Ae),[i,B]=x.useState(void 0),k=Pn(),w=x.useCallback(()=>{n(Ne),l(Ae),B(void 0)},[]),A=x.useCallback(p=>{if(k||!p.label||p.label==="White"||p.label==="Black")return;if(p.label===i){w();return}const{nodes:L,links:P}={...Ne},j=Ue.indexOf(p.label),M=Ue.slice(0,j),d=L.filter(v=>!M.includes(v.id)),E=P.filter(v=>!M.includes(v.source)&&!M.includes(v.target)),D=Ae.slice(j);n({nodes:d,links:E}),l(D),B(p.label)},[i,w,k]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{textAlign:"center",height:20,marginBottom:5,fontSize:"0.9rem"},children:i&&r.jsx(se,{onClick:w,style:{color:"#ddd",cursor:"pointer"},children:"Reset"})||r.jsx("span",{children:"Click belt for details"})}),r.jsx("div",{style:{height:600},children:r.jsx(wn,{data:e,layout:"vertical",sort:"input",margin:{top:10,right:10,bottom:20,left:10},align:"center",colors:o,nodeOpacity:1,nodeHoverOthersOpacity:.2,nodeThickness:22,nodeInnerPadding:0,nodeSpacing:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:3,linkOpacity:.6,linkBlendMode:"normal",linkHoverOthersOpacity:.1,linkContract:-.5,enableLinkGradient:!1,labelPosition:"outside",labelOrientation:"horizontal",labelPadding:-10,labelTextColor:{from:"color",modifiers:[["brighter",5]]},onClick:p=>{A(p)},nodeTooltip:({node:p})=>r.jsx("div",{style:{fontSize:"0.8rem",background:"#444",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:r.jsxs("strong",{children:[p.label,": ",p.total]})}),linkTooltip:({link:p})=>r.jsxs("div",{style:{fontSize:"0.8rem",background:"#666",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:[r.jsx("strong",{children:p.source.label})," to ",r.jsx("strong",{children:p.target.label}),"Â (",p.value,")"]})})})]})}function Pn(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function Mn({data:e}){const{width:n}=bt(),l=n<560?"8px 8px 32px 8px":"24px 24px 32px 24px",i={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},B={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return r.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:l,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[r.jsxs("div",{style:B,children:["User Belt Flows",r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:400},children:"Discord users since Nov. 2019"})]}),r.jsx(Sn,{}),r.jsx("div",{style:i,children:"User Drilldown"}),r.jsx(Qr,{data:e}),r.jsx("div",{style:i,children:"Scorecard Locks"}),r.jsx(Xr,{data:e})]})}function Dn({children:e,allEntries:n,scorecardEntries:o,profile:l}){const{filters:i}=x.useContext(We),{search:B,id:k,tab:w,name:A,sort:p,image:L,expandAll:P,dataset:j,...M}=i,{userBelt:d}=M,E=x.useCallback(g=>n.find(a=>a.id===g),[n]),D=x.useMemo(()=>Object.keys(o).map(g=>{var I,y,m;const a=E(g);return a?{...o[g],userBelt:Object.keys(o[g].scorecardPicks),currentPicks:o[g].scorecardPicks[d||"All Belts"],...a,makes:a.makeModels[0].make?a.makeModels.map(({make:h})=>h):a.makeModels[0].model,fuzzy:rt(a.makeModels.map(({make:h,model:R})=>[h,R]).flat().filter(h=>h).concat([a.version,a.notes,a.belt]).join(",")),content:[(I=a.media)!=null&&I.some(h=>!h.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(y=a.media)!=null&&y.some(h=>h.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((m=a.links)==null?void 0:m.length)>0?"Has Links":"No Links",Zt[a.belt].danPoints>0?"Worth Dan Points":void 0,tt(a.lastUpdated).isAfter(tt().subtract(1,"days"))?"Updated Recently":void 0,a.belt.startsWith("Black")?"Is Black":void 0,a.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(h=>h),collection:Kt.locks.map.map(h=>l&&l[h.key]&&l[h.key].includes(a.id)?h.label:"Not "+h.label),collectionSaves:Rr[a.id]||0,simpleBelt:a.belt.replace(/\s\d/g,"")}:null}).filter(g=>g),[E,l,o,d]),v=x.useMemo(()=>{const g=Object.keys(M).map(m=>{const h=M[m];return Array.isArray(h)?h.map(R=>({key:m,value:R})):{key:m,value:h}}).flat(),a=D.filter(m=>g.every(({key:h,value:R})=>Array.isArray(m[h])?m[h].includes(R):m[h]===R)),I=B&&a.find(m=>m.id===B);let y=a;return I?y=[I]:B&&(y=hr.go(rt(B),a,{keys:Tn,threshold:-25e3}).map(m=>({...m.obj,score:m.score}))),p?y.sort((m,h)=>{if(p==="beltAscending")return Qt(m.belt,h.belt)||h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy);if(p==="beltDescending")return Jt(m.belt,h.belt)||h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy);if(p==="alphaAscending")return m.fuzzy.localeCompare(h.fuzzy);if(p==="alphaDescending")return h.fuzzy.localeCompare(m.fuzzy)}):y.sort((m,h)=>h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy)).map((m,h)=>({...m,displayRank:h+1}))},[M,D,B,p]),O=x.useMemo(()=>({allEntries:n,visibleEntries:v,getEntryFromId:E,expandAll:P,profile:l}),[n,E,v,P,l]);return r.jsx(Ct.Provider,{value:O,children:e})}const Tn=["fuzzy"];function mo(){const{lockCollection:e}=x.useContext(Xt);lr("Explore Scorecard");const{data:n,loading:o,error:l,errorMessage:i}=ir({urls:In});return r.jsxs(ve.Fragment,{children:[r.jsx(_t,{title:"Explore Scorecard"}),l&&r.jsx(ur,{errorMessage:i}),o&&r.jsx(or,{}),!o&&!l&&!!n&&r.jsx(er,{filterFields:Er,children:r.jsx(Dn,{allEntries:tr,scorecardEntries:n.scorecardStats.lockCountsByUserBelt,profile:e,children:r.jsx(Mn,{data:{...n,lockStats:dr}})})}),r.jsx(rr,{}),r.jsx(nr,{feature:"stats"})]})}const In={brandDistribution:qr,collectionsStatsCurrent:$r,popularAreas:Yr,redditGrowth:Vr,siteFullNew:Gr,pickStatsData:Hr,scorecardStats:Wr,discordBeltCounts:Ur,redditBeltCounts:Nr};export{mo as default};
