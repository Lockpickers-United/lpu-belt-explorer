import{j as t,C as p,a2 as m,c as f,b as j,r as s,ai as h,a8 as g,R as c,Q as C,U as E,V as P}from"./index-c65dd748.js";import{L as v,D as y,I as F,C as D,E as L,m as R,k as T,h as b,T as k,i as B,j as I,l as N}from"./FilterButton-a5e84c13.js";import"./InputLabel-be1b6f43.js";import"./ImageViewer-8bb9a72f.js";import"./LinearProgress-54b02efd.js";import"./index-f1140c04.js";import"./index-9f487d7b.js";import"./Badge-8c0ec306.js";function w(){const e={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(p,{style:e,children:[t.jsx(m,{title:"Profile Not Found!"}),t.jsx(f,{children:t.jsx(j,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function S(){const{compact:e,expanded:n,setExpanded:i}=s.useContext(v),{visibleEntries:o=[]}=s.useContext(y),l=s.useDeferredValue(n);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(F,{}),e?t.jsx(D,{entries:o}):o.map(r=>t.jsx(L,{entry:r,expanded:r.id===l,onExpand:i},r.id))]})}function W(){const[e,n]=s.useState([]),{userId:i}=h(),{getProfile:o}=s.useContext(g),[l,r]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const a=await o(i);n(a),r(!1)}catch(a){console.trace("Error loading profile",a),n([]),r(!0)}})()},[i,o]);const x=s.useMemo(()=>{const d=new Set(R.flatMap(({key:a})=>e[a]));return T.filter(a=>d.has(a.id))},[e]),u=t.jsxs(c.Fragment,{children:[t.jsx(b,{}),t.jsx(k,{})]});return t.jsx(c.Fragment,{children:t.jsx(B,{children:t.jsx(I,{allEntries:x,children:t.jsxs(N,{children:[t.jsx(C,{title:`Profile for ${e.displayName||"Anonymous"}`,extras:u}),e&&!l&&t.jsx(S,{}),l&&t.jsx(w,{}),t.jsx(E,{}),t.jsx(P,{feature:"profile"})]})})})})}export{W as default};
