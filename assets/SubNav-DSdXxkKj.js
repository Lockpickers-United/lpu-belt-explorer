import{r as n,F as b,d as u,j as m,ak as j,b as M,u as O}from"./index-9hDDQWJy.js";import{f as R,D as F}from"./DataContext-BqY7tWcS.js";import{r as S}from"./index-BRujLbct.js";import{b as B}from"./filterFields-BhbyZ0Ga.js";import{f as I}from"./filterEntries-BBFZIbGW.js";import{F as D,I as A,S as P}from"./Select-VErDeIYI.js";import{T as U,a as T}from"./ToggleButtonGroup-B_wSMCDb.js";function J({children:p,allEntries:s,profile:f}){const{filters:c}=n.useContext(b),{search:d,id:h,tab:y,name:a,sort:r,image:k,expandAll:g,...v}=c,C=n.useMemo(()=>s.map(t=>{var l,i;return{...t,originalEntry:t,makes:t.makeModels[0].make?t.makeModels.map(({make:e})=>e):t.makeModels[0].model,requestCount:(l=t.requestedBy)==null?void 0:l.length,danPoints:0,fuzzy:S(t.makeModels.map(({make:e,model:o})=>[e,o]).flat().filter(e=>e).concat([t.version,t.notes,t.belt]).join(",")),content:[(i=t.media)!=null&&i.some(e=>!e.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",u(t.dateRequested).isAfter(u().subtract(1,"days"))?"Requested Recently":void 0].flat().filter(e=>e)}}),[s]),z=n.useMemo(()=>{const t=I(v,C),l=d&&t.find(e=>e.id===d);let i=t;return l?i=[l]:d&&(i=R.go(S(d),t,{keys:W,threshold:-25e3}).map(e=>({...e.obj,score:e.score}))),r?i.sort((e,o)=>r==="alphaAscending"?e.fuzzy.localeCompare(o.fuzzy):r==="alphaDescending"?o.fuzzy.localeCompare(e.fuzzy):r==="requestStatus"?B(e.requestStatus,o.requestStatus)||e.fuzzy.localeCompare(o.fuzzy):r==="requestCount"?o.requestCount-e.requestCount||e.fuzzy.localeCompare(o.fuzzy):r==="recentlyUpdated"?Math.floor(u(o.lastUpdated).valueOf()/3600)-Math.floor(u(e.lastUpdated).valueOf()/3600)||e.fuzzy.localeCompare(o.fuzzy):r==="dateRequested"?u(o.dateRequested).valueOf()-u(e.dateRequested).valueOf()||e.fuzzy.localeCompare(o.fuzzy):u(o.dateRequested).valueOf()-u(e.dateRequested).valueOf()||e.fuzzy.localeCompare(o.fuzzy)):i.sort((e,o)=>u(o.dateRequested).valueOf()-u(e.dateRequested).valueOf()||e.fuzzy.localeCompare(o.fuzzy))},[v,C,d,r]),q=n.useCallback(t=>s.find(l=>l.id===t),[s]),x=n.useMemo(()=>({allEntries:s,visibleEntries:z,getEntryFromId:q,expandAll:g,profile:f}),[s,z,q,g,f]);return m.jsx(F.Provider,{value:x,children:p})}const W=["fuzzy"];function Q({form:p,name:s,optionsList:f,label:c=null,variant:d="outlined",size:h="small",width:y=350,changeHandler:a,multiple:r=!1,defaultValue:k,placeholder:g="Please Choose"}){const[v,C]=n.useState(!1),z=n.useCallback(()=>C(!1),[]),q=n.useCallback(()=>C(!0),[]),x=n.useCallback(t=>{a(t),!r&&z()},[a,z,r]);return m.jsxs(D,{id:`${s}FormControl`,size:h,color:"info",variant:d,style:{marginBottom:0,width:y||"auto"},children:[c&&m.jsx(A,{style:{color:"#bbb"},children:c}),m.jsx(P,{id:`${s}Select`,value:p[s]||k,multiple:r,name:s,label:c,open:v,onClose:z,onOpen:q,onChange:x,placeholder:g,style:{fontWeight:400,color:"#eee",fontSize:"1.1rem"},children:f.map((t,l)=>m.jsx(j,{value:f[l],children:f[l]},l))})]})}function X({options:p,defaultValue:s,onNavChange:f=()=>{}}){const c=M(),d=n.useCallback(a=>{f(),c(a==null?void 0:a.page)},[f,c]),{isMobile:h}=O(),y=h?{fontSize:"0.95rem",lineHeight:"1.1rem"}:{fontSize:"1.0rem",fontWeight:500};return m.jsx(U,{variant:"outlined",children:p.map(a=>m.jsx(T,{onClick:()=>d(a),style:{color:s===a.label?"#eee":"#aaa",backgroundColor:s===a.label?"#292929":"#111",padding:"6px 12px",borderColor:"#000",borderRadius:0,...y},value:a.label,children:a.label},a.label))})}export{J as D,X as S,Q as a};
