import{ai as y,r as x,X as T,u as A,j as e,T as H,I as U,aj as z,R as P,a0 as D,a2 as R,b as F,a3 as G,B as O,a1 as V,J as Y,N as q,K as J,O as K}from"./index-840d0525.js";import{B as X,u as _,L as $,D as Q,I as Z,j as ee,S as te,f as ie,d as se,l as oe,g as ne,h as re,i as ae}from"./sortFields-4eed2fc5.js";import{C as de,E as le,b as ce,T as he,D as pe}from"./data-b2d304bc.js";import{u as xe,L as me}from"./useData-061277cb.js";import{u as v}from"./useWindowSize-890eb6a6.js";import{C as ue}from"./CopyProfileLinkButton-ee001b40.js";import"./dayjs.min-0c1e9c57.js";import{B as I}from"./nivo-bar.es-9d5d30c0.js";import{p as W}from"./chartDefaults-e88ecc0b.js";import"./ImageViewer-c1aa2926.js";import"./Link-97d6536e.js";import"./LinearProgress-2a5ed199.js";import"./Search-aee64e38.js";import"./InputLabel-b0af1d41.js";import"./Sort-4155d8fa.js";import"./TextField-e4de10fc.js";import"./index-de9e1a95.js";import"./index-b96b1184.js";import"./LPU-c3fa7122.js";import"./nivo-legends.es-cbd1930c.js";function ge(){const{userId:i}=y(),{user:r}=x.useContext(T),c=A(),a=x.useCallback(()=>{c("/profile/edit")},[c]);return i!==(r==null?void 0:r.uid)?null:e.jsx(H,{title:"Edit Profile",arrow:!0,disableFocusListener:!0,children:e.jsx(U,{onClick:a,children:e.jsx(z,{})})})}const we="/assets/mycollection-8a0b4848.png";function fe(){const{user:i}=x.useContext(T),{userId:r}=y(),c=A(),{isMobile:a}=v(),s=a?{marginTop:-32,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:-32,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},n=r===(i==null?void 0:i.uid),d=n?e.jsxs(P.Fragment,{children:[e.jsxs("span",{children:["There are no locks in your collection.",e.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you own, picked, recorded, or wish to buy.',e.jsx("br",{})]}),e.jsx("img",{alt:"My Collection",src:we})]}):"There are no locks in this collection.",u=n?"Explore":"Go Home",t=x.useCallback(()=>{c("/locks")},[c]);return e.jsx(X,{alignContent:"center",children:e.jsxs(D,{style:s,children:[e.jsx(R,{children:e.jsx(F,{variant:"h6",align:"center",children:d})}),e.jsxs(G,{children:[e.jsx("div",{style:{width:"100%"}}),e.jsx(O,{variant:"outlined",color:"secondary",onClick:t,style:{whiteSpace:"nowrap"},children:u})]})]})})}function je(){const i={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return e.jsxs(D,{style:i,children:[e.jsx(V,{title:"Profile Not Found!"}),e.jsx(R,{children:e.jsx(F,{variant:"h6",align:"center",children:"This profile was not found."})})]})}function ve({lockCollection:i,userText:r,collectionBarHeight:c}){const a=i.own?i.own.length:0,s=i.picked?i.picked.length:0,n=i.recorded?i.recorded.length:0,d=i.wishlist?i.wishlist.length:0,t=a+s+n+d?{own:a,picked:s,recorded:n,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},o={own:14,picked:11,recorded:11,wishlist:8},l={own:250,picked:280,recorded:260,wishlist:100},h={own:Math.min(o.own,t.own),picked:Math.min(o.picked,t.picked),recorded:Math.min(o.recorded,t.recorded),wishlist:Math.min(o.wishlist,t.wishlist)},m={own:t.own>o.own?0:o.own-h.own,picked:t.picked>o.picked?0:o.picked-h.picked,recorded:t.recorded>o.recorded?0:o.recorded-h.recorded,wishlist:t.wishlist>o.wishlist?0:o.wishlist-h.wishlist},g={own:2,picked:2,recorded:2,wishlist:2},E={own:Math.max(t.own-(h.own+m.own+g.own),0),picked:Math.max(t.picked-(h.picked+m.picked+g.picked),0),recorded:Math.max(t.recorded-(h.recorded+m.recorded+g.recorded),0),wishlist:Math.max(t.wishlist-(h.wishlist+m.wishlist+g.wishlist),0)},C={own:Math.min(l.own-t.own,l.own-o.own-g.own),picked:Math.min(l.picked-t.picked,l.picked-o.picked-g.picked),recorded:Math.min(l.recorded-t.recorded,l.recorded-o.recorded-g.recorded),wishlist:Math.min(l.wishlist-t.wishlist,l.wishlist-o.wishlist-g.wishlist)},b=["own","picked","recorded","wishlist"],B=b.map((w,j)=>({row:b[j],"Average A":h[w],"Average B":m[w],Average:g[w],USER:E[w],"Top 10":C[w]})),{width:S}=v(),L=S<=560,M=c,k=L?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},p=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],f=i?[{title:r,color:"#3c90c5",width:"14px"}]:[];f.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const N=({items:w})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),w.map(j=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:j.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:j.width},children:j.title})]},j.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(P.Fragment,{children:[e.jsx("div",{style:{height:M},children:e.jsx(I,{data:B,keys:["Average A","Average B","Average","USER","Top 10"],theme:W,indexBy:"row",margin:k,padding:.2,valueScale:{type:"linear"},colors:p,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(N,{items:f})]})}function be({beltData:i}){const{width:r}=v(),c=r<=360,a=r<=560,s=c?190:a?200:175,n=a?{top:0,right:20,bottom:50,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],u=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:s,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(I,{data:i,margin:n,padding:.15,colors:t=>d[t.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:W,isInteractive:!1,enableLabel:!0,label:t=>t.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:t=>u[t.index%u.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function ke({profile:i,entries:r}){const{userId:c}=y(),{user:a}=x.useContext(T),s=c===(a==null?void 0:a.uid)?"You":"User",n=x.useMemo(()=>{const M=_.concat("Unranked"),k=r.map(({belt:p})=>p.includes("Black")?"Black":p).reduce((p,f)=>(p[f]||(p[f]=0),p[f]++,p),{});return M.map(p=>({id:p,label:p,count:k[p]||0,value:k[p]||0}))},[r]),{isMobile:d}=v(),u=d?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:t}=v(),o=t<=360,l=t<=395,h=t<=428,m=t<=560,C={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...m?{}:{display:"flex"}},b=m?"100%":"50%",B=m?"100%":"50%",S=o?200:m?210:180,L=170;return e.jsx(D,{style:u,sx:{paddingBottom:5},children:e.jsx(R,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:C,children:[e.jsx("div",{style:{width:b,verticalAlign:"top",height:S},children:e.jsx(ve,{lockCollection:i,userText:s,collectionBarHeight:170})}),e.jsx("div",{style:{width:B,height:L,marginTop:"0px"},children:e.jsx(be,{beltData:n})})]})})})})}function ye({profile:i}){const{compact:r,expanded:c,setExpanded:a}=x.useContext($),{visibleEntries:s=[]}=x.useContext(Q),n=x.useDeferredValue(c);return e.jsxs("div",{style:{margin:8,paddingBottom:32},children:[e.jsx(Z,{profile:i}),e.jsx(ke,{profile:i,entries:s}),r?e.jsx(de,{entries:s}):s.map(d=>e.jsx(le,{entry:d,expanded:d.id===n,onExpand:a},d.id))]})}function Ve(){const{userId:i}=y(),{getProfile:r}=x.useContext(Y),{isMobile:c}=v(),a=x.useCallback(async()=>{try{const l=await r(i);return document.title=`LPU Belt Explorer - ${l.displayName}'s Profile`,l}catch(l){return console.error("Error loading profile.",l),null}},[r,i]),{data:s={},loading:n,error:d}=xe({loadFn:a}),u=x.useMemo(()=>{if(n||!s)return[];const l=new Set(ee.flatMap(({key:h})=>s[h]));return ce.filter(h=>l.has(h.id))},[s,n]),t=e.jsxs(P.Fragment,{children:[e.jsx(te,{label:"Collection"}),e.jsx(ie,{}),e.jsx(se,{sortValues:oe}),!c&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(he,{}),e.jsx(ge,{}),e.jsx(ue,{})]}),o=n?"Loading...":"Profile";return e.jsx(ne,{filterFields:re,children:e.jsx(pe,{allEntries:u,profile:s,children:e.jsxs(ae,{children:[e.jsx(q,{title:o,extras:t}),n&&e.jsx(me,{}),!n&&s&&!d&&e.jsx(ye,{profile:s}),!n&&s&&!d&&u.length===0&&e.jsx(fe,{}),!n&&(!s||d)&&e.jsx(je,{}),e.jsx(J,{}),e.jsx(K,{feature:"profile"})]})})})}export{Ve as default};
