import{r as t,j as e,G as v,B as k,D as H,X as R,R as S,a9 as P,aa as L,al as A,A as K,V as N,bu as U,P as X,ah as T,W as Y,u as q}from"./index-0cca586d.js";import{F as y}from"./DataContext-799eb883.js";import{L as J}from"./Link-7e6fcc5a.js";import{B as W}from"./Badge-7b152a53.js";import{F as Q,C as Z}from"./SearchBox-c8cc4ea4.js";import{L as _}from"./LockListContext-065a19a6.js";import{T as $,a as w}from"./ToggleButtonGroup-3db02981.js";import{B as O}from"./Box-3938c30a.js";function ee({text:u}){const{filters:p,addFilter:h,removeFilter:i}=t.useContext(y),{expandAll:d}=p,x=t.useCallback(()=>{!d||d==="false"?h("expandAll","Expand All",!0):i("expandAll","Expand All")},[d,h,i]),o=d?"Collapse All":"Expand All";return u?e.jsx("div",{children:e.jsx(v,{title:o,arrow:!0,disableFocusListener:!0,children:e.jsx(J,{onClick:()=>x(),style:{color:"#fff",textDecoration:"none",cursor:"pointer"},size:"small",children:e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:o.toUpperCase()})})})}):e.jsx("div",{children:e.jsx(v,{title:o,arrow:!0,disableFocusListener:!0,children:e.jsx(k,{onClick:()=>x(),style:{color:"#aaa"},size:"small",children:o})})})}function te({sortValues:u,compactMode:p}){const[h,i]=t.useState(null),d=!!h,x=t.useCallback(s=>i(s.currentTarget),[]),o=t.useCallback(()=>i(null),[]),{filters:C,addFilter:b}=t.useContext(y),{sort:n}=C,{adminRole:m}=t.useContext(H),{compact:f,setCompact:r}=t.useContext(R),l=t.useCallback(s=>()=>{o(),r(s)},[o,r]),a=t.useCallback(s=>()=>{o(),setTimeout(()=>b("sort",s,!0),0)},[b,o]),j={vertical:"top",horizontal:"right"};return e.jsxs(S.Fragment,{children:[e.jsx(v,{title:"View Options",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:x,style:{color:"#ddd"},children:e.jsx(W,{variant:"dot",color:"secondary",invisible:!n,anchorOrigin:j,children:"VIEW"})})}),e.jsxs(P,{anchorEl:h,open:d,onClose:o,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),u.map(({label:s,value:g})=>e.jsx(L,{onClick:a(g),selected:n===g,children:s},s)),p&&e.jsxs("div",{children:[e.jsx(A,{}),e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(L,{onClick:l(!1),selected:!f,children:"Normal"}),e.jsx(L,{onClick:l(!0),selected:f,children:"Compact"})]}),m&&e.jsxs("div",{children:[e.jsx(A,{}),e.jsx(ee,{text:!0})]})]})]})}function oe({onFiltersChanged:u}){const{isLoggedIn:p}=t.useContext(K),{beta:h}=t.useContext(R),{filters:i,filterCount:d,addFilters:x,addFilter:o,filterFields:C,removeFilters:b}=t.useContext(y),{tab:n}=t.useContext(_),{belt:m}=i,f=/\/locks/.test(location.hash),r=t.useMemo(()=>n||m||"White",[m,n]),l=t.useMemo(()=>r!=="search"?"belt":"all",[r]),[a,j]=t.useState(r);r!==a&&r!=="search"?j(r):l==="belt"&&r==="search"&&j("search");const[s,g]=t.useState(!1),D=t.useCallback(()=>g(!s),[s]);N("f",D);const E=t.useCallback(c=>()=>{c==="all"?o("tab","search",!0):c==="belt"&&(b(["belt"]),o("tab",a,!0))},[o,a,b]),M=t.useCallback((c,F)=>{x([{key:c,value:F},{key:"id",value:void 0},{key:"name",value:void 0}],!0),u&&u()},[x,u]),z=t.useCallback(()=>g(!0),[]),B=t.useCallback(()=>g(!1),[]),{color:I,lineColor:V="#999"}=T[a]?T[a]:{color:"#inherit"},G=l==="belt"?1:.7;return e.jsxs(S.Fragment,{children:[e.jsx(v,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:z,style:{color:"#ddd"},children:e.jsx(W,{variant:"dot",badgeContent:d,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"right"},children:"FILTER"})})}),s&&e.jsxs(U,{anchor:"right",open:s,onClose:B,children:[e.jsx(X,{variant:"dense",onClick:B,style:{padding:"8px 0px 0px 8px"},children:e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:700},children:"Filters"})}),T[a]&&f&&e.jsx("div",{style:{marginLeft:8,marginBottom:8},children:e.jsxs($,{variant:"outlined",children:[e.jsxs(w,{onClick:E("belt"),style:{color:l==="belt"?"#eee":"#777",backgroundColor:l==="belt"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"belt",disabled:l==="belt",children:[e.jsx("div",{style:{backgroundColor:I,height:16,width:16,borderColor:V,borderRadius:8,border:"1px solid",marginRight:8,opacity:G}}),a," BELT"]},"belt"),e.jsx(w,{onClick:E("all"),style:{color:l==="all"?"#eee":"#777",backgroundColor:l==="all"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"all",disabled:l==="all",children:"ALL LOCKS"},"all")]})}),e.jsx(O,{margin:1,children:e.jsx(Y,{direction:"column",style:{minWidth:250},children:C.filter(c=>(!c.beta||h)&&(!c.userBased||p)).filter(c=>!(l==="belt"&&n!=="search"&&c.label==="Belt")).map((c,F)=>e.jsx(Q,{tab:n,...c,onFilter:M},F))})}),e.jsxs("div",{style:{padding:8},children:[e.jsx(Z,{forceText:!0}),e.jsx(k,{variant:"outlined",color:"inherit",onClick:B,children:"Done"})]})]})]})}function ue({sortValues:u,extraFilters:p=[],compactMode:h,resetAll:i=!1}){const{filters:d,filterCount:x,setFilters:o}=t.useContext(y),{tab:C,sort:b,search:n}=d,m=b||x>0||n&&i,f=t.useCallback(()=>{o(i?{tab:C}:{tab:C,search:n})},[i,n,o,C]),{width:r}=q(),l=r<=500,a=l?3:0,j=l?2:0,s=l?80:60;return e.jsxs(O,{style:{display:"flex",paddingTop:a,marginBottom:j,marginLeft:0,justifyContent:"center"},sx:{".MuiBadge-anchorOriginTopRightRectangular":{marginTop:"5px"},".MuiButton-root":{minWidth:s}},children:[e.jsx(te,{sortValues:u,compactMode:h}),e.jsx(oe,{extraFilters:p}),m&&e.jsx(k,{color:"inherit",style:{color:"#bbb"},onClick:f,children:"RESET"})]})}export{ee as E,ue as V};
