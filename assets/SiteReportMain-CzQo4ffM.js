import{u as j,j as t,d as D,R as L,r as k,b as A,L as H}from"./index-dKRtSNxw.js";import{L as M}from"./LoadingDisplay-ClE7MCh_.js";import{u as R}from"./useData-C-IPBLTA.js";import{u as P}from"./usePageTitle-BuZvY77b.js";import{s as z}from"./dataUrls-DkJe4Pqg.js";import{L as F}from"./LockViewsLine-oHByPPl5.js";import{A as S}from"./AdminStatsTable-BImjCJFq.js";import{y as E}from"./nivo-line-COPgvZR9.js";import{p as B}from"./adminChartDefaults-CBhS7ojG.js";import{C as I}from"./ChoiceButtonGroup-DNTnUCQg.js";import{c as Y,d as G,T as O,a as C,b as v,e as U}from"./TableRow-BJu4soHC.js";import{A as X}from"./AdminStatsTableSort-h_6KCeNe.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-lcwn9dMT.js";import"./chartDefaults-pV7GKcxU.js";import"./nivo-legends-DeNG2VqZ.js";import"./nivo-axes-CKasbbGP.js";import"./uniq-Cv6pUjpR.js";import"./line-CPGHXXht.js";import"./ToggleButtonGroup-BQ_Ge2JJ.js";const $=({data:r})=>{const{firstVistsLastSevenDays:a}=r,{width:s}=j(),i=s<=360,h=s<=395,o=s<=428,m=s<=560,d=s<=820,c=i?".8rem":h?".85rem":o?".9rem":".95rem";return t.jsx(S,{tableData:a,tableWidth:400,fontSize:c})},q=({data:r})=>{const{pageTracking:a}=r,s=Object.keys(a.data[13]).sort((g,n)=>a.data[13][n]-a.data[13][g]).filter(g=>g!=="total"&&g!=="date");s.unshift("date"),s.push("total");const h={columns:s.reduce((g,n)=>{const p=a.columns.find(e=>e.id===n);return g.push(p),g},[]),data:a.data},{width:o}=j(),m=o<=360,d=o<=395,c=o<=428,u=o<=560,f=o<=820,x=m?".8rem":d?".85rem":c?".9rem":".95rem";return t.jsx(S,{tableData:h,tableWidth:"100%",fontSize:x})},J=({lineData:r})=>{const a=[r.traffic28days.data],s=[],i=new Map,h=new Map,o=new Map;a.forEach(n=>{const p=[],e=[],l=[];for(let w=0;w<n.length;w++){let b=n[w].date;b=b+" 23:59:59";const V=new Map;V.x=b,V.y=n[w].visitors,p.push(V);const W=new Map;W.x=b,W.y=n[w].visits,e.push(W);const T=new Map;T.x=b,T.y=n[w].lockViews,l.push(T)}i.id="Visitors",i.data=p,h.id="Visits",h.data=e,o.id="Lock Views",o.data=l,s.push(h),s.push(i),s.push(o)});const{width:m}=j(),d=m<=360,c=m<=395,u=m<=428,f=m<=560,x=m<=820,y=d||c?200:u?210:x?230:350,g=f?{top:10,right:20,bottom:50,left:50}:{top:25,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:y,width:"100%"},children:t.jsx(E,{theme:B,data:s,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:g,height:y,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.0f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d %H:%M:%S"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#b4b4b4",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},K=({fullData:r})=>{const a=r.traffic28days,s=28;function i(n){return D().subtract(s+1,"day").isBefore(D(n.date))}const h={columns:a.columns.filter(n=>n.id!=="weekend").filter(n=>n.id!=="visitors"),data:a.data.filter(i)},{width:o}=j(),m=o<=360,d=o<=395,c=o<=428,u=o<=560,f=o<=820,x=m?".8rem":d?".85rem":c||u||f?".9rem":".85rem";return t.jsx(S,{tableData:h,tableWidth:170,tableHeight:340,fontSize:x})};function Q({data:r}){const{width:a}=j(),s=a<=560,o={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...s?{}:{display:"flex"}};return t.jsx(L.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:o,children:[t.jsx(J,{lineData:r}),t.jsx(K,{fullData:r})]})})})}const Z=({data:r})=>{const a=r.popularCountries1,s=r.popularCountries2,{width:i}=j(),h=i<=560,d={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...h?{}:{display:"flex"}},c="400px",u=".95rem";return t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:d,children:[t.jsx(S,{tableData:a,tableWidth:c,fontSize:u,wrap:!0}),t.jsx("div",{style:{width:"75px"},children:"Â "}),t.jsx(S,{tableData:s,tableWidth:c,fontSize:u,wrap:!0})]})})};function _({data:r}){const{width:a}=j(),s=a<500,i=a<700,h=i?280:400,o=i?260:375,m=s?320:450,d={border:0,padding:"4px 8px 0px 0px",fontWeight:400},f={...{width:"100%",padding:"8px 16px",marginTop:16,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}},x=k.useMemo(()=>{const{popularCountries:p,popularEuropeanCountries:e,popularStates:l}=r.popularAreas;return[{label:"Worldwide",data:p,map:N},{label:"Europe",data:e,map:tt},{label:"US States",data:l,map:et}]},[r]),[y,g]=k.useState(x[0]),n=k.useCallback(p=>g(p),[]);return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(I,{options:x,onChange:n}),t.jsxs("div",{style:f,children:[t.jsx("div",{style:{backgroundColor:"#000",border:"1px solid #666",padding:12,align:"center",margin:"10px 0px 0px 0px",width:200,height:h,marginLeft:"auto",marginRight:"auto"},children:t.jsx(Y,{id:"areaList",sx:{height:o,backgroundColor:"#111",margin:"auto"},children:t.jsxs(G,{stickyHeader:!0,children:[t.jsx(O,{children:t.jsxs(C,{children:[t.jsx(v,{style:{padding:"4px 10px 4px 12px",fontWeight:700,textAlign:"right"},children:"#"}),t.jsx(v,{style:{padding:"4px 0px",fontWeight:700},children:"Area"})]})}),t.jsx(U,{children:y.data.data.map((p,e)=>t.jsxs(C,{index:e,children:[t.jsx(v,{style:d,sx:{textAlign:"right",padding:"0px",width:34},children:e+1},e+1),t.jsx(v,{style:d,children:p.area},p.area)]},e))})]})})}),t.jsx("div",{style:{flexGrow:1,width:m},children:t.jsx("img",{id:"mapImage",alt:"map",src:y.map,width:m})})]})]})}const N="https://explore.lpubelts.com/maps/mapWorld.gif",tt="https://explore.lpubelts.com/maps/mapEurope.gif",et="https://explore.lpubelts.com/maps/mapUSA.gif",it=({data:r})=>{const a=[360,375,384,393,412,414,428,430,1024,1440,1536,1920,2560,3440],s=r.screenWidths.data.reduce((e,l)=>(l.width<360&&(e["359-"]=e["359-"]?e["359-"]+l.lockViews:l.lockViews),a.map(w=>{const b=w+"";l.width===w&&(e[b]=e[b]?e[b]+l.lockViews:l.lockViews)}),e.total=e.total?e.total+l.lockViews:l.lockViews,e),{}),i=r.screenWidths.data.reduce((e,l)=>(l.width<360&&(e["359-"]=e["359-"]?e["359-"]+l.lockViews:l.lockViews),a.map(w=>{const b=w+"";l.width<=w&&(e[b]=e[b]?e[b]+l.lockViews:l.lockViews)}),e.total=e.total?e.total+l.lockViews:l.lockViews,e),{}),o=Object.keys(s).sort((e,l)=>e-l).filter(e=>e!=="total"&&e!=="359-").map(e=>({lockViews:s[e],width:e,percentViews:Math.floor(s[e]/s.total*100)+"%",cumulativeViews:Math.floor(i[e]/s.total*100)+"%"}));o.unshift({lockViews:s["359-"],width:"359-",percentViews:Math.floor(s["359-"]/s.total*100)+"%",cumulativeViews:Math.floor(i["359-"]/s.total*100)+"%"}),o.push({lockViews:s.total,width:"total",percentViews:"100%",cumulativeViews:"100%"});const m={columns:[...r.screenWidths.columns,{name:"Percent Views",align:"left",id:"percentViews"},{name:"Cumulative Views",align:"left",id:"cumulativeViews"}],data:o},{width:d}=j(),c=d<=360,u=d<=395,f=d<=428,x=d<=560,y=d<=820,g=c?".8rem":u?".85rem":f||x||y?".9rem":".85rem";return t.jsx("div",{children:t.jsx(S,{tableData:m,tableWidth:375,tableHeight:650,fontSize:g})})},st=({data:r})=>{const a=A(),{searchTerms:s}=r,i={columns:[{name:"#",align:"center",id:"number"},...s.columns],data:s.data.sort((n,p)=>p.lockViews-n.lockViews||n.term.localeCompare(p.term)).slice(0,100).map((n,p)=>({number:p+1,term:n.term,lockViews:n.lockViews}))},h=k.useCallback((n,p)=>n==="term"?t.jsx(H,{onClick:()=>a(`/locks?tab=search&search=${p}`),style:{color:"#fff"},children:p}):p,[a]),{width:o}=j(),m=o<=360,d=o<=395,c=o<=428,u=o<=560,f=o<=820,x=m?".8rem":d?".85rem":c||u||f?".9rem":".85rem";return t.jsx("div",{children:t.jsx(X,{tableData:i,tableWidth:375,fontSize:x,sortable:!1,tableHeight:650,sort:"number",linkFunction:h})})};function Vt(){var x;P("Site Report");const{data:r,loading:a,error:s}=R({urls:ot}),{siteFullNew:i}=r||{},{width:h}=j(),m=h<560?"8px 8px 32px 8px":"24px 24px 32px 24px",d={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},c={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},u=(x=i==null?void 0:i.firstVistsLastSevenDays)!=null&&x.countryCount?c:d,f=a?"--":"(updated: "+D(i==null?void 0:i.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${i==null?void 0:i.metadata.timezone})`;return a?t.jsx(M,{}):s?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:m,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!i.firstVistsLastSevenDays.countryCount&&t.jsxs(L.Fragment,{children:[t.jsx("div",{style:d,children:"First Visits (Last Seven Days)"}),t.jsx($,{data:i,tableWidth:"50%"})]}),t.jsxs("div",{style:u,children:["Site Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.85rem"},children:f})]}),t.jsx(Q,{data:i}),t.jsx("div",{style:c,children:"Weekly Lock Views"}),t.jsx(F,{data:i}),t.jsx("div",{style:c,children:"Page Tracking"}),t.jsx(q,{data:i}),t.jsx("div",{style:c,children:"Popular Areas"}),t.jsx(_,{data:i}),!!i.popularCountries1&&t.jsxs(L.Fragment,{children:[t.jsx("div",{style:c,children:"Popular Countries"}),t.jsx(Z,{data:i})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t.jsxs("div",{children:[t.jsx("div",{style:c,children:"Lock Views by Screen Width"}),t.jsx(it,{data:i})]}),t.jsxs("div",{children:[t.jsx("div",{style:c,children:"Lock Views by Search Term"}),t.jsx(st,{data:i})]})]})]})}const ot={siteFullNew:z};export{Vt as default};
