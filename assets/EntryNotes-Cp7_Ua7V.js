import{r as s,K as N,j as e,J as W,I as C,A as I,D as z,u as B,B as j,aI as E,R as T}from"./index-BaMhn7g7.js";import{L as D}from"./Link-DZmgOWo9.js";import{e as A}from"./entryName-CqyMLYDR.js";import{C as F}from"./Cancel-DPVW32XJ.js";import{D as R}from"./Dialog-C32ikjHP.js";import{s as G}from"./sanitizeValues-DBcWtKzU.js";import{T as M}from"./TextField-BJofk7j8.js";import{L as m}from"./Link-Dr0Mbhlc.js";function _({entry:t,nameType:l}){const n=s.useCallback(async()=>{const o=A(t,l).replace(/[\s/]/g,"_").replace(/\W/g,""),r=`https://share.lpubelts.com/?id=${t.id}&name=${o}`;await navigator.clipboard.writeText(r),N("Link to entry copied to clipboard.")},[t,l]);return e.jsx(W,{title:"Copy Link to Entry",arrow:!0,disableFocusListener:!0,children:e.jsx(C,{onClick:n,children:e.jsx(D,{})})})}function O({dialogContent:t,open:l,handleClose:n,width:c=350}){return e.jsxs(R,{open:l,onClose:n,sx:{".MuiDialog-paper":{backgroundColor:"transparent",backgroundImage:"none",padding:"12px",margin:"0px 0px 20px 0px",width:c}},children:[e.jsx("div",{style:{display:"flex",flexGrow:1,justifyContent:"flex-end",marginBottom:-15,marginRight:-10},children:e.jsx(C,{style:{padding:0,color:"#eee",backgroundColor:"#333"},onClick:n,children:e.jsx(F,{})})}),e.jsx("div",{style:{backgroundColor:"#666",borderRadius:4,boxShadow:"0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12)"},children:t})]})}function Q({entry:t}){const{isLoggedIn:l}=s.useContext(I),{userLockNotes:n,updateProfileField:c}=s.useContext(z),o=n[t.id]||"",r=s.useCallback(async i=>{await c("userLockNotes",i),x(!1)},[c]),[k,x]=s.useState(!1),f=s.useCallback(()=>{x(!0)},[]),a=s.useCallback(()=>{x(!1),p(o)},[o]),[d,p]=s.useState(o);s.useEffect(()=>{p(o||"")},[o]);const b=i=>{p(G(i.target.value,{urlsOK:!0}))},v=s.useCallback(async()=>{const i={...n,[t.id]:d||""};await r(i).catch(g=>{console.error("Error updating notes:",g)}),a()},[n,t.id,d,r,a]),w=s.useCallback(async()=>{const i={...n};delete i[t.id],await r(i).catch(g=>{console.error("Error removing notes:",g)}),a()},[t.id,a,r,n]),{isMobile:u}=B(),h={fontSize:"1.0rem",fontWeight:400,marginBottom:5,paddingLeft:2,color:"#fff"},y=u?"0.95rem":"1.0rem",L=u?5:3,S=e.jsx("div",{style:{display:"flex"},children:l?e.jsxs("div",{style:{flexGrow:1,maxWidth:550,padding:10},children:[e.jsxs("div",{style:{marginTop:10,display:"flex"},children:[e.jsx("div",{style:{...h,flexGrow:1,fontWeight:700},children:"My Notes"}),e.jsxs("div",{style:{...h,color:"#aaa",fontSize:"0.85rem"},children:[d.length||0,"/1200"]})]}),e.jsx(M,{type:"text",name:"notes",multiline:!0,fullWidth:!0,rows:L,value:d,onChange:b,id:"notes",color:"info",style:{},placeholder:"Add additional notes about this entry",variant:"outlined",autoFocus:!0,inputProps:{maxLength:1200,style:{fontSize:y}}}),e.jsxs("div",{style:{flexGrow:1,textAlign:"right",marginTop:8},children:[e.jsx(j,{variant:"text",size:"small",onClick:a,children:"Cancel"}),e.jsx(j,{variant:"text",size:"small",onClick:v,color:"success",children:"Save"})]})]}):e.jsxs("div",{style:{flexGrow:1,padding:"40px 20px",placeItems:"center"},children:[e.jsxs("div",{style:{...h,marginBottom:15,fontWeight:700,textAlign:"center"},children:["Please sign in to add your",e.jsx("br",{}),"own notes for locks."]}),e.jsx("div",{style:{width:210},children:e.jsx(E,{onClick:a})})]})});return e.jsxs(T.Fragment,{children:[(o==null?void 0:o.length)>0?e.jsxs("div",{style:{fontWeight:700,marginTop:15},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsx("span",{style:{marginTop:-.6},children:"My notes  "}),e.jsx(m,{style:{fontWeight:400,color:"#2bb259"},onClick:f,children:"edit"})," • ",e.jsx(m,{style:{fontWeight:400,color:"#2bb259"},onClick:w,children:"remove"})]}),e.jsx("div",{style:{fontSize:y,marginLeft:10,fontWeight:400,fontStyle:"italic"},children:o})]}):e.jsx("div",{style:{fontWeight:700,marginTop:15},children:e.jsx(m,{style:{fontWeight:400,color:"#2bb259"},onClick:f,children:"Add your own notes"})}),e.jsx(O,{dialogContent:S,open:k,handleClose:a,width:u?350:550})]})}export{_ as C,Q as E};
