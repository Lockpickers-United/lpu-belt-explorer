import{r as i,F as k,j as v}from"./index-Dgk9hXc2.js";import{a as F,f as P}from"./filterEntriesAdvanced-BL1zzTjo.js";import{D as z}from"./DataContext-BVcJTbMm.js";import{r as g}from"./index-B8HLHKuL.js";import{R as j}from"./RaffleContext-Cq-WAPWG.js";function O({children:x,allEntries:r=[]}){const{summary:u}=i.useContext(j),{filters:y,advancedFilterGroups:l}=i.useContext(k),{search:c,id:I,tab:N,name:R,sort:o,image:T,preview:M,single:A,expandAll:m,...B}=y,f=.3,a=i.useCallback(s=>{const n=c&&s.find(t=>t.id===c);return n?[n]:c?F.go(g(c),s,{keys:D,threshold:-23e3}).map(t=>({...t.obj,score:t.score})).filter(t=>t.score>f):s},[c,f]),p=i.useMemo(()=>a(r),[r,a]),d=i.useMemo(()=>{if(!u||Object.keys(u).length===0||!r)return[];const s=P({advancedFilterGroups:l(),entries:r}).sort((t,e)=>t.sortPotNumber-e.sortPotNumber),n=a([...s]);return o?n.sort((t,e)=>o==="potName"?t.title.localeCompare(e.title):o==="contributedBy"?t.contributedBy[0].localeCompare(e.contributedBy[0])||t.title.localeCompare(e.title):o==="tickets"?e.totalTickets-t.totalTickets||t.title.localeCompare(e.title):o==="donors"?e.uniqueDonorCount-t.uniqueDonorCount||e.totalTickets-t.totalTickets||t.title.localeCompare(e.title):parseInt(t[o])-parseInt(e[o])||t.title.localeCompare(e.title)):n.sort((t,e)=>e.score-t.score||parseInt(t.sortPotNumber)-parseInt(e.sortPotNumber)||t.title.localeCompare(e.title))},[l,r,a,o,u]),C=i.useCallback(s=>r.find(n=>n.id===s),[r]),h=i.useMemo(()=>({allEntries:r,searchedEntries:p,visibleEntries:d,getPotFromId:C,expandAll:m}),[r,p,d,C,m]);return v.jsx(z.Provider,{value:h,children:x})}const D=["fuzzy"];export{O as R};
