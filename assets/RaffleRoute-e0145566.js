import{r as o,H as V,j as e,G as T,I as W,a2 as M,u as I,K as q,M as J,A as ne,D as K,R as C,aZ as oe,aA as re,W as D,B as ae,T as U,b as le,V as ce,N as de,F as pe}from"./index-c03c3f11.js";import{F as Y,D as xe,a as he,r as me}from"./filterFields-03c21c4d.js";import{u as ue}from"./usePageTitle-c0be3fdf.js";import{R as fe}from"./RaffleDataProvider-511bcb21.js";import{a as ge,F as z,I as je}from"./InlineFilterDisplay-985648fc.js";import{N as ve}from"./ViewFilterButtons-b4c8f6ed.js";import{d as Z,F as k}from"./FieldValue-d93a4d59.js";import{d as ye}from"./Link-a7900583.js";import{d as we}from"./ContentCopy-7bc68965.js";import{R as B,A as Ce}from"./AdminRoleButton-ebeae314.js";import{L as be}from"./LoadingDisplaySmall-05fda026.js";import{A as Q,a as X,C as ke,b as ee}from"./AccordionSummary-1e433a9d.js";import{M as G}from"./index-45aac958.js";import{r as H}from"./index-6a286635.js";import{A as Se}from"./AccordionActions-bdd46427.js";import{R as Re}from"./RaffleSearchBar-83dd394b.js";import{r as Le}from"./sortFields-fadf2c6a.js";import{L as te}from"./Link-42295e22.js";import{u as Fe}from"./useData-39870489.js";import{h as Pe}from"./dataUrls-18fefcdc.js";import{C as Te,c as We,L as Be}from"./LoadingDisplay-c05b2d3c.js";import{R as Ie}from"./RaffleHeader-f59776b8.js";import{d as Ae}from"./Cached-de7caa83.js";import{R as De}from"./ReportButton-c7298984.js";import"./useDocumentTitle-f263909b.js";import"./index-51394cb7.js";import"./ImageViewer-7b0ffae7.js";import"./Launch-75953f17.js";import"./Dialog-49f4dc28.js";import"./LinearProgress-d62703af.js";import"./DialogContent-892c0a79.js";import"./Chip-89b17d86.js";import"./Select-cd6b0443.js";import"./SearchBox-2beee481.js";import"./Box-00d5a10d.js";import"./Search-5f1f8490.js";import"./Badge-669610be.js";import"./TextField-08b60d28.js";import"./LockListContext-627cbf4f.js";import"./entryName-b0b8e05d.js";import"./ToggleButtonGroup-0c4cefc7.js";function ze({entry:t}){const i=o.useCallback(async s=>{s.preventDefault(),s.stopPropagation();const r=t.title.replace(/[\s/]/g,"_").replace(/\W/g,""),a=`https://share.lpubelts.com/?id=${t.id}&name=${r}`;await navigator.clipboard.writeText(a),V("Link to RAFL pot copied to clipboard.")},[t]);return e.jsx(T,{title:"Copy Link to Pot",arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:i,style:{height:36,width:36},children:e.jsx(ye,{})})})}function Me({entry:t}){const[i,s]=M(),n=i.get("image"),r=o.useCallback(h=>{i.set("image",h+1),s(i)},[i,s]),a=o.useCallback(()=>{i.delete("image"),s(i)},[i,s]),c=o.useCallback(()=>$(n,t),[t,n]),l=o.useMemo(()=>n?+n-1:-1,[n]),x=$(l,t);return e.jsx(ge,{media:t.media,openIndex:l,initiallyOpen:x,onOpenImage:r,onCloseImage:a,onBackButton:c,shareParams:{id:t.id,name:i.get("name")},columns:2})}const $=(t,i)=>/\d+/.test(t)&&!!i.media[t];function Ee({entry:t}){const i=o.useCallback(async()=>{const s=t.title;await navigator.clipboard.writeText(s),V("Pot name copied to clipboard.")},[t]);return e.jsx(T,{title:"Copy RAFL pot name",arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:i,children:e.jsx(we,{})})})}function _e({entry:t}){const{raflState:i,raffleAdminRole:s}=o.useContext(B),n=["live","post"].includes(i)||s,{isMobile:r,flexStyle:a}=I(),c=r?28:30,l=r?"1.1rem":"1.3rem",x="1rem",h=0,u=r?"1.3rem":"1.4rem",p=r?"1.6rem":"1.8rem";return e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[n&&e.jsx("div",{style:{borderRadius:"50%",backgroundColor:"#fff",color:"#000",height:c,width:c,minWidth:c,marginTop:0,marginBottom:4,marginRight:12,display:"flex"},children:e.jsx("div",{style:{margin:"auto",paddingTop:0,paddingLeft:h,paddingRight:1,fontWeight:700,fontSize:l,lineHeight:x},children:t.potNumber})}),e.jsxs("div",{style:{display:a,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",fontWeight:500,fontSize:u,lineHeight:p,marginTop:r?0:-3,flexGrow:1},children:t.displayName?t.displayName:t.title}),t.winner&&e.jsxs("div",{style:{display:"flex",fontSize:u,lineHeight:p,marginTop:r?8:-3,marginRight:10,fontWeight:400},children:["Winner: ",e.jsxs("strong",{children:[" ",t.winner]})]})]})]})}var _={},Oe=J;Object.defineProperty(_,"__esModule",{value:!0});var E=_.default=void 0,Ne=Oe(q()),Ge=e;E=_.default=(0,Ne.default)((0,Ge.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function He({id:t}){const{isLoggedIn:i}=o.useContext(ne),{lockCollection:s,addToLockCollection:n,removeFromLockCollection:r}=o.useContext(K),[a,c]=o.useState(()=>{}),l=!!a,{isMobile:x}=I(),[h,u]=o.useState(null),p="raffleWatchlist",f=o.useCallback(()=>!!s[p]&&s[p].includes(t),[t,s]),g=f()?"Remove from Watchlist":"Add to Watchlist",b=o.useCallback((d,R)=>async(L,P)=>{L.preventDefault(),L.stopPropagation(),u(d),P||!R?await n(d,t):await r(d,t),u(null)},[t,n,r]),j=o.useCallback(d=>{d.preventDefault(),d.stopPropagation(),c(d.currentTarget)},[]),y=o.useCallback(d=>{d.preventDefault(),d.stopPropagation(),c(null)},[]),w=36,S={marginTop:-2,marginRight:x?4:8,width:w,minWidth:w,height:w};return e.jsxs("div",{style:S,children:[i&&e.jsx("div",{style:{display:"flex",justifyItems:"left"},children:e.jsx(C.Fragment,{children:h===p?e.jsx("div",{style:{marginTop:1},children:e.jsx(be,{})}):e.jsx(T,{title:g,arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:b(p,f()),style:{color:f()?"#13e113":"#999",...S},children:e.jsx(E,{})},p)})},p)}),!i&&e.jsxs(C.Fragment,{children:[e.jsx(T,{title:g,arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:j,style:{color:f()?"#13e113":"#999",...S},children:e.jsx(E,{})},p)}),e.jsx(oe,{open:l,anchorEl:a,onClose:y,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsx("div",{style:{display:"flex",padding:30,width:300,placeItems:"center"},onClick:y,children:e.jsxs("div",{children:[e.jsx("strong",{children:"Log in to keep a RAFL Watchlist!"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(re,{})]})})})]})]})}function $e({entry:t,expanded:i,onExpand:s,single:n}){var L,P,N;const{raflState:r,raffleAdminRole:a}=o.useContext(B),c=["live","post"].includes(r)||a,{filters:l}=o.useContext(Y),x=!!l.shippingType||!!l.splitShipping,[h,u]=o.useState(!1),p={maxWidth:700,marginLeft:"auto",marginRight:"auto"},f=o.useRef(null),g=n==="2",b=t.tickets?new Intl.NumberFormat().format(t.tickets):"---";o.useEffect(()=>{if(i&&f&&!h){const m=window.innerWidth<=600?70:74;u(!0),setTimeout(()=>{window.scrollTo({left:0,top:f.current.offsetTop-m,behavior:i?"auto":"smooth"})},i?0:100)}else i||u(!1)},[i,t,h]);const j=o.useCallback((v,m)=>{s&&s(m?t.id:!1)},[t.id,s]),{isMobile:y,flexStyle:w}=I(),A=y?"12px 0px 8px 0px":"12px 0px 8px 8px",S=y?"0px 0px 18px 0px":"0px 0px 18px 8px",d=y?"0.95rem":"1.0rem",R=t.winner&&!i?.6:1;return e.jsxs(Q,{expanded:i,onChange:j,style:p,ref:f,children:[e.jsx(X,{expandIcon:g?null:e.jsx(Z,{}),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsxs("div",{style:{display:"block",marginBottom:0,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:e.jsx("div",{style:{margin:A,display:"flex",flexGrow:1},children:e.jsx(_e,{entry:t})})}),e.jsxs("div",{style:{margin:S,display:"flex"},children:[e.jsx("div",{style:{flexGrow:1,opacity:R},children:e.jsxs("div",{style:{marginRight:8,color:"#bbb",fontSize:d},children:["Contributed by  ",t.contributedBy.map((v,m)=>{const F=m<t.contributedBy.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:v,field:"contributedBy",mode:"text"}),F]},m)})]})}),c&&e.jsx(ke,{in:!!t.donors,children:e.jsxs("div",{style:{marginRight:15,fontSize:d,textAlign:"right",display:w},children:[e.jsx("div",{children:e.jsxs("nobr",{children:["Donors: ",e.jsx("strong",{children:t.donors||"--"})]})}),e.jsx("div",{style:{marginLeft:8},children:e.jsxs("nobr",{children:["Tickets: ",e.jsx("strong",{children:b})]})})]})})]}),!g&&x&&e.jsxs("div",{style:{display:"flex",marginTop:6,opacity:R},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(k,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((v,m)=>{const F=m<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:v,field:"country",mode:"text"}),F]},m)})})}),e.jsx(k,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),e.jsx("div",{style:{margin:"12px 12px 8px 8px",fontSize:d,opacity:R},children:e.jsx(G,{rehypePlugins:[[H,{target:"_blank"}]],children:t.description})})]}),c&&e.jsx(He,{id:t.id})]})}),i&&e.jsxs(C.Fragment,{children:[e.jsxs(ee,{sx:{padding:"0px 16px 0px 16px"},children:[e.jsx("div",{style:{display:w},children:e.jsx(D,{direction:"row",alignItems:"flex-start",style:{},children:!!((L=t.tags)!=null&&L.length)&&!g&&e.jsx(k,{name:"Tags",value:e.jsx(D,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.tags.map((v,m)=>e.jsx(z,{value:v,field:"tags",mode:"simple"},m))}),headerStyle:{marginBottom:4}})})}),!g&&!x&&e.jsxs("div",{style:{display:"flex",marginTop:6},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(k,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((v,m)=>{const F=m<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:v,field:"country",mode:"text"}),F]},m)})})}),e.jsx(k,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),t.potContents&&e.jsx(D,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap",marginTop:"4px"},children:e.jsx(k,{name:"Contents",textStyle:{fontSize:d},value:e.jsx(G,{rehypePlugins:[[H,{target:"_blank"}]],children:t.potContents})})}),!!((P=t.media)!=null&&P.length)&&e.jsx(k,{value:e.jsx(Me,{entry:t})}),!!((N=t.links)!=null&&N.length)&&e.jsx(k,{name:"Links",value:e.jsx(D,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:v,url:m},F)=>e.jsx(ae,{href:m,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:v},F))})}),e.jsx(U,{feature:"raflPot",id:t.id})]}),!g&&e.jsxs(Se,{disableSpacing:!0,children:[e.jsx(Ee,{entry:t}),c&&e.jsx(ze,{entry:t})]})]})]})}const ie=C.memo($e,(t,i)=>{const s=Object.keys(t.entry),n=Object.keys(i.entry);if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==n[r]||t.entry[s[r]]!==i.entry[n[r]])return!1;return t.expanded===i.expanded&&t.onExpand===i.onExpand});function Ve(){const{raflState:t}=o.useContext(B),i=le(),{isMobile:s}=I(),n=s?{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:8}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:12};return e.jsxs(C.Fragment,{children:[t==="preview"&&e.jsx("div",{style:{...n,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. In the meantime, here's a preview of the pots that folks are developing. Please note that ",e.jsx("strong",{children:"all pots and contents are subject to change"})," until the raffle begins in January."]})}),t==="setup"&&e.jsx("div",{style:{...n,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. See you then!"]})}),t==="live"&&e.jsx("div",{style:{...n,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,marginTop:1,marginBottom:7},children:"RAFL is on!"}),e.jsxs("div",{style:{fontSize:"1rem",marginTop:1,marginBottom:15},children:["Welcome to the ",e.jsx("strong",{children:"2025 Lockpicking Charity Raffle"}),". You donate to your favorite charity and every dollar donated earns a ticket you can put towards any of the fantastic pots the community has donated this year. To read the full details (and enter to win) ",e.jsx(te,{onClick:()=>i("/rafl/enter"),style:{color:"#fff",textDecorationColor:"#fff",fontWeight:700,cursor:"pointer"},children:"click here."})]}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:"Entries will be accepted through January 31, and the primary prize drawing will happen via livestream on Thursday, February 1 (evening PST, exact time TBD)."})]})}),t==="post"&&e.jsx("div",{style:{...n,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL 2025 has ended"}),"Check out the winners below, see you next year!"]})})]})}function qe({profile:t}){const{filters:i}=o.useContext(Y),[s,n]=o.useState(i.id),{visibleEntries:r}=o.useContext(xe),a=o.useDeferredValue(s),c=o.useCallback(l=>{n(l)},[]);return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(Ve,{}),e.jsx(Re,{label:"Raffle Pots",sortValues:Le}),e.jsx(je,{profile:t,collectionType:"raffle"}),r.length===0&&e.jsx(ve,{label:"Rafl Pots"}),r.map(l=>e.jsx(ie,{entry:l,onExpand:c,expanded:l.id===a},l.id))]})}function Je(){return e.jsx("div",{style:{display:"flex",placeItems:"center",width:40,height:40},children:e.jsx(Te,{variant:"indeterminate",disableShrink:!0,sx:{color:t=>(t.palette.mode==="light","#fff"),animationDuration:"550ms",[`& .${We.circle}`]:{strokeLinecap:"round"}},size:19,thickness:5})})}function Ke({refresh:t}){const[i,s]=o.useState(!1),[n,r]=o.useState(""),[a,c]=o.useState(!1),{preview:l,setPreview:x}=o.useContext(B),[h,u]=M(),p=h.has("preview"),f=o.useCallback(async()=>{const b=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/refresh-preview":"https://explore.lpubelts.com:8443/refresh-preview";s(!0),await fetch(b,{cache:"no-store"}).then(async j=>(s(!1),await j.json())).then(async j=>{r(j),console.log(`preview response
`,JSON.stringify(j,null,2))}),await t()},[t]),g=o.useCallback(()=>{p?(h.delete("preview"),u(h),x(!1)):x(!l)},[l,p,h,x,u]);return e.jsxs(C.Fragment,{children:[e.jsxs("div",{style:{maxWidth:700,margin:"20px auto 10px auto",padding:2,fontWeight:700,fontSize:"1.2rem",backgroundColor:"#8830d3",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{flexGrow:1,marginLeft:20},children:e.jsx(te,{onClick:()=>g(),style:{color:"#fff",textDecorationColor:"#bbb"},children:"PREVIEW MODE"})}),i?e.jsx(Je,{}):e.jsx(T,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:f,style:{marginRight:10},children:e.jsx(Ae,{})})})]}),(n==null?void 0:n.status)==="Errors"&&e.jsxs(Q,{expanded:a,onChange:()=>c(!a),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(X,{expandIcon:e.jsx(Z,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(ee,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(n,null,2)})})]})]})}var O={},Ue=J;Object.defineProperty(O,"__esModule",{value:!0});var se=O.default=void 0,Ye=Ue(q()),Ze=e;se=O.default=(0,Ye.default)((0,Ze.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");function Qe(){const{raffleAdminRole:t,preview:i,setPreview:s}=o.useContext(B),[n,r]=M(),a=n.has("preview"),c=i||a,l=o.useCallback(()=>{a?(n.delete("preview"),r(n),s(!1)):s(!i)},[i,a,n,s,r]);ce("p",()=>l(),{preventDefault:!0});const x=c?"#983de6":"#fff";return t?e.jsx(T,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(W,{onClick:l,style:{height:48,width:48},children:e.jsx(se,{style:{color:x}})})}):null}function Ot(){ue("RAFL Prizes");const{preview:t,allPots:i,raflState:s}=o.useContext(B),{lockCollection:n}=o.useContext(K),{isMobile:r}=I(),[a]=M(),c=a.get("single"),l=a.get("id"),x=a.has("preview"),h=t||x,{data:u,loading:p,error:f,refresh:g}=Fe({url:Pe}),b=u&&!p&&!f,j=t&&b?u??[]:i,y=j.find(P=>P.id===l),w=!!c&&y,A=e.jsx(C.Fragment,{children:e.jsxs(C.Fragment,{children:[!r&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Qe,{}),e.jsx(De,{}),e.jsx(Ce,{})]})}),S=void 0,d=r?8:0,R={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:d,paddingRight:d};let L=s==="post"?"RAFL 2025 has ended":["live","setup"].includes(s)||!r?"RAFL 2025!":"Announcing RAFL 2025!";return e.jsx(he,{filterFields:me,children:e.jsx(fe,{allEntries:j,profile:n,children:e.jsxs("div",{style:R,children:[w&&e.jsx(ie,{entry:y,expanded:!0,single:c}),!w&&e.jsxs(C.Fragment,{children:[e.jsx(de,{title:L,extras:A,extrasTwo:S}),e.jsx(Ie,{page:"pots"}),h&&e.jsx(Ke,{refresh:g}),h&&!b?e.jsx(Be,{}):e.jsx(qe,{profile:n}),e.jsx(pe,{})]}),e.jsx(U,{feature:"rafl"})]})})})}export{Ot as default};
