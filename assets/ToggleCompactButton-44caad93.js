import{j as e,a5 as _,F as A,z as P,y as $,a9 as O,P as T,ag as H,a3 as q,r as o,a4 as y,p as U,T as F,I as V,R as j,ae as N,ah as G,ai as J,aj as B,S as m,w as g,t as K,A as Q,C as X}from"./index-cf37f2be.js";import{B as W,e as Y,F as Z,D as ee}from"./BeltStripe-46edcc02.js";import{C as E}from"./CollectionButton-80d83f4e.js";import{L as se}from"./ListItem-c670dc71.js";import{d as ae,b as c}from"./sortFields-19d5c59e.js";import{a as te,F as S,A as ie,C as le,b as ne}from"./InlineFilterDisplay-077d370e.js";import{A as oe,a as re,b as ce}from"./Sort-d8d835a2.js";import{M as de}from"./index-10ebc354.js";import{r as xe}from"./index-6801a224.js";import{L as me}from"./LockListContext-a663ca57.js";function Te({entries:s}){return e.jsxs(_,{style:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},children:[e.jsx(A,{dense:!0,style:{padding:0},children:s.map(a=>e.jsxs(se,{style:{minHeight:64,borderTop:"1px solid rgba(255, 255, 255, 0.12)"},children:[e.jsx(W,{value:a.belt}),e.jsx(P,{primary:Y(a),primaryTypographyProps:{fontWeight:500},secondary:a.version,style:{padding:"0px 0px 0px 10px"}}),e.jsx($,{style:{minWidth:20,marginLeft:16},children:e.jsx(E,{id:a.id,dense:!0})})]},a.id))}),e.jsx(O,{}),e.jsx(T,{feature:"compact"})]})}function ue({belt:s}){const{danPoints:a}=H[s],t=a===1?"Point":a>=10?"Pts":"Points",l=` (${a} Dan ${t})`,r={textDecoration:"none",color:"#fff"};return a===0||s==="Unranked"?null:e.jsx("a",{style:r,href:"/#/dans",children:l})}function R({value:s,style:a}){const{color:t,lineColor:l="#010101"}=H[s];return s==="Unranked"?null:e.jsx("div",{style:{display:"inline-block",minWidth:32,height:32,...a},children:e.jsxs("svg",{x:"0",y:"0",viewBox:"0 -2 32 32",children:[e.jsx("path",{d:"M10.91 25.6c-.23 0-.46-.06-.65-.18l-4.47-2.73c-.6-.37-.79-1.15-.43-1.74l7.02-11.51c.23-.37.64-.6 1.08-.6.23 0 .46.06.65.18l4.48 2.73c.29.18.49.45.57.78s.03.67-.15.95l-7.02 11.51c-.23.38-.64.61-1.08.61z",fill:t}),e.jsx("path",{d:"M13.46 9.4c.12 0 .25.03.36.1l4.47 2.73c.33.2.43.63.23.96L11.5 24.7a.704.704 0 0 1-.96.23L6.07 22.2a.698.698 0 0 1-.23-.96l7.02-11.51a.73.73 0 0 1 .6-.33m0-1.13c-.63 0-1.23.33-1.56.87L4.88 20.65c-.25.42-.33.91-.22 1.38.11.47.41.88.82 1.13l4.47 2.73c.29.17.61.27.95.27.63 0 1.23-.33 1.56-.87l7.02-11.51c.25-.42.33-.91.22-1.38-.11-.47-.41-.88-.82-1.13l-4.47-2.73a1.75 1.75 0 0 0-.95-.27z",fill:l}),e.jsx("path",{d:"M17.57 22.37c-.48 0-.91-.26-1.12-.69L10.33 9.66c-.15-.3-.18-.64-.07-.96.1-.32.33-.58.63-.73l4.86-2.47a1.257 1.257 0 0 1 1.7.55l6.12 12.02c.31.62.07 1.38-.55 1.7l-4.86 2.47c-.19.08-.39.13-.59.13z",fill:t}),e.jsx("path",{d:"M16.31 5.92c.25 0 .5.14.62.38l6.12 12.02c.17.34.04.76-.3.94l-4.86 2.47c-.1.05-.21.08-.31.08-.25 0-.5-.14-.62-.38L10.84 9.41a.707.707 0 0 1 .3-.94L16 6c.1-.05.21-.08.31-.08m0-1.13c-.29 0-.57.07-.83.2l-4.86 2.47c-.43.22-.76.6-.91 1.06-.14.47-.1.96.12 1.4l6.12 12.02c.31.62.94 1 1.63 1 .29 0 .57-.07.83-.2l4.86-2.47a1.815 1.815 0 0 0 .8-2.45L17.94 5.79c-.31-.62-.94-1-1.63-1z",fill:l}),e.jsx("path",{d:"M2.57 13.38c-.7 0-1.26-.57-1.26-1.26V6.64c0-.69.57-1.26 1.26-1.26h26.92c.7 0 1.26.57 1.26 1.26v5.48c0 .69-.57 1.26-1.26 1.26H2.57z",fill:t}),e.jsx("path",{d:"M29.49 5.95c.38 0 .7.31.7.7v5.47c0 .38-.31.7-.7.7H2.57c-.38 0-.7-.31-.7-.7V6.64c0-.38.31-.7.7-.7h26.92m0-1.12H2.57c-1.01 0-1.83.82-1.83 1.83v5.47c0 1.01.82 1.83 1.83 1.83h26.92c1.01 0 1.83-.82 1.83-1.83V6.64c-.01-1-.83-1.82-1.83-1.82z",fill:l}),e.jsx("path",{d:"M10.35 14.36c-.69 0-1.26-.57-1.26-1.26V5.43c0-.7.57-1.26 1.26-1.26H21.6c.7 0 1.26.57 1.26 1.26v7.67c0 .7-.57 1.26-1.26 1.26H10.35z",fill:t}),e.jsx("path",{d:"M21.59 4.73c.38 0 .7.31.7.7v7.67c0 .38-.31.7-.7.7H10.35c-.38 0-.7-.31-.7-.7V5.43c0-.38.31-.7.7-.7h11.24m0-1.13H10.35c-1.01 0-1.83.82-1.83 1.83v7.67c0 1.01.82 1.83 1.83 1.83H21.6c1.01 0 1.83-.82 1.83-1.83V5.43a1.846 1.846 0 0 0-1.84-1.83z",fill:l})]})})}function he({entry:s}){const a=q(),{filters:t,addFilter:l,removeFilters:r}=o.useContext(Z),x=o.useCallback(p=>{l("image",p+1,!0)},[l]),v=o.useCallback(()=>{r(["image"])},[r]),u=o.useCallback(()=>{const{image:p}=y.parse(a.search);return z(p,s)},[s,a]),h=o.useMemo(()=>t.image?+t.image-1:-1,[t]),k=z(h,s);return e.jsx(te,{media:s.media,openIndex:h,initiallyOpen:k,onOpenImage:x,onCloseImage:v,onBackButton:u,shareParams:{id:s.id,name:t.name}})}const z=(s,a)=>/\d+/.test(s)&&!!a.media[s];function pe({id:s,onExpand:a}){const{getEntryFromId:t}=o.useContext(ee),l=o.useMemo(()=>t(s),[t,s]),r=U(),x=o.useCallback(async()=>{r(`/locks?id=${s}`),a(s)},[s,r,a]);return e.jsx(F,{title:l.version,arrow:!0,disableFocusListener:!0,children:e.jsx(V,{onClick:x,children:e.jsx(R,{value:l.belt})})})}function fe({entry:s,expanded:a,onExpand:t}){var C,L,w,M,I;const{userId:l}=N(),[r,x]=o.useState(!1),v={maxWidth:700,marginLeft:"auto",marginRight:"auto"},u=o.useRef(null),h=[...new Set([...s.relatedIds||[],...G(s.id)])].filter(i=>i!==s.id).sort((i,n)=>J(B[i].belt,B[n].belt)),k=o.useCallback((i,n)=>{t&&t(n?s.id:!1)},[s.id,t]);o.useEffect(()=>{if(a&&u&&!r){const n=window.innerWidth<=600?70:74,{id:d}=y.parse(location.search),f=d===s.id;x(!0),setTimeout(()=>{window.scrollTo({left:0,top:u.current.offsetTop-n,behavior:f?"auto":"smooth"})},f?0:100)}else a||x(!1)},[a,s,r]);const p=o.useMemo(()=>{var i;return e.jsx(m,{direction:"column",spacing:0,sx:{flexWrap:"wrap"},children:(i=s.makeModels)==null?void 0:i.map(({make:n,model:d},f)=>e.jsx(g,{style:{fontWeight:500,fontSize:"1.07rem",lineHeight:1.25,marginBottom:"4px"},children:n&&n!==d?`${n} ${d}`:d},f))})},[s.makeModels]);return e.jsxs(oe,{expanded:a,onChange:k,style:v,ref:u,children:[e.jsxs(re,{expandIcon:e.jsx(ae,{}),children:[e.jsx(W,{value:s.belt}),e.jsxs("div",{style:{margin:"12px 0px 8px 8px",width:"55%",flexShrink:0,flexDirection:"column"},children:[e.jsx(c,{value:p,textStyle:s.belt==="Unranked"?{color:"#aaa",marginLeft:"0px"}:{marginLeft:"0px"},style:{marginBottom:"2px"}}),!!s.version&&e.jsx(c,{name:"Version",value:e.jsx(g,{style:{fontSize:"0.95rem",lineHeight:1.25},children:s.version}),textStyle:s.belt==="Unranked"?{color:"#aaa"}:{}})]}),e.jsx("div",{style:{margin:"8px 0px 0px 0px",width:"40%",flexShrink:0,flexDirection:"column"},children:((C=s.lockingMechanisms)==null?void 0:C.length)>0&&e.jsx(c,{value:e.jsx(m,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:(L=s.lockingMechanisms)==null?void 0:L.map((i,n)=>e.jsx(S,{value:i,field:"lockingMechanisms"},n))})})})]}),a&&e.jsxs(j.Fragment,{children:[e.jsxs(ce,{sx:{padding:"8px 16px 0px 16px"},children:[e.jsxs(m,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:[e.jsx(c,{style:{width:"50%",marginLeft:"0px"},value:e.jsxs(j.Fragment,{children:[e.jsxs(g,{style:{marginLeft:"0px",fontSize:"1rem",lineHeight:1.25,fontWeight:500},children:[s.belt,e.jsx(ue,{belt:s.belt})]}),e.jsx(R,{value:s.belt,style:{marginBottom:-10}})]})}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx(E,{id:s.id,makeModels:s.makeModels})})]}),e.jsx(m,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:!!s.notes&&e.jsx(c,{name:"Notes",value:e.jsx(g,{component:"div",style:{marginTop:-16},children:e.jsx(de,{rehypePlugins:[[xe,{target:"_blank"}]],children:s.notes})})})}),!!((w=s.features)!=null&&w.length)&&e.jsx(c,{name:"Features",value:e.jsx(m,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:s.features.map((i,n)=>e.jsx(S,{value:i,field:"features"},n))})}),!!h&&!l&&e.jsx(c,{name:"Other Versions",value:e.jsx(j.Fragment,{children:h.map(i=>e.jsx(pe,{id:i,onExpand:t},i))})}),!!((M=s.media)!=null&&M.length)&&e.jsx(c,{value:e.jsx(he,{entry:s})}),!!((I=s.links)!=null&&I.length)&&e.jsx(c,{name:"Links",value:e.jsx(m,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:s.links.map(({title:i,url:n},d)=>e.jsx(K,{href:n,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:i},d))})})]}),e.jsxs(ie,{disableSpacing:!0,children:[e.jsx(T,{feature:"lock",id:s.id}),e.jsx(le,{entry:s}),e.jsx(ne,{entry:s})]})]})]})}const He=j.memo(fe,(s,a)=>s.entry.id===a.entry.id&&s.expanded===a.expanded&&s.onExpand===a.onExpand);var b={},ge=X;Object.defineProperty(b,"__esModule",{value:!0});var D=b.default=void 0,je=ge(Q()),ve=e;D=b.default=(0,je.default)((0,ve.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");function ye(){const{compact:s,setCompact:a,setExpanded:t}=o.useContext(me),l=o.useCallback(()=>{a(!s),t(null)},[s,a,t]);return e.jsx(F,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:e.jsx(V,{onClick:l,children:e.jsx(D,{color:s?"secondary":"inherit"})})})}export{R as B,Te as C,He as E,ye as T};
