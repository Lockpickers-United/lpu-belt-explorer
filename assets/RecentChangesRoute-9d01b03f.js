import{b as f,r as x,j as e,R as l,U as h,d as s,Q as u,Z as p,N as j,F as k,T as v}from"./index-3ba07974.js";import{u as y}from"./usePageTitle-94cc5418.js";import{B as R}from"./BeltStripe-9a145667.js";import{F}from"./FieldValue-10f4bc01.js";import{L}from"./LockImageGallery-5b9dbdd0.js";import{e as c}from"./entryName-ae7d3fb4.js";import{L as T}from"./ListItem-dd14edb6.js";import{a as C,l as P}from"./filterFields-13a4536c.js";import{D}from"./LockDataProvider-eec0e974.js";import"./useDocumentTitle-d0ce7ff8.js";import"./ImageGallery-e404723d.js";import"./ImageViewer-b5439ae4.js";import"./Link-14b16695.js";import"./Launch-91a0fd51.js";import"./Dialog-c0876a77.js";import"./LinearProgress-abd100a4.js";import"./DialogContent-ba63938a.js";import"./ImageListItem-b539c0c5.js";import"./index-a254f3d8.js";function M({entry:t}){var r;const d=f(),a=c(t).replace(/[\s/]/g,"_").replace(/\W/g,""),i=x.useCallback(o=>{o.preventDefault(),o.stopPropagation(),d(`/locks?id=${t.id}&name=${a}`)},[t.id,d,a]);return e.jsx(l.Fragment,{children:e.jsxs(T,{style:{minHeight:64,borderTop:"1px solid rgba(255, 255, 255, 0.12)",display:"block",margin:"20px 0px"},children:[e.jsxs("div",{style:{display:"flex",width:"100%",cursor:"pointer"},onClick:i,children:[e.jsx(R,{value:t.belt}),e.jsx(h,{primary:c(t),primaryTypographyProps:{fontWeight:500,fontSize:"1.1rem"},secondary:t.version,secondaryTypographyProps:{fontSize:"1rem"},style:{padding:"0px 0px 0px 10px"}})]}),!!((r=t.media)!=null&&r.length)&&e.jsx(F,{value:e.jsx(L,{entry:t})})]},t.id)})}function N({allEntries:t}){const m=t.reduce((a,i)=>{var o;const r=(o=i==null?void 0:i.media)==null?void 0:o.filter(n=>s(n.dateAdded).isAfter(s().subtract(14,"day"))).sort((n,g)=>s(g.dateAdded).diff(s(n.dateAdded)));return(r==null?void 0:r.length)>0&&a.push({...i,media:r}),a},[]).sort((a,i)=>Math.floor(s(i.lastUpdated).valueOf()/3600)-Math.floor(s(a.lastUpdated).valueOf()/3600)||`${a.makeModels[0].make}${a.makeModels[0].model}`.localeCompare(`${i.makeModels[0].make}${i.makeModels[0].model}`));return e.jsxs(l.Fragment,{children:[e.jsxs("div",{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto",marginTop:20,fontWeight:500,fontSize:"1.5rem"},children:["Recently added images (last ",14," days)"]}),m.length>0?e.jsx(u,{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto"},children:m.map(a=>e.jsx(M,{entry:a},a.id))}):e.jsx("div",{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto",marginTop:20,fontSize:"1rem"},children:"None found"})]})}function J(){return y("Recent Changes"),e.jsx(C,{filterFields:P,children:e.jsx(D,{allEntries:p,profile:void 0,children:e.jsxs(l.Fragment,{children:[e.jsx(j,{title:"Recent Changes"}),e.jsx(N,{allEntries:p}),e.jsx(k,{}),e.jsx(v,{feature:"recentChanges"})]})})})}export{J as default};
