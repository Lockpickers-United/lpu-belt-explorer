import{P as E,Q as _,U as A,V as M,a7 as $,r,F as L,u as O,$ as V,br as H,j as e,R as J,K as j,I as b,ad as K}from"./index-DGj5yssS.js";import{S,I as k}from"./Search-C7MHd1dB.js";import{B as Q}from"./Sort-CaQVcVIE.js";import{T as U}from"./TextField-B0Hk6d-G.js";var l={},R;function G(){if(R)return l;R=1;var c=E();Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var h=c(_()),n=A();return l.default=(0,h.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),l}var N=G();const X=M(N);function te({label:c,extraFilters:h=[],entryCount:n=0,keepOpen:p}){const[u]=$(),{addFilters:m,removeFilter:x,isFiltered:g}=r.useContext(L),[o,f]=r.useState(u.get("search")||""),{isMobile:i,width:T}=O(),y=T<=500,t=r.useRef();V("s",()=>{var a;return(a=t==null?void 0:t.current)==null?void 0:a.focus()},{preventDefault:!0});const I=n>1?`Search ${n?n.toString()+" ":""}${c}`:"",w=r.useCallback(()=>{window.scrollTo({top:0}),f(""),x("search",""),t.current.focus()},[x]),F=r.useCallback(a=>{const{value:D}=a.target;f(D)},[]),s=H(o.replaceAll("	"," "),250);r.useEffect(()=>{s&&s!==u.get("search")?s?(window.scrollTo({top:0}),m([{key:"search",value:s},{key:"id",value:void 0},{key:"name",value:void 0},...h],!0)):(console.log("SearchBox: debounceText is empty"),m([{key:"search",value:s}],!0)):s||x("search","")},[s]);const[d,v]=r.useState(!1),C=r.useCallback(()=>setTimeout(()=>v(!1),0),[]),B=r.useCallback(()=>{v(!0),setTimeout(()=>{t.current.focus(),t.current.select()},0)},[]);r.useEffect(()=>{const a=u.get("search");a!==o&&f(a||"")},[u]);const q=o?e.jsx(k,{position:"end",children:e.jsx(j,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(b,{color:"inherit",onClick:w,edge:"end",size:"small",children:e.jsx(X,{})})})}):null,P=i?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},W=d&&i?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},z=o?"secondary":"inherit";return e.jsxs(J.Fragment,{children:[!d&&i&&!p&&!g&&e.jsx(j,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(b,{color:"inherit",onClick:B,children:e.jsx(Q,{invisible:o.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(S,{})})})}),(d||!i||p||g)&&e.jsx(U,{placeholder:y?c:I,InputProps:{inputProps:{ref:t},startAdornment:e.jsx(k,{position:"start",children:e.jsx(S,{color:z})}),endAdornment:q},variant:"standard",color:"secondary",onChange:F,onBlur:C,value:o,style:{...P,...W},fullWidth:!0}),e.jsx(K,{invisible:!0,open:d&&i,onClick:C})]})}export{te as S};
