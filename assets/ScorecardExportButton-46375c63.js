import{r as t,H as m,d as T,j as e,R as $,G as f,B as g,I as y,a9 as z,aa as c,ak as d,U as p}from"./index-2ca02728.js";import{d as v,a as h,b as B}from"./download-8c346651.js";import{d as L}from"./List-8e56d383.js";import{e as E}from"./entryName-658842f7.js";import{d as F}from"./ContentCopy-09125b5a.js";import{D as _}from"./filterFields-e361e124.js";import"./index-e6ae7f73.js";function G({text:k}){const[C,b]=t.useState(null),S=!!C,u=t.useCallback(r=>b(r.currentTarget),[]),n=t.useCallback(()=>b(null),[]),{visibleEntries:i=[]}=t.useContext(_),I=t.useCallback(()=>{const r=JSON.stringify(i);n(),v("scorecardData.json",r),m("Current Scorecard entries downloaded as scorecardData.json")},[n,i]),w=t.useCallback(()=>{const x=i.map(s=>({id:s.id,make:s.makeModels.map(l=>l.make).join(","),model:s.makeModels.map(l=>l.model).join(","),version:s.version,belt:s.belt,name:E(s),versionText:s.version?" ("+s.version+")":""})).map(s=>"* "+s.name+s.versionText).join(`
`);n(),navigator.clipboard.writeText(x),m("Current scorecard entries copied to clipboard.")},[n,i]),D=t.useCallback(()=>{const r=["id","name","version","belt","modifier","points","date","link"],x=i.map(o=>({id:o.matchId,make:o.makeModels.map(a=>a.make).join(","),model:o.makeModels.map(a=>a.model).join(","),version:o.version,belt:o.belt,link:o.link,modifier:o.evidenceModifier,points:o.points,date:o.date?T(o.date).format("L"):"",name:E(o)})),s=r.join(","),l=x.map(o=>r.map(a=>o[a]).map(a=>{const j=`${a??""}`.replace(/"/g,'""');return/(\s|,|")/.test(j)?`"${j}"`:j}).join(",")).join(`
`),M=`${s}
${l}`;n(),v("scorecardData.csv",M),m("Current Scorecard entries downloaded as scorecardData.csv")},[n,i]);return e.jsxs($.Fragment,{children:[k?e.jsx(f,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(g,{variant:"outlined",size:"small",onClick:u,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(h,{}),children:"Export"})}):e.jsx(f,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{onClick:u,children:e.jsx(h,{})})}),e.jsxs(z,{anchorEl:C,open:S,onClose:n,children:[!k&&e.jsxs(c,{disabled:!0,children:[e.jsx(d,{children:e.jsx(h,{fontSize:"small"})}),e.jsx(p,{children:"Export"})]}),e.jsxs(c,{onClick:w,children:[e.jsx(d,{children:e.jsx(F,{fontSize:"small"})}),e.jsx(p,{children:"Copy to clipboard"})]}),e.jsxs(c,{onClick:D,children:[e.jsx(d,{children:e.jsx(L,{fontSize:"small"})}),e.jsx(p,{children:"CSV"})]}),e.jsxs(c,{onClick:I,children:[e.jsx(d,{children:e.jsx(B,{fontSize:"small"})}),e.jsx(p,{children:"JSON"})]})]})]})}export{G as E};
