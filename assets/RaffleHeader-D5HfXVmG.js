import{Y as M,Z as F,$ as L,a0 as q,j as e,r as i,ad as z,a5 as B,R as b,U as v,W as I,bs as D,B as x,b as T,u as A,bL as N}from"./index-DPobvnYl.js";import{R as S}from"./RaffleContext-C_o2zIZK.js";import{C as O}from"./Cached-NKV0vTGF.js";import{E as V}from"./ExpandMore-CAyXtWns.js";import{C as H,c as Z}from"./CircularProgress-DkmgQ1zL.js";import{n as _}from"./dataUrls-CThgH6Wi.js";import{B as k}from"./Box-57ZD3oQt.js";import{A as G,a as U,b as J}from"./AccordionSummary-D3y6fUE3.js";var j={},E;function $(){if(E)return j;E=1;var t=M();Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var a=t(F()),s=L();return j.default=(0,a.default)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),j}var Y=$();const P=q(Y);function K({diameter:t=40}){return e.jsx("div",{style:{display:"flex",placeItems:"center",justifyContent:"center",width:t,height:t},children:e.jsx(H,{variant:"indeterminate",disableShrink:!0,sx:{color:a=>(a.palette.mode==="light","#fff"),animationDuration:"550ms",[`& .${Z.circle}`]:{strokeLinecap:"round"}},size:18,thickness:5})})}function Q({refresh:t,page:a}){const[s,n]=i.useState(!1),[c,d]=i.useState(""),[o,m]=i.useState(!1),{preview:f,setPreview:h}=i.useContext(S),[r,p]=z(),l=r.has("preview"),u=f||l,R=i.useCallback(async()=>{const W=`${_}/refresh-preview`;n(!0),await fetch(W,{cache:"no-store"}).then(async C=>(n(!1),await C.json())).then(async C=>{d(C),console.log(`preview response
`,JSON.stringify(C,null,2))}),await t()},[t]),w=i.useRef(null),g=i.useCallback(()=>{l?(r.delete("preview"),p(r),h(!1)):h(!f)},[f,l,r,h,p]);B("p",()=>g(),{preventDefault:!0});const y=u?"#983de6":"#fff";return e.jsxs(b.Fragment,{children:[a!=="pots"?e.jsx(k,{ref:w,style:{display:"flex",alignItems:"center",overflow:"hidden"},children:e.jsx(v,{style:{padding:8},disabled:!0,children:e.jsx(P,{style:{color:y,opacity:.5},fontSize:"small"})})}):e.jsx(k,{ref:w,style:{display:"flex",alignItems:"center",overflow:"hidden"},children:u?e.jsx(D,{in:u,direction:"left",appear:!1,children:e.jsxs("div",{style:{display:"flex",flexGrow:1,marginRight:0},children:[e.jsx(x,{onClick:g,style:{padding:"0px 8px 0px 0px",marginRight:0,color:"#8830d3",fontSize:"1.0rem",lineHeight:"1.2rem",whiteSpace:"nowrap"},children:"PREVIEW MODE ON"}),s?e.jsx("div",{style:{marginRight:0},children:e.jsx(K,{diameter:36})}):e.jsx(I,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(v,{onClick:R,style:{marginRight:0},children:e.jsx(O,{fontSize:"small"})})}),e.jsx(v,{onClick:g,style:{padding:8},children:e.jsx(P,{style:{color:y},fontSize:"small"})})]})}):e.jsx(I,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(v,{onClick:g,style:{padding:8},children:e.jsx(P,{style:{color:y},fontSize:"small"})})})}),(c==null?void 0:c.status)==="Errors"&&e.jsxs(G,{expanded:o,onChange:()=>m(!o),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(U,{expandIcon:e.jsx(V,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(J,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(c,null,2)})})]})]})}function X({page:t,width:a=700}){const{preview:s,setPreview:n,refresh:c}=i.useContext(S),[d,o]=z(),m=d.has("preview"),f=s||m,h=T(),{setAnimateTotal:r}=i.useContext(S),p=i.useCallback(y=>{h(y),r(!1)},[h,r]),l=i.useCallback(()=>{f&&t==="pots"&&(d.delete("preview"),o(d),n(!1))},[t,d,n,o,f]),{isMobile:u}=A(),R=u?"1.0rem":"1.03rem",w=!s||t!=="pots"||!u,g={maxWidth:a,marginLeft:"auto",marginRight:"auto",display:"flex",alignItems:"center",height:40};return e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:g,children:[e.jsx(v,{style:{padding:4},onClick:l,disabled:t!=="pots",children:e.jsx(N,{fontSize:"medium",style:{color:"#4c82fd"}})}),w&&e.jsxs(b.Fragment,{children:[e.jsx(x,{onClick:()=>p("/rafl/admin"),style:{padding:"0px 8px",marginRight:10,marginLeft:10,color:t==="entries"?"#48adf1":"#ccc",fontSize:R},sx:{":hover":{bgcolor:"#333",color:"#fff"}},disabled:t==="entries",children:"ENTRIES"}),e.jsx(x,{onClick:()=>p("/rafl/reports"),style:{padding:"0px 8px",marginRight:10,color:t==="reports"?"#48adf1":"#ccc",fontSize:R},sx:{":hover":{bgcolor:"#333",color:"#fff"}},disabled:t==="reports",children:"REPORTS"})]}),e.jsx("div",{style:{display:"flex",flexGrow:1,justifyContent:"right"},children:e.jsx(Q,{page:t,refresh:c})})]}),e.jsx("div",{style:{height:2}})]})}function le({page:t,width:a=700}){const{raflState:s,raffleAdminRole:n}=i.useContext(S),c=T(),{setAnimateTotal:d}=i.useContext(S),o=i.useCallback(u=>{c(u),d(!1)},[c,d]),{isMobile:m,flexStyle:f}=A(),h=m?0:4,r=m?"1.0rem":"1.03rem",p={maxWidth:a,marginLeft:"auto",marginRight:"auto",marginTop:10,padding:"0px 0px 0px 0px",fontWeight:700,display:f};let l=s!=="preview"||n||m?"PRIZES":"PRIZE PREVIEW";return l=["hidden","post"].includes(s)?l.replace("PRIZES","2025 PRIZES"):l,e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:p,children:[e.jsx("div",{style:{flexGrow:1,fontSize:"1.7rem",marginTop:0},children:"LPU Annual Raffle"}),e.jsxs("div",{style:{marginTop:h,justifyItems:"right"},children:[e.jsx("div",{style:{flexGrow:1}}),e.jsx(x,{onClick:()=>o("/rafl"),style:{marginRight:10,color:t==="pots"?"#fff":"#ccc",fontSize:r},disabled:t==="pots",children:l}),s==="preview"&&!n&&e.jsx(x,{onClick:()=>o("/rafl/announce"),style:{marginRight:10,color:t==="announce"?"#fff":"#ccc",fontSize:r},disabled:t==="announce",children:"CONTRIBUTE"}),(s!=="hidden"||n)&&e.jsx(x,{onClick:()=>o("/rafl/charities"),style:{marginRight:10,color:t==="charities"?"#fff":"#ccc",fontSize:r},disabled:t==="charities",children:"CHARITIES"}),(["live","post"].includes(s)||n)&&e.jsx(x,{onClick:()=>o("/rafl/enter"),style:{marginRight:10,color:t==="enter"?"#fff":"#ccc",fontSize:r},children:"ENTER"}),(["live","post"].includes(s)||n)&&e.jsx(x,{onClick:()=>o("/rafl/stats"),style:{marginRight:0,color:t==="stats"?"#fff":"#ccc",fontSize:r},children:"STATS"})]})]}),n&&e.jsx(X,{page:t,width:a}),e.jsx("div",{style:{height:8}})]})}export{le as R};
