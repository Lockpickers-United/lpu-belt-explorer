import{r as n,au as z,j as e,u as q,R as M,aj as I,F as Y,$ as te,J as O,I as R,ac as re,d as T,as as se,ai as oe,D as le,N as ae,e as ne,a0 as ie,h as ce,T as de}from"./index-71e86728.js";import{L as ue}from"./LoadingDisplay-1afc07c2.js";import{u as pe}from"./useData-a4268321.js";import{u as me}from"./usePageTitle-964de6f6.js";import{_ as he,d as xe,a as fe,l as be}from"./lockStats-61404997.js";import{b as ge,c as ke,p as ye,a as je,s as Be,d as Ce,k as ve}from"./dataUrls-29853cf3.js";import{E as Se}from"./ErrorMessage-3907b748.js";import{b as F,a as Ae}from"./chartDefaults-270235e0.js";import{L as U}from"./Link-63b7b8c6.js";import{D as $,f as Pe}from"./DataContext-7e366822.js";import{r as W}from"./index-8268419d.js";import{e as we}from"./entryName-da8ba44a.js";import{a as J,b as L,c as N,d as H,T as Le,e as V}from"./TableRow-5f6635e7.js";import{V as De}from"./ViewFilterButtons-1bf6ff01.js";import{b as ze}from"./sortFields-b1bde6f9.js";import{F as Ue,I as Ee,S as Fe}from"./Select-1c38bf77.js";import{C as Ie}from"./Collapse-f3448859.js";import{b as Me}from"./filterFields-15f583f1.js";import{c as Oe}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-e4e4bdd1.js";import"./useDocumentTitle-f0dbfe3d.js";import"./nivo-legends.es-8f220b50.js";import"./index-44eb64ca.js";import"./line-32ff18dd.js";import"./Sort-323329be.js";import"./Chip-7209e005.js";import"./FilterAlt-7f7a85c9.js";import"./Box-995289dc.js";import"./LockListContext-501d76e9.js";import"./ToggleButtonGroup-abfd9ce3.js";import"./Cancel-c123eb3c.js";import"./rankingRequestData-d3ef79e5.js";const Re={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},Te={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},A={discord:Re,reddit:Te};function We({data:u}){const{scorecardStats:m}=u,{userCounts:s}=m,d=A.reddit.Total-s.totalUsers,i=n.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:s.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:d}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},x={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:s.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:s.totalUsers-s.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},E={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:s.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:s.scorecardUsers-s.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},K={parent:"Scorecard Users",data:Object.keys(s.belts).sort((a,b)=>z(a,b)).map(a=>({id:a,label:a,value:s.belts[a]})),colors:F,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},Q={parent:"Imported Belts",data:Object.keys(s.dans).sort((a,b)=>parseInt(a)-parseInt(b)).map(a=>({id:G(a),label:G(a),value:s.dans[a]})),colors:Ne,description:"Dan Breakdown"},X={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:A.discord.Total},{id:"Reddit",label:"Reddit",value:A.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},Z={parent:"Other LPU Pickers",data:Object.keys(A.reddit).filter(a=>a!=="Total").sort((a,b)=>z(a,b)).map(a=>{const b=a==="Black"?"Black Belt":a;return{id:b,label:b,value:A.reddit[a]}}),colors:F,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(U,{onClick:()=>B("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-10},ee={parent:"Other LPU Pickers",data:Object.keys(A.discord).filter(a=>a!=="Total").sort((a,b)=>z(a,b)).map(a=>{const b=a==="Black"?"Black Belt":a;return{id:b,label:b,value:A.discord[a]}}),colors:F,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(U,{onClick:()=>B("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-10};return{pickerData:t,"LPUbelts Users":x,"Scorecard Users":E,"Imported Belts":K,Black:Q,"Other LPU Pickers":X,Reddit:Z,Discord:ee}},[d,s]),[c,B]=n.useState("pickerData"),D=i[c].data,y=i[c].data.reduce((t,x)=>t+x.value,0),j=n.useCallback(t=>{i[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",B(t.id)},200))},[i]),P=n.useCallback(()=>{B(i[c].parent)},[i,c]),h=n.useCallback((t,x)=>{i[t.id]&&(x.currentTarget.style.cursor="pointer")},[i]),{width:g}=q(),v=g<=360,C=g<=395,S=g<=428,f=g<=560,w={top:30,right:0,bottom:30,left:0};let p=320;v?p=175:C?p=180:S?p=230:f&&(p=240);const o="1.0rem",k=f?5:4,l=f?10:8,r=f?0:8;return e.jsxs(M.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:i[c].description}),e.jsxs("div",{style:{height:p,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(he,{data:D,theme:Ae,colors:i[c].colors,margin:w,startAngle:i[c].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:k,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/y*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:r,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:l,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{j(t)},onMouseEnter:(t,x)=>{h(t,x)},tooltip:t=>{const x=(t.datum.arc.angleDeg>k,t.datum.label+": "),E=t.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:f?"none":"block"},children:e.jsxs("div",{children:[x,E]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:p/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:i[c].parent&&e.jsx(U,{onClick:P,style:{color:"#ccc",cursor:"pointer",fontSize:o},children:"back"})})]},"pickPie")]})}function G(u){const m=["st","nd","rd","th"];return u+""+m[Math.min(4,parseInt(u))-1]}const Ne=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function _({entry:u,index:m,collapse:s=!1}){const d=n.useCallback(i=>{const c=i.replace(" Belt","");return I[c]?I[c].color:i.includes("Dan")?"#769e49":"#b00"},[]);return e.jsxs(J,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},style:{display:"table-row"},children:[e.jsx(L,{align:"left",style:{backgroundColor:d(u.belt),borderBottom:"1px solid #333",width:4,marginLeft:5,height:0}}),e.jsx(L,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:5,fontSize:"0.9rem"},children:we(u)})}),e.jsx(L,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:u.currentPicks})]},m)}function He(){var k;const{visibleEntries:u=[]}=n.useContext($),{filters:m,addFilter:s}=n.useContext(Y),{userBelt:d="All Belts",sort:i}=m,[c,B]=n.useState(i);n.useEffect(()=>{B(!!i)},[i]);const D=60;let y=((k=u.find(l=>l.displayRank===D))==null?void 0:k.currentPicks)||0;y=y>2?y:0;const j=n.useMemo(()=>u.filter(l=>l.currentPicks>=y),[u,y]),P=n.useMemo(()=>u.filter(l=>l.currentPicks<y),[u,y]),h=n.useMemo(()=>["All Belts",...te],[]),g=n.useCallback(()=>{const l=h.findIndex(t=>t===d),r=l<h.length-1?l+1:0;s("userBelt",h[r],!0)},[s,h,d]),v=n.useCallback(()=>{const l=h.findIndex(t=>t===d),r=l>0?l-1:h.length-1;s("userBelt",h[r],!0)},[s,h,d]),[C,S]=n.useState(!1),f=n.useCallback(()=>S(!1),[]),w=n.useCallback(()=>S(!0),[]),p=n.useCallback(l=>{s("userBelt",l.target.value,!0),f()},[s,f]),o=n.useCallback(()=>{B(!c)},[c]);return e.jsxs(M.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(O,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:v,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(xe,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(Ue,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(Ee,{style:{color:"#bbb"},children:"User Belt"}),e.jsx(Fe,{id:"beltSelect",value:d||"All Belts",label:"Brand",open:C,onClose:f,onOpen:w,onChange:p,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:h.map((l,r)=>e.jsx(re,{value:h[r],children:h[r]},r))})]})}),e.jsx(O,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:g,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(fe,{})})})]})}),e.jsx(De,{sortValues:ze,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(N,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(H,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(Le,{children:e.jsxs(J,{style:{padding:"0px",fontWeight:700},children:[e.jsx(L,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(L,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx(V,{children:j.map((l,r)=>e.jsx(_,{entry:l,index:r},r))})]})}),e.jsx(Ie,{in:!!c,timeout:"auto",unmountOnExit:!0,children:e.jsx(N,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(H,{style:{backgroundColor:"#1c1c1c"},children:e.jsx(V,{children:P.map((l,r)=>e.jsx(_,{entry:l,index:r},r))})})})})]})}),P.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(U,{onClick:o,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!c&&"Show More"||"Show Less"})})})]})}function Ve({data:u}){const{width:m}=q(),d=m<560?"8px 8px 32px 8px":"24px 24px 32px 24px",i={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},c={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:d,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:c,children:"User Drilldown"}),e.jsx(We,{data:u}),e.jsx("div",{style:i,children:"Scorecard Locks"}),e.jsx(He,{data:u})]})}function Ge({children:u,allEntries:m,scorecardEntries:s,profile:d}){const{filters:i}=n.useContext(Y),{search:c,id:B,tab:D,name:y,sort:j,image:P,expandAll:h,...g}=i,{userBelt:v}=g,C=n.useCallback(p=>m.find(o=>o.id===p),[m]),S=n.useMemo(()=>Object.keys(s).map(p=>{var k,l,r;const o=C(p);return o?{...s[p],userBelt:Object.keys(s[p].scorecardPicks),currentPicks:s[p].scorecardPicks[v||"All Belts"],...o,makes:o.makeModels[0].make?o.makeModels.map(({make:t})=>t):o.makeModels[0].model,fuzzy:W(o.makeModels.map(({make:t,model:x})=>[t,x]).flat().filter(t=>t).concat([o.version,o.notes,o.belt]).join(",")),content:[(k=o.media)!=null&&k.some(t=>!t.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(l=o.media)!=null&&l.some(t=>t.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((r=o.links)==null?void 0:r.length)>0?"Has Links":"No Links",I[o.belt].danPoints>0?"Worth Dan Points":void 0,T(o.lastUpdated).isAfter(T().subtract(1,"days"))?"Updated Recently":void 0,o.belt.startsWith("Black")?"Is Black":void 0,o.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(t=>t),collection:se.locks.map.map(t=>d&&d[t.key]&&d[t.key].includes(o.id)?t.label:"Not "+t.label),collectionSaves:Oe[o.id]||0,simpleBelt:o.belt.replace(/\s\d/g,"")}:null}).filter(p=>p),[C,d,s,v]),f=n.useMemo(()=>{const p=Object.keys(g).map(r=>{const t=g[r];return Array.isArray(t)?t.map(x=>({key:r,value:x})):{key:r,value:t}}).flat(),o=S.filter(r=>p.every(({key:t,value:x})=>Array.isArray(r[t])?r[t].includes(x):r[t]===x)),k=c&&o.find(r=>r.id===c);let l=o;return k?l=[k]:c&&(l=Pe.go(W(c),o,{keys:_e,threshold:-25e3}).map(r=>({...r.obj,score:r.score}))),j?l.sort((r,t)=>{if(j==="beltAscending")return z(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(j==="beltDescending")return oe(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(j==="alphaAscending")return r.fuzzy.localeCompare(t.fuzzy);if(j==="alphaDescending")return t.fuzzy.localeCompare(r.fuzzy)}):l.sort((r,t)=>t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy)).map((r,t)=>({...r,displayRank:t+1}))},[g,S,c,j]),w=n.useMemo(()=>({allEntries:m,visibleEntries:f,getEntryFromId:C,expandAll:h,profile:d}),[m,C,f,h,d]);return e.jsx($.Provider,{value:w,children:u})}const _e=["fuzzy"];function At(){const{lockCollection:u}=n.useContext(le);me("Explore Scorecard");const{data:m,loading:s,error:d,errorMessage:i}=pe({urls:qe});return e.jsxs(M.Fragment,{children:[e.jsx(ae,{title:"Explore Scorecard"}),d&&e.jsx(Se,{errorMessage:i}),s&&e.jsx(ue,{}),!s&&!d&&!!m&&e.jsx(ne,{filterFields:Me,children:e.jsx(Ge,{allEntries:ie,scorecardEntries:m.scorecardStats.lockCountsByUserBelt,profile:u,children:e.jsx(Ve,{data:{...m,lockStats:be}})})}),e.jsx(ce,{}),e.jsx(de,{feature:"stats"})]})}const qe={brandDistribution:ge,collectionsStatsCurrent:ke,popularAreas:ye,redditGrowth:je,siteFullNew:Be,pickStatsData:Ce,scorecardStats:ve};export{At as default};
