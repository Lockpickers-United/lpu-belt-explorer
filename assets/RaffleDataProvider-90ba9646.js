import{r as i,j as v}from"./index-495133a8.js";import{F as b,f as x,D as C}from"./filterFields-62fefddb.js";import{r as N}from"./index-0a5c45f5.js";function R({children:f,allEntries:t}){const{filters:d}=i.useContext(b),{search:a,id:A,tab:j,name:I,sort:o,image:g,preview:h,single:F,...u}=d,l=i.useMemo(()=>{const c=Object.keys(u).map(e=>{const r=u[e];return Array.isArray(r)?r.map(n=>({key:e,value:n})):{key:e,value:r}}).flat(),s=t.filter(e=>c.every(({key:r,value:n})=>Array.isArray(e[r])?e[r].includes(n):e[r]===n)).sort((e,r)=>e.potNumber-r.potNumber),p=a?x.go(N(a),s,{keys:z,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):s;return o?p.sort((e,r)=>o==="potName"?e.title.localeCompare(r.title):o==="contributedBy"?e.contributedBy[0].localeCompare(r.contributedBy[0]):o==="tickets"?parseInt(r.tickets)-parseInt(e.tickets):o==="donors"?parseInt(r.donors)-parseInt(e.donors):e.potNumber<r.potNumber||e.title.localeCompare(r.title)):p.sort((e,r)=>e.potNumber-r.potNumber||e.title.localeCompare(r.title))},[t,u,a,o]),m=i.useCallback(c=>t.find(s=>s.id===c),[t]),y=i.useMemo(()=>({allEntries:t,visibleEntries:l,getPotFromId:m}),[t,l,m]);return v.jsx(C.Provider,{value:y,children:f})}const z=["fuzzy"];export{R};
