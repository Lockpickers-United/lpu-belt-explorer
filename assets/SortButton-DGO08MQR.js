import{r as t,A,a6 as R,F as y,a5 as T,j as e,R as F,W as B,U as S,bc as E,a2 as b,Q as I,P as W,B as z,al as D,a7 as v,au as O}from"./index-CosfVxRU.js";import{a as w,C as M,F as H}from"./FilterAlt-DWiGTfq9.js";import{B as L,S as V}from"./Sort-B1oAMK16.js";import{B as N}from"./Box-Den3BoSs.js";import{L as P}from"./LockListContext-DcuUsGb-.js";function J({onFiltersChanged:c,extraFilters:d=[],text:s}){const{isLoggedIn:h}=t.useContext(A),{beta:m}=t.useContext(R),{filterCount:C,addFilters:r,filterFields:p}=t.useContext(y),[a,i]=t.useState(!1),u=t.useCallback(()=>i(!a),[a]);T("f",u);const x=t.useCallback(()=>i(!0),[]),l=t.useCallback(()=>i(!1),[]),g=t.useCallback((o,f)=>{r([{key:o,value:f},{key:"id",value:void 0},{key:"name",value:void 0},...d],!0),c&&c()},[r,c,d]),j=s?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"FILTER"}):e.jsx(H,{}),k=s?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"},n=s?"dot":null;return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:x,children:e.jsx(L,{variant:n,badgeContent:C,color:"secondary",overlap:"circular",anchorOrigin:k,children:j})})}),e.jsxs(E,{anchor:"right",open:a,onClose:l,children:[e.jsx(b,{variant:"dense",onClick:l,children:e.jsx(I,{variant:"h6",children:"Filters"})}),e.jsx(N,{margin:1,children:e.jsx(W,{direction:"column",style:{minWidth:250},children:p.filter(o=>(!o.beta||m)&&(!o.userBased||h)).map((o,f)=>e.jsx(w,{...o,onFilter:g},f))})}),e.jsxs(b,{variant:"dense",children:[e.jsx(M,{forceText:!0,style:{marginRight:8}}),e.jsx(z,{variant:"outlined",color:"inherit",onClick:l,children:"Done"})]})]})]})}function K({sortValues:c,text:d}){const[s,h]=t.useState(null),m=!!s,C=t.useCallback(n=>h(n.currentTarget),[]),r=t.useCallback(()=>h(null),[]),{filters:p,addFilter:a}=t.useContext(y),{sort:i}=p,{compact:u,setCompact:x}=t.useContext(P),l=t.useCallback(n=>()=>{r(),x(n)},[r,x]),g=t.useCallback(n=>()=>{r(),setTimeout(()=>a("sort",n,!0),0)},[a,r]),j=d?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"VIEW"}):e.jsx(V,{}),k=d?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"};return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:C,children:e.jsx(L,{variant:"dot",color:"secondary",overlap:"circular",invisible:!i,anchorOrigin:k,children:j})})}),e.jsxs(D,{anchorEl:s,open:m,onClose:r,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),c.map(({label:n,value:o})=>e.jsx(v,{onClick:g(o),selected:i===o,children:n},n)),e.jsx(O,{}),e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(v,{onClick:l(!1),selected:!u,children:"Normal"}),e.jsx(v,{onClick:l(!0),selected:u,children:"Compact"})]})]})}export{J as F,K as S};
