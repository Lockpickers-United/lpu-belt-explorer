import{ad as ge,r as i,j as e,X as J,W as N,U as P,Y as ce,Z as de,$ as pe,a0 as ue,D as he,u as M,R as E,B as V,F as X,L as xe,A as je,ba as Ce,bb as we,P as $,T as ve,b as be,d as Se,ak as ye,a8 as _,at as H,a4 as G}from"./index-DWkHZ34T.js";import{D as Z}from"./DataContext-DYbH4t0d.js";import{N as ke}from"./NoEntriesCard-MmOQe61g.js";import{E as Re}from"./ExpandMore-E_iEG54P.js";import{C as Ie}from"./CopyLinkToRaflPotButton-B1Pwjaqe.js";import{F as L}from"./FieldValue-DJ_0NkwX.js";import{F as U}from"./FilterChip-C_5QeOA9.js";import{I as Te}from"./ImageGallery-B-qhDept.js";import{C as fe}from"./ContentCopy-Jl7EQpY4.js";import{R as Y}from"./RaffleContext-DZ2PLbhi.js";import{S as We}from"./ScopedDialog-D9790X_J.js";import{L as Be}from"./LoadingDisplaySmall-BNuW6LIi.js";import{A as Fe,a as Le,b as Ae}from"./AccordionSummary-BOdJ5882.js";import{C as Ee}from"./Collapse-BwxNxyfs.js";import{B as De}from"./Box-CrJajRY8.js";import{M as te}from"./index-vmaX28Do.js";import{r as ne}from"./index-DjJq2hi7.js";import{A as ze}from"./AccordionActions-Bd14BHHg.js";import{R as Ne}from"./RaffleSearchBar-Y4Lv8ulp.js";import{r as Pe}from"./sortFields-1lK6XsoA.js";import{d as ie,F as K,C as Me}from"./download-DqWsrznj.js";import{L as Oe}from"./List-Bq8kDsg-.js";import{A as qe}from"./AdvancedFilters-CTbl3xyS.js";function $e({entry:t}){const[n,s]=ge(),l=n.get("image"),a=i.useCallback(j=>{n.set("image",j+1),s(n)},[n,s]),d=i.useCallback(()=>{n.delete("image"),s(n)},[n,s]),o=i.useCallback(()=>se(l,t),[t,l]),r=i.useMemo(()=>l?+l-1:-1,[l]),h=se(r,t);return e.jsx(Te,{media:t.media,openIndex:r,initiallyOpen:h,onOpenImage:a,onCloseImage:d,onBackButton:o,shareParams:{id:t.id,name:n.get("name")},columns:2})}const se=(t,n)=>/\d+/.test(t)&&!!n.media[t];function _e({entry:t}){const n=i.useCallback(async()=>{const s=t.title;await navigator.clipboard.writeText(s),J("Pot name copied to clipboard.")},[t]);return e.jsx(N,{title:"Copy RAFL pot name",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:n,children:e.jsx(fe,{})})})}var D={},oe;function He(){if(oe)return D;oe=1;var t=ce();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var n=t(de()),s=pe();return D.default=(0,n.default)((0,s.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay"),D}var Ge=He();const Ue=ue(Ge);function me(t=[],n=1){const s=(t||[]).map(o=>({...o,tickets:Number((o==null?void 0:o.potTickets)||0)})).filter(o=>o.potTickets>0);if(!s.length||n<=0)return[];const l=s.slice(),a=[],d=o=>{const r=o.reduce((p,g)=>p+g.tickets,0);if(r<=0)return null;const h=Math.random()*r;let j=0;for(let p=0;p<o.length;p++)if(j+=o[p].tickets,h<j)return{winner:o[p],index:p};return{winner:o[o.length-1],index:o.length-1}};for(;a.length<n&&l.length>0;){const o=d(l);if(!o)break;a.push(o.winner),l.splice(o.index,1)}return a}function Je(t){if(!t||!Array.isArray(t.entrants))return[];const n=Number((t==null?void 0:t.winnerCount)||1);return me(t.entrants,Math.max(1,n))}function re({entry:t,drawing:n=!1,redrawId:s,excessWinner:l,containerRef:a}){var S;const{updateRaffleWinners:d}=i.useContext(he),[o,r]=i.useState(!1),h=i.useCallback(c=>{c.preventDefault(),c.stopPropagation(),r(!1)},[]),j=t.winnerCount>1?"WINNERS":"WINNER",p=i.useCallback(async c=>{c.preventDefault(),c.stopPropagation();const x=Je(t);await d(t.id,x),console.log("entry.winners",x)},[t,d]),g=i.useCallback(async(c,x)=>{c.preventDefault(),c.stopPropagation();try{const C=Array.isArray(t==null?void 0:t.winners)?t.winners.slice():[],y=Number((t==null?void 0:t.winnerCount)||1),k=new Set(C.map(m=>m.entryId));console.log("existingIds",k);const B=(Array.isArray(t==null?void 0:t.entrants)?t.entrants:[]).map(m=>({...m,tickets:Number((m==null?void 0:m.potTickets)||0)})).filter(m=>m.tickets>0&&(!m.entryId||!k.has(m.entryId)));if(console.log("eligible",B),!B.length){console.warn("No eligible entrants available for redraw for pot",t==null?void 0:t.id,"redrawId",x),r(!0);return}const[T]=me(B,1);if(!T){console.warn("Redraw failed to pick a new winner for pot",t==null?void 0:t.id);return}let R;if(y>1&&C.length>0){let m=!1;if(R=C.map(I=>!m&&(I==null?void 0:I.entryId)===x?(m=!0,T):I),!m){console.warn("Redraw id not found among current winners for pot",t==null?void 0:t.id,"idToRedraw",x);return}}else R=[T];await d(t.id,R),console.log("Redraw complete. Updated winners:",R)}catch(C){console.error("Error during redraw:",C)}},[t,d]),{isMobile:u}=M(),f=e.jsxs("div",{style:{textAlign:"center",fontWeight:700,fontSize:"1.1rem",padding:40},children:["There are no other eligible entries.",e.jsx("br",{}),e.jsx("br",{}),e.jsx(V,{onClick:h,variant:"contained",children:"Sorry!"})," ",e.jsx("br",{}),e.jsx("br",{})]});return e.jsxs(E.Fragment,{children:[s&&n?e.jsx("div",{style:{marginLeft:2,color:"#f35454",fontWeight:"bold"},children:e.jsx(P,{onClick:c=>g(c,s),color:"secondary",variant:"contained",size:"small",style:{fontWeight:600,fontSize:"0.9rem",marginTop:u?0:-3,whiteSpace:"nowrap",color:l?"#f35454":"#666"},children:e.jsx(Ue,{fontSize:"small"})})}):!t.winners||((S=t.winners)==null?void 0:S.length)===0?e.jsx("div",{style:{marginLeft:20,marginTop:u?8:0},children:e.jsxs(V,{onClick:p,color:"secondary",variant:"contained",size:"small",style:{fontWeight:600,fontSize:"0.9rem",marginTop:u?0:-3,whiteSpace:"nowrap",width:135},children:["DRAW ",j]})}):null,e.jsx(We,{open:o,dialogContent:f,handleClose:h,containerRef:a,position:{top:80},centerX:!0,width:u?350:400})]})}function Ve({entry:t,drawing:n=!1}){var m,I,O;if(!t)return null;const{raflState:s,raffleAdminRole:l,excessWinners:a}=i.useContext(Y),d=["live","post"].includes(s)||l,{setFilters:o}=i.useContext(X),{isMobile:r,flexStyle:h}=M();let j=t.displayName?t.displayName:t.title;const p=t.winnerCount>1&&((m=t.winners)==null?void 0:m.length)===0?` (${t.winnerCount} winners)`:"",g=t.winnerCount>1?"Winners":"Winner",u=i.useCallback((b,F)=>{b&&typeof b.preventDefault=="function"&&b.preventDefault(),b&&typeof b.stopPropagation=="function"&&b.stopPropagation(),console.log("openWinnerPots entryId:",F),o({winnerEntryIds:F.entryId})},[o]),f=r?"100%":"auto",S=n?15:0,c=r?28:30,x=r?"1.1rem":"1.3rem",C="1rem",y=0,k=r?"1.15rem":"1.3rem",w=r?"1.5rem":"1.7rem",B=r?"1.1rem":"1.2rem",T=r?"1.2rem":"1.3rem",R=Array.isArray(t.winners)?e.jsx(E.Fragment,{children:t.winners.map((b,F)=>e.jsxs("div",{style:{display:"flex",justifyContent:"right",marginBottom:4},children:[F===0&&e.jsxs("span",{style:{fontWeight:400,color:"#fff"},children:[g,": "]}),e.jsx(xe,{style:{color:a.includes(b.entryId)?"#f35454":"#fff",textAlign:"right"},onClick:q=>u(q,b),children:b.username}),e.jsx(re,{entry:t,drawing:n,redrawId:b.entryId,excessWinner:a.includes(b.entryId)})]},F))}):void 0;return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",marginBottom:S},children:[d&&e.jsx("div",{style:{borderRadius:"50%",backgroundColor:"#fff",color:"#000",height:c,width:c,minWidth:c,marginTop:0,marginBottom:4,marginRight:12,display:"flex"},children:e.jsx("div",{style:{margin:"auto",paddingTop:0,paddingLeft:y,paddingRight:1,fontWeight:700,fontSize:x,lineHeight:C},children:t.potNumber})}),e.jsxs("div",{style:{display:h,flexDirection:"row",flexGrow:1,alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexGrow:1,fontWeight:500,fontSize:k,lineHeight:w,marginTop:r?0:-3},children:[j,e.jsxs("div",{style:{whiteSpace:"nowrap",fontSize:k,lineHeight:w},children:[" ",p]})]}),n&&e.jsx("div",{style:{display:"flex",justifyContent:"right",width:f},children:e.jsx(re,{entry:t,drawing:n})})]}),((I=t.winners)==null?void 0:I.length)>0&&!r&&e.jsx("div",{style:{display:"flex",flexGrow:1,fontSize:B,lineHeight:T,marginTop:r?8:0,marginBottom:8,marginRight:12,fontWeight:600,justifyItems:"right"},children:e.jsx("div",{style:{width:"100%"},children:R})})]}),((O=t.winners)==null?void 0:O.length)>0&&r&&e.jsx("div",{style:{display:"flex",flexGrow:1,fontSize:B,lineHeight:T,marginTop:r?8:0,marginBottom:8,marginRight:12,fontWeight:600,justifyItems:"right"},children:e.jsx("div",{style:{width:"100%"},children:R})})]})}var z={},ae;function Ye(){if(ae)return z;ae=1;var t=ce();Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var n=t(de()),s=pe();return z.default=(0,n.default)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),z}var Ke=Ye();const le=ue(Ke);function Xe({id:t}){const{isLoggedIn:n}=i.useContext(je),{lockCollection:s,addToLockCollection:l,removeFromLockCollection:a}=i.useContext(he),[d,o]=i.useState(()=>{}),r=!!d,{isMobile:h}=M(),[j,p]=i.useState(null),g="raffleWatchlist",u=i.useCallback(()=>!!s[g]&&s[g].includes(t),[t,s]),f=u()?"Remove from Watchlist":"Add to Watchlist",S=i.useCallback((w,B)=>async(T,R)=>{T.preventDefault(),T.stopPropagation(),p(w),R||!B?await l(w,t):await a(w,t),p(null)},[t,l,a]),c=i.useCallback(w=>{w.preventDefault(),w.stopPropagation(),o(w.currentTarget)},[]),x=i.useCallback(w=>{w.preventDefault(),w.stopPropagation(),o(null)},[]),C=36,k={marginTop:-2,marginRight:h?4:8,width:C,minWidth:C,height:C};return e.jsxs("div",{style:k,children:[n&&e.jsx("div",{style:{display:"flex",justifyItems:"left"},children:e.jsx(E.Fragment,{children:j===g?e.jsx("div",{style:{marginTop:1},children:e.jsx(Be,{})}):e.jsx(N,{title:f,arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:S(g,u()),style:{color:u()?"#13e113":"#999",...k},children:e.jsx(le,{})},g)})},g)}),!n&&e.jsxs(E.Fragment,{children:[e.jsx(N,{title:f,arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:c,style:{color:u()?"#13e113":"#999",...k},children:e.jsx(le,{})},g)}),e.jsx(Ce,{open:r,anchorEl:d,onClose:x,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsx("div",{style:{display:"flex",padding:30,width:300,placeItems:"center"},onClick:x,children:e.jsxs("div",{children:[e.jsx("strong",{children:"Log in to keep a RAFL Watchlist!"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(we,{})]})})})]})]})}function Ze({entry:t,expanded:n,onExpand:s,single:l,drawing:a}){var b,F,q,Q,ee;if(!t)return null;const{raflState:d,raffleAdminRole:o}=i.useContext(Y),{expandAll:r}=i.useContext(Z),h=["live","post"].includes(d)||o,{filters:j}=i.useContext(X),p=!!j.shippingType||!!j.splitShipping,[g,u]=i.useState(!1),f={maxWidth:700,marginLeft:"auto",marginRight:"auto"},S=i.useRef(null),c=l==="2",x=t.totalTickets?new Intl.NumberFormat().format(t.totalTickets):"---";i.useEffect(()=>{if(n&&S&&!g&&!r){console.log("entry",t);const v=window.innerWidth<=600?70:74;u(!0),setTimeout(()=>{window.scrollTo({left:0,top:S.current.offsetTop-v,behavior:n?"auto":"smooth"})},n?0:100)}else n||u(!1)},[n,t,g,r]);const C=i.useCallback((W,v)=>{s&&s(v?t.id:!1)},[t.id,s]),{isMobile:y,flexStyle:k}=M(),w=y?"12px 0px 8px 0px":"12px 0px 8px 8px",B=y?"12px 0px 0px 0px":"12px 0px 0px 8px",T=y?"0px 0px 18px 0px":"0px 0px 18px 8px",R=y?"1rem":"1.1rem",m=y?"0.95rem":"1.0rem",I=((b=t.winners)==null?void 0:b.length)>0&&!n?.5:1,O={Yes:"#50af53",No:"#d7584d",Split:"#e39a29"};return t.USShip=void 0,e.jsxs(Fe,{expanded:n,onChange:C,style:f,ref:S,children:[e.jsx(Le,{expandIcon:c?null:e.jsx(Re,{}),children:e.jsxs("div",{style:{width:"100%",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsxs("div",{style:{display:"block",marginBottom:0,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:e.jsx("div",{style:{margin:w,display:"flex",flexGrow:1},children:e.jsx(Ve,{entry:t,drawing:a})})}),e.jsxs("div",{style:{margin:T,display:"flex"},children:[e.jsx("div",{style:{flexGrow:1,opacity:I},children:e.jsxs("div",{style:{marginRight:8,color:"#bbb",fontSize:"1.0rem"},children:["Contributed by  ",(F=t.contributedBy)==null?void 0:F.map((W,v)=>{const A=v<t.contributedBy.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(U,{value:W,field:"contributedBy",mode:"text"}),A]},v)})]})}),h&&e.jsx(Ee,{in:t.uniqueDonorCount>0,children:e.jsxs("div",{style:{marginRight:10,fontSize:R,textAlign:"right",display:k,opacity:I},children:[e.jsx("div",{children:e.jsxs("nobr",{children:["Donors ",e.jsx("strong",{children:t.uniqueDonorCount||"--"})]})}),e.jsx("div",{style:{marginLeft:16},children:e.jsxs("nobr",{children:["Tickets ",e.jsx("strong",{children:x})]})})]})})]}),!c&&p&&e.jsxs("div",{style:{display:"flex",marginTop:6,opacity:I},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(L,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((W,v)=>{const A=v<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(U,{value:W,field:"country",mode:"text"}),A]},v)})})}),e.jsx(L,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),e.jsx(De,{style:{margin:B,fontSize:R,opacity:I},children:e.jsx(te,{rehypePlugins:[[ne,{target:"_blank"}]],components:{p:"div"},children:t.description})})]}),h&&!a&&e.jsx(Xe,{id:t.id})]}),t.USShip&&!a&&e.jsxs("div",{style:{textAlign:"right",width:"100%",marginTop:10,paddingRight:20,color:"#aaa"},children:["Ships to USA:  ",e.jsx("span",{style:{color:O[t.USShip],fontWeight:"bold"},children:t.USShip})]})]})}),n&&e.jsxs(E.Fragment,{children:[e.jsxs(Ae,{sx:{padding:"0px 16px 0px 16px"},children:[e.jsx("div",{style:{display:k},children:e.jsx($,{direction:"row",alignItems:"flex-start",style:{},children:!!((q=t.tags)!=null&&q.length)&&!c&&e.jsx(L,{name:"Tags",value:e.jsx($,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.tags.map((W,v)=>e.jsx(U,{value:W,field:"tags",mode:"simple"},v))}),headerStyle:{marginBottom:4}})})}),!c&&!p&&e.jsxs("div",{style:{display:"flex",marginTop:6},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(L,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((W,v)=>{const A=v<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(U,{value:W,field:"country",mode:"text"}),A]},v)})})}),e.jsx(L,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),t.potContents&&e.jsx($,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap",marginTop:"4px"},children:e.jsx(L,{name:"Contents",textStyle:{fontSize:m},value:e.jsx(te,{rehypePlugins:[[ne,{target:"_blank"}]],children:t.potContents})})}),!!((Q=t.media)!=null&&Q.length)&&e.jsx(L,{value:e.jsx($e,{entry:t})}),!!((ee=t.links)!=null&&ee.length)&&e.jsx(L,{name:"Links",value:e.jsx($,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:W,url:v},A)=>e.jsx(V,{href:v,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:W},A))})}),!r&&e.jsx(ve,{feature:"raflPot",id:t.id})]}),!c&&e.jsxs(ze,{disableSpacing:!0,children:[e.jsx(_e,{entry:t}),h&&e.jsx(Ie,{entry:t})]})]})]})}const Qe=E.memo(Ze,(t,n)=>{const s=Object.keys(t.entry),l=Object.keys(n.entry);if(s.length!==l.length)return!1;for(let a=0;a<s.length;a++)if(s[a]!==l[a]||t.entry[s[a]]!==n.entry[l[a]])return!1;return t.expanded===n.expanded&&t.onExpand===n.onExpand});function et(){const{raflState:t}=i.useContext(Y),n=be(),{isMobile:s}=M(),l=s?{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:8}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:12},a=!1;return e.jsxs(E.Fragment,{children:[t==="preview"&&e.jsx("div",{style:{...l,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. In the meantime, here's a preview of the pots that folks are developing. Please note that ",e.jsx("strong",{children:"all pots and contents are subject to change"})," until the raffle begins in January."]})}),t==="setup"&&e.jsx("div",{style:{...l,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. See you then!"]})}),t==="live"&&e.jsx("div",{style:{...l,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,marginTop:1,marginBottom:7},children:"RAFL is on!"}),e.jsxs("div",{style:{fontSize:"1rem",marginTop:1,marginBottom:15},children:["Welcome to the ",e.jsx("strong",{children:"2026 Lockpicking Charity Raffle"}),". You donate to your favorite charity and every dollar donated earns a ticket you can put towards any of the fantastic pots the community has donated this year. To read the full details (and enter to win) ",e.jsx(xe,{onClick:()=>n("/rafl/enter"),style:{color:"#fff",textDecorationColor:"#fff",fontWeight:700,cursor:"pointer"},children:"click here."})]}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:"Entries will be accepted through January 31, and the primary prize drawing will happen via livestream at 11 a.m. PDT on Sunday, February 1."})]})}),t==="post"&&a,t==="post"&&!a&&e.jsx("div",{style:{...l,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL 2026 has ended."}),"Check out the winners below, see you next year!"]})})]})}function tt({text:t}){const[n,s]=i.useState(null),l=!!n,a=i.useCallback(u=>s(u.currentTarget),[]),d=i.useCallback(()=>s(null),[]),o=Se().format("YYYY-MM-DD"),{raffleAdminRole:r}=i.useContext(Y),{visibleEntries:h=[]}=i.useContext(Z),j=i.useCallback(()=>{const u=JSON.stringify(h);d(),ie(`rafflePots${o}.json`,u),J("Current RAFL pots downloaded as rafflePots.json")},[o,d,h]),p=i.useCallback(()=>{const u=h.map(f=>{const S=f.winnerCount>1?`(${f.winnerCount} winners)`:"";let c=`Pot #${f.potNumber} - ${f.title} ${S}
  DONATIONS: ${f.totalTickets}
  DONORS: ${f.uniqueDonorCount}
`;return f.winnerFilterNames.length>0&&(c+=`  WINNERS: ${f.winnerFilterNames.join(", ")}
`),c}).join(`
`);d(),navigator.clipboard.writeText(u).then(()=>{J("Current RAFL pots copied to clipboard.")})},[d,h]),g=i.useCallback(()=>{const u=h.map(x=>({id:x.id,potNumber:x.potNumber,title:x.title,contributedBy:x.contributedBy.join(", "),donors:x.uniqueDonorCount,tickets:x.totalTickets,winners:x.winnerFilterNames.join(", ")})),f=Object.keys(u[0]).join(","),S=u.map(x=>Object.keys(u[0]).map(C=>x[C]).map(C=>{const y=`${C??""}`.replace(/"/g,'""');return/(\s|,|")/.test(y)?`"${y}"`:y}).join(",")).join(`
`),c=`${f}
${S}`;d(),ie("rafflePots.csv",c),J("Current RAFL pots downloaded as rafflePots.csv")},[d,h]);return e.jsxs("div",{children:[t?e.jsx(N,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(V,{variant:"outlined",size:"small",onClick:a,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(K,{}),children:"Export"})}):e.jsx(N,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:a,children:e.jsx(K,{})})}),e.jsxs(ye,{anchorEl:n,open:l,onClose:d,children:[!t&&e.jsxs(_,{disabled:!0,children:[e.jsx(H,{children:e.jsx(K,{fontSize:"small"})}),e.jsx(G,{children:"Export"})]}),e.jsxs(_,{onClick:p,children:[e.jsx(H,{children:e.jsx(fe,{fontSize:"small"})}),e.jsx(G,{children:"Copy to clipboard"})]}),e.jsxs(_,{onClick:g,children:[e.jsx(H,{children:e.jsx(Oe,{fontSize:"small"})}),e.jsx(G,{children:"CSV"})]}),r&&e.jsxs(_,{onClick:j,children:[e.jsx(H,{children:e.jsx(Me,{fontSize:"small"})}),e.jsx(G,{children:"JSON"})]})]})]})}function kt({allPots:t,drawing:n=!1}){const{filters:s}=i.useContext(X),[l,a]=i.useState(s.id),{visibleEntries:d,expandAll:o}=i.useContext(Z),r=t||d||[],h=i.useDeferredValue(l),j=i.useCallback(p=>{a(p)},[]);return e.jsxs("div",{style:{paddingBottom:32},children:[!n&&e.jsx(et,{}),e.jsx(Ne,{label:"Raffle Pots",sortValues:Pe,entryCount:d.length}),e.jsx(qe,{}),r.length===0&&e.jsx(ke,{label:"Rafl Pots"}),r.map(p=>e.jsx(Qe,{entry:p,onExpand:j,expanded:p.id===h||!!o,drawing:n},p.id)),e.jsx("div",{style:{marginLeft:"auto",marginRight:"auto",justifyItems:"center",marginTop:30},children:e.jsx(tt,{text:!0})})]})}export{kt as R};
