const f=(n,s)=>{if(!n||Object.keys(n).length===0)return s;if(!s||s.length===0)return[];const u=(t,r)=>{const e=String(r??""),a=e.startsWith("!"),l=(a?e.slice(1):e).split("||").filter(Boolean);return{key:t,values:l,negative:a}},y=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(e=>u(t,e)):u(t,r)}).flat();return s.filter(t=>y.every(({key:r,values:e,negative:a})=>{const c=t[r],l=o=>Array.isArray(c)?c.includes(o):c===o,i=e.some(o=>l(o));return a?!i:i}))};export{f};
