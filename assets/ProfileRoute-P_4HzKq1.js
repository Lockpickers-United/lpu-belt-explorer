import{P as z,Q as q,U,V as _,r as m,j as t,K as A,I as F,u as k,R as E,aw as I,A as T,a7 as O,a5 as $,a6 as G,$ as Y,D as X,ax as J,a8 as K,e as Q,N as Z,h as tt,T as et}from"./index-Jkc3F5C3.js";import{l as it}from"./filterFields-Cg1RjUfT.js";import{l as ot}from"./sortFields-ChCLUnX8.js";import{F as rt,S as st}from"./SortButton-v57CSRY4.js";import{D as nt}from"./LockDataProvider-CRivuaeS.js";import{L as H,a as at}from"./LockListContext-C1IJrdXH.js";import{S as dt}from"./SearchBox-zF0mnAkM.js";import{L as lt}from"./LoadingDisplay-CZugUNs6.js";import{u as ct}from"./useData-Bu4wn-DK.js";import{N as pt}from"./NoProfileData-D2zGJYgC.js";import{P as mt}from"./ProfileNotFound-DXzdlBNB.js";import{C as ht,a as xt,E as ut}from"./Casino-BolSjdG0.js";import{I as gt}from"./InlineFilterDisplay-CoxDQK1E.js";import{D as V}from"./DataContext-CHgYj0K7.js";import"./index-BkghjxMh.js";import{X as N}from"./nivo-bar-CZImPeIp.js";import{p as W}from"./chartDefaults-pV7GKcxU.js";import{P as wt}from"./ProfileHeader-woN7Uygq.js";import{E as ft}from"./ExportButton-Bga8ZbKU.js";import"./FilterAlt-cZI8ddg-.js";import"./HighlightOff-nlCwghYB.js";import"./Select-2PFlhjbk.js";import"./Box-0ydYupt9.js";import"./Chip-qVugJtcd.js";import"./Sort-B_h9jIhg.js";import"./collectionStatsById-DY1NVZ7h.js";import"./dataUrls-DkJe4Pqg.js";import"./filterEntries-BBFZIbGW.js";import"./entryName-C3rk5I60.js";import"./Search-2OC_TEpz.js";import"./TextField-D0HYNBc3.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-DuDfK8HX.js";import"./mycollection-Dqx3MeiB.js";import"./BeltStripe-C40OR98n.js";import"./EvidenceForm-n3CeNL8M.js";import"./Launch-ChfFzTC6.js";import"./PhotoCamera-BY_KjIhP.js";import"./LockEntrySearchBox-U-eWy5ul.js";import"./BeltStripeMini-YvdibKdh.js";import"./Autocomplete-BZBMPWrU.js";/* empty css                  */import"./pageData-BY6jrYM9.js";import"./index-CahKZD7H.js";import"./index-fxNjA8ib.js";import"./index-BrQC9uVP.js";import"./sanitizeValues-Bq_U3-An.js";import"./LocalizationProvider-CB1Q_Mla.js";import"./index-eMgSEMKo.js";import"./DialogContent-C1_R82dT.js";import"./ListItem-CYyw9iSU.js";import"./Dialog-CVdrY04n.js";import"./VideocamOutlined-CWaFmD7w.js";import"./Checkbox-ljfiSrjt.js";import"./LoadingDisplay-o6cG-vtV.js";import"./CircularProgress-Cp0HKnuf.js";import"./LoadingDisplaySmall-D0ik4Eki.js";import"./ExpandMore-ByKRqpeE.js";import"./FieldValue-Dw5oS3bO.js";import"./BeltIcon-4NO3c0Oy.js";import"./FilterChip-CKp3c5pK.js";import"./glossary-v53ZYECr.js";import"./CopyEntryTextButton-B0WWjBUg.js";import"./ContentCopy-CFkF-4Xb.js";import"./LockImageGallery-UI9U3XdN.js";import"./ImageGallery-CpJmdRNm.js";import"./ImageViewer-Bh2ci8fp.js";import"./Link-BZgT3CLD.js";import"./ImageListItem-C_lLqR-U.js";import"./AccordionSummary-DQWxkZWq.js";import"./Collapse-D71hN0_T.js";import"./AccordionActions-_m8Kh5r5.js";import"./nivo-axes-UJhY1KVg.js";import"./nivo-legends-BAl1zkGV.js";import"./uniq-Bbo-JZX_.js";import"./_baseClone-B9dDIrja.js";import"./CopyProfileLinkButton-MWKeNOHi.js";import"./ToggleButtonGroup-BVpJpxz5.js";import"./Cancel-DnKIewpy.js";import"./download--CH9M1Xk.js";import"./List-DNRqYpw5.js";var j={},R;function vt(){if(R)return j;R=1;var i=z();Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var r=i(q()),a=U();return j.default=(0,r.default)((0,a.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),j}var jt=vt();const kt=_(jt);function bt(){const{compact:i,setCompact:r,setExpanded:a}=m.useContext(H),d=m.useCallback(()=>{r(!i),a(null)},[i,r,a]);return t.jsx(A,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:t.jsx(F,{onClick:d,children:t.jsx(kt,{color:i?"secondary":"inherit"})})})}function yt({lockCollection:i,userText:r,collectionBarHeight:a}){const d=i.own?i.own.length:0,h=i.picked?i.picked.length:0,n=i.recordedLocks?i.recordedLocks.length:0,l=i.wishlist?i.wishlist.length:0,e=d+h+n+l?{own:d,picked:h,recorded:n,wishlist:l}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},g={own:250,picked:280,recorded:260,wishlist:100},u={own:Math.min(s.own,e.own),picked:Math.min(s.picked,e.picked),recorded:Math.min(s.recorded,e.recorded),wishlist:Math.min(s.wishlist,e.wishlist)},o={own:e.own>s.own?0:s.own-u.own,picked:e.picked>s.picked?0:s.picked-u.picked,recorded:e.recorded>s.recorded?0:s.recorded-u.recorded,wishlist:e.wishlist>s.wishlist?0:s.wishlist-u.wishlist},p={own:2,picked:2,recorded:2,wishlist:2},P={own:Math.max(e.own-(u.own+o.own+p.own),0),picked:Math.max(e.picked-(u.picked+o.picked+p.picked),0),recorded:Math.max(e.recorded-(u.recorded+o.recorded+p.recorded),0),wishlist:Math.max(e.wishlist-(u.wishlist+o.wishlist+p.wishlist),0)},C={own:Math.min(g.own-e.own,g.own-s.own-p.own),picked:Math.min(g.picked-e.picked,g.picked-s.picked-p.picked),recorded:Math.min(g.recorded-e.recorded,g.recorded-s.recorded-p.recorded),wishlist:Math.min(g.wishlist-e.wishlist,g.wishlist-s.wishlist-p.wishlist)},b=["own","picked","recorded","wishlist"],L=b.map((w,f)=>({row:b[f],"Average A":u[w],"Average B":o[w],Average:p[w],USER:P[w],"Top 10":C[w]})),{width:S}=k(),B=S<=560,D=a,M=B?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},y=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],c=i?[{title:r,color:"#3c90c5",width:"14px"}]:[];c.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const v=({items:w})=>t.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[t.jsx("div",{style:{width:"100%"}}),w.map(f=>t.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[t.jsx("div",{style:{backgroundColor:f.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),t.jsx("div",{style:{textAlign:"left",width:f.width},children:f.title})]},f.title)),t.jsx("div",{style:{width:"100%"}})]});return t.jsxs(E.Fragment,{children:[t.jsx("div",{style:{height:D},children:t.jsx(N,{data:L,keys:["Average A","Average B","Average","USER","Top 10"],theme:W,indexBy:"row",margin:M,padding:.2,valueScale:{type:"linear"},colors:y,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),t.jsx(v,{items:c})]})}function Ct({beltData:i}){const{width:r}=k(),a=r<=360,d=r<=560,h=175,n=d?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},l=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],x=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return t.jsxs("div",{style:{height:h,padding:"0px 8px 0px 8px",width:"100%"},children:[t.jsx(N,{data:i,margin:n,padding:.15,colors:e=>l[e.index%l.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:W,isInteractive:!1,enableLabel:!0,label:e=>e.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:e=>x[e.index%x.length]}),t.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function Lt({profile:i,entries:r}){const{userId:a}=I(),{user:d}=m.useContext(T),h=a===(d==null?void 0:d.uid)?"You":"User",n=m.useMemo(()=>{const M=O.concat("Unranked"),y=r.map(({belt:c})=>c.includes("Black")?"Black":c).reduce((c,v)=>(c[v]||(c[v]=0),c[v]++,c),{});return M.map(c=>({id:c,label:c,count:y[c]||0,value:y[c]||0}))},[r]),{isMobile:l}=k(),x=l?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:e}=k(),s=e<=360,g=e<=395,u=e<=428,o=e<=560,C={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...o?{}:{display:"flex"}},b=o?"100%":"50%",L=o?"100%":"50%",S=s?200:o?210:180,B=o?160:170,D=s?150:170;return t.jsx($,{style:x,sx:{paddingBottom:5},children:t.jsx(G,{style:{paddingTop:0,paddingLeft:8},children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:C,children:[t.jsx("div",{style:{width:b,verticalAlign:"top",height:S},children:t.jsx(yt,{lockCollection:i,userText:h,collectionBarHeight:B})}),t.jsx("div",{style:{width:L,height:D,marginTop:"0px"},children:t.jsx(Ct,{beltData:n})})]})})})})}function St({onSelect:i}){const{visibleEntries:r=[]}=m.useContext(V),a=m.useCallback(()=>{const d=Math.floor(Math.random()*r.length),h=r[d];i(h.id)},[r,i]);return Y("r",()=>a(),{preventDefault:!0}),t.jsx(A,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:t.jsx(F,{onClick:a,children:t.jsx(ht,{style:{color:"#999"}})})})}function Bt({profile:i,owner:r}){const{compact:a}=m.useContext(H),[d,h]=m.useState(!1),{visibleEntries:n=[]}=m.useContext(V),l=m.useDeferredValue(d);return t.jsx(E.Fragment,{children:t.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[t.jsx(wt,{profile:i,page:"collection",owner:r}),t.jsx(gt,{profile:i,collectionType:"locks"}),t.jsx(Lt,{profile:i,entries:n}),a?t.jsx(xt,{entries:n}):n.map(x=>t.jsx(ut,{entry:x,expanded:x.id===l,onExpand:h},x.id)),t.jsx("div",{style:{textAlign:"center"},children:t.jsx(St,{onSelect:h})})]})})}function ei(){const{user:i}=m.useContext(T),{userId:r}=I(),{getProfile:a}=m.useContext(X),{isMobile:d}=k(),h=m.useCallback(async()=>{try{const o=await a(r);if(o){const p=o.displayName?o.displayName.toLowerCase().endsWith("s")?`${o.displayName}'`:`${o.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${p} Profile`}return o}catch(o){return console.error("Error loading profile.",o),null}},[a,r]),{data:n={},loading:l,error:x}=ct({loadFn:h}),e=m.useMemo(()=>{if(l||!n)return[];const o=new Set(J.locks.getCollected(n));return K.filter(p=>o.has(p.id))},[n,l]),s=t.jsxs(E.Fragment,{children:[t.jsx(dt,{label:"Collection"}),t.jsx(rt,{}),t.jsx(st,{sortValues:ot}),!d&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(bt,{})]}),g=l?"Loading...":"Profile",u=t.jsx("div",{style:{margin:"30px 0px"},children:t.jsx(ft,{text:!0})});return t.jsx(Q,{filterFields:it,children:t.jsx(nt,{allEntries:e,profile:n,children:t.jsxs(at,{children:[t.jsx(Z,{title:g,extras:s}),l&&t.jsx(lt,{}),!l&&n&&!x&&t.jsx(Bt,{profile:n,owner:i&&i.uid===r}),!l&&n&&!x&&e.length===0&&t.jsx(pt,{}),!l&&(!n||x)&&t.jsx(mt,{}),t.jsx(tt,{before:u}),t.jsx(et,{feature:"profile"})]})})})}export{ei as default};
