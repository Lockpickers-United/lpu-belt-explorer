import{r as s,j as e,R as b,J as A,I as z,u as I,a0 as Y,a6 as F,ak as U,al as P,d as L,N as q,h as J}from"./index-KX6fSY5H.js";import{u as O}from"./usePageTitle-6QUGex1F.js";import{L as G}from"./LeaderboardName-BZVOyjr6.js";import{C as H}from"./ChoiceButtonGroup-Bz_eIXAi.js";import{C as _}from"./Cached-DZ1l5xDG.js";import{L as K}from"./LoadingDisplayWhite-D13AcSQc.js";import{E as Q}from"./ExpandMore-D7s3M_UE.js";import{A as V,a as X,b as Z}from"./AccordionSummary-Kpk7-rsB.js";import{c as $,d as ee,T as te,a as w,b as a,e as re}from"./TableRow-TAcu31Uc.js";import{L as B}from"./Link-BxLigt0X.js";import{u as oe}from"./useData-BGqe79aW.js";import{L as se}from"./LoadingDisplay-CaK6n8mM.js";import"./ToggleButtonGroup-DoQ8U7Mv.js";import"./CircularProgress-CCs8sbCT.js";import"./Collapse-D7GzrSKo.js";import"./Box-BsQF32qY.js";function ne({refresh:n}){const[h,d]=s.useState(!1),[l,p]=s.useState(""),[c,y]=s.useState(!1),v=s.useCallback(async()=>{const i=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/export-evidence":"https://explore.lpubelts.com:8443/export-evidence";d(!0),await fetch(i,{cache:"no-store"}).then(async u=>(d(!1),await u.text())).then(async u=>{p(u),console.log(`export response
`,u),location.reload()}),await n()},[n]);return e.jsxs(b.Fragment,{children:[e.jsx("div",{style:{maxWidth:700,margin:"5px auto 5px auto",padding:2,fontWeight:700,fontSize:"1.2rem",display:"flex",justifyContent:"center"},children:h?e.jsx(K,{}):e.jsx(A,{title:"Refresh Evidence Data",arrow:!0,disableFocusListener:!0,children:e.jsx(z,{onClick:v,style:{marginRight:10},children:e.jsx(_,{})})})}),(l==null?void 0:l.status)==="Errors"&&e.jsxs(V,{expanded:c,onChange:()=>y(!c),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(X,{expandIcon:e.jsx(Q,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(Z,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(l,null,2)})})]})]})}function ie({data:n,updated:h}){const{isMobile:d}=I(),{admin:l}=s.useContext(Y),p=s.useMemo(()=>[{label:"Scorecard Projects"},{label:"All Projects"},{label:"Modified Picks"},{label:"BB Modified"}],[]),[c,y]=s.useState(p[0]),v=s.useCallback(t=>y(t),[]);let i;switch(c.label){case"Scorecard Projects":i=n.projects.filter(t=>!t.tabName);break;case"All Projects":i=n.projects;break;case"Modified Picks":i=n.modifiers;break;default:i=n.modifiers.filter(t=>t.blackBelt)}const u=c.label.includes("Modified")?"Lock":"Project",D=c.label.includes("Modified")?"Belt":"Tier",[m,M]=F(),r=m.get("sort"),x=r&&r.includes("ev"),[j,C]=s.useState(!1),[f,k]=s.useState(!1),g=s.useCallback(t=>()=>{r&&t!==r?(m.set("sort",t),C(x?j:!1),k(x?!1:f)):r&&t===r?(C(x?j:!j),k(x?!f:f)):t==="date"?(m.set("sort",t),C(!0)):t==="evDate"?(m.set("sort",t),k(!0)):m.set("sort",t),M(m)},[x,f,j,m,M,r]),S=s.useMemo(()=>i&&r?i.sort((t,o)=>{if(r==="evName")return(t.displayName||"").localeCompare(o.displayName||"");if(r==="evLock")return t.evidenceName.localeCompare(o.evidenceName)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evBelt")return U(t.belt.replace(" Belt",""),o.belt.replace(" Belt",""))||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evModifier")return t.modifier.localeCompare(o.modifier)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evDate")return o.date.localeCompare(t.date)}):i.sort((t,o)=>o.date.localeCompare(t.date)),[r,i,f]),R=s.useMemo(()=>f?S.reverse():S,[S,f]),N=d?"auto":"170px",E=d?16:20,T=s.useCallback(t=>{const o=t.replace(" Belt","");return P[o]?P[o].color:t.includes("Dan")?"#769e49":"#b00"},[]),W=s.useCallback(t=>{const o=window.open(t,"_blank","noopener,noreferrer");o&&(o.opener=null)},[]);return e.jsx(b.Fragment,{children:e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:["Project & Pick Review",e.jsxs("div",{style:{fontWeight:400,fontSize:"0.9rem",width:"100%",textAlign:"center",margin:"0px 0px"},children:["Through ",L(h).format("MMM DD, YYYY")]})]}),e.jsx("div",{style:{marginBottom:20},children:e.jsx(H,{options:p,onChange:v})}),e.jsx($,{sx:{backgroundColor:"#111",maxWidth:800,margin:"auto"},children:e.jsxs(ee,{sx:{minWidth:360,align:"left"},children:[e.jsx(te,{children:e.jsxs(w,{children:[e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:N},children:e.jsx("span",{style:r==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:g("evName"),children:"User"})}),e.jsxs(a,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:r==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:g("evLock"),children:u}),e.jsxs("span",{style:r==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:g("evBelt"),children:["Â (",D,")"]})]}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!x||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:g("evModifier"),children:"Modifier"})}),e.jsx(a,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!x||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:g("evDate"),children:"Date"})})]})}),e.jsx(re,{children:R.map((t,o)=>e.jsxs(w,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(a,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:N},children:e.jsx(G,{leader:t,isCurrentUser:t.isCurrentUser,tab:"blackBelts",maxLength:E})})}),e.jsx(a,{align:"left",style:{backgroundColor:T(t.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(B,{onClick:()=>W(t.evidenceUrl),style:{color:"#fff"},children:t.evidenceName})})}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5,marginRight:5},children:e.jsx(B,{onClick:()=>W(t.evidenceUrl),style:{color:"#fff"},children:t.modifier})})}),e.jsx(a,{align:"center",children:e.jsx("nobr",{children:L(t.date).format("MMM DD, YYYY")})})]},o))})]})}),l&&e.jsx(ne,{})]})})}function Se(){var p;O("All Projects");const{data:n,loading:h,error:d}=oe({url:ae}),l=e.jsx(b.Fragment,{});return e.jsxs(b.Fragment,{children:[e.jsx(q,{title:"All Projects",extras:l}),(h||d)&&e.jsx(se,{}),!h&&n&&e.jsx(ie,{data:n,updated:(p=n==null?void 0:n.metadata)==null?void 0:p.updatedDateTime}),e.jsx(J,{})]})}const ae="https://explore.lpubelts.com/data/allProjects.json";export{Se as default};
