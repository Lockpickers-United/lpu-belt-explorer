import{r as t,j as e,a2 as z,a3 as G,J as H,ah as P,B as j,R as W,G as w,X as Y,Y as T,ai as q,A as J,an as K,V as X,aG as Q,P as U,aq as v,W as Z,u as _}from"./index-c8810be1.js";import{L as F}from"./LockListContext-b3ed0a30.js";import{F as L}from"./filterFields-b5ec39a6.js";import{B as E}from"./Badge-7ae65ed4.js";import{F as $,C as ee}from"./SearchBox-dd53ce09.js";import{T as te,a as S}from"./ToggleButtonGroup-d8a17c33.js";import{B as O}from"./Box-37578da7.js";function ue({label:c,isSearch:h}){const{tab:x,setDisplayAll:p}=t.useContext(F),b=t.useDeferredValue(x),s={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},i=b==="search",d=i&&!h?"No search or filter criteria selected.":e.jsxs("span",{children:["No matching ",c," were found.",e.jsx("br",{}),"Try adjusting filters, search, or tab."]}),u=t.useCallback(()=>{setTimeout(()=>p(!0),50)},[p]);return e.jsxs(z,{style:s,children:[e.jsx(G,{style:{paddingBottom:8},children:e.jsx(H,{variant:"h6",align:"center",children:d})}),i&&e.jsx(P,{style:{paddingBottom:16},children:e.jsx(j,{variant:"outlined",color:"inherit",onClick:u,style:{minWidth:160,margin:"auto"},children:"View all locks"})})]})}function oe({sortValues:c}){const[h,x]=t.useState(null),p=!!h,b=t.useCallback(o=>x(o.currentTarget),[]),s=t.useCallback(()=>x(null),[]),{filters:i,addFilter:d}=t.useContext(L),{sort:u}=i,{compact:a,setCompact:C}=t.useContext(F),g=t.useCallback(o=>()=>{s(),C(o)},[s,C]),r=t.useCallback(o=>()=>{s(),setTimeout(()=>d("sort",o,!0),0)},[d,s]),n={vertical:"top",horizontal:"right"};return e.jsxs(W.Fragment,{children:[e.jsx(w,{title:"View Options",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:b,style:{color:"#ddd"},children:e.jsx(E,{variant:"dot",color:"secondary",invisible:!u,anchorOrigin:n,children:"VIEW"})})}),e.jsxs(Y,{anchorEl:h,open:p,onClose:s,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),c.map(({label:o,value:m})=>e.jsx(T,{onClick:r(m),selected:u===m,children:o},o)),e.jsx(q,{}),e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(T,{onClick:g(!1),selected:!a,children:"Normal"}),e.jsx(T,{onClick:g(!0),selected:a,children:"Compact"})]})]})}function se({onFiltersChanged:c}){const{isLoggedIn:h}=t.useContext(J),{beta:x}=t.useContext(K),{filters:p,filterCount:b,addFilters:s,addFilter:i,filterFields:d,removeFilters:u}=t.useContext(L),{tab:a}=t.useContext(F),{belt:C}=p,g=/\/locks/.test(location.hash),r=t.useMemo(()=>a||C||"White",[C,a]),n=t.useMemo(()=>r!=="search"?"belt":"all",[r]),[o,m]=t.useState(r);r!==o&&r!=="search"?m(r):n==="belt"&&r==="search"&&m("search");const[f,k]=t.useState(!1),A=t.useCallback(()=>k(!f),[f]);X("f",A);const R=t.useCallback(l=>()=>{l==="all"?i("tab","search",!0):l==="belt"&&(u(["belt"]),i("tab",o,!0))},[i,o,u]),D=t.useCallback((l,B)=>{s([{key:l,value:B},{key:"id",value:void 0},{key:"name",value:void 0}],!0),c&&c()},[s,c]),M=t.useCallback(()=>k(!0),[]),y=t.useCallback(()=>k(!1),[]),{color:V,lineColor:I="#999"}=v[o]?v[o]:{color:"#inherit"},N=n==="belt"?1:.7;return e.jsxs(W.Fragment,{children:[e.jsx(w,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:M,style:{color:"#ddd"},children:e.jsx(E,{variant:"dot",badgeContent:b,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"right"},children:"FILTER"})})}),f&&e.jsxs(Q,{anchor:"right",open:f,onClose:y,children:[e.jsx(U,{variant:"dense",onClick:y,style:{padding:"8px 0px 0px 8px"},children:e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:700},children:"Filters"})}),v[o]&&g&&e.jsx("div",{style:{marginLeft:8,marginBottom:8},children:e.jsxs(te,{variant:"outlined",children:[e.jsxs(S,{onClick:R("belt"),style:{color:n==="belt"?"#eee":"#777",backgroundColor:n==="belt"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"belt",disabled:n==="belt",children:[e.jsx("div",{style:{backgroundColor:V,height:16,width:16,borderColor:I,borderRadius:8,border:"1px solid",marginRight:8,opacity:N}}),o," BELT"]},"belt"),e.jsx(S,{onClick:R("all"),style:{color:n==="all"?"#eee":"#777",backgroundColor:n==="all"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"all",disabled:n==="all",children:"ALL LOCKS"},"all")]})}),e.jsx(O,{margin:1,children:e.jsx(Z,{direction:"column",style:{minWidth:250},children:d.filter(l=>(!l.beta||x)&&(!l.userBased||h)).filter(l=>!(n==="belt"&&a!=="search"&&l.label==="Belt")).map((l,B)=>e.jsx($,{tab:a,...l,onFilter:D},B))})}),e.jsxs("div",{style:{padding:8},children:[e.jsx(ee,{forceText:!0}),e.jsx(j,{variant:"outlined",color:"inherit",onClick:y,children:"Done"})]})]})]})}function he({sortValues:c,extraFilters:h=[]}){const{filters:x,filterCount:p,setFilters:b}=t.useContext(L),{tab:s,sort:i,search:d}=x,u=i||p>0,a=t.useCallback(()=>{b({tab:s,search:d})},[d,b,s]),{width:C}=_(),g=C<=500,r=g?3:0,n=g?2:0,o=g?80:60;return e.jsxs(O,{style:{display:"flex",paddingTop:r,marginBottom:n,marginLeft:0,justifyContent:"center"},sx:{".MuiBadge-anchorOriginTopRightRectangular":{marginTop:"5px"},".MuiButton-root":{minWidth:o}},children:[e.jsx(oe,{sortValues:c}),e.jsx(se,{extraFilters:h}),u&&e.jsx(j,{color:"inherit",style:{color:"#bbb"},onClick:a,children:"RESET"})]})}export{ue as N,he as V};
