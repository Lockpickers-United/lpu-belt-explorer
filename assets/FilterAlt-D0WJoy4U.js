import{r as n,F as k,j as l,a2 as P,I as M,P as R,Q as S,U as T,V as _,u as V,K as w,B as z}from"./index-CxJ13Q9t.js";import{D as L}from"./DataContext-bskxqDB_.js";import"./index-mfFxZH4k.js";import{H as $}from"./HighlightOff-BjVnGR8w.js";import{F as G,I as J,S as K}from"./Select-Co4TRBXs.js";import{B as Q}from"./Box-Ck4xPAQG.js";import{C as U}from"./Chip-CuRdC4U_.js";const u={safelocksOwn:"Own",safelockCracked:"Cracked",safelockWishlist:"Wishlist",shippingSplit:"Shipping included",shippingNotSplit:"Winner may pay shipping"};function pe({label:o,fieldName:e,onFilter:a,sort:c}){const{beltEntries:p,visibleEntries:y=[]}=n.useContext(L),{filters:W,removeFilters:j}=n.useContext(k),A=n.useMemo(()=>(p==null?void 0:p.length)>0?p:y,[p,y]),[b,m]=n.useState(!1),x=n.useDeferredValue(W),h=x[e],C=n.useMemo(()=>Array.isArray(h)?x[e]:h?[h]:[],[x,e,h]),{counts:D,options:q}=n.useMemo(()=>{const r=A.map(s=>Array.isArray(s[e])?Array.from(new Set([...s[e]])):s[e]).flat().filter(s=>s).reduce((s,i)=>(s[i]||(s[i]=0),s[i]++,s),{}),g=Object.keys(r).sort((s,i)=>{if(c)return c(s,i);if(typeof s=="string"&&typeof i=="string")return s.localeCompare(i);if(Number.isInteger(s)&&Number.isInteger(i))return s-i});return{counts:r,options:g}},[A,e,c]),E=n.useCallback(t=>{m(!1),setTimeout(()=>a(e,t.target.value,!0),0),setTimeout(()=>document.activeElement.blur())},[e,a]),I=n.useCallback(()=>{m(!1),setTimeout(()=>document.activeElement.blur())},[]),B=n.useCallback(()=>m(!0),[]),H=n.useCallback(()=>{j([e])},[e,j]),F=[...C.reduce((t,r)=>[...t,r.startsWith("!")?r:null],[]).filter(t=>t),...q];return l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[F.length===0?null:l.jsxs(G,{style:{minWidth:120,maxWidth:300,marginTop:8},fullWidth:!0,children:[l.jsx(J,{id:`filter-${e}`,color:"secondary",children:o}),l.jsx(K,{multiple:!0,label:o,labelId:`filter-${e}`,value:C,onChange:E,style:{marginBottom:0},color:"secondary",open:b,onClose:I,onOpen:B,onBlur:I,MenuProps:{PaperProps:{style:{maxHeight:X*8+Y}}},renderValue:t=>l.jsx(Q,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(r=>{const g=r.startsWith("!")?"NOT "+(u[r.slice(1)]?u[r.slice(1)]:r.slice(1)).replace("||"," OR ").replace("@@"," AND "):u[r]?u[r]:r.replace("||"," OR ").replace("@@"," AND ");return l.jsx(U,{label:g},r)})}),children:F.map((t,r)=>l.jsx(P,{value:t,children:(t||"").startsWith("!")?"NOT "+(u[t.slice(1)]?u[t.slice(1)]:t.slice(1)):u[t]?u[t]:t+` (${D[t]||0})`},r))})]}),C.length===0?null:l.jsx(M,{onClick:H,style:{height:30,marginTop:4,marginLeft:2},size:"small",children:l.jsx($,{fontSize:"small",style:{color:"#d04e4e"}})})]})}const X=48,Y=8;var f={},v;function Z(){if(v)return f;v=1;var o=R();Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var e=o(S()),a=T();return f.default=(0,e.default)((0,a.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll"),f}var N=Z();const ee=_(N);function fe({forceText:o}){const{isMobile:e}=V(),{filterCount:a,clearFilters:c}=n.useContext(k);return a===0?null:e&&!o?l.jsx(w,{title:"Clear Filters",arrow:!0,disableFocusListener:!0,children:l.jsx(M,{onClick:c,children:l.jsx(ee,{})})}):l.jsx(z,{variant:"outlined",color:"inherit",onClick:c,style:{minWidth:80,marginRight:8},children:"Clear"})}var d={},O;function te(){if(O)return d;O=1;var o=R();Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var e=o(S()),a=T();return d.default=(0,e.default)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt"),d}var re=te();const de=_(re);export{fe as C,de as F,pe as a,u as f};
