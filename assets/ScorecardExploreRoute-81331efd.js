import{r as n,au as U,u as G,j as t,R as D,aj as I,F as _,$ as ee,J as O,I as M,ac as te,d as T,as as re,ai as se,D as oe,N as le,e as ae,a0 as ne,h as ie,T as ce}from"./index-71b5a92e.js";import{L as de}from"./LoadingDisplay-62160fe2.js";import{u as ue}from"./useData-8c963995.js";import{u as pe}from"./usePageTitle-a4790bb0.js";import{_ as me,d as he,a as fe,l as xe}from"./lockStats-e80e942b.js";import{b as be,c as ke,p as ge,a as ye,s as je,d as Be,k as Ce}from"./dataUrls-29853cf3.js";import{E as ve}from"./ErrorMessage-ba2ea96a.js";import{b as z,a as Se}from"./chartDefaults-270235e0.js";import{L as q}from"./Link-b08c8f7e.js";import{D as Y,f as Pe}from"./DataContext-482fa3c2.js";import{r as R}from"./index-f28880fe.js";import{e as we}from"./entryName-499a8dcf.js";import{T as Le,a as F,b as W,c as N,d as V}from"./TableRow-d955a299.js";import{V as Ae}from"./ViewFilterButtons-bbc36f30.js";import{b as Ue}from"./sortFields-b1bde6f9.js";import{F as De,I as ze,S as Fe}from"./Select-2ef8067f.js";import{C as Ee}from"./Collapse-623e3a0f.js";import{b as Ie}from"./filterFields-71162c8b.js";import{c as Oe}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-200209f2.js";import"./useDocumentTitle-cc086641.js";import"./nivo-legends.es-c4a356d1.js";import"./index-672e0b28.js";import"./line-25a4cb89.js";import"./Sort-7d79780c.js";import"./Chip-6f3f6058.js";import"./FilterAlt-c09d3572.js";import"./Box-e05591d4.js";import"./LockListContext-fc6d17ec.js";import"./ToggleButtonGroup-3c118325.js";import"./Cancel-fc3824e5.js";import"./rankingRequestData-d3ef79e5.js";const Me={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},Te={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},S={discord:Me,reddit:Te};function Re({data:u}){const{scorecardStats:m}=u,{userCounts:s}=m,d=S.reddit.Total-s.totalUsers,i=n.useMemo(()=>{const e={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:s.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:d}],colors:["#1ab486","#175042"],description:"Click chart for more detail"},f={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:s.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:s.totalUsers-s.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage"},$={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:s.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:s.scorecardUsers-s.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports"},J={parent:"Scorecard Users",data:Object.keys(s.belts).sort((a,x)=>U(a,x)).map(a=>({id:a,label:a,value:s.belts[a]})),colors:z,description:"Imported Belt Breakdown (click Black for Dan breakdown)"},K={parent:"Imported Belts",data:Object.keys(s.dans).sort((a,x)=>parseInt(a)-parseInt(x)).map(a=>({id:H(a),label:H(a),value:s.dans[a]})),colors:We,description:"Dan Breakdown"},Q={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:S.discord.Total},{id:"Reddit",label:"Reddit",value:S.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},X={parent:"Other LPU Pickers",data:Object.keys(S.reddit).filter(a=>a!=="Total").sort((a,x)=>U(a,x)).map(a=>{const x=a==="Black"?"Black Belt":a;return{id:x,label:x,value:S.reddit[a]}}),colors:z,description:"Reddit Belt Breakdown"},Z={parent:"Other LPU Pickers",data:Object.keys(S.discord).filter(a=>a!=="Total").sort((a,x)=>U(a,x)).map(a=>{const x=a==="Black"?"Black Belt":a;return{id:x,label:x,value:S.discord[a]}}),colors:z,description:"Discord Belt Breakdown"};return{pickerData:e,"LPUbelts Users":f,"Scorecard Users":$,"Imported Belts":J,Black:K,"Other LPU Pickers":Q,Reddit:X,Discord:Z}},[d,s]),[c,P]=n.useState("pickerData"),A=i[c].data,g=i[c].data.reduce((e,f)=>e+f.value,0),y=n.useCallback(e=>{i[e.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",P(e.id)},200))},[i]),w=n.useCallback(()=>{P(i[c].parent)},[i,c]),h=n.useCallback((e,f)=>{i[e.id]&&(f.currentTarget.style.cursor="pointer")},[i]),{width:k}=G(),C=k<=360,B=k<=395,v=k<=428,b=k<=560,L={top:30,right:0,bottom:30,left:0};let p=320;C?p=175:B?p=180:v?p=230:b&&(p=240);const l="1.0rem",j=b?5:4,o=b?10:8,r=b?0:8;return t.jsxs(D.Fragment,{children:[t.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:i[c].description}),t.jsxs("div",{style:{height:p,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[t.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:t.jsx(me,{data:A,theme:Se,colors:i[c].colors,margin:L,startAngle:-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:j,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:e=>e.label+": "+Math.round(e.value/g*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:r,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:o,arcLabelsTextColor:"#111",isInteractive:!0,sortByValue:!1,onClick:e=>{y(e)},onMouseEnter:(e,f)=>{h(e,f)}})}),t.jsx("div",{style:{width:"100%",position:"absolute",top:p/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:i[c].parent&&t.jsx(q,{onClick:w,style:{color:"#ccc",cursor:"pointer",fontSize:l},children:"back"})})]},"pickPie")]})}function H(u){const m=["st","nd","rd","th"];return u+""+m[Math.min(4,parseInt(u))-1]}const We=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function E({entry:u,index:m,collapse:s=!1}){const d=n.useCallback(i=>{const c=i.replace(" Belt","");return I[c]?I[c].color:i.includes("Dan")?"#769e49":"#b00"},[]);return t.jsxs(Le,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"5px 2px",border:0}},style:{display:"table-row"},children:[t.jsx(F,{align:"left",style:{backgroundColor:d(u.belt),borderBottom:"1px solid #333",width:4,marginLeft:5,height:0}}),t.jsx(F,{align:"left",style:{alignItems:"center"},children:t.jsx("div",{style:{fontWeight:500,marginLeft:5},children:we(u)})}),t.jsx(F,{align:"center",style:{fontWeight:500},children:u.currentPicks})]},m)}function Ne(){var j;const{visibleEntries:u=[]}=n.useContext(Y),{filters:m,addFilter:s}=n.useContext(_),{userBelt:d="All Belts",sort:i}=m,[c,P]=n.useState(i);n.useEffect(()=>{P(!!i)},[i]);const A=60;let g=((j=u.find(o=>o.displayRank===A))==null?void 0:j.currentPicks)||0;g=g>2?g:0;const y=n.useMemo(()=>u.filter(o=>o.currentPicks>=g),[u,g]),w=n.useMemo(()=>u.filter(o=>o.currentPicks<g),[u,g]),h=n.useMemo(()=>["All Belts",...ee],[]),k=n.useCallback(()=>{const o=h.findIndex(e=>e===d),r=o<h.length-1?o+1:0;s("userBelt",h[r],!0)},[s,h,d]),C=n.useCallback(()=>{const o=h.findIndex(e=>e===d),r=o>0?o-1:h.length-1;s("userBelt",h[r],!0)},[s,h,d]),[B,v]=n.useState(!1),b=n.useCallback(()=>v(!1),[]),L=n.useCallback(()=>v(!0),[]),p=n.useCallback(o=>{s("userBelt",o.target.value,!0),b()},[s,b]),l=n.useCallback(()=>{P(!c)},[c]);return t.jsxs(D.Fragment,{children:[t.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:t.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx(O,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:t.jsx(M,{onClick:C,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:t.jsx(he,{})})}),t.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:t.jsxs(De,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[t.jsx(ze,{style:{color:"#bbb"},children:"User Belt"}),t.jsx(Fe,{id:"beltSelect",value:d||"All Belts",label:"Brand",open:B,onClose:b,onOpen:L,onChange:p,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:h.map((o,r)=>t.jsx(te,{value:h[r],children:h[r]},r))})]})}),t.jsx(O,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:t.jsx(M,{onClick:k,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:t.jsx(fe,{})})})]})}),t.jsx(Ae,{sortValues:Ue,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:t.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[t.jsx(W,{sx:{backgroundColor:"#111",width:"100%"},children:t.jsx(N,{style:{backgroundColor:"#1c1c1c"},children:t.jsxs(V,{children:[y.map((o,r)=>t.jsx(E,{entry:o,index:r},r)),c&&t.jsx(D.Fragment,{children:w.map((o,r)=>t.jsx(E,{entry:o,index:r},r))})]})})}),t.jsx(Ee,{in:!!c,timeout:"auto",unmountOnExit:!0,children:t.jsx(W,{sx:{backgroundColor:"#111",width:"100%"},children:t.jsx(N,{style:{backgroundColor:"#1c1c1c"},children:t.jsx(V,{children:w.map((o,r)=>t.jsx(E,{entry:o,index:r},r))})})})})]})}),w.length>0&&t.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:t.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:t.jsx(q,{onClick:l,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!c&&"Show More"||"Show Less"})})})]})}function Ve({data:u}){const{width:m}=G(),d=m<560?"8px 8px 32px 8px":"24px 24px 32px 24px",i={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},c={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return t.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:d,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[t.jsx("div",{style:c,children:"User Drilldown"}),t.jsx(Re,{data:u}),t.jsx("div",{style:i,children:"Scorecard Locks"}),t.jsx(Ne,{data:u})]})}function He({children:u,allEntries:m,scorecardEntries:s,profile:d}){const{filters:i}=n.useContext(_),{search:c,id:P,tab:A,name:g,sort:y,image:w,expandAll:h,...k}=i,{userBelt:C}=k,B=n.useCallback(p=>m.find(l=>l.id===p),[m]),v=n.useMemo(()=>Object.keys(s).map(p=>{var j,o,r;const l=B(p);return l?{...s[p],userBelt:Object.keys(s[p].scorecardPicks),currentPicks:s[p].scorecardPicks[C||"All Belts"],...l,makes:l.makeModels[0].make?l.makeModels.map(({make:e})=>e):l.makeModels[0].model,fuzzy:R(l.makeModels.map(({make:e,model:f})=>[e,f]).flat().filter(e=>e).concat([l.version,l.notes,l.belt]).join(",")),content:[(j=l.media)!=null&&j.some(e=>!e.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(o=l.media)!=null&&o.some(e=>e.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((r=l.links)==null?void 0:r.length)>0?"Has Links":"No Links",I[l.belt].danPoints>0?"Worth Dan Points":void 0,T(l.lastUpdated).isAfter(T().subtract(1,"days"))?"Updated Recently":void 0,l.belt.startsWith("Black")?"Is Black":void 0,l.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(e=>e),collection:re.locks.map.map(e=>d&&d[e.key]&&d[e.key].includes(l.id)?e.label:"Not "+e.label),collectionSaves:Oe[l.id]||0,simpleBelt:l.belt.replace(/\s\d/g,"")}:null}).filter(p=>p),[B,d,s,C]),b=n.useMemo(()=>{const p=Object.keys(k).map(r=>{const e=k[r];return Array.isArray(e)?e.map(f=>({key:r,value:f})):{key:r,value:e}}).flat(),l=v.filter(r=>p.every(({key:e,value:f})=>Array.isArray(r[e])?r[e].includes(f):r[e]===f)),j=c&&l.find(r=>r.id===c);let o=l;return j?o=[j]:c&&(o=Pe.go(R(c),l,{keys:Ge,threshold:-25e3}).map(r=>({...r.obj,score:r.score}))),y?o.sort((r,e)=>{if(y==="beltAscending")return U(r.belt,e.belt)||e.currentPicks-r.currentPicks||r.fuzzy.localeCompare(e.fuzzy);if(y==="beltDescending")return se(r.belt,e.belt)||e.currentPicks-r.currentPicks||r.fuzzy.localeCompare(e.fuzzy);if(y==="alphaAscending")return r.fuzzy.localeCompare(e.fuzzy);if(y==="alphaDescending")return e.fuzzy.localeCompare(r.fuzzy)}):o.sort((r,e)=>e.currentPicks-r.currentPicks||r.fuzzy.localeCompare(e.fuzzy)).map((r,e)=>({...r,displayRank:e+1}))},[k,v,c,y]),L=n.useMemo(()=>({allEntries:m,visibleEntries:b,getEntryFromId:B,expandAll:h,profile:d}),[m,B,b,h,d]);return t.jsx(Y.Provider,{value:L,children:u})}const Ge=["fuzzy"];function St(){const{lockCollection:u}=n.useContext(oe);pe("Explore Scorecard");const{data:m,loading:s,error:d,errorMessage:i}=ue({urls:_e});return t.jsxs(D.Fragment,{children:[t.jsx(le,{title:"Explore Scorecard"}),d&&t.jsx(ve,{errorMessage:i}),s&&t.jsx(de,{}),!s&&!d&&!!m&&t.jsx(ae,{filterFields:Ie,children:t.jsx(He,{allEntries:ne,scorecardEntries:m.scorecardStats.lockCountsByUserBelt,profile:u,children:t.jsx(Ve,{data:{...m,lockStats:xe}})})}),t.jsx(ie,{}),t.jsx(ce,{feature:"stats"})]})}const _e={brandDistribution:be,collectionsStatsCurrent:ke,popularAreas:ge,redditGrowth:ye,siteFullNew:je,pickStatsData:Be,scorecardStats:Ce};export{St as default};
