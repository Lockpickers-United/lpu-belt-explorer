import{r as l,F as W,au as T,j as e,u as re,R as N,b as fe,$ as xe,J as _,I as q,ac as be,aj as ke,d as Y,as as ge,bN as ye,bO as je,D as Be,N as Ce,e as ve,a0 as Se,h as De,T as Ae}from"./index-4b19e28c.js";import{L as we}from"./LoadingDisplay-3afdfc29.js";import{u as Pe}from"./useData-fb55f71b.js";import{u as Le}from"./usePageTitle-4710d8d5.js";import{_ as Ue,d as ze,a as Ee,l as Fe}from"./lockStats-979e3a8d.js";import{E as Ie}from"./ErrorMessage-b898c1cd.js";import{b as M,a as Oe}from"./chartDefaults-ca889cb2.js";import{L as F}from"./Link-f5cb23c8.js";import{D as oe,f as Te}from"./DataContext-6b465683.js";import{r as J}from"./index-f3ef1e36.js";import{e as K}from"./entryName-de945404.js";import{B as Me}from"./BeltStripeMini-246bf73b.js";import{a as ae,b as I,c as Q,d as X,T as Re,e as Z}from"./TableRow-36b37380.js";import{V as We}from"./ViewFilterButtons-84a8cfee.js";import{b as Ne}from"./sortFields-b1bde6f9.js";import{F as He,I as Ve,S as $e}from"./Select-2c652167.js";import{C as Ge}from"./Collapse-25140e4b.js";import{b as _e}from"./filterFields-b60f8c88.js";import{c as qe}from"./collectionStatsById-8def94ca.js";import{b as Ye,c as Je,p as Ke,a as Qe,s as Xe,d as Ze,o as et,e as tt,f as st}from"./dataUrls-88e95518.js";import"./LPU-c3fa7122.js";import"./LinearProgress-59d547a7.js";import"./useDocumentTitle-6012d8d7.js";import"./nivo-legends.es-b82ee1f5.js";import"./index-aa995f42.js";import"./line-2ae46a9e.js";import"./Sort-eb38e80d.js";import"./Chip-2454c42e.js";import"./FilterAlt-f3271643.js";import"./Box-bbf7ea5e.js";import"./LockListContext-fd1439f7.js";import"./ToggleButtonGroup-99cba7d2.js";import"./Cancel-66ecd9a6.js";import"./rankingRequestData-d3ef79e5.js";const rt={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},ot={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},R={discord:rt,reddit:ot};function at({data:i}){const{scorecardStats:x,discordBeltCounts:c,redditBeltCounts:d}=i,{userCounts:u}=x,{filters:f,addFilter:v,removeFilters:A}=l.useContext(W),[g,B]=l.useState(!1),L=f!=null&&f.dataset?f==null?void 0:f.dataset:"pickerData",[n,U]=l.useState(L),C=l.useCallback(h=>{v("dataset",h,!0),U(h)},[v]),S=R.reddit.Total-u.totalUsers,p=l.useMemo(()=>{const h={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:u.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:S}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},j={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:u.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:u.totalUsers-u.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},E={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:u.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:u.scorecardUsers-u.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},V={parent:"Scorecard Users",data:Object.keys(u.belts).sort((t,b)=>T(t,b)).map(t=>({id:t,label:t,value:u.belts[t]})),colors:M,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},de={parent:"Imported Belts",data:Object.keys(u.dans).sort((t,b)=>parseInt(t)-parseInt(b)).map(t=>({id:ee(t),label:ee(t),value:u.dans[t]})),colors:te,description:"Dan Breakdown"},ue={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:R.discord.Total},{id:"Reddit",label:"Reddit",value:R.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},$=Object.keys(c).reduce((t,b)=>{const O=b.replace(" Belt","").trim();return t[O]=c[b],t},{}),pe={parent:"Other LPU Pickers",data:Object.keys($).filter(t=>!t.includes("Dan")).sort((t,b)=>T(t,b)).map(t=>{const b=t==="Black"?"Black Belt":t;return{id:b,label:b,value:$[t]}}),colors:M,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(F,{onClick:()=>C("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},me={parent:"Discord",data:Object.keys(c).filter(t=>t.includes("Dan")).sort((t,b)=>parseInt(t)-parseInt(b)).map(t=>({id:t,label:t,value:c[t]})),colors:te,description:"Discord Dan Breakdown"},G=Object.keys(d).reduce((t,b)=>{const O=b.replace(" Belt","").trim();return t[O]=d[b],t},{}),he={parent:"Other LPU Pickers",data:Object.keys(G).filter(t=>!t.includes("Dan")).sort((t,b)=>T(t,b)).map(t=>({id:t,label:t,value:G[t]})),colors:M,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(F,{onClick:()=>C("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:h,"LPUbelts Users":j,"Scorecard Users":E,"Imported Belts":V,Black:de,"Other LPU Pickers":ue,Discord:pe,"Black Belt":me,Reddit:he}},[c,C,S,d,u]),D=p[n].data,w=p[n].data.reduce((h,j)=>h+j.value,0),z=l.useCallback((h,j)=>{const E=j==null?void 0:j.nativeEvent;typeof TouchEvent<"u"&&E instanceof TouchEvent&&B(!0),p[h.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",C(h.id)},200))},[C,p]),k=l.useCallback(()=>{p[p[n].parent].parent?v("dataset",p[n].parent,!0):A(["dataset"]),U(p[n].parent)},[v,p,n,A]),o=l.useCallback((h,j)=>{p[h.id]&&(j.currentTarget.style.cursor="pointer")},[p]),{width:a}=re(),m=a<=360,r=a<=395,s=a<=428,y=a<=560,le={top:30,right:0,bottom:30,left:0};let P=320;m?P=175:r?P=190:s?P=230:y&&(P=240);const ne="1.0rem",H=y?5:4,ie=y?10:8,ce=y?0:8;return e.jsxs(N.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:p[n].description}),e.jsxs("div",{style:{height:P,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(Ue,{data:D,theme:Oe,colors:p[n].colors,margin:le,startAngle:p[n].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:H,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:h=>h.label+": "+Math.round(h.value/w*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:ce,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:ie,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:h=>{z(h)},onMouseEnter:(h,j)=>{o(h,j)},tooltip:h=>{const j=(h.datum.arc.angleDeg>H,h.datum.label+": "),E=h.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:y||g?"none":"block"},children:e.jsxs("div",{children:[j,E]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:P/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:p[n].parent&&e.jsx(F,{onClick:k,style:{color:"#ccc",cursor:"pointer",fontSize:ne},children:"back"})})]},"pickPie")]})}function ee(i){const x=["st","nd","rd","th"];return i+""+x[Math.min(4,parseInt(i))-1]}const te=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function se({entry:i,index:x,collapse:c=!1}){const d=fe(),f=K(i).replace(/[\s/]/g,"_").replace(/\W/g,""),v=l.useCallback(g=>{const B=`/locks?tab=search&search=${g.id}&id=${g.id}&name=${f}`;d(B)},[d,f]),A=i.belt==="Unranked"?"#bbb":"#fff";return e.jsxs(ae,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[e.jsx(I,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:e.jsx(Me,{value:i.belt})}),e.jsx(I,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:e.jsx(F,{onClick:()=>v(i),style:{color:A},children:K(i)})})}),e.jsx(I,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:i.currentPicks})]},x)}function lt(){var o;const{visibleEntries:i=[]}=l.useContext(oe),{filters:x,addFilter:c}=l.useContext(W),{userBelt:d="All Belts",sort:u}=x,[f,v]=l.useState(u);l.useEffect(()=>{v(!!u)},[u]);const A=60;let g=((o=i.find(a=>a.displayRank===A))==null?void 0:o.currentPicks)||0;g=g>2?g:0;const B=l.useMemo(()=>i.filter(a=>a.currentPicks>=g),[i,g]),L=l.useMemo(()=>i.filter(a=>a.currentPicks<g),[i,g]),n=l.useMemo(()=>["All Belts",...xe],[]),U=l.useCallback(()=>{const a=n.findIndex(r=>r===d),m=a<n.length-1?a+1:0;c("userBelt",n[m],!0)},[c,n,d]),C=l.useCallback(()=>{const a=n.findIndex(r=>r===d),m=a>0?a-1:n.length-1;c("userBelt",n[m],!0)},[c,n,d]),[S,p]=l.useState(!1),D=l.useCallback(()=>p(!1),[]),w=l.useCallback(()=>p(!0),[]),z=l.useCallback(a=>{c("userBelt",a.target.value,!0),D()},[c,D]),k=l.useCallback(()=>{v(!f)},[f]);return e.jsxs(N.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(_,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(q,{onClick:C,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ze,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(He,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(Ve,{style:{color:"#bbb"},children:"User Belt"}),e.jsx($e,{id:"beltSelect",value:d||"All Belts",label:"Brand",open:S,onClose:D,onOpen:w,onChange:z,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:n.map((a,m)=>e.jsx(be,{value:n[m],children:n[m]},m))})]})}),e.jsx(_,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(q,{onClick:U,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(Ee,{})})})]})}),e.jsx(We,{sortValues:Ne,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(Q,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(X,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(Re,{children:e.jsxs(ae,{style:{padding:"0px",fontWeight:700},children:[e.jsx(I,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(I,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx(Z,{children:B.map((a,m)=>e.jsx(se,{entry:a,index:m},m))})]})}),e.jsx(Ge,{in:!!f,timeout:"auto",unmountOnExit:!0,children:e.jsx(Q,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(X,{style:{backgroundColor:"#1c1c1c"},children:e.jsx(Z,{children:L.map((a,m)=>e.jsx(se,{entry:a,index:m},m))})})})})]})}),L.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(F,{onClick:k,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!f&&"Show More"||"Show Less"})})})]})}function nt({data:i}){const{width:x}=re(),d=x<560?"8px 8px 32px 8px":"24px 24px 32px 24px",u={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},f={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:d,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:f,children:"User Drilldown"}),e.jsx(at,{data:i}),e.jsx("div",{style:u,children:"Scorecard Locks"}),e.jsx(lt,{data:i})]})}function it({children:i,allEntries:x,scorecardEntries:c,profile:d}){const{filters:u}=l.useContext(W),{search:f,id:v,tab:A,name:g,sort:B,image:L,expandAll:n,dataset:U,...C}=u,{userBelt:S}=C,p=l.useCallback(k=>x.find(o=>o.id===k),[x]),D=l.useMemo(()=>Object.keys(c).map(k=>{var a,m,r;const o=p(k);return o?{...c[k],userBelt:Object.keys(c[k].scorecardPicks),currentPicks:c[k].scorecardPicks[S||"All Belts"],...o,makes:o.makeModels[0].make?o.makeModels.map(({make:s})=>s):o.makeModels[0].model,fuzzy:J(o.makeModels.map(({make:s,model:y})=>[s,y]).flat().filter(s=>s).concat([o.version,o.notes,o.belt]).join(",")),content:[(a=o.media)!=null&&a.some(s=>!s.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(m=o.media)!=null&&m.some(s=>s.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((r=o.links)==null?void 0:r.length)>0?"Has Links":"No Links",ke[o.belt].danPoints>0?"Worth Dan Points":void 0,Y(o.lastUpdated).isAfter(Y().subtract(1,"days"))?"Updated Recently":void 0,o.belt.startsWith("Black")?"Is Black":void 0,o.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(s=>s),collection:ge.locks.map.map(s=>d&&d[s.key]&&d[s.key].includes(o.id)?s.label:"Not "+s.label),collectionSaves:qe[o.id]||0,simpleBelt:o.belt.replace(/\s\d/g,"")}:null}).filter(k=>k),[p,d,c,S]),w=l.useMemo(()=>{const k=Object.keys(C).map(r=>{const s=C[r];return Array.isArray(s)?s.map(y=>({key:r,value:y})):{key:r,value:s}}).flat(),o=D.filter(r=>k.every(({key:s,value:y})=>Array.isArray(r[s])?r[s].includes(y):r[s]===y)),a=f&&o.find(r=>r.id===f);let m=o;return a?m=[a]:f&&(m=Te.go(J(f),o,{keys:ct,threshold:-25e3}).map(r=>({...r.obj,score:r.score}))),B?m.sort((r,s)=>{if(B==="beltAscending")return ye(r.belt,s.belt)||s.currentPicks-r.currentPicks||r.fuzzy.localeCompare(s.fuzzy);if(B==="beltDescending")return je(r.belt,s.belt)||s.currentPicks-r.currentPicks||r.fuzzy.localeCompare(s.fuzzy);if(B==="alphaAscending")return r.fuzzy.localeCompare(s.fuzzy);if(B==="alphaDescending")return s.fuzzy.localeCompare(r.fuzzy)}):m.sort((r,s)=>s.currentPicks-r.currentPicks||r.fuzzy.localeCompare(s.fuzzy)).map((r,s)=>({...r,displayRank:s+1}))},[C,D,f,B]),z=l.useMemo(()=>({allEntries:x,visibleEntries:w,getEntryFromId:p,expandAll:n,profile:d}),[x,p,w,n,d]);return e.jsx(oe.Provider,{value:z,children:i})}const ct=["fuzzy"];function Gt(){const{lockCollection:i}=l.useContext(Be);Le("Explore Scorecard");const{data:x,loading:c,error:d,errorMessage:u}=Pe({urls:dt});return e.jsxs(N.Fragment,{children:[e.jsx(Ce,{title:"Explore Scorecard"}),d&&e.jsx(Ie,{errorMessage:u}),c&&e.jsx(we,{}),!c&&!d&&!!x&&e.jsx(ve,{filterFields:_e,children:e.jsx(it,{allEntries:Se,scorecardEntries:x.scorecardStats.lockCountsByUserBelt,profile:i,children:e.jsx(nt,{data:{...x,lockStats:Fe}})})}),e.jsx(De,{}),e.jsx(Ae,{feature:"stats"})]})}const dt={brandDistribution:Ye,collectionsStatsCurrent:Je,popularAreas:Ke,redditGrowth:Qe,siteFullNew:Xe,pickStatsData:Ze,scorecardStats:et,discordBeltCounts:tt,redditBeltCounts:st};export{Gt as default};
