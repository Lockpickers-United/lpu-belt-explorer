import{ai as p,r as a,a1 as g,e as h,j as t,T as C,I as L,C as P,a3 as y,c as E,b as k,Q as b,R as d,U as v,V as F,W as T}from"./index-711249d4.js";import{L as D,D as I,I as R,C as w,E as B,m as S,k as M,h as N,T as q,i as U,j as V,l as W}from"./FilterButton-0bed2d6f.js";import{d as A}from"./ImageViewer-c0760552.js";import{L as H}from"./LinearProgress-944ed742.js";import"./InputLabel-5cd10729.js";import"./index-6ee3751f.js";import"./index-30bb1d8c.js";import"./Badge-29dc09e7.js";function O(){const{userId:e}=p(),{user:s}=a.useContext(g),n=a.useCallback(async()=>{const i=`https://lpubelts.com/#/profile/${s.uid}`;await navigator.clipboard.writeText(i),h("Link to entry copied to clipboard.")},[s==null?void 0:s.uid]);return!s||e!==s.uid?null:t.jsx(C,{title:"Copy My Profile Link",arrow:!0,disableFocusListener:!0,children:t.jsx(L,{onClick:n,children:t.jsx(A,{})})})}function Q(){const e={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(P,{style:e,children:[t.jsx(y,{title:"Profile Not Found!"}),t.jsx(E,{children:t.jsx(k,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function _({profile:e}){const{compact:s,expanded:n,setExpanded:i}=a.useContext(D),{visibleEntries:o=[]}=a.useContext(I),c=a.useDeferredValue(n);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(R,{profile:e}),s?t.jsx(w,{entries:o}):o.map(l=>t.jsx(B,{entry:l,expanded:l.id===c,onExpand:i},l.id))]})}const $="/assets/LPU-f691d3fe.png";function et(){const[e,s]=a.useState({}),{userId:n}=p(),{getProfile:i}=a.useContext(b),[o,c]=a.useState(!0),[l,u]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const r=await i(n);s(r),u(!1)}catch(r){console.trace("Error loading profile",r),s({}),u(!0)}finally{c(!1)}})()},[n,i]);const f=a.useMemo(()=>{const x=new Set(S.flatMap(({key:r})=>e[r]));return M.filter(r=>x.has(r.id))},[e]),m=t.jsxs(d.Fragment,{children:[t.jsx(N,{}),t.jsx(q,{}),t.jsx(O,{})]}),j=o?"Loading...":"Profile";return t.jsx(d.Fragment,{children:t.jsx(U,{children:t.jsx(V,{allEntries:f,profile:e,children:t.jsxs(W,{children:[t.jsx(v,{title:j,extras:m}),o&&t.jsxs(d.Fragment,{children:[t.jsx(H,{variant:"indeterminate",color:"secondary"}),t.jsx("img",{alt:"Loading",src:$,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),!o&&e&&!l&&t.jsx(_,{profile:e}),!o&&l&&t.jsx(Q,{}),t.jsx(F,{}),t.jsx(T,{feature:"profile"})]})})})})}export{et as default};
