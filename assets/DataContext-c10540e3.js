import{R as ne,a2 as le,r as B,j as oe,aC as ce,aD as ue}from"./index-9acfd12f.js";const ie=ne.createContext({});function he({children:K,filterFields:V=[]}){const[u,S]=le(),A=B.useMemo(()=>Array.from(u.keys()).reduce((_,w)=>{const p=u.getAll(w);return _[w]=p.length===1?p[0]:p,_},{}),[u]),D=B.useCallback(x=>{Object.keys(x).forEach(_=>{x[_]||delete x[_]}),S(x)},[S]),$=B.useCallback((x,_)=>{x.forEach(({key:w,value:p})=>{!p&&_?u.delete(w):p?_?Array.isArray(p)?(u.delete(w),p.forEach(F=>u.append(w,F))):u.set(w,p):u.has(w)?u.append(w,p):u.set(w,p):p||u.delete(w)}),S(u)},[u,S]),X=B.useCallback((x,_,w)=>$([{key:x,value:_}],w),[$]),G=B.useCallback(x=>{x.forEach(_=>u.delete(_)),S(u)},[u,S]),C=B.useCallback((x,_)=>{const w=u.getAll(x);u.delete(x),Array.isArray(w)&&w.length>1&&w.filter(F=>F!==_).forEach(F=>u.append(x,F)),S(u)},[u,S]),H=B.useCallback(()=>{const{tab:x,sort:_}=A;D({tab:x,sort:_})},[A,D]),Q=B.useMemo(()=>Array.from(u.keys()).filter(_=>!de.includes(_)).length,[u]),z=!!(A!=null&&A.search),O=B.useMemo(()=>({filters:A,filterCount:Q,addFilter:X,addFilters:$,removeFilter:C,removeFilters:G,setFilters:D,clearFilters:H,filterFields:V,filterFieldsByFieldName:V.reduce((x,_)=>({...x,[_.fieldName]:_}),{id:{label:"ID"}}),isSearch:z}),[X,$,H,Q,A,C,G,D,V,z]);return oe.jsx(ie.Provider,{value:O,children:K})}const de=["id","name","search","tab","sort","image","locks","debug","preview","single","expandAll"],_e=ie;var te={exports:{}};(function(K){((V,u)=>{K.exports?K.exports=u():V.fuzzysort=u()})(ce,V=>{var u=(a,e)=>{if(a=="farzher")return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!a||!e)return c;var n=H(a);M(e)||(e=C(e));var i=n.bitflags;return(i&e._bitflags)!==i?c:z(n,e)},S=(a,e,n)=>{if(a=="farzher")return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:e?e[0]:c}];if(!a)return n&&n.all?Q(a,e,n):R;var i=H(a),t=i.bitflags;i.containsSpace;var f=n&&n.threshold||T,s=n&&n.limit||j,r=0,l=0,v=e.length;if(n&&n.key)for(var o=n.key,g=0;g<v;++g){var b=e[g],d=Y(b,o);if(d&&(M(d)||(d=C(d)),(t&d._bitflags)===t)){var m=z(i,d);m!==c&&(m.score<f||(m={target:m.target,_targetLower:"",_targetLowerCodes:c,_nextBeginningIndexes:c,_bitflags:0,score:m.score,_indexes:m._indexes,obj:b},r<s?(y.add(m),++r):(++l,m.score>y.peek().score&&y.replaceTop(m))))}}else if(n&&n.keys)for(var E=n.scoreFn||fe,J=n.keys,Z=J.length,g=0;g<v;++g){for(var b=e[g],L=new Array(Z),I=0;I<Z;++I){var o=J[I],d=Y(b,o);if(!d){L[I]=c;continue}M(d)||(d=C(d)),(t&d._bitflags)!==t?L[I]=c:L[I]=z(i,d)}L.obj=b;var h=E(L);h!==c&&(h<f||(L.score=h,r<s?(y.add(L),++r):(++l,h>y.peek().score&&y.replaceTop(L))))}else for(var g=0;g<v;++g){var d=e[g];if(d&&(M(d)||(d=C(d)),(t&d._bitflags)===t)){var m=z(i,d);m!==c&&(m.score<f||(r<s?(y.add(m),++r):(++l,m.score>y.peek().score&&y.replaceTop(m))))}}if(r===0)return R;for(var q=new Array(r),g=r-1;g>=0;--g)q[g]=y.poll();return q.total=r+l,q},A=(a,e,n)=>{if(typeof e=="function")return D(a,e);if(a===c)return c;e===void 0&&(e="<b>"),n===void 0&&(n="</b>");var i="",t=0,f=!1,s=a.target,r=s.length,l=a._indexes;l=l.slice(0,l.len).sort((g,b)=>g-b);for(var v=0;v<r;++v){var o=s[v];if(l[t]===v){if(++t,f||(f=!0,i+=e),t===l.length){i+=o+n+s.substr(v+1);break}}else f&&(f=!1,i+=n);i+=o}return i},D=(v,e)=>{if(v===c)return c;var n=v.target,i=n.length,t=v._indexes;t=t.slice(0,t.len).sort((b,d)=>b-d);for(var f="",s=0,r=0,l=!1,v=[],o=0;o<i;++o){var g=n[o];if(t[r]===o){if(++r,l||(l=!0,v.push(f),f=""),r===t.length){f+=g,v.push(e(f,s++)),f="",v.push(n.substr(o+1));break}}else l&&(l=!1,v.push(e(f,s++)),f="");f+=g}return v},$=a=>a._indexes.slice(0,a._indexes.len).sort((e,n)=>e-n),X=a=>{typeof a!="string"&&(a="");var e=x(a);return{target:a,_targetLower:e._lower,_targetLowerCodes:e.lowerCodes,_nextBeginningIndexes:c,_bitflags:e.bitflags,score:c,_indexes:[0],obj:c}},G=a=>{typeof a!="string"&&(a=""),a=a.trim();var e=x(a),n=[];if(e.containsSpace){var i=a.split(/\s+/);i=[...new Set(i)];for(var t=0;t<i.length;t++)if(i[t]!==""){var f=x(i[t]);n.push({lowerCodes:f.lowerCodes,_lower:i[t].toLowerCase(),containsSpace:!1})}}return{lowerCodes:e.lowerCodes,bitflags:e.bitflags,containsSpace:e.containsSpace,_lower:e._lower,spaceSearches:n}},C=a=>{if(a.length>999)return X(a);var e=F.get(a);return e!==void 0||(e=X(a),F.set(a,e)),e},H=a=>{if(a.length>999)return G(a);var e=U.get(a);return e!==void 0||(e=G(a),U.set(a,e)),e},Q=(a,e,n)=>{var i=[];i.total=e.length;var t=n&&n.limit||j;if(n&&n.key)for(var f=0;f<e.length;f++){var s=e[f],r=Y(s,n.key);if(r){M(r)||(r=C(r)),r.score=T,r._indexes.len=0;var l=r;if(l={target:l.target,_targetLower:"",_targetLowerCodes:c,_nextBeginningIndexes:c,_bitflags:0,score:r.score,_indexes:c,obj:s},i.push(l),i.length>=t)return i}}else if(n&&n.keys)for(var f=0;f<e.length;f++){for(var s=e[f],v=new Array(n.keys.length),o=n.keys.length-1;o>=0;--o){var r=Y(s,n.keys[o]);if(!r){v[o]=c;continue}M(r)||(r=C(r)),r.score=T,r._indexes.len=0,v[o]=r}if(v.obj=s,v.score=T,i.push(v),i.length>=t)return i}else for(var f=0;f<e.length;f++){var r=e[f];if(r&&(M(r)||(r=C(r)),r.score=T,r._indexes.len=0,i.push(r),i.length>=t))return i}return i},z=(a,e,n=!1)=>{if(n===!1&&a.containsSpace)return O(a,e);for(var i=a._lower,t=a.lowerCodes,f=t[0],s=e._targetLowerCodes,r=t.length,l=s.length,b=0,v=0,o=0;;){var g=f===s[v];if(g){if(N[o++]=v,++b,b===r)break;f=t[b]}if(++v,v>=l)return c}var b=0,d=!1,m=0,E=e._nextBeginningIndexes;E===c&&(E=e._nextBeginningIndexes=w(e.target)),v=N[0]===0?0:E[N[0]-1];var J=0;if(v!==l)for(;;)if(v>=l){if(b<=0||(++J,J>200))break;--b;var Z=W[--m];v=E[Z]}else{var g=t[b]===s[v];if(g){if(W[m++]=v,++b,b===r){d=!0;break}++v}else v=E[v]}var L=e._targetLower.indexOf(i,N[0]),I=~L;if(I&&!d)for(var h=0;h<o;++h)N[h]=L+h;var q=!1;I&&(q=e._nextBeginningIndexes[L-1]===L);{if(d)var k=W,ee=m;else var k=N,ee=o;for(var P=0,ae=0,h=1;h<r;++h)k[h]-k[h-1]!==1&&(P-=k[h],++ae);var ve=k[r-1]-k[0]-(r-1);if(P-=(12+ve)*ae,k[0]!==0&&(P-=k[0]*k[0]*.2),!d)P*=1e3;else{for(var re=1,h=E[0];h<l;h=E[h])++re;re>24&&(P*=(re-24)*10)}I&&(P/=1+r*r*1),q&&(P/=1+r*r*1),P-=l-r,e.score=P;for(var h=0;h<ee;++h)e._indexes[h]=k[h];return e._indexes.len=ee,e}},O=(a,e)=>{for(var n=new Set,i=0,t=c,f=0,s=a.spaceSearches,o=0;o<s.length;++o){var r=s[o];if(t=z(r,e),t===c)return c;i+=t.score,t._indexes[0]<f&&(i-=f-t._indexes[0]),f=t._indexes[0];for(var l=0;l<t._indexes.len;++l)n.add(t._indexes[l])}var v=z(a,e,!0);if(v!==c&&v.score>i)return v;t.score=i;var o=0;for(let g of n)t._indexes[o++]=g;return t._indexes.len=o,t},x=a=>{for(var e=a.length,n=a.toLowerCase(),i=[],t=0,f=!1,s=0;s<e;++s){var r=i[s]=n.charCodeAt(s);if(r===32){f=!0;continue}var l=r>=97&&r<=122?r-97:r>=48&&r<=57?26:r<=127?30:31;t|=1<<l}return{lowerCodes:i,bitflags:t,containsSpace:f,_lower:n}},_=a=>{for(var e=a.length,n=[],i=0,t=!1,f=!1,s=0;s<e;++s){var r=a.charCodeAt(s),l=r>=65&&r<=90,v=l||r>=97&&r<=122||r>=48&&r<=57,o=l&&!t||!f||!v;t=l,f=v,o&&(n[i++]=s)}return n},w=a=>{for(var e=a.length,n=_(a),i=[],t=n[0],f=0,s=0;s<e;++s)t>s?i[s]=t:(t=n[++f],i[s]=t===void 0?e:t);return i},p=()=>{F.clear(),U.clear(),N=[],W=[]},F=new Map,U=new Map,N=[],W=[],fe=a=>{for(var e=T,n=a.length,i=0;i<n;++i){var t=a[i];if(t!==c){var f=t.score;f>e&&(e=f)}}return e===T?c:e},Y=(a,e)=>{var n=a[e];if(n!==void 0)return n;var i=e;Array.isArray(e)||(i=e.split("."));for(var t=i.length,f=-1;a&&++f<t;)a=a[i[f]];return a},M=a=>typeof a=="object",j=1/0,T=-j,R=[];R.total=0;var c=null,se=a=>{var e=[],n=0,i={},t=f=>{for(var s=0,r=e[s],l=1;l<n;){var v=l+1;s=l,v<n&&e[v].score<e[l].score&&(s=v),e[s-1>>1]=e[s],l=1+(s<<1)}for(var o=s-1>>1;s>0&&r.score<e[o].score;o=(s=o)-1>>1)e[s]=e[o];e[s]=r};return i.add=f=>{var s=n;e[n++]=f;for(var r=s-1>>1;s>0&&f.score<e[r].score;r=(s=r)-1>>1)e[s]=e[r];e[s]=f},i.poll=f=>{if(n!==0){var s=e[0];return e[0]=e[--n],t(),s}},i.peek=f=>{if(n!==0)return e[0]},i.replaceTop=f=>{e[0]=f,t()},i},y=se();return{single:u,go:S,highlight:A,prepare:X,indexes:$,cleanup:p}})})(te);var ge=te.exports;const we=ue(ge),be=ne.createContext({});export{be as D,_e as F,he as a,we as f};
