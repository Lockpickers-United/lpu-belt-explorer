import{j as t,r as U,e as B,B as j}from"./index-fa57aaf2.js";import{u as w}from"./useWindowSize-5ebbb683.js";import{A as v,p,b as W}from"./adminChartDefaults-df6169c8.js";import{B as L}from"./nivo-bar.es-c4605e1b.js";import{P as y}from"./nivo-line.es-91cfb6e3.js";import{d as f}from"./dayjs.min-78085a3a.js";import"./TableRow-629c3b68.js";const P=({fullData:n})=>{const l=n.summary,{width:e}=w(),o=e<=360,s=e<=395,c=e<=428,i=e<=560,d=e<=820,r=o?".8rem":s?".85rem":c?".9rem":".95rem",a="100%";return t.jsx(v,{tableData:l,tableWidth:a,fontSize:r})},R=({fullData:n})=>{const l=n.summary.data;let e=[];l.forEach(h=>{let u=new Map;u.id=h.list,u.label=h.list,u.count=h.averageItems,u.value=h.averageItems,e.push(u)});const{width:o}=w(),s=o<=360,c=o<=395,i=o<=428,d=o<=820,r=s?180:c?190:i?200:d?240:250,a={top:0,right:20,bottom:30,left:50},m=["#aeaeae","#0364ac","#0364ac","#0364ac","#0364ac"];return t.jsx("div",{style:{height:r,width:"100%"},children:t.jsx(L,{data:e,margin:a,padding:.15,colors:h=>m[h.index%m.length],animate:!0,enableLabel:!0,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},enableGridY:!1,theme:p,isInteractive:!1})})},T=({lineData:n})=>{const l=[n.listUsers],{width:e}=w(),o=e<=360,s=e<=395,c=e<=428,i=e<=560,d=e<=820,r=o||s?200:c?210:d?230:250,a=i?-45:0,m=i?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:30,left:50};return t.jsx("div",{style:{height:r},children:t.jsx(y,{theme:M,data:l,enableGridX:!1,enableGridY:!1,colors:["#007de2","#16325d"],lineWidth:3,margin:m,height:r,curve:"natural",yScale:{type:"linear",min:0,max:500,stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:a,direction:"row",legendOffset:-12,tickValues:"every week"},legends:[{anchor:"bottom",itemTextColor:"#ddd",direction:"row",justify:!1,translateX:0,translateY:75,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!1})})},D={grid:{line:{stroke:"#333",strokeWidth:1}}},M={...p,...D},C=({lineData:n})=>{const l=[n.ownLocks,n.pickedLocks,n.recordedLocks,n.wishlistLocks],{width:e}=w(),o=e<=360,s=e<=395,c=e<=428,i=e<=560,d=e<=820,r=o?200:s?220:c?230:d?260:290,a=i?-45:0,m={top:10,right:20,bottom:65,left:50},h=["#172072","#2e399b","#444fb2","#5966da"];return t.jsx("div",{style:{height:r,width:"100%"},children:t.jsx(y,{theme:z,data:l,colors:h,enableArea:!0,areaOpacity:1,lineWidth:2,margin:m,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!0,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",enableGridX:!1,enableGridY:!1,axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:a,tickValues:"every week"},legends:[{anchor:"bottom",itemTextColor:"#666",direction:"row",justify:!1,translateX:0,translateY:65,itemsSpacing:6,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!1})})},Y={grid:{line:{stroke:"#333",strokeWidth:1}}},z={...p,...Y},I=({fullData:n})=>{const l=n.listSavesByBelt,{width:e}=w(),o=e<=360,s=e<=395,c=e<=428,i=e<=560,d=e<=820,r=o||s||c?200:d?250:290,a=i?1:2,m={top:0,right:20,bottom:30,left:50};return t.jsx("div",{style:{height:r},children:t.jsx(L,{data:l,keys:["White","Yellow","Orange","Green","Blue","Purple","Brown","Red","Black","Unranked"],indexBy:"list",groupMode:"grouped",margin:m,padding:.1,innerPadding:0,borderRadius:a,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},maxValue:"auto",theme:p,colors:W,animate:!0,enableGridY:!1,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,format:","},isInteractive:!0})})},G=({fullData:n})=>{const l=n.dailyTableData,e=l.data.map(a=>a.date),s=f(e.reduce((a,m)=>m>a?m:a)).subtract(28,"day"),c=[];l.data.map(a=>{f(a.date).isAfter(s)&&c.push(a)});const i=new Map;i.title="",i.columns=l.columns,i.data=c;const d="100%",r=".83rem";return t.jsx("div",{style:{width:"100%"},children:t.jsx(v,{tableData:i,tableWidth:d,fontSize:r})})},O={updatedDateTime:"",timezone:"EST"},A={title:"",columns:[{name:"List Name",align:"left",id:"list"},{name:"Total Users",id:"totalUsers",align:"center"},{align:"center",id:"newUsers",name:"New Users"},{id:"listUsers",align:"center",name:"List Users"},{name:"New List Users",align:"center",id:"newListUsers"},{id:"totalSaves",align:"center",name:"Total Saves"},{id:"newSaves",align:"center",name:"New Saves"},{id:"percentListUsers",align:"center",name:"% List Users"},{align:"center",id:"averageItems",name:"Average Items"}],data:[{list:"All Lists",totalUsers:0,listUsers:0,percentListUsers:"--",totalSaves:0,averageItems:0,newListUsers:0,newUsers:0,newSaves:0},{list:"Own",totalUsers:0,listUsers:0,percentListUsers:"--",totalSaves:0,averageItems:0,newListUsers:0,newUsers:0,newSaves:0},{list:"Picked",totalUsers:0,listUsers:0,percentListUsers:"--",totalSaves:0,averageItems:0,newListUsers:0,newUsers:0,newSaves:0},{list:"Recorded",totalUsers:0,listUsers:0,percentListUsers:"--",totalSaves:0,averageItems:0,newListUsers:0,newUsers:0,newSaves:0},{list:"Wishlist",totalUsers:0,listUsers:0,percentListUsers:"--",totalSaves:0,averageItems:0,newListUsers:0,newUsers:0,newSaves:0}]},H={title:"",data:[{listUsers:0,recordedLocks:0,ownLocks:0,totalSaves:0,pickedLocks:0,ownUsers:0,totalUsers:0,wishlistLocks:0,newUsers:0,wishlistUsers:0,pickedUsers:0,date:"2023-11-19",recordedUsers:0},{listUsers:0,recordedLocks:0,ownLocks:0,totalSaves:0,pickedLocks:0,ownUsers:0,totalUsers:0,wishlistLocks:0,newUsers:0,wishlistUsers:0,pickedUsers:0,date:"2023-01-20",recordedUsers:0}],columns:[{id:"date",name:"Date",align:"left"},{name:"Total Users",align:"center",id:"totalUsers"},{id:"listUsers",name:"List Users",align:"center"},{align:"center",name:"Total Saves",id:"totalSaves"},{align:"center",name:"Owned Users",id:"ownUsers"},{id:"ownLocks",align:"center",name:"Owned Locks"},{id:"pickedUsers",align:"center",name:"Picked Users"},{align:"center",name:"Picked Locks",id:"pickedLocks"},{id:"recordedUsers",name:"Rec. Users",align:"center"},{id:"recordedLocks",name:"Rec. Locks",align:"center"},{name:"Wishlist Users",align:"center",id:"wishlistUsers"},{align:"center",name:"Wishlist Locks",id:"wishlistLocks"},{align:"center",name:"New Users",id:"newUsers"}]},E=[{value:0,label:"White",id:"White",count:0},{label:"Yellow",value:0,id:"Yellow",count:0},{count:0,id:"Orange",value:0,label:"Orange"},{count:0,id:"Green",value:0,label:"Green"},{value:0,label:"Blue",id:"Blue",count:0},{label:"Purple",value:0,count:0,id:"Purple"},{count:0,id:"Brown",value:0,label:"Brown"},{label:"Red",value:0,count:0,id:"Red"},{id:"Black",count:0,value:0,label:"Black"},{count:0,id:"Unranked",value:0,label:"Unranked"}],F=[{Brown:0,list:"Own",Purple:0,Unranked:0,Yellow:0,Green:0,Red:0,Black:0,White:0,Blue:0,Orange:0},{Black:0,White:0,Orange:0,Blue:0,Brown:0,list:"Picked",Purple:0,Unranked:0,Yellow:0,Red:0,Green:0},{Unranked:0,Brown:0,list:"Recorded",Purple:0,Yellow:0,Red:0,Green:0,Black:0,Orange:0,Blue:0,White:0},{White:0,Blue:0,Orange:0,Black:0,Red:0,Green:0,Yellow:0,Purple:0,list:"Wishlist",Brown:0,Unranked:0}],V={metadata:O,summary:A,dailyTableData:H,savesByBelt:E,listSavesByBelt:F},X="https://explore.lpubelts.com/data/statsCollectionsFullAdmin.json";function _(){const[n,l]=U.useState({data:[],metadata:{}}),[e,o]=U.useState(!0);U.useEffect(()=>{(async()=>{try{const b=await(await fetch(X)).json();l(b),o(!1)}catch(g){console.error("Error loading collections data.",g),B("Error loading collections data. Please reload the page.",{autoHideDuration:null,action:t.jsx(j,{color:"secondary",onClick:()=>window.location.reload(),children:"Refresh"})}),o(!1)}})()},[]);const s=e?V:n,c=e?"--":"(updated: "+f(s.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${s.metadata.timezone})`,i=s.dailyTableData.data,r=["listUsers","wishlistLocks","recordedLocks","pickedLocks","ownLocks"].reduce((k,g)=>{const b=i.map(x=>({x:x.date,y:x[g]}));return k[g]={data:b,id:g},k},{}),{width:a}=w(),h=a<560?"8px 8px 32px 8px":"24px 24px 32px 24px",u={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},S={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"};return t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:h,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[t.jsxs("div",{style:S,children:["Collections Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.7rem"},children:c})]}),t.jsx(P,{fullData:s}),t.jsx("div",{style:u,children:"List Users"}),t.jsx(T,{lineData:r}),t.jsx("div",{style:u,children:"List Locks by Date"}),t.jsx(C,{lineData:r}),t.jsx("div",{style:u,children:"Average Items Per List"}),t.jsx(R,{fullData:s}),t.jsx("div",{style:u,children:"List Saves by Belt Ranking"}),t.jsx(I,{fullData:s}),t.jsx("div",{style:u,children:"Last 28 Days"}),t.jsx(G,{fullData:s})]})}export{_ as default};
