import{r as t,K as W,M as D,j as e,u as E,G as I,I as F,B as O,aa as $,a2 as z,V as H,R as q,a8 as L}from"./index-2f74fa4d.js";import{F as B,D as G}from"./filterFields-a74b63a5.js";import"./index-acbcfb9a.js";import{F as K,I as J,S as Q}from"./Select-25a368f7.js";import{B as U}from"./Box-f8da229c.js";import{C as X,I as M}from"./Chip-41ba8fb4.js";import{d as R}from"./Search-5ce2cd11.js";import{B as Y}from"./Badge-8b1ac65f.js";import{T as Z}from"./TextField-f6d4d801.js";function N(l,o){const[u,i]=t.useState(l);return t.useEffect(()=>{const h=setTimeout(()=>i(l),o||500);return()=>{clearTimeout(h)}},[l,o]),u}const k={safelocksOwn:"Own",safelockCracked:"Cracked",safelockWishlist:"Wishlist",shippingSplit:"Shipping included",shippingNotSplit:"Winner may pay shipping"};var _={},ee=D;Object.defineProperty(_,"__esModule",{value:!0});var P=_.default=void 0,te=ee(W()),re=e;P=_.default=(0,te.default)((0,re.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll");function Ce({forceText:l}){const{isMobile:o}=E(),{filterCount:u,clearFilters:i}=t.useContext(B);return u===0?null:o&&!l?e.jsx(I,{title:"Clear Filters",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{onClick:i,children:e.jsx(P,{})})}):e.jsx(O,{variant:"outlined",color:"inherit",onClick:i,style:{minWidth:120,marginRight:8},children:"ClearÂ Filters"})}function ge({label:l,fieldName:o,onFilter:u,sort:i,tab:h}){const{visibleEntries:m}=t.useContext(G),{filters:j}=t.useContext(B),c=t.useMemo(()=>h==="search"||!h?m:m.filter(s=>s.simpleBelt===h),[h,m]),[g,d]=t.useState(!1),p=t.useCallback(s=>{d(!1),setTimeout(()=>u(o,s.target.value,!0),0),setTimeout(()=>document.activeElement.blur())},[o,u]),y=t.useCallback(()=>{d(!1),setTimeout(()=>document.activeElement.blur())},[]),b=t.useCallback(()=>d(!0),[]),{counts:f,options:x}=t.useMemo(()=>{const s=c.map(n=>n[o]).flat().filter(n=>n),a=s.reduce((n,r)=>(n[r]||(n[r]=0),n[r]++,n),{}),T=[...new Set(s)].sort((n,r)=>{if(i)return i(n,r);if(typeof n=="string"&&typeof r=="string")return n.localeCompare(r);if(Number.isInteger(n)&&Number.isInteger(r))return n-r});return{counts:a,options:T}},[c,o,i]),v=t.useDeferredValue(j),C=v[o],S=Array.isArray(C)?v[o]:C?[C]:[];return e.jsxs(K,{style:{minWidth:120,maxWidth:300,marginTop:8},fullWidth:!0,children:[e.jsx(J,{id:`filter-${o}`,color:"secondary",children:l}),e.jsx(Q,{multiple:!0,label:l,labelId:`filter-${o}`,value:S,onChange:p,style:{marginBottom:0},color:"secondary",open:g,onClose:y,onOpen:b,onBlur:y,MenuProps:{PaperProps:{style:{maxHeight:se*8+ne}}},renderValue:s=>e.jsx(U,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.map(a=>e.jsx(X,{label:k[a]?k[a]:a},a))}),children:x.map((s,a)=>e.jsx($,{value:s,children:k[s]?k[s]:s+` (${f[s]||0})`},a))})]})}const se=48,ne=8;var w={},oe=D;Object.defineProperty(w,"__esModule",{value:!0});var V=w.default=void 0,ie=oe(W()),le=e;V=w.default=(0,ie.default)((0,le.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function ve({label:l,extraFilters:o=[],keepOpen:u}){const[i]=z(),{filters:h,addFilters:m,removeFilter:j}=t.useContext(B),[c,g]=t.useState(h.search||""),{isMobile:d}=E(),p=t.useRef();H("s",()=>{var r;return(r=p==null?void 0:p.current)==null?void 0:r.focus()},{preventDefault:!0});const y=t.useCallback(()=>{window.scrollTo({top:0}),g(""),j("search",""),p.current.focus()},[j]),b=t.useCallback(r=>{const{value:A}=r.target;g(A)},[]),f=N(c,250).replaceAll("	"," ");t.useEffect(()=>{f!==i.get("search")&&(f?(window.scrollTo({top:0}),m([{key:"search",value:f},{key:"id",value:void 0},{key:"name",value:void 0},...o],!0)):m([{key:"search",value:f}],!0))},[f]);const[x,v]=t.useState(!1),C=t.useCallback(()=>setTimeout(()=>v(!1),0),[]),S=t.useCallback(()=>{v(!0),setTimeout(()=>{p.current.focus(),p.current.select()},0)},[]);t.useEffect(()=>{const r=i.get("search");r!==c&&g(r||"")},[i]);const s=c?e.jsx(M,{position:"end",children:e.jsx(I,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:y,edge:"end",size:"small",children:e.jsx(V,{})})})}):null,a=d?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},T=x&&d?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},n=c?"secondary":"inherit";return e.jsxs(q.Fragment,{children:[!x&&d&&!u&&e.jsx(I,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:S,children:e.jsx(Y,{invisible:c.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(R,{})})})}),(x||!d||u)&&e.jsx(Z,{placeholder:`Search ${l}`,InputProps:{inputProps:{ref:p},startAdornment:e.jsx(M,{position:"start",children:e.jsx(R,{color:n})}),endAdornment:s},variant:"standard",color:"secondary",onChange:b,onBlur:C,value:c,style:{...a,...T},fullWidth:!0}),e.jsx(L,{invisible:!0,open:x&&d,onClick:C})]})}export{Ce as C,ge as F,ve as S,k as f};
