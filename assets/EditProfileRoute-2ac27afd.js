import{k as N,h as _,s as m,x as g,_ as v,a4 as C,ai as I,aj as M,r,l as D,m as E,j as t,o as F,p as A,c as O,i as U,J as S,u as q,X as $,e as j,a0 as R,a1 as P,T as V,I as W,a2 as z,b as L,S as H,R as w,N as X,K as Y,O as Z}from"./index-cfa60cf7.js";import{l as J}from"./LPU-c3fa7122.js";import{C as K}from"./CopyProfileLinkButton-61e7d87c.js";import{T as G}from"./TextField-b2a25dfe.js";import{S as Q}from"./SwitchBase-6e589e14.js";import{L as aa}from"./LinearProgress-f96028ce.js";import"./Link-559f4757.js";import"./InputLabel-31fe7c60.js";function ta(a){return _("MuiSwitch",a)}const ea=N("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),s=ea,oa=["className","color","edge","size","sx"],sa=a=>{const{classes:e,edge:o,size:n,color:i,checked:x,disabled:h}=a,c={root:["root",o&&`edge${g(o)}`,`size${g(n)}`],switchBase:["switchBase",`color${g(i)}`,x&&"checked",h&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},b=A(c,ta,e);return v({},e,b)},ra=m("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:o}=a;return[e.root,o.edge&&e[`edge${g(o.edge)}`],e[`size${g(o.size)}`]]}})(({ownerState:a})=>v({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},a.edge==="start"&&{marginLeft:-8},a.edge==="end"&&{marginRight:-8},a.size==="small"&&{width:40,height:24,padding:7,[`& .${s.thumb}`]:{width:16,height:16},[`& .${s.switchBase}`]:{padding:4,[`&.${s.checked}`]:{transform:"translateX(16px)"}}})),ia=m(Q,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(a,e)=>{const{ownerState:o}=a;return[e.switchBase,{[`& .${s.input}`]:e.input},o.color!=="default"&&e[`color${g(o.color)}`]]}})(({theme:a})=>({position:"absolute",top:0,left:0,zIndex:1,color:a.vars?a.vars.palette.Switch.defaultColor:`${a.palette.mode==="light"?a.palette.common.white:a.palette.grey[300]}`,transition:a.transitions.create(["left","transform"],{duration:a.transitions.duration.shortest}),[`&.${s.checked}`]:{transform:"translateX(20px)"},[`&.${s.disabled}`]:{color:a.vars?a.vars.palette.Switch.defaultDisabledColor:`${a.palette.mode==="light"?a.palette.grey[100]:a.palette.grey[600]}`},[`&.${s.checked} + .${s.track}`]:{opacity:.5},[`&.${s.disabled} + .${s.track}`]:{opacity:a.vars?a.vars.opacity.switchTrackDisabled:`${a.palette.mode==="light"?.12:.2}`},[`& .${s.input}`]:{left:"-100%",width:"300%"}}),({theme:a,ownerState:e})=>v({"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.activeChannel} / ${a.vars.palette.action.hoverOpacity})`:C(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${s.checked}`]:{color:(a.vars||a).palette[e.color].main,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:C(a.palette[e.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${s.disabled}`]:{color:a.vars?a.vars.palette.Switch[`${e.color}DisabledColor`]:`${a.palette.mode==="light"?I(a.palette[e.color].main,.62):M(a.palette[e.color].main,.55)}`}},[`&.${s.checked} + .${s.track}`]:{backgroundColor:(a.vars||a).palette[e.color].main}})),na=m("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(a,e)=>e.track})(({theme:a})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:a.transitions.create(["opacity","background-color"],{duration:a.transitions.duration.shortest}),backgroundColor:a.vars?a.vars.palette.common.onBackground:`${a.palette.mode==="light"?a.palette.common.black:a.palette.common.white}`,opacity:a.vars?a.vars.opacity.switchTrack:`${a.palette.mode==="light"?.38:.3}`})),ca=m("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(a,e)=>e.thumb})(({theme:a})=>({boxShadow:(a.vars||a).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),la=r.forwardRef(function(e,o){const n=D({props:e,name:"MuiSwitch"}),{className:i,color:x="primary",edge:h=!1,size:c="medium",sx:b}=n,f=E(n,oa),l=v({},n,{color:x,edge:h,size:c}),d=sa(l),u=t.jsx(ca,{className:d.thumb,ownerState:l});return t.jsxs(ra,{className:F(d.root,i),sx:b,ownerState:l,children:[t.jsx(ia,v({type:"checkbox",icon:u,checkedIcon:u,ref:o,ownerState:l},f,{classes:v({},d,{root:d.switchBase})})),t.jsx(na,{className:d.track,ownerState:l})]})}),da=la;var y={},ua=U;Object.defineProperty(y,"__esModule",{value:!0});var T=y.default=void 0,pa=ua(O()),ha=t;T=y.default=(0,pa.default)((0,ha.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");function ga(){const{lockCollection:a,updateProfileVisibility:e}=r.useContext(S),[o,n]=r.useState(a.displayName||""),[i,x]=r.useState(!!a.public),h=q(),{user:c}=r.useContext($),b=r.useCallback(p=>{const{value:k}=p.target;n(k)},[]),f=r.useCallback(p=>{const{checked:k}=p.target;x(k)},[]),l=r.useCallback(p=>p.target.select(),[]),d=r.useCallback(async()=>{try{await e(i,o),j("Updated profile."),h(`/profile/${c.uid}`)}catch(p){console.error("Error while updating profile",p),j("Error while updating profile.")}},[h,o,e,c==null?void 0:c.uid,i]),u=i&&!va.test(o),B=u?o.length===0?"Public profiles must have a display name.":"Display name must only include A-Z, 0-9, _ and -.":i===!0?`Your profile will be public, as ${o}.`:"Your profile will be private";return t.jsxs(R,{style:{maxWidth:350,marginLeft:"auto",marginRight:"auto",marginTop:16,marginButtom:16},children:[t.jsx(P,{title:"Edit Profile",action:t.jsx(V,{title:"Save",arrow:!0,disableFocusListener:!0,children:t.jsx(W,{onClick:d,disabled:u,children:t.jsx(T,{color:u?void 0:"success"})})})}),t.jsxs(z,{children:[t.jsx(L,{children:"Set a display name for your profile. Public profiles can be shared and show nicknames on the leaderboard."}),t.jsx("br",{}),t.jsxs(H,{direction:"row",children:[t.jsx(G,{error:u,fullWidth:!0,variant:"outlined",color:"secondary",label:"Display Name",helperText:B,value:o||"",onChange:b,onFocus:l,inputProps:{maxLength:32}}),t.jsxs("div",{style:{textAlign:"center",width:100},children:[i?"Public":"Private",t.jsx(da,{checked:i,color:"secondary",onChange:f})]})]})]})]})}const va=/^[\sa-zA-Z0-9_-]{1,32}$/;function xa(){const a={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(R,{style:a,children:[t.jsx(P,{title:"Log In!"}),t.jsx(z,{children:t.jsx(L,{variant:"h6",align:"center",children:"You must be logged in to edit your profile."})})]})}function Sa(){const{authLoaded:a,isLoggedIn:e}=r.useContext($),{dbLoaded:o}=r.useContext(S),n=t.jsx(w.Fragment,{children:t.jsx(K,{})});return t.jsxs(w.Fragment,{children:[t.jsx(X,{title:"Edit Profile",extras:n}),(!a||!o)&&t.jsxs(w.Fragment,{children:[t.jsx(aa,{variant:"indeterminate",color:"secondary"}),t.jsx("img",{alt:"Loading",src:J,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),a&&!e&&t.jsx(xa,{}),a&&e&&o&&t.jsx(ga,{}),t.jsx(Y,{}),t.jsx(Z,{feature:"editprofile"})]})}export{Sa as default};
