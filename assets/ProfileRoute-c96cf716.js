import{ai as C,r as u,X as D,u as A,j as t,T as z,I as G,aj as O,R as y,a0 as E,a2 as P,b as I,a3 as Y,B as V,a1 as W,J as q,N as J,K,O as X}from"./index-f302fb5f.js";import{B as _,D as H,j as Q,u as Z,L as $,I as tt,k as et,S as it,f as st,d as ot,l as nt,g as at,h as rt,i as dt}from"./sortFields-cdde3327.js";import{C as lt,E as ct,b as ht,T as xt,D as pt}from"./data-141d9bf1.js";import{u as mt,L as ut}from"./useData-45b8e819.js";import{u as j}from"./useWindowSize-09fa7587.js";import{C as gt}from"./CopyProfileLinkButton-67762987.js";import"./dayjs.min-4595a5e2.js";import{B as N}from"./nivo-bar.es-7bf017df.js";import{p as U}from"./chartDefaults-e88ecc0b.js";import"./ImageViewer-4bde30c3.js";import"./Link-f6ebe773.js";import"./LinearProgress-f3c833be.js";import"./Search-3bb76a9b.js";import"./InputLabel-2de2245d.js";import"./Sort-2a140b09.js";import"./TextField-4b76c8a5.js";import"./index-d53e5bf3.js";import"./index-49079771.js";import"./LPU-c3fa7122.js";import"./nivo-legends.es-2f3a245c.js";function wt(){const{userId:e}=C(),{user:r}=u.useContext(D),o=A(),h=u.useCallback(()=>{o("/profile/edit")},[o]);return e!==(r==null?void 0:r.uid)?null:t.jsx(z,{title:"Edit Profile",arrow:!0,disableFocusListener:!0,children:t.jsx(G,{onClick:h,children:t.jsx(O,{})})})}const ft="/assets/mycollection-8a0b4848.png";function jt(){const{user:e}=u.useContext(D),{userId:r}=C(),o=A(),{isMobile:h}=j(),n=h?{marginTop:-32,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:-32,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},a=r===(e==null?void 0:e.uid),d=a?t.jsxs(y.Fragment,{children:[t.jsxs("span",{children:["There are no locks in your collection.",t.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you own, picked, recorded, or wish to buy.',t.jsx("br",{})]}),t.jsx("img",{alt:"My Collection",src:ft})]}):"There are no locks in this collection.",g=a?"Explore":"Go Home",i=u.useCallback(()=>{o("/locks")},[o]);return t.jsx(_,{alignContent:"center",children:t.jsxs(E,{style:n,children:[t.jsx(P,{children:t.jsx(I,{variant:"h6",align:"center",children:d})}),t.jsxs(Y,{children:[t.jsx("div",{style:{width:"100%"}}),t.jsx(V,{variant:"outlined",color:"secondary",onClick:i,style:{whiteSpace:"nowrap"},children:g})]})]})})}function bt(){const e={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(E,{style:e,children:[t.jsx(W,{title:"Profile Not Found!"}),t.jsx(P,{children:t.jsx(I,{variant:"h6",align:"center",children:"This profile was not found."})})]})}function vt({lockCollection:e,userText:r,collectionBarHeight:o}){const h=e.own?e.own.length:0,n=e.picked?e.picked.length:0,a=e.recorded?e.recorded.length:0,d=e.wishlist?e.wishlist.length:0,i=h+n+a+d?{own:h,picked:n,recorded:a,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},x={own:250,picked:280,recorded:260,wishlist:100},p={own:Math.min(s.own,i.own),picked:Math.min(s.picked,i.picked),recorded:Math.min(s.recorded,i.recorded),wishlist:Math.min(s.wishlist,i.wishlist)},w={own:i.own>s.own?0:s.own-p.own,picked:i.picked>s.picked?0:s.picked-p.picked,recorded:i.recorded>s.recorded?0:s.recorded-p.recorded,wishlist:i.wishlist>s.wishlist?0:s.wishlist-p.wishlist},m={own:2,picked:2,recorded:2,wishlist:2},b={own:Math.max(i.own-(p.own+w.own+m.own),0),picked:Math.max(i.picked-(p.picked+w.picked+m.picked),0),recorded:Math.max(i.recorded-(p.recorded+w.recorded+m.recorded),0),wishlist:Math.max(i.wishlist-(p.wishlist+w.wishlist+m.wishlist),0)},B={own:Math.min(x.own-i.own,x.own-s.own-m.own),picked:Math.min(x.picked-i.picked,x.picked-s.picked-m.picked),recorded:Math.min(x.recorded-i.recorded,x.recorded-s.recorded-m.recorded),wishlist:Math.min(x.wishlist-i.wishlist,x.wishlist-s.wishlist-m.wishlist)},v=["own","picked","recorded","wishlist"],f=v.map((l,c)=>({row:v[c],"Average A":p[l],"Average B":w[l],Average:m[l],USER:b[l],"Top 10":B[l]})),{width:F}=j(),R=F<=560,S=o,M=R?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},T=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],k=e?[{title:r,color:"#3c90c5",width:"14px"}]:[];k.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const L=({items:l})=>t.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[t.jsx("div",{style:{width:"100%"}}),l.map(c=>t.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[t.jsx("div",{style:{backgroundColor:c.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),t.jsx("div",{style:{textAlign:"left",width:c.width},children:c.title})]},c.title)),t.jsx("div",{style:{width:"100%"}})]});return t.jsxs(y.Fragment,{children:[t.jsx("div",{style:{height:S},children:t.jsx(N,{data:f,keys:["Average A","Average B","Average","USER","Top 10"],theme:U,indexBy:"row",margin:M,padding:.2,valueScale:{type:"linear"},colors:T,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),t.jsx(L,{items:k})]})}function kt({beltData:e}){const{width:r}=j(),o=r<=360,h=r<=560,n=o?190:h?200:175,a=h?{top:0,right:20,bottom:50,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],g=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return t.jsxs("div",{style:{height:n,padding:"0px 8px 0px 8px",width:"100%"},children:[t.jsx(N,{data:e,margin:a,padding:.15,colors:i=>d[i.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:U,isInteractive:!1,enableLabel:!0,label:i=>i.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:i=>g[i.index%g.length]}),t.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function yt({profile:e}){const{userId:r}=C(),{user:o}=u.useContext(D),h=e,n=r===(o==null?void 0:o.uid)?"You":"User",a=r===(o==null?void 0:o.uid)?"Your Collection Stats":"Collection Stats",{getEntryFromId:d}=u.useContext(H),g=u.useMemo(()=>Q(e),[e]),i=Z.concat("Unranked"),s=new Map;i.forEach(l=>{s[l]=0,s.Unranked=0}),g.forEach(l=>{let c=d(l).belt;c.includes("Black")&&(c="Black"),s[c]++});let x=[];i.forEach(l=>{let c=new Map;c.label=l,c.id=l,c.count=s[l],c.value=s[l],x.push(c)});const{isMobile:p}=j(),w=p?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:m}=j(),b=m<=360,B=m<=395,v=m<=428,f=m<=560,S={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...f?{}:{display:"flex"}},M=f?"100%":"50%",T=f?"100%":"50%",k=b?200:f?210:180,L=170;return t.jsxs(E,{style:w,sx:{paddingBottom:0,paddingTop:"20px"},children:[t.jsx(W,{title:a}),t.jsx(P,{style:{paddingTop:0,paddingLeft:8},children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:S,children:[t.jsx("div",{style:{width:M,verticalAlign:"top",height:k},children:t.jsx(vt,{lockCollection:h,userText:n,collectionBarHeight:170})}),t.jsx("div",{style:{width:T,height:L,marginTop:"0px"},children:t.jsx(kt,{beltData:x})})]})})})]})}function Ct({profile:e}){const{compact:r,expanded:o,setExpanded:h}=u.useContext($),{visibleEntries:n=[]}=u.useContext(H),a=u.useDeferredValue(o);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(yt,{profile:e}),t.jsx(tt,{profile:e}),r?t.jsx(lt,{entries:n}):n.map(d=>t.jsx(ct,{entry:d,expanded:d.id===a,onExpand:h},d.id))]})}function Vt(){const{userId:e}=C(),{getProfile:r}=u.useContext(q),{isMobile:o}=j(),h=u.useCallback(async()=>{try{return await r(e)}catch(x){return console.error("Error loading profile.",x),null}},[r,e]),{data:n={},loading:a,error:d}=mt({loadFn:h}),g=u.useMemo(()=>{if(a||!n)return[];const x=new Set(et.flatMap(({key:p})=>n[p]));return ht.filter(p=>x.has(p.id))},[n,a]),i=t.jsxs(y.Fragment,{children:[t.jsx(it,{label:"Collection"}),t.jsx(st,{}),t.jsx(ot,{sortValues:nt}),!o&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(xt,{}),t.jsx(wt,{}),t.jsx(gt,{})]}),s=a?"Loading...":"Profile";return t.jsx(y.Fragment,{children:t.jsx(at,{filterFields:rt,children:t.jsx(pt,{allEntries:g,profile:n,children:t.jsxs(dt,{children:[t.jsx(J,{title:s,extras:i}),a&&t.jsx(ut,{}),!a&&n&&!d&&t.jsx(Ct,{profile:n}),!a&&n&&!d&&g.length===0&&t.jsx(jt,{}),!a&&(!n||d)&&t.jsx(bt,{}),t.jsx(K,{}),t.jsx(X,{feature:"profile"})]})})})})}export{Vt as default};
