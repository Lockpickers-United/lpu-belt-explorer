import{r as t,O as z,P as D,j as e,a4 as E,F as A,u as q,X as M,R as O,J as C,I as j,aa as V}from"./index-5c5643ce.js";import{d as b,I as k}from"./Search-fecd3725.js";import{B as L}from"./Sort-0b519162.js";import{T as $}from"./TextField-d241c981.js";function H(a,l){const[u,n]=t.useState(a);return t.useEffect(()=>{const d=setTimeout(()=>n(a),l||500);return()=>{clearTimeout(d)}},[a,l]),u}var x={},J=D;Object.defineProperty(x,"__esModule",{value:!0});var T=x.default=void 0,X=J(z()),G=e;T=x.default=(0,X.default)((0,G.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function Y({label:a,extraFilters:l=[],keepOpen:u}){const[n]=E(),{addFilters:d,removeFilter:f,isFiltered:p}=t.useContext(A),[i,m]=t.useState(n.get("search")||""),{isMobile:c,width:S}=q(),y=S<=500,r=t.useRef();M("s",()=>{var o;return(o=r==null?void 0:r.current)==null?void 0:o.focus()},{preventDefault:!0});const w=t.useCallback(()=>{window.scrollTo({top:0}),m(""),f("search",""),r.current.focus()},[f]),R=t.useCallback(o=>{const{value:W}=o.target;m(W)},[]),s=H(i.replaceAll("	"," "),250);t.useEffect(()=>{s&&s!==n.get("search")?s?(window.scrollTo({top:0}),d([{key:"search",value:s},{key:"id",value:void 0},{key:"name",value:void 0},...l],!0)):(console.log("SearchBox: debounceText is empty"),d([{key:"search",value:s}],!0)):s||f("search","")},[s]);const[h,g]=t.useState(!1),v=t.useCallback(()=>setTimeout(()=>g(!1),0),[]),F=t.useCallback(()=>{g(!0),setTimeout(()=>{r.current.focus(),r.current.select()},0)},[]);t.useEffect(()=>{const o=n.get("search");o!==i&&m(o||"")},[n]);const B=i?e.jsx(k,{position:"end",children:e.jsx(C,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:w,edge:"end",size:"small",children:e.jsx(T,{})})})}):null,I=c?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},_=h&&c?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},P=i?"secondary":"inherit";return e.jsxs(O.Fragment,{children:[!h&&c&&!u&&!p&&e.jsx(C,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:F,children:e.jsx(L,{invisible:i.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(b,{})})})}),(h||!c||u||p)&&e.jsx($,{placeholder:y?a:`Search ${a}`,InputProps:{inputProps:{ref:r},startAdornment:e.jsx(k,{position:"start",children:e.jsx(b,{color:P})}),endAdornment:B},variant:"standard",color:"secondary",onChange:R,onBlur:v,value:i,style:{...I,..._},fullWidth:!0}),e.jsx(V,{invisible:!0,open:h&&c,onClick:v})]})}export{Y as S};
