const A=(o,a)=>{if(!o||Object.keys(o).length===0)return a;if(!a||a.length===0)return[];const m=(r,n)=>{const t=String(n??""),l=t.startsWith("!"),s=l?t.slice(1):t,e=s.includes("||"),i=!e&&s.includes("@@"),u=e?"||":i?"@@":null,h=u?s.split(u).filter(Boolean):[s].filter(Boolean);return{key:r,values:h,negative:l,operator:e?"OR":"AND"}},p=Object.keys(o).map(r=>{const n=o[r];return Array.isArray(n)?n.map(t=>m(r,t)):m(r,n)}).flat();return a.filter(r=>p.every(({key:n,values:t,negative:l,operator:s})=>{const e=r[n],i=c=>Array.isArray(e)?e.includes(c):e===c,u=t.some(c=>i(c)),h=t.every(c=>i(c)),y=s==="OR"?u:h;return l?!y:y}))};export{A as f};
