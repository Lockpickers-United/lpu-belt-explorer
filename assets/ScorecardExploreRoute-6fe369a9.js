import{r as i,au as I,j as e,u as q,R as E,aj as z,b as re,F as Y,$ as se,J as O,I as R,ac as oe,d as T,as as le,bN as ae,bO as ne,D as ie,N as ce,e as de,a0 as ue,h as pe,T as me}from"./index-f0bdc3cd.js";import{L as he}from"./LoadingDisplay-d367427b.js";import{u as fe}from"./useData-7b1cca84.js";import{u as xe}from"./usePageTitle-5a257ee2.js";import{_ as be,d as ge,a as ke,l as ye}from"./lockStats-ea6e2a0c.js";import{b as je,c as Ce,p as Be,a as ve,s as Se,d as Ae,k as we}from"./dataUrls-29853cf3.js";import{E as Pe}from"./ErrorMessage-3e4a4aa9.js";import{b as M,a as Le}from"./chartDefaults-270235e0.js";import{L as U}from"./Link-86bf8210.js";import{D as J,f as Ue}from"./DataContext-d5eda213.js";import{r as W}from"./index-3c7962f5.js";import{e as N}from"./entryName-4fe5728d.js";import{a as K,b as D,c as V,d as H,T as De,e as $}from"./TableRow-831e4fff.js";import{V as ze}from"./ViewFilterButtons-2d73a3f4.js";import{b as Ee}from"./sortFields-b1bde6f9.js";import{F as Fe,I as Ie,S as Me}from"./Select-4669c7f1.js";import{C as Oe}from"./Collapse-21f78dcc.js";import{b as Re}from"./filterFields-62f3bbd8.js";import{c as Te}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-4b778bb5.js";import"./useDocumentTitle-6bd3e04c.js";import"./nivo-legends.es-d3f374c9.js";import"./index-f9973c89.js";import"./line-9f45db8b.js";import"./Sort-739edfbd.js";import"./Chip-d1271a66.js";import"./FilterAlt-059a719a.js";import"./Box-e3c949a7.js";import"./LockListContext-e3549ff9.js";import"./ToggleButtonGroup-9553576d.js";import"./Cancel-834efef3.js";import"./rankingRequestData-d3ef79e5.js";const We={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},Ne={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},w={discord:We,reddit:Ne};function Ve({data:o}){const{scorecardStats:p}=o,{userCounts:s}=p,c=w.reddit.Total-s.totalUsers,u=i.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:s.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:c}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},x={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:s.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:s.totalUsers-s.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},F={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:s.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:s.scorecardUsers-s.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},Q={parent:"Scorecard Users",data:Object.keys(s.belts).sort((n,k)=>I(n,k)).map(n=>({id:n,label:n,value:s.belts[n]})),colors:M,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},X={parent:"Imported Belts",data:Object.keys(s.dans).sort((n,k)=>parseInt(n)-parseInt(k)).map(n=>({id:G(n),label:G(n),value:s.dans[n]})),colors:He,description:"Dan Breakdown"},Z={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:w.discord.Total},{id:"Reddit",label:"Reddit",value:w.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},ee={parent:"Other LPU Pickers",data:Object.keys(w.reddit).filter(n=>n!=="Total").sort((n,k)=>I(n,k)).map(n=>{const k=n==="Black"?"Black Belt":n;return{id:k,label:k,value:w.reddit[n]}}),colors:M,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(U,{onClick:()=>b("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-10},te={parent:"Other LPU Pickers",data:Object.keys(w.discord).filter(n=>n!=="Total").sort((n,k)=>I(n,k)).map(n=>{const k=n==="Black"?"Black Belt":n;return{id:k,label:k,value:w.discord[n]}}),colors:M,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(U,{onClick:()=>b("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-10};return{pickerData:t,"LPUbelts Users":x,"Scorecard Users":F,"Imported Belts":Q,Black:X,"Other LPU Pickers":Z,Reddit:ee,Discord:te}},[c,s]),[d,b]=i.useState("pickerData"),v=u[d].data,h=u[d].data.reduce((t,x)=>t+x.value,0),y=i.useCallback(t=>{u[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",b(t.id)},200))},[u]),P=i.useCallback(()=>{b(u[d].parent)},[u,d]),f=i.useCallback((t,x)=>{u[t.id]&&(x.currentTarget.style.cursor="pointer")},[u]),{width:j}=q(),S=j<=360,B=j<=395,A=j<=428,g=j<=560,L={top:30,right:0,bottom:30,left:0};let m=320;S?m=175:B?m=180:A?m=230:g&&(m=240);const l="1.0rem",C=g?5:4,a=g?10:8,r=g?0:8;return e.jsxs(E.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:u[d].description}),e.jsxs("div",{style:{height:m,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(be,{data:v,theme:Le,colors:u[d].colors,margin:L,startAngle:u[d].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:C,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/h*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:r,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:a,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{y(t)},onMouseEnter:(t,x)=>{f(t,x)},tooltip:t=>{const x=(t.datum.arc.angleDeg>C,t.datum.label+": "),F=t.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:g?"none":"block"},children:e.jsxs("div",{children:[x,F]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:m/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:u[d].parent&&e.jsx(U,{onClick:P,style:{color:"#ccc",cursor:"pointer",fontSize:l},children:"back"})})]},"pickPie")]})}function G(o){const p=["st","nd","rd","th"];return o+""+p[Math.min(4,parseInt(o))-1]}const He=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function $e({value:o="Unranked"}){const s={width:4,height:"100%",position:"relative",left:0,top:0,backgroundColor:z[o]?z[o].color:o.includes("Dan")?"#769e49":"",padding:0},{lineColor:c}=z[o]||{},u=i.useMemo(()=>{const[d]=o.match(/\d/)||[0],b=+d;if(b>1)return Array(b).fill(0).map((v,h)=>e.jsx("div",{style:{width:4,height:2,position:"relative",left:0,top:8+h*3,backgroundColor:c}},h))},[o,c]);return o==="Unranked"?null:e.jsx("div",{style:{height:"100%",padding:0},children:e.jsx("div",{style:s,children:u})})}const Ge=E.memo($e);function _({entry:o,index:p,collapse:s=!1}){const c=re(),d=N(o).replace(/[\s/]/g,"_").replace(/\W/g,""),b=i.useCallback(h=>{const y=`/locks?tab=search&search=${h.id}&id=${h.id}&name=${d}`;c(y)},[c,d]),v=o.belt==="Unranked"?"#bbb":"#fff";return e.jsxs(K,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[e.jsx(D,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:e.jsx(Ge,{value:o.belt})}),e.jsx(D,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:e.jsx(U,{onClick:()=>b(o),style:{color:v},children:N(o)})})}),e.jsx(D,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:o.currentPicks})]},p)}function _e(){var C;const{visibleEntries:o=[]}=i.useContext(J),{filters:p,addFilter:s}=i.useContext(Y),{userBelt:c="All Belts",sort:u}=p,[d,b]=i.useState(u);i.useEffect(()=>{b(!!u)},[u]);const v=60;let h=((C=o.find(a=>a.displayRank===v))==null?void 0:C.currentPicks)||0;h=h>2?h:0;const y=i.useMemo(()=>o.filter(a=>a.currentPicks>=h),[o,h]),P=i.useMemo(()=>o.filter(a=>a.currentPicks<h),[o,h]),f=i.useMemo(()=>["All Belts",...se],[]),j=i.useCallback(()=>{const a=f.findIndex(t=>t===c),r=a<f.length-1?a+1:0;s("userBelt",f[r],!0)},[s,f,c]),S=i.useCallback(()=>{const a=f.findIndex(t=>t===c),r=a>0?a-1:f.length-1;s("userBelt",f[r],!0)},[s,f,c]),[B,A]=i.useState(!1),g=i.useCallback(()=>A(!1),[]),L=i.useCallback(()=>A(!0),[]),m=i.useCallback(a=>{s("userBelt",a.target.value,!0),g()},[s,g]),l=i.useCallback(()=>{b(!d)},[d]);return e.jsxs(E.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(O,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:S,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ge,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(Fe,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(Ie,{style:{color:"#bbb"},children:"User Belt"}),e.jsx(Me,{id:"beltSelect",value:c||"All Belts",label:"Brand",open:B,onClose:g,onOpen:L,onChange:m,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:f.map((a,r)=>e.jsx(oe,{value:f[r],children:f[r]},r))})]})}),e.jsx(O,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:j,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ke,{})})})]})}),e.jsx(ze,{sortValues:Ee,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(V,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(H,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(De,{children:e.jsxs(K,{style:{padding:"0px",fontWeight:700},children:[e.jsx(D,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(D,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx($,{children:y.map((a,r)=>e.jsx(_,{entry:a,index:r},r))})]})}),e.jsx(Oe,{in:!!d,timeout:"auto",unmountOnExit:!0,children:e.jsx(V,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(H,{style:{backgroundColor:"#1c1c1c"},children:e.jsx($,{children:P.map((a,r)=>e.jsx(_,{entry:a,index:r},r))})})})})]})}),P.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(U,{onClick:l,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!d&&"Show More"||"Show Less"})})})]})}function qe({data:o}){const{width:p}=q(),c=p<560?"8px 8px 32px 8px":"24px 24px 32px 24px",u={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},d={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:c,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:d,children:"User Drilldown"}),e.jsx(Ve,{data:o}),e.jsx("div",{style:u,children:"Scorecard Locks"}),e.jsx(_e,{data:o})]})}function Ye({children:o,allEntries:p,scorecardEntries:s,profile:c}){const{filters:u}=i.useContext(Y),{search:d,id:b,tab:v,name:h,sort:y,image:P,expandAll:f,...j}=u,{userBelt:S}=j,B=i.useCallback(m=>p.find(l=>l.id===m),[p]),A=i.useMemo(()=>Object.keys(s).map(m=>{var C,a,r;const l=B(m);return l?{...s[m],userBelt:Object.keys(s[m].scorecardPicks),currentPicks:s[m].scorecardPicks[S||"All Belts"],...l,makes:l.makeModels[0].make?l.makeModels.map(({make:t})=>t):l.makeModels[0].model,fuzzy:W(l.makeModels.map(({make:t,model:x})=>[t,x]).flat().filter(t=>t).concat([l.version,l.notes,l.belt]).join(",")),content:[(C=l.media)!=null&&C.some(t=>!t.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(a=l.media)!=null&&a.some(t=>t.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((r=l.links)==null?void 0:r.length)>0?"Has Links":"No Links",z[l.belt].danPoints>0?"Worth Dan Points":void 0,T(l.lastUpdated).isAfter(T().subtract(1,"days"))?"Updated Recently":void 0,l.belt.startsWith("Black")?"Is Black":void 0,l.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(t=>t),collection:le.locks.map.map(t=>c&&c[t.key]&&c[t.key].includes(l.id)?t.label:"Not "+t.label),collectionSaves:Te[l.id]||0,simpleBelt:l.belt.replace(/\s\d/g,"")}:null}).filter(m=>m),[B,c,s,S]),g=i.useMemo(()=>{const m=Object.keys(j).map(r=>{const t=j[r];return Array.isArray(t)?t.map(x=>({key:r,value:x})):{key:r,value:t}}).flat(),l=A.filter(r=>m.every(({key:t,value:x})=>Array.isArray(r[t])?r[t].includes(x):r[t]===x)),C=d&&l.find(r=>r.id===d);let a=l;return C?a=[C]:d&&(a=Ue.go(W(d),l,{keys:Je,threshold:-25e3}).map(r=>({...r.obj,score:r.score}))),y?a.sort((r,t)=>{if(y==="beltAscending")return ae(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(y==="beltDescending")return ne(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(y==="alphaAscending")return r.fuzzy.localeCompare(t.fuzzy);if(y==="alphaDescending")return t.fuzzy.localeCompare(r.fuzzy)}):a.sort((r,t)=>t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy)).map((r,t)=>({...r,displayRank:t+1}))},[j,A,d,y]),L=i.useMemo(()=>({allEntries:p,visibleEntries:g,getEntryFromId:B,expandAll:f,profile:c}),[p,B,g,f,c]);return e.jsx(J.Provider,{value:L,children:o})}const Je=["fuzzy"];function Ut(){const{lockCollection:o}=i.useContext(ie);xe("Explore Scorecard");const{data:p,loading:s,error:c,errorMessage:u}=fe({urls:Ke});return e.jsxs(E.Fragment,{children:[e.jsx(ce,{title:"Explore Scorecard"}),c&&e.jsx(Pe,{errorMessage:u}),s&&e.jsx(he,{}),!s&&!c&&!!p&&e.jsx(de,{filterFields:Re,children:e.jsx(Ye,{allEntries:ue,scorecardEntries:p.scorecardStats.lockCountsByUserBelt,profile:o,children:e.jsx(qe,{data:{...p,lockStats:ye}})})}),e.jsx(pe,{}),e.jsx(me,{feature:"stats"})]})}const Ke={brandDistribution:je,collectionsStatsCurrent:Ce,popularAreas:Be,redditGrowth:ve,siteFullNew:Se,pickStatsData:Ae,scorecardStats:we};export{Ut as default};
