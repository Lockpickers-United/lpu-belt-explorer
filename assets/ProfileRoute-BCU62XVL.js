import{Y as J,Z as X,$ as K,a0 as Q,r as a,j as e,W as q,U as O,R as C,I,J as Z,K as ee,M as P,O as te,P as B,Q as T,B as ie,T as _,u as F,A as $,a7 as oe,ab as se,ac as re,a5 as ne,F as ae,D as le,az as de,a9 as ce,e as pe,N as me,h as xe}from"./index-Cw6y4sAC.js";import{l as he}from"./filterFields-DMm8Ku_l.js";import{l as ue}from"./sortFields-1lK6XsoA.js";import{D as fe}from"./LockDataProvider-CgHFcdeR.js";import{L as G,a as ge}from"./LockListContext-k4Sn-aUh.js";import{S as we}from"./SearchBox-CSs3NBNA.js";import{L as je}from"./LoadingDisplay-De_GkFl_.js";import{u as ve}from"./useData-DnlI1cL_.js";import{N as ke}from"./NoProfileData-Cl4nHYf1.js";import{P as be}from"./ProfileNotFound-DL4I00VD.js";import{E as ye}from"./ExpandMore-BaT38VH5.js";import{B as Ce}from"./BeltStripe-DbGOvaid.js";import{C as Le}from"./EvidenceForm-DTSpbB0O.js";import{D as Se,R as Be,O as Me,C as Ee,a as Ae,L as Fe,b as De,c as Te}from"./Casino-C--UgRi_.js";import{F as v}from"./FieldValue-DPPZxMYy.js";import{B as Re}from"./BeltIcon-DPdf_68C.js";import{F as V}from"./FilterChip-Bfx9nron.js";import{E as Ie,C as We,a as Pe}from"./ExportButton-C7t7S-CK.js";import{C as Ve}from"./CopyEntryTextButton-B19zcDyb.js";import{L as He}from"./LockImageGallery-Bm4eZFlw.js";import{D as W}from"./DataContext-_cZqcewG.js";import{A as ze,a as Ne,b as qe}from"./AccordionSummary-CY4tx_ZO.js";import{M as H}from"./index-DL25CkPg.js";import{r as z}from"./index-utdQdU3g.js";import{A as Oe}from"./AccordionActions-D-Mrk8Pw.js";import"./filterEntriesAdvanced-CoIO5EvS.js";import"./index-BQQNb0Mv.js";import"./entryName-CkaW0qmA.js";import{X as U}from"./nivo-bar-BLtF3OLB.js";import{p as Y}from"./chartDefaults-pV7GKcxU.js";import{P as _e}from"./ProfileHeader-CapvzF6R.js";import{A as $e}from"./AdvancedFilters-DkgXykDe.js";import{V as Ge}from"./ViewFilterButtons-fjNzbt2b.js";import"./collectionStatsById-DY1NVZ7h.js";import"./dataUrls-CThgH6Wi.js";import"./setDeep-J6HEwWhX.js";import"./stringUtils-BsiQ3MZ5.js";import"./Search-eBBAFJqi.js";import"./useFormControl-YXjdxpfL.js";import"./Select-BNl036N-.js";import"./Sort-Becfjh2l.js";import"./TextField-CtdlVtME.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-C3IwaNoC.js";import"./mycollection-Dqx3MeiB.js";import"./Box-pcpQNukJ.js";import"./Launch-Bk8dSztL.js";import"./PhotoCamera-9XcTJkQd.js";import"./LockEntrySearchBox-2dWaBw3s.js";import"./BeltStripeMini-Bt_1yEXF.js";import"./HighlightOff-D3B4wCBW.js";/* empty css                  */import"./pageData-BY6jrYM9.js";import"./index-B2pXdHzi.js";import"./sanitizeValues-BefTJaNA.js";import"./LocalizationProvider-CcLaVqyK.js";import"./index-B2lJKBUN.js";import"./DialogContent-CVE_KPkJ.js";import"./ListItem-DvxQxJ8H.js";import"./Dialog-C5JMRIOT.js";import"./VideocamOutlined-BTMKbruq.js";import"./Checkbox-BOJFa5Xr.js";import"./SwitchBase-DzlGRTIS.js";import"./LoadingDisplay-BFA04bV-.js";import"./CircularProgress-tev0wROr.js";import"./LoadingDisplaySmall-e_CXm8IV.js";import"./glossary-B-_vYIGQ.js";import"./Link-SfjtntlS.js";import"./Cancel-C9ZmALIL.js";import"./Zoom-BM5vzDWJ.js";import"./Collapse-Cda9o7oa.js";import"./download-C3JVaIfh.js";import"./List-Bgk4Wtdq.js";import"./ContentCopy-CCt11wwm.js";import"./ImageGallery-B0FrgkUw.js";import"./ImageViewer-C4eARlXl.js";import"./ImageListItem-BCpOTA2-.js";import"./nivo-axes-BG9G-xLy.js";import"./nivo-legends-ClBAYtzs.js";import"./uniq-DmJC3Gwh.js";import"./_baseClone-D3VHTdz2.js";import"./CopyProfileLinkButton-5cFnjmFO.js";import"./ToggleButtonGroup-CwJVfr5z.js";import"./ChoiceButtonGroup-CBp_1ot0.js";import"./FilterAlt-B8WIMmGF.js";import"./AddCircle-BbzPYJ6T.js";var A={},N;function Ue(){if(N)return A;N=1;var t=J();Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var o=t(X()),n=K();return A.default=(0,o.default)((0,n.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),A}var Ye=Ue();const Je=Q(Ye);function Xe(){const{compact:t,setCompact:o,setExpanded:n}=a.useContext(G),d=a.useCallback(()=>{o(!t),n(null)},[t,o,n]);return e.jsx(q,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:d,children:e.jsx(Je,{color:t?"secondary":"inherit"})})})}function Ke({entry:t,expanded:o,onExpand:n}){var r,h,M,L,b;const{expandAll:d}=a.useContext(W),{userId:f}=I(),[l,p]=a.useState(!1),w={maxWidth:700,marginLeft:"auto",marginRight:"auto"},i=a.useRef(null),s=[...new Set([...t.relatedIds||[],...Z(t.id)])].sort((m,x)=>ee(P[m].belt,P[x].belt)||m.localeCompare(x)),u=a.useCallback((m,x)=>{n&&n(x?t.id:!1)},[t,n]);a.useEffect(()=>{if(o&&i&&!l&&!d){const x=window.innerWidth<=600?70:74,{id:j}=te.parse(location.search),k=j===t.id;p(!0),setTimeout(()=>{window.scrollTo({left:0,top:i.current.offsetTop-x,behavior:k?"auto":"smooth"})},k?0:100)}else o||p(!1)},[o,t,l,d]);const c=a.useMemo(()=>{var m;return e.jsx(B,{direction:"column",spacing:0,sx:{flexWrap:"wrap"},children:(m=t.makeModels)==null?void 0:m.map(({make:x,model:j},k)=>e.jsx(T,{style:{fontWeight:500,fontSize:"1.07rem",lineHeight:1.25,marginBottom:"4px"},children:x&&x!==j?`${x} ${j}`:j},k))})},[t.makeModels]);return e.jsxs(ze,{expanded:o,onChange:u,style:w,ref:i,children:[e.jsxs(Ne,{expandIcon:e.jsx(ye,{}),children:[e.jsx(Ce,{value:t.belt}),e.jsxs("div",{style:{margin:"12px 0px 8px 8px",width:"55%",flexShrink:0,flexDirection:"column"},children:[e.jsx(v,{value:c,textStyle:t.belt==="Unranked"?{color:"#aaa",marginLeft:"0px"}:{marginLeft:"0px"},style:{marginBottom:"2px"}}),!!t.version&&e.jsx(v,{name:"Version",value:e.jsx(T,{style:{fontSize:"0.95rem",lineHeight:1.25},children:t.version}),textStyle:t.belt==="Unranked"?{color:"#aaa"}:{}})]}),e.jsx("div",{style:{margin:"8px 0px 0px 0px",width:"40%",flexShrink:0,flexDirection:"column"},children:((r=t.lockingMechanisms)==null?void 0:r.length)>0&&e.jsx(v,{value:e.jsx(B,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:(h=t.lockingMechanisms)==null?void 0:h.sort().map((m,x)=>e.jsx(V,{value:m,field:"lockingMechanisms"},x))})})})]}),o&&e.jsxs(C.Fragment,{children:[e.jsxs(qe,{sx:{padding:"8px 16px 0px 16px"},children:[e.jsxs(B,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:[e.jsx(v,{style:{width:"50%",marginLeft:"0px"},value:e.jsxs(C.Fragment,{children:[e.jsxs(T,{style:{marginLeft:"0px",fontSize:"1rem",lineHeight:1.25,fontWeight:500},children:[t.belt,e.jsx(Se,{belt:t.belt})]}),e.jsx(Re,{value:t.belt,style:{marginBottom:-10}})]})}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx(Le,{id:t.id,makeModels:t.makeModels})})]}),!!t.notes&&e.jsx(B,{direction:"row",spacing:0,sx:{width:"100%",flexWrap:"wrap"},children:e.jsx(v,{name:"Comments",value:e.jsx(T,{component:"div",style:{marginTop:-16},children:e.jsx(H,{rehypePlugins:[[z,{target:"_blank"}]],children:t.notes})})})}),!!((M=t.features)!=null&&M.length)&&e.jsx(v,{name:"Features",value:e.jsx(B,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.features.map((m,x)=>e.jsx(V,{value:m,field:"features"},x))})}),(s==null?void 0:s.length)>1&&!f&&e.jsx(v,{name:"Other Versions",value:e.jsx(C.Fragment,{children:s.map(m=>e.jsx(Be,{id:m,onExpand:n,entryId:t.id},m))})}),!!t.description&&e.jsx("div",{style:{margin:8},children:e.jsx(H,{rehypePlugins:[[z,{target:"_blank",rel:["nofollow","noopener","noreferrer"]}]],children:t.description})}),e.jsx("div",{style:{margin:"12px 0px 20px 6px"},children:e.jsx(Ie,{entry:t})}),!!((L=t.media)!=null&&L.length)&&e.jsx(v,{value:e.jsx(He,{entry:t})}),e.jsxs("div",{style:{display:"flex"},children:[!!((b=t.links)!=null&&b.length)&&e.jsx(v,{name:"Links",value:e.jsx(B,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:m,url:x},j)=>e.jsx(ie,{href:x,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:m},j))})}),e.jsx(v,{name:"For sale",style:{marginLeft:15},value:e.jsx(Me,{entry:t,buttonType:"text"})})]})]}),e.jsx(Oe,{disableSpacing:!0,children:e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsxs("div",{style:{flexGrow:1,justifyItems:"left"},children:[!d&&e.jsx(_,{feature:"lock",id:t.id}),e.jsx(Ee,{entry:t}),e.jsx(Ae,{entry:t}),e.jsx(Fe,{entry:t})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Ve,{entry:t}),e.jsx(We,{entry:t})]})]})})]})]})}const Qe=C.memo(Ke,(t,o)=>t.entry.id===o.entry.id&&t.expanded===o.expanded&&t.onExpand===o.onExpand);function Ze({lockCollection:t,userText:o,collectionBarHeight:n}){const d=t.own?t.own.length:0,f=t.picked?t.picked.length:0,l=t.recordedLocks?t.recordedLocks.length:0,p=t.wishlist?t.wishlist.length:0,i=d+f+l+p?{own:d,picked:f,recorded:l,wishlist:p}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},u={own:250,picked:280,recorded:260,wishlist:100},c={own:Math.min(s.own,i.own),picked:Math.min(s.picked,i.picked),recorded:Math.min(s.recorded,i.recorded),wishlist:Math.min(s.wishlist,i.wishlist)},r={own:i.own>s.own?0:s.own-c.own,picked:i.picked>s.picked?0:s.picked-c.picked,recorded:i.recorded>s.recorded?0:s.recorded-c.recorded,wishlist:i.wishlist>s.wishlist?0:s.wishlist-c.wishlist},h={own:2,picked:2,recorded:2,wishlist:2},M={own:Math.max(i.own-(c.own+r.own+h.own),0),picked:Math.max(i.picked-(c.picked+r.picked+h.picked),0),recorded:Math.max(i.recorded-(c.recorded+r.recorded+h.recorded),0),wishlist:Math.max(i.wishlist-(c.wishlist+r.wishlist+h.wishlist),0)},L={own:Math.min(u.own-i.own,u.own-s.own-h.own),picked:Math.min(u.picked-i.picked,u.picked-s.picked-h.picked),recorded:Math.min(u.recorded-i.recorded,u.recorded-s.recorded-h.recorded),wishlist:Math.min(u.wishlist-i.wishlist,u.wishlist-s.wishlist-h.wishlist)},b=["own","picked","recorded","wishlist"],m=b.map((y,S)=>({row:b[S],"Average A":c[y],"Average B":r[y],Average:h[y],USER:M[y],"Top 10":L[y]})),{width:x}=F(),j=x<=560,k=n,R=j?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},D=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],g=t?[{title:o,color:"#3c90c5",width:"14px"}]:[];g.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const E=({items:y})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),y.map(S=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:S.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:S.width},children:S.title})]},S.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(C.Fragment,{children:[e.jsx("div",{style:{height:k},children:e.jsx(U,{data:m,keys:["Average A","Average B","Average","USER","Top 10"],theme:Y,indexBy:"row",margin:R,padding:.2,valueScale:{type:"linear"},colors:D,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(E,{items:g})]})}function et({beltData:t}){const{width:o}=F(),n=o<=360,d=o<=560,f=175,l=d?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},p=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],w=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:f,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(U,{data:t,margin:l,padding:.15,colors:i=>p[i.index%p.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:Y,isInteractive:!1,enableLabel:!0,label:i=>i.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:i=>w[i.index%w.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function tt({profile:t,entries:o}){const{userId:n}=I(),{user:d}=a.useContext($),f=n===(d==null?void 0:d.uid)?"You":"User",l=a.useMemo(()=>{const R=oe.concat("Unranked"),D=o.map(({belt:g})=>g.includes("Black")?"Black":g).reduce((g,E)=>(g[E]||(g[E]=0),g[E]++,g),{});return R.map(g=>({id:g,label:g,count:D[g]||0,value:D[g]||0}))},[o]),{isMobile:p}=F(),w=p?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:i}=F(),s=i<=360,u=i<=395,c=i<=428,r=i<=560,L={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...r?{}:{display:"flex"}},b=r?"100%":"50%",m=r?"100%":"50%",x=s?200:r?210:180,j=r?160:170,k=s?150:170;return e.jsx(se,{style:w,sx:{paddingBottom:5},children:e.jsx(re,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:L,children:[e.jsx("div",{style:{width:b,verticalAlign:"top",height:x},children:e.jsx(Ze,{lockCollection:t,userText:f,collectionBarHeight:j})}),e.jsx("div",{style:{width:m,height:k,marginTop:"0px"},children:e.jsx(et,{beltData:l})})]})})})})}function it({onSelect:t}){const{visibleEntries:o=[]}=a.useContext(W),n=a.useCallback(()=>{const d=Math.floor(Math.random()*o.length),f=o[d];t(f.id)},[o,t]);return ne("r",()=>n(),{preventDefault:!0}),e.jsx(q,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:n,children:e.jsx(De,{style:{color:"#999"}})})})}function ot({profile:t,owner:o}){const{compact:n}=a.useContext(G),[d,f]=a.useState(!1),{visibleEntries:l=[]}=a.useContext(W),p=a.useDeferredValue(d),{setAdvancedFilterGroups:w,advancedFilterGroups:i}=a.useContext(ae),[s,u]=a.useState(!0);return a.useEffect(()=>{const c={_id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fieldName:"collection",matchType:"Is",operator:"OR",values:["Any"]};s&&i().length===0&&w([c]),u(!1)},[i,s,w]),e.jsx(C.Fragment,{children:e.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(_e,{profile:t,page:"collection",owner:o}),e.jsx(tt,{profile:t,entries:l}),e.jsx($e,{}),n?e.jsx(Te,{entries:l}):l.map(c=>e.jsx(Qe,{entry:c,expanded:c.id===p,onExpand:f},c.id)),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(it,{onSelect:f})})]})})}function Wi(){const{user:t}=a.useContext($),{userId:o}=I(),{getProfile:n}=a.useContext(le),{isMobile:d}=F(),f=a.useCallback(async()=>{try{const r=await n(o);if(r){const h=r.displayName?r.displayName.toLowerCase().endsWith("s")?`${r.displayName}'`:`${r.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${h} Profile`}return r}catch(r){return console.error("Error loading profile.",r),null}},[n,o]),{data:l={},loading:p,error:w}=ve({loadFn:f}),i=a.useMemo(()=>{if(p||!l)return[];const r=new Set(de.locks.getCollected(l));return ce.filter(h=>r.has(h.id))},[l,p]),s=e.jsxs(C.Fragment,{children:[e.jsx(we,{label:"Collection"}),e.jsx(Ge,{sortValues:ue,advancedEnabled:!0,compactMode:!1,resetAll:!0,expandAll:!1}),!d&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Xe,{})]}),u=p?"Loading...":"Profile",c=e.jsx("div",{style:{margin:"30px 0px"},children:e.jsx(Pe,{text:!0})});return e.jsx(pe,{filterFields:he,children:e.jsx(fe,{allEntries:i,profile:l,children:e.jsxs(ge,{children:[e.jsx(me,{title:u,extras:s}),p&&e.jsx(je,{}),!p&&l&&!w&&e.jsx(ot,{profile:l,owner:t&&t.uid===o}),!p&&l&&!w&&i.length===0&&e.jsx(ke,{}),!p&&(!l||w)&&e.jsx(be,{}),e.jsx(xe,{before:c}),e.jsx(_,{feature:"profile"})]})})})}export{Wi as default};
