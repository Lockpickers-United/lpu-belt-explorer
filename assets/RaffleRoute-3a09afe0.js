import{r as n,H as q,j as e,G as P,I as T,a2 as E,u as W,K as J,M as K,A as oe,D as U,R as w,aZ as re,aA as ae,W as D,B as le,T as X,b as ce,X as _,V as de,N as pe,F as xe}from"./index-cbd26bac.js";import{F as Y,D as he,a as me,r as fe}from"./filterFields-b71b116f.js";import{u as ue}from"./usePageTitle-da849aff.js";import{R as ge}from"./RaffleDataProvider-af6e1d13.js";import{a as je,F as M,I as ve}from"./InlineFilterDisplay-bb450dca.js";import{N as ye}from"./ViewFilterButtons-300f3e82.js";import{d as Z,F as R}from"./FieldValue-3e8ff9a3.js";import{d as we}from"./Link-b875daa3.js";import{d as Ce}from"./ContentCopy-e35a03d4.js";import{a as B}from"./RaffleContext-4fd03164.js";import{L as be}from"./LoadingDisplaySmall-d70a06d8.js";import{A as Q,a as ee,b as te}from"./AccordionSummary-0c95f8ba.js";import{C as ke}from"./Collapse-5f47fd6f.js";import{M as H}from"./index-074dd148.js";import{r as N}from"./index-c9b9b330.js";import{A as Re}from"./AccordionActions-ece39ab3.js";import{R as Se}from"./RaffleSearchBar-7d292a76.js";import{r as Le}from"./sortFields-cf9bc377.js";import{L as ie}from"./Link-c1610fa3.js";import{u as Fe}from"./useData-9eedd672.js";import{h as Pe}from"./dataUrls-4eb203c4.js";import{C as Te,c as We,L as Be}from"./LoadingDisplay-94513543.js";import{R as Ie}from"./RaffleHeader-a7455f8b.js";import{d as Ae}from"./Cached-5bc09f51.js";import{R as De,A as Me}from"./AdminRoleButton-54ff80e0.js";import"./useDocumentTitle-77538a52.js";import"./index-4d11ddb5.js";import"./ImageViewer-55c2a92c.js";import"./Launch-8d43f7bd.js";import"./Dialog-5639c0ac.js";import"./LinearProgress-2ef96aca.js";import"./DialogContent-fab11ee0.js";import"./Chip-5ca5b273.js";import"./Select-dc1c9fd5.js";import"./SearchBox-2aa14b18.js";import"./Box-8116353b.js";import"./Search-74f602c6.js";import"./Badge-78416d47.js";import"./TextField-ddf0fb1e.js";import"./LockListContext-99f18ad5.js";import"./entryName-6920905b.js";import"./ToggleButtonGroup-d4e844a1.js";function Ee({entry:t}){const i=n.useCallback(async o=>{o.preventDefault(),o.stopPropagation();const s=t.title.replace(/[\s/]/g,"_").replace(/\W/g,""),l=`https://share.lpubelts.com/?id=${t.id}&name=${s}`;await navigator.clipboard.writeText(l),q("Link to RAFL pot copied to clipboard.")},[t]);return e.jsx(P,{title:"Copy Link to Pot",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:i,style:{height:36,width:36},children:e.jsx(we,{})})})}function ze({entry:t}){const[i,o]=E(),r=i.get("image"),s=n.useCallback(h=>{i.set("image",h+1),o(i)},[i,o]),l=n.useCallback(()=>{i.delete("image"),o(i)},[i,o]),c=n.useCallback(()=>V(r,t),[t,r]),a=n.useMemo(()=>r?+r-1:-1,[r]),d=V(a,t);return e.jsx(je,{media:t.media,openIndex:a,initiallyOpen:d,onOpenImage:s,onCloseImage:l,onBackButton:c,shareParams:{id:t.id,name:i.get("name")},columns:2})}const V=(t,i)=>/\d+/.test(t)&&!!i.media[t];function _e({entry:t}){const i=n.useCallback(async()=>{const o=t.title;await navigator.clipboard.writeText(o),q("Pot name copied to clipboard.")},[t]);return e.jsx(P,{title:"Copy RAFL pot name",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:i,children:e.jsx(Ce,{})})})}function Oe({entry:t}){const{live:i,raffleAdminRole:o}=n.useContext(B),r=i||o,{isMobile:s,flexStyle:l}=W(),c=s?28:30,a=s?"1.1rem":"1.3rem",d="1rem",h=0,f=s?"1.3rem":"1.4rem",p=s?"1.6rem":"1.8rem";return e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r&&e.jsx("div",{style:{borderRadius:"50%",backgroundColor:"#fff",color:"#000",height:c,width:c,minWidth:c,marginTop:0,marginBottom:4,marginRight:12,display:"flex"},children:e.jsx("div",{style:{margin:"auto",paddingTop:0,paddingLeft:h,paddingRight:1,fontWeight:700,fontSize:a,lineHeight:d},children:t.potNumber})}),e.jsxs("div",{style:{display:l,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",fontWeight:500,fontSize:f,lineHeight:p,marginTop:s?0:-3,flexGrow:1},children:t.title}),t.winner&&e.jsxs("div",{style:{display:"flex",fontSize:f,lineHeight:p,marginTop:s?8:-3,marginRight:10,fontWeight:400},children:["Winner: ",e.jsx("strong",{children:" mgsecure"})]})]})]})}var O={},Ge=K;Object.defineProperty(O,"__esModule",{value:!0});var z=O.default=void 0,$e=Ge(J()),He=e;z=O.default=(0,$e.default)((0,He.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function Ne({id:t}){const{isLoggedIn:i}=n.useContext(oe),{lockCollection:o,addToLockCollection:r,removeFromLockCollection:s}=n.useContext(U),[l,c]=n.useState(()=>{}),a=!!l,{isMobile:d}=W(),[h,f]=n.useState(null),p="raffleWatchlist",g=n.useCallback(()=>!!o[p]&&o[p].includes(t),[t,o]),u=g()?"Remove from Watchlist":"Add to Watchlist",C=n.useCallback((x,S)=>async(L,A)=>{L.preventDefault(),L.stopPropagation(),f(x),A||!S?await r(x,t):await s(x,t),f(null)},[t,r,s]),j=n.useCallback(x=>{x.preventDefault(),x.stopPropagation(),c(x.currentTarget)},[]),y=n.useCallback(x=>{x.preventDefault(),x.stopPropagation(),c(null)},[]),b=36,k={marginTop:-2,marginRight:d?4:8,width:b,minWidth:b,height:b};return e.jsxs("div",{style:k,children:[i&&e.jsx("div",{style:{display:"flex",justifyItems:"left"},children:e.jsx(w.Fragment,{children:h===p?e.jsx("div",{style:{marginTop:1},children:e.jsx(be,{})}):e.jsx(P,{title:u,arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:C(p,g()),style:{color:g()?"#13e113":"#999",...k},children:e.jsx(z,{})},p)})},p)}),!i&&e.jsxs(w.Fragment,{children:[e.jsx(P,{title:u,arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:j,style:{color:g()?"#13e113":"#999",...k},children:e.jsx(z,{})},p)}),e.jsx(re,{open:a,anchorEl:l,onClose:y,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsx("div",{style:{display:"flex",padding:30,width:300,placeItems:"center"},onClick:y,children:e.jsxs("div",{children:[e.jsx("strong",{children:"Log in to keep a RAFL Watchlist!"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ae,{})]})})})]})]})}function Ve({entry:t,expanded:i,onExpand:o,single:r}){var L,A,$;const{live:s,raffleAdminRole:l}=n.useContext(B),c=s||l,{filters:a}=n.useContext(Y),d=!!a.shippingType||!!a.splitShipping,[h,f]=n.useState(!1),p={maxWidth:700,marginLeft:"auto",marginRight:"auto"},g=n.useRef(null),u=r==="2",C=t.tickets?new Intl.NumberFormat().format(t.tickets):"---";n.useEffect(()=>{if(i&&g&&!h){const m=window.innerWidth<=600?70:74;f(!0),setTimeout(()=>{window.scrollTo({left:0,top:g.current.offsetTop-m,behavior:i?"auto":"smooth"})},i?0:100)}else i||f(!1)},[i,t,h]);const j=n.useCallback((v,m)=>{o&&o(m?t.id:!1)},[t.id,o]),{isMobile:y,flexStyle:b}=W(),I=y?"12px 0px 8px 0px":"12px 0px 8px 8px",k=y?"0px 0px 18px 0px":"0px 0px 18px 8px",x=y?"0.95rem":"1.0rem",S=t.winner&&!i?.6:1;return e.jsxs(Q,{expanded:i,onChange:j,style:p,ref:g,children:[e.jsx(ee,{expandIcon:u?null:e.jsx(Z,{}),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsxs("div",{style:{display:"block",marginBottom:0,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:e.jsx("div",{style:{margin:I,display:"flex",flexGrow:1},children:e.jsx(Oe,{entry:t})})}),e.jsxs("div",{style:{margin:k,display:"flex"},children:[e.jsx("div",{style:{flexGrow:1,opacity:S},children:e.jsxs("div",{style:{marginRight:8,color:"#bbb",fontSize:x},children:["Contributed by  ",t.contributedBy.map((v,m)=>{const F=m<t.contributedBy.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(M,{value:v,field:"contributedBy",mode:"text"}),F]},m)})]})}),c&&e.jsx(ke,{in:!!t.donors,children:e.jsxs("div",{style:{marginRight:15,fontSize:x,textAlign:"right",display:b},children:[e.jsx("div",{children:e.jsxs("nobr",{children:["Donors: ",e.jsx("strong",{children:t.donors||"--"})]})}),e.jsx("div",{style:{marginLeft:8},children:e.jsxs("nobr",{children:["Tickets: ",e.jsx("strong",{children:C})]})})]})})]}),!u&&d&&e.jsxs("div",{style:{display:"flex",marginTop:6,opacity:S},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(R,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((v,m)=>{const F=m<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(M,{value:v,field:"country",mode:"text"}),F]},m)})})}),e.jsx(R,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),e.jsx("div",{style:{margin:"12px 12px 8px 8px",fontSize:x,opacity:S},children:e.jsx(H,{rehypePlugins:[[N,{target:"_blank"}]],children:t.description})})]}),c&&e.jsx(Ne,{id:t.id})]})}),i&&e.jsxs(w.Fragment,{children:[e.jsxs(te,{sx:{padding:"0px 16px 0px 16px"},children:[e.jsx("div",{style:{display:b},children:e.jsx(D,{direction:"row",alignItems:"flex-start",style:{},children:!!((L=t.tags)!=null&&L.length)&&!u&&e.jsx(R,{name:"Tags",value:e.jsx(D,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.tags.map((v,m)=>e.jsx(M,{value:v,field:"tags",mode:"simple"},m))}),headerStyle:{marginBottom:4}})})}),!u&&!d&&e.jsxs("div",{style:{display:"flex",marginTop:6},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(R,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((v,m)=>{const F=m<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(M,{value:v,field:"country",mode:"text"}),F]},m)})})}),e.jsx(R,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),t.potContents&&e.jsx(D,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap",marginTop:"4px"},children:e.jsx(R,{name:"Contents",textStyle:{fontSize:x},value:e.jsx(H,{rehypePlugins:[[N,{target:"_blank"}]],children:t.potContents})})}),!!((A=t.media)!=null&&A.length)&&e.jsx(R,{value:e.jsx(ze,{entry:t})}),!!(($=t.links)!=null&&$.length)&&e.jsx(R,{name:"Links",value:e.jsx(D,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:v,url:m},F)=>e.jsx(le,{href:m,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:v},F))})}),e.jsx(X,{feature:"raflPot",id:t.id})]}),!u&&e.jsxs(Re,{disableSpacing:!0,children:[e.jsx(_e,{entry:t}),c&&e.jsx(Ee,{entry:t})]})]})]})}const se=w.memo(Ve,(t,i)=>{const o=Object.keys(t.entry),r=Object.keys(i.entry);if(o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!==r[s]||t.entry[o[s]]!==i.entry[r[s]])return!1;return t.expanded===i.expanded&&t.onExpand===i.onExpand});function qe(){const{live:t,raffleAdminRole:i}=n.useContext(B),o=ce(),{isMobile:r}=W(),s=r?{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:8}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:12};return e.jsx(w.Fragment,{children:t||i?e.jsx("div",{style:{...s,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,marginTop:1,marginBottom:7},children:"RAFL is on!"}),e.jsxs("div",{style:{fontSize:"1rem",marginTop:1,marginBottom:15},children:["Welcome to the ",e.jsx("strong",{children:"2025 Lockpicking Charity Raffle"}),". You donate to your favorite charity and every dollar donated earns a ticket you can put towards any of the fantastic pots the community has donated this year. To read the full details (and enter to win) ",e.jsx(ie,{onClick:()=>o("/rafl/enter"),style:{color:"#fff",textDecorationColor:"#fff",fontWeight:700,cursor:"pointer"},children:"click here."})]}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:"Entries will be accepted through January 31, and the primary prize drawing will happen via livestream on Thursday, February 1 (evening PST, exact time TBD)."})]})}):e.jsx("div",{style:{...s,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. In the meantime, here's a preview of the pots that folks are developing. Please note that ",e.jsx("strong",{children:"all pots and contents are subject to change"})," until the raffle begins in January."]})})})}function Je({profile:t}){const{filters:i}=n.useContext(Y),[o,r]=n.useState(i.id),{visibleEntries:s}=n.useContext(he),l=n.useDeferredValue(o),c=n.useCallback(a=>{r(a)},[]);return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(qe,{}),e.jsx(Se,{label:"Raffle Pots",sortValues:Le}),e.jsx(ve,{profile:t,collectionType:"raffle"}),s.length===0&&e.jsx(ye,{label:"Rafl Pots"}),s.map(a=>e.jsx(se,{entry:a,onExpand:c,expanded:a.id===l},a.id))]})}function Ke(){return e.jsx("div",{style:{display:"flex",placeItems:"center",width:40,height:40},children:e.jsx(Te,{variant:"indeterminate",disableShrink:!0,sx:{color:t=>(t.palette.mode==="light","#fff"),animationDuration:"550ms",[`& .${We.circle}`]:{strokeLinecap:"round"}},size:19,thickness:5})})}function Ue({refresh:t}){const[i,o]=n.useState(!1),[r,s]=n.useState(""),[l,c]=n.useState(!1),{preview:a,setPreview:d}=n.useContext(_),[h,f]=E(),p=h.has("preview"),g=n.useCallback(async()=>{const C=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/refresh-preview":"https://explore.lpubelts.com:8443/refresh-preview";o(!0),await fetch(C,{cache:"no-store"}).then(async j=>(o(!1),await j.json())).then(async j=>{s(j),console.log(`preview response
`,j)}),await t()},[t]),u=n.useCallback(()=>{p?(h.delete("preview"),f(h),d(!1)):d(!a)},[a,p,h,d,f]);return e.jsxs(w.Fragment,{children:[e.jsxs("div",{style:{maxWidth:700,margin:"20px auto 10px auto",padding:2,fontWeight:700,fontSize:"1.2rem",backgroundColor:"#8830d3",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{flexGrow:1,marginLeft:20},children:e.jsx(ie,{onClick:()=>u(),style:{color:"#fff",textDecorationColor:"#bbb"},children:"PREVIEW MODE"})}),i?e.jsx(Ke,{}):e.jsx(P,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:g,style:{marginRight:10},children:e.jsx(Ae,{})})})]}),(r==null?void 0:r.status)==="Errors"&&e.jsxs(Q,{expanded:l,onChange:()=>c(!l),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(ee,{expandIcon:e.jsx(Z,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(te,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(r,null,2)})})]})]})}var G={},Xe=K;Object.defineProperty(G,"__esModule",{value:!0});var ne=G.default=void 0,Ye=Xe(J()),Ze=e;ne=G.default=(0,Ye.default)((0,Ze.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");function Qe(){const{raffleAdminRole:t}=n.useContext(B),{preview:i,setPreview:o}=n.useContext(_),[r,s]=E(),l=r.has("preview"),c=i||l,a=n.useCallback(()=>{l?(r.delete("preview"),s(r),o(!1)):o(!i)},[i,l,r,o,s]);de("p",()=>a(),{preventDefault:!0});const d=c?"#983de6":"#fff";return t?e.jsx(P,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:a,style:{height:48,width:48},children:e.jsx(ne,{style:{color:d}})})}):null}function $t(){ue("RAFL Prizes");const{preview:t}=n.useContext(_),{allPots:i}=n.useContext(B),{lockCollection:o}=n.useContext(U),{isMobile:r}=W(),[s]=E(),l=s.get("single"),c=s.get("id"),a=s.has("preview"),d=t||a,{data:h,loading:f,error:p,refresh:g}=Fe({url:Pe}),u=h&&!f&&!p,C=t&&u?h||[]:i,j=C.find(L=>L.id===c),y=!!l&&j,b=e.jsx(w.Fragment,{children:e.jsxs(w.Fragment,{children:[!r&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Qe,{}),e.jsx(De,{}),e.jsx(Me,{})]})}),I=void 0,k=r?8:0,x={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:k,paddingRight:k},S=r?"RAFL 2025!":"Announcing RAFL 2025!";return e.jsx(me,{filterFields:fe,children:e.jsx(ge,{allEntries:C,profile:o,children:e.jsxs("div",{style:x,children:[y&&e.jsx(se,{entry:j,expanded:!0,single:l}),!y&&e.jsxs(w.Fragment,{children:[e.jsx(pe,{title:S,extras:b,extrasTwo:I}),e.jsx(Ie,{page:"pots"}),d&&e.jsx(Ue,{refresh:g}),d&&!u?e.jsx(Be,{}):e.jsx(Je,{profile:o}),e.jsx(xe,{})]}),e.jsx(X,{feature:"rafl"})]})})})}export{$t as default};
