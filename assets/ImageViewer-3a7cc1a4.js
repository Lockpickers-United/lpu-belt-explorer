import{K as I,M as Y,j as e,r as a,R as ge,bv as we,u as Oe,V as q,ae as Me,H as ke,O as Le,P as Te,I as C,W as _e,J as ie,G as b,bw as ae}from"./index-b13c45bb.js";import{d as De}from"./Link-9ab09787.js";import{d as Ie}from"./Launch-d47591df.js";import{D as Ye}from"./Dialog-184601d5.js";import{L as $e}from"./LinearProgress-e56a56d1.js";import{D as Re,a as Ee}from"./DialogContent-bf37eec7.js";const Ue={"CC BY 2.0":"https://creativecommons.org/licenses/by/2.0/","CC BY 3.0":"https://creativecommons.org/licenses/by/3.0/","CC BY 4.0":"https://creativecommons.org/licenses/by/4.0/","CC BY-NC 2.0":"https://creativecommons.org/licenses/by-nc/2.0/","CC BY-NC 3.0":"https://creativecommons.org/licenses/by-nc/3.0/","CC BY-NC 4.0":"https://creativecommons.org/licenses/by-nc/4.0/","CC BY-NC-ND 2.0":"https://creativecommons.org/licenses/by-nc-nd/2.0/","CC BY-NC-ND 3.0":"https://creativecommons.org/licenses/by-nc-nd/3.0/","CC BY-NC-ND 4.0":"https://creativecommons.org/licenses/by-nc-nd/4.0/","CC BY-NC-SA 2.0":"https://creativecommons.org/licenses/by-nc-sa/2.0/","CC BY-NC-SA 3.0":"https://creativecommons.org/licenses/by-nc-sa/3.0/","CC BY-NC-SA 4.0":"https://creativecommons.org/licenses/by-nc-sa/4.0/","CC BY-SA 2.0":"https://creativecommons.org/licenses/by-sa/2.0/","CC BY-SA 3.0":"https://creativecommons.org/licenses/by-sa/3.0/","CC BY-SA 4.0":"https://creativecommons.org/licenses/by-sa/4.0/"};var V={},Be=Y;Object.defineProperty(V,"__esModule",{value:!0});var ve=V.default=void 0,ze=Be(I()),Ne=e;ve=V.default=(0,ze.default)((0,Ne.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Fe="Left",qe="Right",Ae="Up",Pe="Down",D={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},H={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ce="mousemove",le="mouseup",He="touchend",Xe="touchmove",Ze="touchstart";function Ve(t,c,o,l){return t>c?o>0?qe:Fe:l>0?Pe:Ae}function ue(t,c){if(c===0)return t;const o=Math.PI/180*c,l=t[0]*Math.cos(o)+t[1]*Math.sin(o),f=t[1]*Math.cos(o)-t[0]*Math.sin(o);return[l,f]}function We(t,c){const o=n=>{const s="touches"in n;s&&n.touches.length>1||t((r,i)=>{i.trackMouse&&!s&&(document.addEventListener(ce,l),document.addEventListener(le,M));const{clientX:d,clientY:g}=s?n.touches[0]:n,h=ue([d,g],i.rotationAngle);return i.onTouchStartOrOnMouseDown&&i.onTouchStartOrOnMouseDown({event:n}),Object.assign(Object.assign(Object.assign({},r),H),{initial:h.slice(),xy:h,start:n.timeStamp||0})})},l=n=>{t((s,r)=>{const i="touches"in n;if(i&&n.touches.length>1)return s;if(n.timeStamp-s.start>r.swipeDuration)return s.swiping?Object.assign(Object.assign({},s),{swiping:!1}):s;const{clientX:d,clientY:g}=i?n.touches[0]:n,[h,T]=ue([d,g],r.rotationAngle),u=h-s.xy[0],p=T-s.xy[1],x=Math.abs(u),j=Math.abs(p),y=(n.timeStamp||0)-s.start,U=Math.sqrt(x*x+j*j)/(y||1),S=[u/(y||1),p/(y||1)],R=Ve(x,j,u,p),B=typeof r.delta=="number"?r.delta:r.delta[R.toLowerCase()]||D.delta;if(x<B&&j<B&&!s.swiping)return s;const _={absX:x,absY:j,deltaX:u,deltaY:p,dir:R,event:n,first:s.first,initial:s.initial,velocity:U,vxvy:S};_.first&&r.onSwipeStart&&r.onSwipeStart(_),r.onSwiping&&r.onSwiping(_);let w=!1;return(r.onSwiping||r.onSwiped||r[`onSwiped${R}`])&&(w=!0),w&&r.preventScrollOnSwipe&&r.trackTouch&&n.cancelable&&n.preventDefault(),Object.assign(Object.assign({},s),{first:!1,eventData:_,swiping:!0})})},f=n=>{t((s,r)=>{let i;if(s.swiping&&s.eventData){if(n.timeStamp-s.start<r.swipeDuration){i=Object.assign(Object.assign({},s.eventData),{event:n}),r.onSwiped&&r.onSwiped(i);const d=r[`onSwiped${i.dir}`];d&&d(i)}}else r.onTap&&r.onTap({event:n});return r.onTouchEndOrOnMouseUp&&r.onTouchEndOrOnMouseUp({event:n}),Object.assign(Object.assign(Object.assign({},s),H),{eventData:i})})},m=()=>{document.removeEventListener(ce,l),document.removeEventListener(le,M)},M=n=>{m(),f(n)},k=(n,s)=>{let r=()=>{};if(n&&n.addEventListener){const i=Object.assign(Object.assign({},D.touchEventOptions),s.touchEventOptions),d=[[Ze,o,i],[Xe,l,Object.assign(Object.assign({},i),s.preventScrollOnSwipe?{passive:!1}:{})],[He,f,i]];d.forEach(([g,h,T])=>n.addEventListener(g,h,T)),r=()=>d.forEach(([g,h])=>n.removeEventListener(g,h))}return r},$={ref:n=>{n!==null&&t((s,r)=>{if(s.el===n)return s;const i={};return s.el&&s.el!==n&&s.cleanUpTouch&&(s.cleanUpTouch(),i.cleanUpTouch=void 0),r.trackTouch&&n&&(i.cleanUpTouch=k(n,r)),Object.assign(Object.assign(Object.assign({},s),{el:n}),i)})}};return c.trackMouse&&($.onMouseDown=o),[$,k]}function Ge(t,c,o,l){return!c.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?c.preventScrollOnSwipe!==o.preventScrollOnSwipe||c.touchEventOptions.passive!==o.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:l(t.el,c)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:l(t.el,c)})}function Ke(t){const{trackMouse:c}=t,o=a.useRef(Object.assign({},H)),l=a.useRef(Object.assign({},D)),f=a.useRef(Object.assign({},l.current));f.current=Object.assign({},l.current),l.current=Object.assign(Object.assign({},D),t);let m;for(m in D)l.current[m]===void 0&&(l.current[m]=D[m]);const[M,k]=a.useMemo(()=>We(L=>o.current=L(o.current,l.current),{trackMouse:c}),[c]);return o.current=Ge(o.current,l.current,f.current,k),M}const Je=ge.forwardRef(function(c,o){return e.jsx(we,{direction:"up",ref:o,...c})});var W={},Qe=Y;Object.defineProperty(W,"__esModule",{value:!0});var X=W.default=void 0,et=Qe(I()),tt=e;X=W.default=(0,et.default)((0,tt.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var G={},nt=Y;Object.defineProperty(G,"__esModule",{value:!0});var Z=G.default=void 0,st=nt(I()),rt=e;Z=G.default=(0,st.default)((0,rt.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");var K={},ot=Y;Object.defineProperty(K,"__esModule",{value:!0});var xe=K.default=void 0,it=ot(I()),de=e;xe=K.default=(0,it.default)([(0,de.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,de.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn");var J={},at=Y;Object.defineProperty(J,"__esModule",{value:!0});var be=J.default=void 0,ct=at(I()),lt=e;be=J.default=(0,ct.default)((0,lt.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut");var Q={},ut=Y;Object.defineProperty(Q,"__esModule",{value:!0});var me=Q.default=void 0,dt=ut(I()),ht=e;me=Q.default=(0,dt.default)((0,ht.jsx)("path",{d:"M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19z"}),"YoutubeSearchedFor");function pt({media:t,openIndex:c,onOpenImage:o,onClose:l,shareParams:f={}}){const[m,M]=a.useState(!0),[k,L]=a.useState(!0),[{x:$,y:n},s]=a.useState({x:0,y:0}),[{x:r,y:i},d]=a.useState({x:0,y:0}),[{x:g,y:h},T]=a.useState({x:0,y:0}),[u,p]=a.useState(1),[x,j]=a.useState(!1),{isMobile:y}=Oe(),U=t.find(v=>v.sequenceId===c),S=t.indexOf(U),{fullSizeUrl:R,thumbnailUrl:B,fullUrl:_,title:w,subtitle:ee,subtitleUrl:pe,label:te}=U||{},je=te?`${te} - ${w}`:w,Se=a.useCallback(()=>L(!1),[]),A=a.useCallback(()=>{M(!1),setTimeout(()=>l(),200)},[l]),ne=a.useCallback(()=>p(u+fe),[u]),se=a.useCallback(()=>p(Math.max(u-fe,1)),[u]),E=a.useCallback(()=>{T({x:0,y:0}),s({x:0,y:0}),d({x:0,y:0}),p(1)},[]),z=a.useCallback(()=>{const v=S===0?t.length-1:S-1;o(t[v].sequenceId),E(),L(!0)},[S,t,o,E]),N=a.useCallback(()=>{const v=S===t.length-1?0:S+1;o(t[v].sequenceId),E(),L(!0)},[S,t,o,E]),re=a.useCallback(v=>{if(u!==1){j(!0);const O=he(v),F={x:O.x-r,y:O.y-i};s(F)}},[r,i,u]),oe=a.useCallback(v=>{if(x){const O=he(v),F={x:O.x-$,y:O.y-n};d(F),T(F)}},[x,$,n]),P=a.useCallback(()=>{j(!1)},[]);q("left",z,{preventDefault:!0}),q("right",N,{preventDefault:!0}),q("up",ne,{preventDefault:!0}),q("down",se,{preventDefault:!0});const Ce=Ke({onSwipedLeft:N,onSwipedRight:z,onSwipedDown:A,swipeDuration:250}),ye=a.useCallback(async()=>{const O=`https://share.lpubelts.com/?${Me.stringify({...f,image:c})}`;await navigator.clipboard.writeText(O),ke("Link to entry copied to clipboard.")},[c,f]);return e.jsxs(Ye,{open:m,onClose:A,TransitionComponent:Je,fullScreen:!0,children:[e.jsx(Le,{sx:{position:"relative"},children:e.jsxs(Te,{children:[e.jsx(C,{edge:"start",color:"inherit",onClick:A,"aria-label":"close",children:e.jsx(ve,{})}),e.jsxs(_e,{direction:"column",sx:{marginLeft:2,width:"100%"},children:[e.jsx(ie,{variant:"subtitle1",component:"div",children:je}),e.jsx(ie,{variant:"subtitle2",component:"div",style:{color:"#777"},children:e.jsx("a",{href:pe||Ue[ee],target:"_blank",rel:"noopener noreferrer",children:ee})})]}),e.jsx(b,{title:"View Full Size",arrow:!0,disableFocusListener:!0,children:e.jsx(C,{href:_,style:{color:"rgba(255, 255, 255, 0.5)"},target:"_blank",rel:"noopener noreferrer",children:e.jsx(Ie,{})})})]})}),k&&e.jsx($e,{color:"secondary"}),!y&&t.length>1&&e.jsxs(ge.Fragment,{children:[e.jsx(b,{title:"Previous Image",arrow:!0,disableFocusListener:!0,children:e.jsx(ae,{onClick:z,sx:{position:"fixed",left:16,top:"50vh",zIndex:1e3},children:e.jsx(X,{})})}),e.jsx(b,{title:"Next Image",arrow:!0,disableFocusListener:!0,children:e.jsx(ae,{onClick:N,sx:{position:"fixed",right:16,top:"50vh",zIndex:1e3},children:e.jsx(Z,{})})})]}),e.jsx(Re,{style:{display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",overflow:"hidden"},children:e.jsx("img",{draggable:!1,style:{transform:`translate3d(${g}px, ${h}px, 0px) scale(${u})`,cursor:u>1?"grab":"unset",transition:x?"none":"all 0.1s",maxWidth:"calc(100vw - 64px)",maxHeight:"calc(100vh - 160px)",backgroundSize:50,transformOrigin:"center center"},onLoad:Se,onTouchStart:re,onMouseDown:re,onTouchMove:oe,onMouseMove:oe,onTouchEnd:P,onMouseUp:P,onMouseLeave:P,...Ce,title:w,src:R||B,alt:w})}),e.jsxs(Ee,{sx:{maxHeight:64,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:[y&&t.length>0&&e.jsx(b,{title:"Previous Image",arrow:!0,disableFocusListener:!0,children:e.jsx(C,{color:"inherit",onClick:z,"aria-label":"previousImage",children:e.jsx(X,{})})}),e.jsx(b,{title:"Zoom In",arrow:!0,disableFocusListener:!0,children:e.jsx(C,{color:"inherit",onClick:ne,"aria-label":"zoomIn",children:e.jsx(xe,{})})}),e.jsx(b,{title:"Reset Zoom",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{children:e.jsx(C,{color:"inherit",onClick:E,"aria-label":"reset",disabled:u===1&&g===0&&h===0,children:e.jsx(me,{})})})}),e.jsx(b,{title:"Zoom Out",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{children:e.jsx(C,{color:"inherit",onClick:se,"aria-label":"zoomOut",disabled:u===1,children:e.jsx(be,{})})})}),e.jsx(b,{title:"Copy Link to Image",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{children:e.jsx(C,{color:"inherit",onClick:ye,"aria-label":"copyLink",children:e.jsx(De,{})})})}),y&&t.length>0&&e.jsx(b,{title:"Next Image",arrow:!0,disableFocusListener:!0,children:e.jsx(C,{color:"inherit",onClick:N,"aria-label":"nextImage",children:e.jsx(Z,{})})})]})]})}const he=t=>t.touches&&t.touches.length?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.pageX,y:t.pageY},fe=.4;export{pt as I,Je as T,X as a,Z as b,ve as d,Ue as l};
