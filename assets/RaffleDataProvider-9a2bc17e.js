import{r as a,F as I,j as v}from"./index-659a6f8c.js";import{f as A,D as x}from"./DataContext-cef0581a.js";import{r as z}from"./index-d65586e8.js";function M({children:f,allEntries:o}){const{filters:C}=a.useContext(I),{search:l,id:N,tab:P,name:g,sort:r,image:h,preview:F,single:B,expandAll:p,...i}=C,u=a.useMemo(()=>{const c=Object.keys(i).map(e=>{const t=i[e];return Array.isArray(t)?t.map(n=>({key:e,value:n})):{key:e,value:t}}).flat(),s=o.filter(e=>c.every(({key:t,value:n})=>Array.isArray(e[t])?e[t].includes(n):e[t]===n)).sort((e,t)=>e.potNumber-t.potNumber),m=l?A.go(z(l),s,{keys:j,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):s;return r?m.sort((e,t)=>r==="potName"?e.title.localeCompare(t.title):r==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):r==="tickets"?parseInt(t.tickets)-parseInt(e.tickets)||e.title.localeCompare(t.title):r==="donors"?parseInt(t.donors)-parseInt(e.donors)||e.title.localeCompare(t.title):r==="dateAdded"?parseInt(t.dateAdded)-parseInt(e.dateAdded)||e.title.localeCompare(t.title):parseInt(e[r])-parseInt(t[r])||e.title.localeCompare(t.title)):m.sort((e,t)=>parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title))},[o,i,l,r]),d=a.useCallback(c=>o.find(s=>s.id===c),[o]),y=a.useMemo(()=>({allEntries:o,visibleEntries:u,getPotFromId:d,expandAll:p}),[o,u,d,p]);return v.jsx(x.Provider,{value:y,children:f})}const j=["fuzzy"];export{M as R};
