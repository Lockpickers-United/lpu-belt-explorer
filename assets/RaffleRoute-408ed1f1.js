import{r as n,H as q,j as e,G as P,I as T,a2 as D,u as B,K as J,M as K,A as oe,D as U,R as w,aZ as re,aA as ae,W as M,B as le,T as Y,b as ce,V as de,N as pe,F as xe}from"./index-274f3e1d.js";import{F as Z,D as he,a as me,r as ue}from"./filterFields-10de538b.js";import{u as fe}from"./usePageTitle-6828e6c4.js";import{R as ge}from"./RaffleDataProvider-e9794a4d.js";import{a as je,F as z,I as ve}from"./InlineFilterDisplay-c90971a7.js";import{N as ye}from"./ViewFilterButtons-b2645a3d.js";import{d as Q,F as b}from"./FieldValue-88bae8e2.js";import{d as we}from"./Link-64f8f29d.js";import{d as Ce}from"./ContentCopy-954d213c.js";import{R as W,A as be}from"./AdminRoleButton-a098ec5b.js";import{L as ke}from"./LoadingDisplaySmall-042cd86a.js";import{A as X,a as ee,C as Se,b as te}from"./AccordionSummary-b392755e.js";import{M as H}from"./index-6d15abd9.js";import{r as $}from"./index-32cf38ae.js";import{A as Re}from"./AccordionActions-7dc6b79a.js";import{R as Fe}from"./RaffleSearchBar-8a85ac13.js";import{r as Le}from"./sortFields-fadf2c6a.js";import{L as ie}from"./Link-2f092524.js";import{R as Pe}from"./RaffleHeader-da1ce332.js";import{d as Te}from"./Cached-aface5d8.js";import{C as We,c as Be}from"./CircularProgress-45f0fb6d.js";import{R as Ie}from"./ReportButton-2f83fc02.js";import"./useDocumentTitle-82b33f4e.js";import"./index-1d11798e.js";import"./ImageViewer-ff6b30a1.js";import"./Launch-db1a36f5.js";import"./Dialog-83093d4e.js";import"./LinearProgress-0e446f95.js";import"./DialogContent-7eedde15.js";import"./Chip-03c8fa1a.js";import"./Select-c39eb088.js";import"./SearchBox-f5c6b0c1.js";import"./Box-ca4c7793.js";import"./Search-38709412.js";import"./Badge-9e6ef0c1.js";import"./TextField-a9986f3b.js";import"./LockListContext-3617cb7b.js";import"./entryName-ce949046.js";import"./ToggleButtonGroup-13a540b5.js";import"./useData-bbc7bd1b.js";import"./dataUrls-18fefcdc.js";function Ae({entry:t}){const i=n.useCallback(async s=>{s.preventDefault(),s.stopPropagation();const r=t.title.replace(/[\s/]/g,"_").replace(/\W/g,""),l=`https://share.lpubelts.com/?id=${t.id}&name=${r}`;await navigator.clipboard.writeText(l),q("Link to RAFL pot copied to clipboard.")},[t]);return e.jsx(P,{title:"Copy Link to Pot",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:i,style:{height:36,width:36},children:e.jsx(we,{})})})}function Me({entry:t}){const[i,s]=D(),o=i.get("image"),r=n.useCallback(h=>{i.set("image",h+1),s(i)},[i,s]),l=n.useCallback(()=>{i.delete("image"),s(i)},[i,s]),c=n.useCallback(()=>V(o,t),[t,o]),a=n.useMemo(()=>o?+o-1:-1,[o]),p=V(a,t);return e.jsx(je,{media:t.media,openIndex:a,initiallyOpen:p,onOpenImage:r,onCloseImage:l,onBackButton:c,shareParams:{id:t.id,name:i.get("name")},columns:2})}const V=(t,i)=>/\d+/.test(t)&&!!i.media[t];function ze({entry:t}){const i=n.useCallback(async()=>{const s=t.title;await navigator.clipboard.writeText(s),q("Pot name copied to clipboard.")},[t]);return e.jsx(P,{title:"Copy RAFL pot name",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:i,children:e.jsx(Ce,{})})})}function De({entry:t}){const{raflState:i,raffleAdminRole:s}=n.useContext(W),o=["live","post"].includes(i)||s,{isMobile:r,flexStyle:l}=B(),c=r?28:30,a=r?"1.1rem":"1.3rem",p="1rem",h=0,m=r?"1.3rem":"1.4rem",d=r?"1.6rem":"1.8rem";return e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[o&&e.jsx("div",{style:{borderRadius:"50%",backgroundColor:"#fff",color:"#000",height:c,width:c,minWidth:c,marginTop:0,marginBottom:4,marginRight:12,display:"flex"},children:e.jsx("div",{style:{margin:"auto",paddingTop:0,paddingLeft:h,paddingRight:1,fontWeight:700,fontSize:a,lineHeight:p},children:t.potNumber})}),e.jsxs("div",{style:{display:l,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",fontWeight:500,fontSize:m,lineHeight:d,marginTop:r?0:-3,flexGrow:1},children:t.displayName?t.displayName:t.title}),t.winner&&e.jsxs("div",{style:{display:"flex",fontSize:m,lineHeight:d,marginTop:r?8:-3,marginRight:10,fontWeight:400},children:["Winner: ",e.jsxs("strong",{children:[" ",t.winner]})]})]})]})}var _={},Ee=K;Object.defineProperty(_,"__esModule",{value:!0});var E=_.default=void 0,_e=Ee(J()),Oe=e;E=_.default=(0,_e.default)((0,Oe.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");function Ne({id:t}){const{isLoggedIn:i}=n.useContext(oe),{lockCollection:s,addToLockCollection:o,removeFromLockCollection:r}=n.useContext(U),[l,c]=n.useState(()=>{}),a=!!l,{isMobile:p}=B(),[h,m]=n.useState(null),d="raffleWatchlist",u=n.useCallback(()=>!!s[d]&&s[d].includes(t),[t,s]),f=u()?"Remove from Watchlist":"Add to Watchlist",k=n.useCallback((g,F)=>async(L,A)=>{L.preventDefault(),L.stopPropagation(),m(g),A||!F?await o(g,t):await r(g,t),m(null)},[t,o,r]),v=n.useCallback(g=>{g.preventDefault(),g.stopPropagation(),c(g.currentTarget)},[]),y=n.useCallback(g=>{g.preventDefault(),g.stopPropagation(),c(null)},[]),C=36,S={marginTop:-2,marginRight:p?4:8,width:C,minWidth:C,height:C};return e.jsxs("div",{style:S,children:[i&&e.jsx("div",{style:{display:"flex",justifyItems:"left"},children:e.jsx(w.Fragment,{children:h===d?e.jsx("div",{style:{marginTop:1},children:e.jsx(ke,{})}):e.jsx(P,{title:f,arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:k(d,u()),style:{color:u()?"#13e113":"#999",...S},children:e.jsx(E,{})},d)})},d)}),!i&&e.jsxs(w.Fragment,{children:[e.jsx(P,{title:f,arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:v,style:{color:u()?"#13e113":"#999",...S},children:e.jsx(E,{})},d)}),e.jsx(re,{open:a,anchorEl:l,onClose:y,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsx("div",{style:{display:"flex",padding:30,width:300,placeItems:"center"},onClick:y,children:e.jsxs("div",{children:[e.jsx("strong",{children:"Log in to keep a RAFL Watchlist!"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ae,{})]})})})]})]})}function Ge({entry:t,expanded:i,onExpand:s,single:o}){var A,N,G;const{raflState:r,raffleAdminRole:l}=n.useContext(W),c=["live","post"].includes(r)||l,{filters:a}=n.useContext(Z),p=!!a.shippingType||!!a.splitShipping,[h,m]=n.useState(!1),d={maxWidth:700,marginLeft:"auto",marginRight:"auto"},u=n.useRef(null),f=o==="2",k=t.tickets?new Intl.NumberFormat().format(t.tickets):"---";n.useEffect(()=>{if(i&&u&&!h){const x=window.innerWidth<=600?70:74;m(!0),setTimeout(()=>{window.scrollTo({left:0,top:u.current.offsetTop-x,behavior:i?"auto":"smooth"})},i?0:100)}else i||m(!1)},[i,t,h]);const v=n.useCallback((j,x)=>{s&&s(x?t.id:!1)},[t.id,s]),{isMobile:y,flexStyle:C}=B(),I=y?"12px 0px 8px 0px":"12px 0px 8px 8px",S=y?"12px 0px 8px 0px":"12px 0px 8px 8px",g=y?"0px 0px 18px 0px":"0px 0px 18px 8px",F=y?"0.95rem":"1.0rem",L=t.winner&&!i?.6:1;return e.jsxs(X,{expanded:i,onChange:v,style:d,ref:u,children:[e.jsx(ee,{expandIcon:f?null:e.jsx(Q,{}),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsxs("div",{style:{display:"block",marginBottom:0,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:e.jsx("div",{style:{margin:I,display:"flex",flexGrow:1},children:e.jsx(De,{entry:t})})}),e.jsxs("div",{style:{margin:g,display:"flex"},children:[e.jsx("div",{style:{flexGrow:1,opacity:L},children:e.jsxs("div",{style:{marginRight:8,color:"#bbb",fontSize:F},children:["Contributed by  ",t.contributedBy.map((j,x)=>{const R=x<t.contributedBy.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:j,field:"contributedBy",mode:"text"}),R]},x)})]})}),c&&e.jsx(Se,{in:!!t.donors,children:e.jsxs("div",{style:{marginRight:15,fontSize:F,textAlign:"right",display:C},children:[e.jsx("div",{children:e.jsxs("nobr",{children:["Donors: ",e.jsx("strong",{children:t.donors||"--"})]})}),e.jsx("div",{style:{marginLeft:8},children:e.jsxs("nobr",{children:["Tickets: ",e.jsx("strong",{children:k})]})})]})})]}),!f&&p&&e.jsxs("div",{style:{display:"flex",marginTop:6,opacity:L},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(b,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((j,x)=>{const R=x<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:j,field:"country",mode:"text"}),R]},x)})})}),e.jsx(b,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),e.jsx("div",{style:{margin:S,fontSize:F,opacity:L},children:e.jsx(H,{rehypePlugins:[[$,{target:"_blank"}]],children:t.description})})]}),c&&e.jsx(Ne,{id:t.id})]})}),i&&e.jsxs(w.Fragment,{children:[e.jsxs(te,{sx:{padding:"0px 16px 0px 16px"},children:[e.jsx("div",{style:{display:C},children:e.jsx(M,{direction:"row",alignItems:"flex-start",style:{},children:!!((A=t.tags)!=null&&A.length)&&!f&&e.jsx(b,{name:"Tags",value:e.jsx(M,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.tags.map((j,x)=>e.jsx(z,{value:j,field:"tags",mode:"simple"},x))}),headerStyle:{marginBottom:4}})})}),!f&&!p&&e.jsxs("div",{style:{display:"flex",marginTop:6},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(b,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((j,x)=>{const R=x<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(z,{value:j,field:"country",mode:"text"}),R]},x)})})}),e.jsx(b,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),t.potContents&&e.jsx(M,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap",marginTop:"4px"},children:e.jsx(b,{name:"Contents",textStyle:{fontSize:F},value:e.jsx(H,{rehypePlugins:[[$,{target:"_blank"}]],children:t.potContents})})}),!!((N=t.media)!=null&&N.length)&&e.jsx(b,{value:e.jsx(Me,{entry:t})}),!!((G=t.links)!=null&&G.length)&&e.jsx(b,{name:"Links",value:e.jsx(M,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:j,url:x},R)=>e.jsx(le,{href:x,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:j},R))})}),e.jsx(Y,{feature:"raflPot",id:t.id})]}),!f&&e.jsxs(Re,{disableSpacing:!0,children:[e.jsx(ze,{entry:t}),c&&e.jsx(Ae,{entry:t})]})]})]})}const se=w.memo(Ge,(t,i)=>{const s=Object.keys(t.entry),o=Object.keys(i.entry);if(s.length!==o.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==o[r]||t.entry[s[r]]!==i.entry[o[r]])return!1;return t.expanded===i.expanded&&t.onExpand===i.onExpand});function He(){const{raflState:t}=n.useContext(W),i=ce(),{isMobile:s}=B(),o=s?{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:8}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:12};return e.jsxs(w.Fragment,{children:[t==="preview"&&e.jsx("div",{style:{...o,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. In the meantime, here's a preview of the pots that folks are developing. Please note that ",e.jsx("strong",{children:"all pots and contents are subject to change"})," until the raffle begins in January."]})}),t==="setup"&&e.jsx("div",{style:{...o,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. See you then!"]})}),t==="live"&&e.jsx("div",{style:{...o,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,marginTop:1,marginBottom:7},children:"RAFL is on!"}),e.jsxs("div",{style:{fontSize:"1rem",marginTop:1,marginBottom:15},children:["Welcome to the ",e.jsx("strong",{children:"2025 Lockpicking Charity Raffle"}),". You donate to your favorite charity and every dollar donated earns a ticket you can put towards any of the fantastic pots the community has donated this year. To read the full details (and enter to win) ",e.jsx(ie,{onClick:()=>i("/rafl/enter"),style:{color:"#fff",textDecorationColor:"#fff",fontWeight:700,cursor:"pointer"},children:"click here."})]}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:"Entries will be accepted through January 31, and the primary prize drawing will happen via livestream on Thursday, February 1 (evening PST, exact time TBD)."})]})}),t==="post"&&e.jsx("div",{style:{...o,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL 2025 has ended"}),"Check out the winners below, see you next year!"]})})]})}function $e({profile:t}){const{filters:i}=n.useContext(Z),[s,o]=n.useState(i.id),{visibleEntries:r}=n.useContext(he),l=n.useDeferredValue(s),c=n.useCallback(a=>{o(a)},[]);return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(He,{}),e.jsx(Fe,{label:"Raffle Pots",sortValues:Le}),e.jsx(ve,{profile:t,collectionType:"raffle"}),r.length===0&&e.jsx(ye,{label:"Rafl Pots"}),r.map(a=>e.jsx(se,{entry:a,onExpand:c,expanded:a.id===l},a.id))]})}function Ve(){return e.jsx("div",{style:{display:"flex",placeItems:"center",width:40,height:40},children:e.jsx(We,{variant:"indeterminate",disableShrink:!0,sx:{color:t=>(t.palette.mode==="light","#fff"),animationDuration:"550ms",[`& .${Be.circle}`]:{strokeLinecap:"round"}},size:19,thickness:5})})}function qe({refresh:t}){const[i,s]=n.useState(!1),[o,r]=n.useState(""),[l,c]=n.useState(!1),{preview:a,setPreview:p}=n.useContext(W),[h,m]=D(),d=h.has("preview"),u=n.useCallback(async()=>{const k=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/refresh-preview":"https://explore.lpubelts.com:8443/refresh-preview";s(!0),await fetch(k,{cache:"no-store"}).then(async v=>(s(!1),await v.json())).then(async v=>{r(v),console.log(`preview response
`,JSON.stringify(v,null,2))}),await t()},[t]),f=n.useCallback(()=>{d?(h.delete("preview"),m(h),p(!1)):p(!a)},[a,d,h,p,m]);return e.jsxs(w.Fragment,{children:[e.jsxs("div",{style:{maxWidth:700,margin:"20px auto 10px auto",padding:2,fontWeight:700,fontSize:"1.2rem",backgroundColor:"#8830d3",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{flexGrow:1,marginLeft:20},children:e.jsx(ie,{onClick:()=>f(),style:{color:"#fff",textDecorationColor:"#bbb"},children:"PREVIEW MODE"})}),i?e.jsx(Ve,{}):e.jsx(P,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:u,style:{marginRight:10},children:e.jsx(Te,{})})})]}),(o==null?void 0:o.status)==="Errors"&&e.jsxs(X,{expanded:l,onChange:()=>c(!l),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(ee,{expandIcon:e.jsx(Q,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(te,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(o,null,2)})})]})]})}var O={},Je=K;Object.defineProperty(O,"__esModule",{value:!0});var ne=O.default=void 0,Ke=Je(J()),Ue=e;ne=O.default=(0,Ke.default)((0,Ue.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");function Ye(){const{raffleAdminRole:t,preview:i,setPreview:s}=n.useContext(W),[o,r]=D(),l=o.has("preview"),c=i||l,a=n.useCallback(()=>{l?(o.delete("preview"),r(o),s(!1)):s(!i)},[i,l,o,s,r]);de("p",()=>a(),{preventDefault:!0});const p=c?"#983de6":"#fff";return t?e.jsx(P,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(T,{onClick:a,style:{height:48,width:48},children:e.jsx(ne,{style:{color:p}})})}):null}function Et(){fe("RAFL Prizes");const{preview:t,allPots:i,raflState:s,refresh:o}=n.useContext(W),{lockCollection:r}=n.useContext(U),{isMobile:l}=B(),[c]=D(),a=c.get("single"),p=c.get("id"),h=c.has("preview"),m=t||h,d=i,u=d.find(S=>S.id===p),f=!!a&&u,k=e.jsx(w.Fragment,{children:e.jsxs(w.Fragment,{children:[!l&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Ye,{}),e.jsx(Ie,{}),e.jsx(be,{})]})}),v=void 0,y=l?8:0,C={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:y,paddingRight:y};let I=s==="post"?"RAFL 2025 has ended":["live","setup"].includes(s)||!l?"RAFL 2025!":"Announcing RAFL 2025!";return e.jsx(me,{filterFields:ue,children:e.jsx(ge,{allEntries:d,profile:r,children:e.jsxs("div",{style:C,children:[f&&e.jsx(se,{entry:u,expanded:!0,single:a}),!f&&e.jsxs(w.Fragment,{children:[e.jsx(pe,{title:I,extras:k,extrasTwo:v}),e.jsx(Pe,{page:"pots"}),m&&e.jsx(qe,{refresh:o}),e.jsx($e,{profile:r}),e.jsx(xe,{})]}),e.jsx(Y,{feature:"rafl"})]})})})}export{Et as default};
