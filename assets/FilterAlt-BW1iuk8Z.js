import{r as n,F as b,j as l,a8 as P,U as k,Y as M,Z as R,$ as S,a0 as T,u as V,W as w,B as z}from"./index-CaxpQFr7.js";import"./filterEntriesAdvanced-GkAcAZ9K.js";import{D as $}from"./DataContext-DUC5vGY5.js";import"./index-OkBDkTgX.js";import"./entryName-BMg_iNQ0.js";import{H as L}from"./HighlightOff-BJNOgcrR.js";import{F as G,I as J,S as U}from"./Select-DkbQbynk.js";import{B as Y}from"./Box-DpqcW-Yw.js";import{C as Z}from"./Chip-DGu9WE6c.js";const u={safelocksOwn:"Own",safelockCracked:"Cracked",safelockWishlist:"Wishlist",shippingSplit:"Shipping included",shippingNotSplit:"Winner may pay shipping"};function fe({label:a,fieldName:e,onFilter:i,sort:c}){const{beltEntries:p,visibleEntries:y=[]}=n.useContext($),{filters:W,removeFilters:j}=n.useContext(b),A=n.useMemo(()=>(p==null?void 0:p.length)>0?p:y,[p,y]),[_,m]=n.useState(!1),x=n.useDeferredValue(W),h=x[e],C=n.useMemo(()=>Array.isArray(h)?x[e]:h?[h]:[],[x,e,h]),{counts:D,options:q}=n.useMemo(()=>{const r=A.map(s=>Array.isArray(s[e])?Array.from(new Set([...s[e]])):s[e]).flat().filter(s=>s).reduce((s,o)=>(s[o]||(s[o]=0),s[o]++,s),{}),g=Object.keys(r).sort((s,o)=>{if(c)return c(s,o);if(typeof s=="string"&&typeof o=="string")return s.localeCompare(o);if(Number.isInteger(s)&&Number.isInteger(o))return s-o});return{counts:r,options:g}},[A,e,c]),E=n.useCallback(t=>{m(!1),setTimeout(()=>i(e,t.target.value,!0),0),setTimeout(()=>document.activeElement.blur())},[e,i]),F=n.useCallback(()=>{m(!1),setTimeout(()=>document.activeElement.blur())},[]),B=n.useCallback(()=>m(!0),[]),H=n.useCallback(()=>{j([e])},[e,j]),I=[...C.reduce((t,r)=>[...t,r.startsWith("!")?r:null],[]).filter(t=>t),...q];return l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[I.length===0?null:l.jsxs(G,{style:{minWidth:120,maxWidth:300,marginTop:8},fullWidth:!0,children:[l.jsx(J,{id:`filter-${e}`,color:"secondary",children:a}),l.jsx(U,{multiple:!0,label:a,labelId:`filter-${e}`,value:C,onChange:E,style:{marginBottom:0},color:"secondary",open:_,onClose:F,onOpen:B,onBlur:F,MenuProps:{PaperProps:{style:{maxHeight:K*8+Q}}},renderValue:t=>l.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(r=>{const g=r.startsWith("!")?"NOT "+(u[r.slice(1)]?u[r.slice(1)]:r.slice(1)).replace("||"," OR ").replace("@@"," AND "):u[r]?u[r]:r.replace("||"," OR ").replace("@@"," AND ");return l.jsx(Z,{label:g},r)})}),children:I.map((t,r)=>l.jsx(P,{value:t,children:(t||"").startsWith("!")?"NOT "+(u[t.slice(1)]?u[t.slice(1)]:t.slice(1)):u[t]?u[t]:t+` (${D[t]||0})`},r))})]}),C.length===0?null:l.jsx(k,{onClick:H,style:{height:30,marginTop:4,marginLeft:2},size:"small",children:l.jsx(L,{fontSize:"small",style:{color:"#d04e4e"}})})]})}const K=48,Q=8;var d={},v;function X(){if(v)return d;v=1;var a=M();Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var e=a(R()),i=S();return d.default=(0,e.default)((0,i.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll"),d}var N=X();const ee=T(N);function he({forceText:a}){const{isMobile:e}=V(),{filterCount:i,clearFilters:c}=n.useContext(b);return e&&!a?l.jsx(w,{title:"Clear Filters",arrow:!0,disableFocusListener:!0,children:l.jsx(k,{onClick:c,disabled:i===0,children:l.jsx(ee,{})})}):l.jsx(z,{variant:"outlined",color:"inherit",onClick:c,style:{minWidth:80,marginRight:8},disabled:i===0,children:"Clear"})}var f={},O;function te(){if(O)return f;O=1;var a=M();Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var e=a(R()),i=S();return f.default=(0,e.default)((0,i.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt"),f}var re=te();const me=T(re);export{he as C,me as F,fe as a,u as f};
