import{r as L,d as v,j as e,ai as S,u as A,aj as W,ak as z}from"./index-12623c4f.js";import{L as H}from"./LoadingDisplay-2a4f4eb6.js";import{u as q}from"./useData-ec5fdc74.js";import{u as I}from"./usePageTitle-1b63783c.js";import{u as k}from"./useWindowSize-fb3d0413.js";import{C as U,a as P,b as O,c as Y,d as E,e as F,T as $}from"./TopLocks-95476348.js";import{e as G}from"./dataUrls-29ba4993.js";import{A as J}from"./AdminStatsTable-82aa635e.js";import{B as K}from"./nivo-bar.es-c44bbdb4.js";import{p as Q}from"./adminChartDefaults-e02caa29.js";import{c as V,d as X,T as Z,a as C,b as T,e as _}from"./TableRow-49295b0a.js";import{L as B}from"./Link-3591e80a.js";import"./LPU-c3fa7122.js";import"./LinearProgress-fb822a05.js";import"./useDocumentTitle-b89e98e6.js";import"./nivo-line.es-2bd091aa.js";import"./nivo-legends.es-c9e4ba8b.js";import"./index-ece49001.js";const ee=({data:t})=>{const o=L.useMemo(()=>{const{dailyAwardsTableData:n}=t,x=n.data.map(s=>s.date),d=v(x.reduce((s,c)=>c>s?c:s)),u=v("2024-10-25"),p=d.subtract(14,"day")>u?d.subtract(14,"day"):u;return{title:"",columns:n.columns,data:n.data.filter(s=>v(s.date).isAfter(p))}},[t]),m="100%",l=".83rem";return e.jsx("div",{style:{width:"100%"},children:e.jsx(J,{tableData:o,tableWidth:m,fontSize:l})})},te=({data:t})=>{const{maxBeltCounts:o}=t,m=S.map(i=>i.rank>20?null:{id:i.name,label:i.makeModels[0].model,count:o[i.id]||0,value:o[i.id]||0}).filter(i=>i),{width:l}=k(),n=l<=360,x=l<=395,d=l<=428,u=l<=820,p=n?180:x?190:d?200:u?240:250,s={top:0,right:20,bottom:80,left:50},c=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#1a1a1a","#373737","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12"],h=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000"];return e.jsx("div",{style:{height:p,width:"100%"},children:e.jsx(K,{data:m,margin:s,padding:.15,colors:i=>c[i.index%c.length],labelTextColor:i=>h[i.index%h.length],animate:!0,enableLabel:!0,labelSkipHeight:1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,format:","},enableTotals:!0,axisBottom:{tickRotation:-45},enableGridY:!1,theme:Q,isInteractive:!1})})},ae=({tableData:t,tableWidth:o,tableHeight:m,fontSize:l,wrap:n,sortable:x,sort:d,setSort:u,ascending:p,setAscending:s,linkFunction:c})=>{A();const h=n?"inherit":"nowrap";t.columns.filter(a=>(a==null?void 0:a.id)&&(a==null?void 0:a.align));const[i,f]=L.useState(!1);t.columns.map(a=>(a==null?void 0:a.id)==="dateString"&&!i?f(!0):null),t.columns=i?t.columns.filter(a=>a.id!=="date"):t.columns;const y=L.useCallback(a=>{a!==d?(u(a),s(!0)):s(!p)},[p,s,u,d]);return e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"1.3rem",margin:"10px"},children:t.title}),e.jsx(V,{id:"statsTable",style:{padding:"0px 0px 0px 4px",width:o,marginLeft:"auto",marginRight:"auto",height:m},component:W,elevation:2,children:e.jsxs(X,{size:"small",stickyHeader:!!m,children:[e.jsx(Z,{children:e.jsx(C,{children:t.columns.map((a,g)=>e.jsx(T,{sx:{textAlign:a.align,fontSize:l,lineHeight:"1.1rem",padding:"8px",backgroundColor:"#111",color:"#fff"},component:"th",scope:"row",children:x&&a.id!=="index"&&e.jsx("div",{children:e.jsx(B,{onClick:()=>y(a.id),style:{color:d===a.id?"#fff":"#bbb"},children:a.name})})||e.jsx("div",{children:a.name})},g+1))})}),e.jsx(_,{children:t.data.map((a,g)=>e.jsx(C,{index:g,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:t.columns.map((j,w)=>e.jsx(T,{sx:{textAlign:j.align,fontSize:l,whiteSpace:h,padding:"8px",border:0,color:"#eee"},component:"th",scope:"row",children:c(j.id,a[j.id]?a[j.id].toLocaleString():"")},w+1))},g))})]})})]})},se=({data:t})=>{const{awardsDisplayNames:o}=t,m=A(),l=!0,[n,x]=L.useState("acquired"),[d,u]=L.useState(!0),p=Object.keys(o).filter(r=>r).map(r=>({displayName:o[r].displayName||"no display name",acquired:o[r].acquired,maxAward:S[o[r].maxAward].makeModels[0].model.replace(" Belt",""),beltName:S[o[r].maxAward].name.replace(" Belt",""),userId:r})).sort((r,b)=>{switch(n){case"acquired":return v(r[n]).valueOf()-v(b[n]).valueOf()||r.displayName.localeCompare(b.displayName);case"maxAward":return z(r.beltName,b.beltName);case"displayName":return r[n].localeCompare(b[n]);default:return r.displayName.localeCompare(b.displayName)}}),c=(d?p:p.reverse()).map((r,b)=>({...r,index:b+1})),h=L.useCallback((r,b)=>{const M=c.find(R=>R.displayName===b);return r==="displayName"?e.jsx(B,{onClick:()=>m(`/profile/${M.userId}/scorecard`),style:{color:"#fff"},children:b}):b},[m,c]),i={columns:[{name:"#",align:"center",id:"index"},{name:"Display Name",align:"left",id:"displayName"},{name:"Belt/Dan",align:"center",id:"maxAward"},{name:"Acquisition Date",align:"center",id:"acquired"}],data:c},{width:f}=k(),y=f<=360,a=f<=395,g=f<=428,j=f<=560,w=f<=820,N=y?".8rem":a?".85rem":".9rem",D="80%";return e.jsx(ae,{tableData:i,tableWidth:D,fontSize:N,sortable:l,sort:n,setSort:x,ascending:d,setAscending:u,linkFunction:h})};function ve(){I("Collection Report");const{data:t,loading:o,error:m}=q({url:G}),l=o?"--":"(updated: "+v(t.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${t.metadata.timezone})`,x=["listUsers","wishlistLocks","recordedLocks","scorecardLocks","pickedLocks","ownLocks"].reduce((h,i)=>{if(!t)return{};const f=t.dailyTableData.data.map(y=>({x:y.date,y:y[i]}));return h[i]={data:f,id:i},h},{}),{width:d}=k(),p=d<560?"8px 8px 32px 8px":"24px 24px 32px 24px",s={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},c={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"};return o?e.jsx(H,{}):m?null:e.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:p,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[e.jsxs("div",{style:c,children:["Collections Summary",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.85rem"},children:l})]}),e.jsx(U,{data:t}),e.jsx("div",{style:s,children:"Awards Summary"}),e.jsx(ee,{data:t}),e.jsx("div",{style:s,children:"Import Users by Belt"}),e.jsx(te,{data:t}),e.jsx("div",{style:s,children:"Import Users"}),e.jsx(se,{data:t}),e.jsx("div",{style:s,children:"List Users"}),e.jsx(P,{data:x}),e.jsx("div",{style:s,children:"List Locks by Date"}),e.jsx(O,{data:x}),e.jsx("div",{style:s,children:"Average Items Per List"}),e.jsx(Y,{data:t}),e.jsx("div",{style:s,children:"List Saves by Belt Ranking"}),e.jsx(E,{data:t}),e.jsx("div",{style:s,children:"Last 14 Days"}),e.jsx(F,{data:t}),e.jsx("div",{style:s,children:"Top Locks"}),e.jsx($,{data:t})]})}export{ve as default};
