import{O as G,P as Y,Q as J,U as K,a6 as R,r as n,j as e,a7 as te,a8 as Ne,a9 as de,aa as ue,J as H,A as X,d as v,ab as Ie,u as P,R as A,I as ce,ac as Pe,ad as We,ae as Le,b as we,af as Be,Y as De,ag as Oe,ah as Me,D as Te,ai as se,B as pe,aj as xe,ak as he,al as me,N as Re}from"./index-BkuivcL0.js";import{V as Ee}from"./VideocamOutlined-CEQsNi2k.js";import{T as oe,a as T,b as y,c as ne,d as le,e as ae}from"./TableRow-B-7Xibwt.js";import{L as ie}from"./LeaderboardName-BXbklaRN.js";import{S as fe,I as ze}from"./Search-ljckX1q5.js";import{A as Fe}from"./Autocomplete-CbZyIiyb.js";import{T as _e}from"./TextField-CIa_KP15.js";import{B as qe,S as He}from"./Sort-5i15N27C.js";import{p as Ue}from"./chartDefaults-pV7GKcxU.js";import{X as Ve}from"./nivo-bar-BnUay6-B.js";import{F as Ge,I as Ye,S as Je}from"./Select-BwF_cnxh.js";import{u as Ae}from"./useData-Boj9cAIs.js";import{c as Ke,r as Xe,l as Qe}from"./dataUrls-DkJe4Pqg.js";import{e as $e}from"./entryName-CgOllD6o.js";import{L as Ze}from"./ListItem-hOFeElmZ.js";import{A as et,a as tt,b as rt}from"./AccordionSummary-Z9tuc9eJ.js";import{L as st}from"./LoadingDisplay-DVONLlTy.js";import{L as ot}from"./Link-B-9DN75R.js";import{E as nt}from"./ErrorMessage-DCLKuLbI.js";import{T as lt,a as V}from"./ToggleButtonGroup-DtKcp5xy.js";import"./Chip-Ba4isneB.js";import"./nivo-axes-ve0Br6Xy.js";import"./nivo-legends-Cjh5CXPi.js";import"./uniq-BVOpo3d7.js";import"./_baseClone-C0mM9GKV.js";import"./Collapse-CSrnEYTJ.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-4qENHWNX.js";var z={},ge;function at(){if(ge)return z;ge=1;var t=G();Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var r=t(Y()),a=J();return z.default=(0,r.default)((0,a.jsx)("path",{d:"m20.5 10 .5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4zm-7 4h-4l1-4h4z"}),"Numbers"),z}var it=at();const ct=K(it);var F={},be;function dt(){if(be)return F;be=1;var t=G();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var r=t(Y()),a=J();return F.default=(0,r.default)((0,a.jsx)("path",{d:"M16.53 11.06 15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14z"}),"EventAvailable"),F}var ut=dt();const pt=K(ut);function xt({columns:t}){const[r,a]=R(),l=r.get("sort"),i={border:0,padding:"4px 12px",backgroundColor:"#000"},d=n.useCallback(c=>()=>{c&&c!==l?r.set("sort",c):r.delete("sort"),a(r)},[r,a,l]),g={own:e.jsx(ue,{color:l==="own"?"secondary":void 0,onClick:d("own"),style:{cursor:"pointer"}}),picked:e.jsx(te,{color:l==="picked"?"secondary":void 0,onClick:d("picked"),style:{cursor:"pointer"}}),wishlist:e.jsx(de,{color:l==="wishlist"?"secondary":void 0,onClick:d("wishlist"),style:{cursor:"pointer"}}),recordedLocks:e.jsx(Ee,{color:l==="recordedLocks"?"secondary":void 0,onClick:d("recordedLocks"),style:{cursor:"pointer"}}),safelocksOwn:e.jsx(ue,{color:l==="safelocksOwn"?"secondary":void 0,onClick:d("safelocksOwn"),style:{cursor:"pointer"}}),safelocksCracked:e.jsx(te,{color:l==="safelocksCracked"?"secondary":void 0,onClick:d("safelocksCracked"),style:{cursor:"pointer"}}),safelocksWishlist:e.jsx(de,{color:l==="safelocksWishlist"?"secondary":void 0,onClick:d("safelocksWishlist"),style:{cursor:"pointer"}}),danLevel:e.jsx(Ne,{color:l==="danLevel"?"secondary":void 0,onClick:d("danLevel"),style:{cursor:"pointer"}}),danPoints:e.jsx(ct,{color:l==="danPoints"?"secondary":void 0,onClick:d("danPoints"),style:{cursor:"pointer"}}),blackBeltCount:e.jsx(te,{color:l==="blackBeltCount"?"secondary":void 0,onClick:d("blackBeltCount"),style:{cursor:"pointer"}}),blackBeltAwardedAt:e.jsx(pt,{color:l==="blackBeltAwardedAt"?"secondary":void 0,onClick:d("blackBeltAwardedAt"),style:{cursor:"pointer"}})};return e.jsx(oe,{children:e.jsxs(T,{children:[e.jsx(y,{align:"center",style:i,children:e.jsx(H,{title:"Sort Default",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{style:{cursor:"pointer"},onClick:d(void 0),children:"#"})})}),e.jsx(y,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),t.map((c,o)=>e.jsx(y,{align:"center",style:i,children:e.jsx(H,{title:c.tooltip,arrow:!0,disableFocusListener:!0,children:g[c.field]})},o))]})})}function re({align:t="center",isCurrentUser:r,value:a}){const l=r?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:"#fff"},i=a!==0?a:"";return e.jsx(y,{align:t,style:l,children:i})}v.extend(Ie);function ht({index:t,leader:r,highlighted:a,scrollableRef:l,columns:i,tab:d}){const g=n.useRef(),{user:c}=n.useContext(X),[o,u]=n.useState(!1),b=(c==null?void 0:c.uid)===r.id,k=a?{backgroundColor:"#333"}:{};return n.useEffect(()=>{a&&g&&!o&&setTimeout(()=>{u(!0),l.current.scrollTo({top:g.current.offsetTop-75,behavior:"smooth"})},0)},[a,l,o]),e.jsxs(T,{ref:g,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":a?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...k},children:[e.jsx(re,{isCurrentUser:b,value:t+1}),e.jsx(re,{isCurrentUser:b,value:e.jsx(ie,{isCurrentUser:b,leader:r,tab:d}),align:"left"}),i.map((h,p)=>{const f=h.field==="blackBeltAwardedAt"?r[h.field]>0?v.utc(r[h.field]*1e3).format("MM/DD/YY"):"-":r[h.field];return e.jsx(re,{isCurrentUser:b,value:f},p)})]},r.id)}function mt({data:t}){const{isMobile:r}=P(),a=n.useRef(),[l,i]=R(),d=n.useMemo(()=>t?t.filter(p=>p.displayName&&p.displayName!=="anonymous"&&p.displayName!=="no display name").map(p=>p.displayName):[],[t]),g=n.useCallback((p,f)=>{f?d.includes(f)&&l.set("user",f):l.delete("user"),i(l)},[d,l,i]),[c,o]=n.useState(!1),u=n.useCallback(()=>{o(!0),setTimeout(()=>a.current.focus(),15)},[]),b=n.useCallback(()=>o(!1),[]),k={maxWidth:450,margin:8},h=c&&r?{width:"auto",position:"fixed",left:60,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{};return e.jsxs(A.Fragment,{children:[!c&&r&&e.jsx(H,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(ce,{color:"inherit",onClick:u,children:e.jsx(fe,{})})}),(c||!r)&&e.jsx(Fe,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:{...k,...h},options:d,onChange:g,renderInput:p=>e.jsx(_e,{...p,placeholder:"Search Leaderboard",variant:"standard",color:"secondary",inputRef:a,InputProps:{...p.InputProps,startAdornment:e.jsx(ze,{position:"start",children:e.jsx(fe,{})})}})}),e.jsx(Pe,{invisible:!0,open:c&&r,onClick:b})]})}function ft(){const[t,r]=n.useState(null),a=!!t,l=n.useCallback(u=>r(u.currentTarget),[]),i=n.useCallback(()=>r(null),[]),[d,g]=R(),c=d.get("sort"),o=n.useCallback(u=>()=>{i(),u&&u!==c?d.set("sort",u):d.delete("sort"),g(d)},[d,g,c,i]);return e.jsxs(A.Fragment,{children:[e.jsx(H,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(ce,{color:"inherit",onClick:l,children:e.jsx(qe,{variant:"dot",color:"secondary",overlap:"circular",invisible:!c,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(He,{})})})}),e.jsx(We,{anchorEl:t,open:a,onClose:i,children:gt.map(({label:u,value:b})=>e.jsx(Le,{onClick:o(b),selected:c===b,children:u},u))})]})}const gt=[{label:"Default",value:void 0},{label:"Own",value:"own"},{label:"Picked",value:"picked"},{label:"Wishlist",value:"wishlist"},{label:"Scorecard",value:"recordedLocks"}];var _={},ve;function bt(){if(ve)return _;ve=1;var t=G();Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var r=t(Y()),a=J();return _.default=(0,r.default)([(0,a.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,a.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch"),_}var vt=bt();const jt=K(vt);function yt({tab:t}){const r=we(),{isLoggedIn:a,user:l}=n.useContext(X),i=n.useCallback(()=>{r(`/leaderboard/${t}?user=me`)},[r,t]);return!a||l!=null&&l.privacyNoLeaderboard?null:e.jsx(H,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(ce,{color:"inherit",onClick:i,children:e.jsx(jt,{})})})}function je({userData:t,max:r}){if(!t)return null;const a=Be.reduce((u,b)=>{const k=t.beltCounts[b]?t.beltCounts[b]:0;return u.push({id:b,label:b,count:k,value:k}),u},[]),{isMobile:l}=P(),i=l?160:210,d=l?-90:-45,g=l?{top:0,right:0,bottom:60,left:0}:{top:0,right:0,bottom:60,left:15},c=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#000","#000","#000","#000","#3e3e3e","#a5a93c","#a5a93c","#a5a93c","#a5a93c","#a5a93c","#a5a93c"],o=["#000","#000","#000","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#aaa","#000","#000","#000","#000","#000","#000"];return e.jsx("div",{style:{height:i,padding:"0px 8px 0px 8px",width:"100%",flexGrow:2,backgroundColor:"inherit"},children:e.jsx(Ve,{data:a,maxValue:r,margin:g,padding:.15,colors:u=>c[u.index%c.length],animate:!0,axisBottom:{tickRotation:d},axisLeft:null,enableGridY:!1,theme:Ue,isInteractive:!1,enableLabel:!0,label:u=>u.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:u=>o[u.index%o.length]})},"bar")}function ye({userData:t}){if(!t)return null;const{isMobile:r}=P(),a=r?"1.3rem":"1.8rem",l=r?"0.83rem":"1rem",i=r?"BB Locks":"Eligible Black Belt Locks",d=r?"10px 4px 18px 0px":"10px 12px 18px 0px";return e.jsx("div",{style:{placeItems:"right"},children:e.jsxs("div",{style:{textAlign:"right",padding:d,backgroundColor:"inherit",fontSize:l},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:e.jsxs("nobr",{children:["Eligible for Dan ",e.jsx("span",{style:{fontSize:a,lineHeight:"1rem"},children:t.danLevel})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Dan Points ",e.jsx("strong",{children:t.danPoints})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:[i," ",e.jsx("strong",{children:t.blackBeltCount})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Unique Locks ",e.jsx("strong",{children:t.uniqueLocks})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Masters Projects ",e.jsx("strong",{children:t.projects})]})})]})})}function ke({blackBeltData:t,fighter:r,label:a,param:l,opponent:i}){const[d,g]=R(),[c,o]=n.useState(!1),u=n.useCallback(()=>o(!1),[]),b=n.useCallback(()=>o(!0),[]),k=n.useCallback(f=>{d.set(l,f.target.value.id),g(d),u()},[u,l,d,g]),{isMobile:h}=P(),p=h?150:220;return e.jsxs(Ge,{style:{marginBottom:10,minWidth:p,textAlign:"left"},size:"small",children:[e.jsx(Ye,{color:"info",children:a}),e.jsx(Je,{value:r,name:"fighter",label:a,open:c,onClose:u,onOpen:b,onChange:k,style:{fontWeight:400,color:"#eee"},color:"info",children:t.filter(f=>f.id!==i).map((f,B)=>e.jsx(Le,{value:f,children:f.displayName},B))})]})}var q={},Ce;function kt(){if(Ce)return q;Ce=1;var t=G();Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var r=t(Y()),a=J();return q.default=(0,r.default)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox"),q}var Ct=kt();const Se=K(Ct);function St({entry:t,data:r}){var o,u;const a=r&&((o=r[0])==null?void 0:o.find(b=>t.id===b.matchId)),l=a?"#1d801d":"#000",i=r&&((u=r[1])==null?void 0:u.find(b=>t.id===b.matchId)),d=i?"#4d4dc1":"#000",g=a&&i?"#111":a?"#032703":i?"#0f0f37":"#000",c=!a&&!i?"#777":"#fff";return e.jsxs("div",{style:{display:"flex",backgroundColor:g,borderTop:"2px solid #111"},children:[e.jsx("div",{style:{width:40,display:"flex",alignItems:"center"},children:a&&e.jsx(Se,{style:{color:l,marginLeft:10}})}),e.jsx(Ze,{style:{minHeight:56,color:c,padding:3},children:e.jsx(De,{primary:$e(t),primaryTypographyProps:{fontWeight:500,textAlign:"center",fontSize:"1.03rem"},secondary:t.version,secondaryTypographyProps:{color:"#999",textAlign:"center"},style:{padding:"0px 0px 0px 10px"}})},t.id),e.jsx("div",{style:{width:40,display:"flex",alignItems:"center"},children:i&&e.jsx(Se,{style:{color:d,marginRight:10}})})]})}function Lt({data:t}){const r=Ae({url:Ke}),a=n.useMemo(()=>r.data?r.data.blackBeltOnly.listStats.recordedLocks.topItems:[],[r]),l=n.useMemo(()=>a.map(i=>({...Oe(i.id),lockName:i.name,popularityRank:i.rank,userCount:i.saveCount})),[a]).slice(0,100);return e.jsx(A.Fragment,{children:l.map(i=>e.jsx(St,{entry:i,data:t},i.id))})}function wt({blackBeltData:t,compare:r,setCompare:a}){const l=Me(),[i,d]=R(),{getPickerActivity:g}=n.useContext(Te),{bb1:c,bb2:o,title:u}=n.useMemo(()=>{const j=se.parse(l.search);return{bb1:j.bb1?j.bb1:void 0,bb2:j.bb2?j.bb2:void 0,title:j.title?j.title:void 0}},[l.search]),[b,k]=n.useState([]);n.useEffect(()=>{async function j(){const O=c?await g(c):[],$=xe(O).scoredActivity.filter(E=>E.matchId&&!E.exceptionType),Z=o?await g(o):[],ee=xe(Z).scoredActivity.filter(E=>E.matchId&&!E.exceptionType);k([$,ee])}j().then()},[c,o,g]);const h=n.useMemo(()=>t.find(j=>j.id===c)||"",[c,t]),p=n.useMemo(()=>t.find(j=>j.id===o)||"",[o,t]),[f,B]=n.useState(!!c||!!o||r);n.useEffect(()=>{a(!!c||!!o||f)},[c,o,f,a]);const L=n.useCallback(()=>{B(!f)},[f]),S=n.useCallback(()=>{i.delete("bb1"),i.delete("bb2"),i.delete("title"),d(i),B(!f)},[i,d,f]),M=h!=null&&h.displayName?h.displayName.replace(/[\s/]/g,"_").replace(/\W/g,""):"Unknown",w=p!=null&&p.displayName?p.displayName.replace(/[\s/]/g,"_").replace(/\W/g,""):"Unknown",I=c||o?M+"-vs-"+w:null;(c||o)&&u!==I&&setTimeout(()=>d({bb1:c,bb2:o,title:I}),250);const N=Be.reduce((j,O)=>{const $=h&&h.beltCounts[O]?h.beltCounts[O]:0,Z=p&&p.beltCounts[O]?p.beltCounts[O]:0,ee=Math.max($,Z);return j=Math.max(j,ee),j},0),W=f?"#222":"#000",s=(h==null?void 0:h.danPoints)>(p==null?void 0:p.danPoints)?"#333":"#222",m=(p==null?void 0:p.danPoints)>(h==null?void 0:h.danPoints)?"#333":"#222",{isMobile:D}=P(),Q=D?"block":"flex",U=D?"flex":"block",x=D?"100%":"50%",C=D?0:10;return e.jsxs(A.Fragment,{children:[e.jsxs(et,{expanded:f,disableGutters:!0,style:{marginBottom:20,backgroundColor:W},children:[e.jsx(tt,{style:{placeItems:"center",textAlign:"center",width:"100%",backgroundColor:W},children:e.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[!f&&e.jsx(pe,{onClick:L,variant:"outlined",color:"info",size:"small",children:"Compare Mode!"}),f&&e.jsx(A.Fragment,{children:e.jsx(pe,{onClick:S,variant:"outlined",color:"info",size:"small",style:{marginLeft:10},children:"Close Compare"})})]})}),e.jsx(rt,{style:{backgroundColor:"#111",padding:"16px 0px 0px 0px"},children:e.jsxs("div",{style:{backgroundColor:"#111",padding:0},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"50%",padding:0,margin:4,textAlign:"center"},children:e.jsx(ke,{blackBeltData:t,fighter:h,label:"Fighter #1",param:"bb1",opponent:o})}),e.jsx("div",{style:{width:"50%",padding:0,margin:4,textAlign:"center"},children:e.jsx(ke,{blackBeltData:t,fighter:p,label:"Fighter #2",param:"bb2",opponent:c})})]}),e.jsxs("div",{style:{display:Q},children:[e.jsxs("div",{style:{width:x,backgroundColor:s,padding:8,margin:4},children:[e.jsx("div",{style:{width:"100%",fontSize:"1.4rem",fontWeight:700,marginLeft:C},children:h==null?void 0:h.displayName}),e.jsxs("div",{style:{display:U},children:[e.jsx(ye,{userData:h}),e.jsx(je,{userData:h,max:N})]})]}),e.jsxs("div",{style:{width:x,backgroundColor:m,padding:8,margin:4},children:[e.jsx("div",{style:{width:"100%",fontSize:"1.4rem",fontWeight:700,marginLeft:C},children:p==null?void 0:p.displayName}),e.jsxs("div",{style:{display:U},children:[e.jsx(ye,{userData:p}),e.jsx(je,{userData:p,max:N})]})]})]})]})})]}),r&&e.jsx("div",{style:{textAlign:"center",width:"100%",fontWeight:700,fontSize:"1.1rem",marginBottom:8},children:"MOST POPULAR LOCKS"}),e.jsxs("div",{style:{display:"flex",width:"100%",fontWeight:700,fontSize:"1.1rem",marginBottom:8},children:[e.jsx("div",{style:{flexGrow:1,color:"#1d801d"},children:M!=="Unknown"&&e.jsx("span",{children:M})}),e.jsx("div",{style:{textAlign:"right",color:"#4e4ed0"},children:w!=="Unknown"&&e.jsx("span",{children:w})})]}),r&&e.jsx(Lt,{data:b})]})}function Bt({data:t}){const{user:r}=n.useContext(X),{isMobile:a}=P(),l=n.useMemo(()=>t?t.awards.filter(s=>s.displayName).filter(s=>v().diff(s.date,"day")<=14).map(s=>{const m=(r==null?void 0:r.uid)===s.userId;return{...s,isCurrentUser:m}}).sort((s,m)=>v(m.date).valueOf()-v(s.date).valueOf()).slice(0,50):[],[t,r==null?void 0:r.uid]),i=n.useMemo(()=>t?t.evidence.filter(s=>s.displayName).filter(s=>v().diff(s.date,"day")<=14).map(s=>{const m=(r==null?void 0:r.uid)===s.userId;return{...s,isCurrentUser:m}}).sort((s,m)=>v(m.date).valueOf()-v(s.date).valueOf()).slice(0,900):[],[t,r==null?void 0:r.uid]),d=v(t==null?void 0:t.metadata.updatedDateTime).format("MM/DD/YY HH:mm"),[g,c]=R(),o=g.get("sort"),u=o&&o.includes("ev"),[b,k]=n.useState(!1),[h,p]=n.useState(!1),f=n.useCallback(s=>()=>{o&&s!==o?(g.set("sort",s),k(u?b:!1),p(u?!1:h)):o&&s===o?(k(u?b:!b),p(u?!h:h)):s==="date"?(g.set("sort",s),k(!0)):s==="evDate"?(g.set("sort",s),p(!0)):g.set("sort",s),c(g)},[u,h,b,g,c,o]),B=n.useMemo(()=>o?l.sort((s,m)=>{if(o==="name")return s.displayName.localeCompare(m.displayName);if(o==="belt")return he(s.awardName.replace(" Belt",""),m.awardName.replace(" Belt",""))||s.displayName.localeCompare(m.displayName);if(o==="date")return v(m.date).valueOf()-v(s.date).valueOf()}):l.sort((s,m)=>v(m.date).valueOf()-v(s.date).valueOf()),[l,o,b]),L=n.useMemo(()=>b?B.reverse():B,[B,b]),S=n.useMemo(()=>o?i.sort((s,m)=>{if(o==="evName")return s.displayName.localeCompare(m.displayName);if(o==="evLock")return s.evidenceName.localeCompare(m.evidenceName)||s.displayName.localeCompare(m.displayName);if(o==="evBelt")return he(s.belt.replace(" Belt",""),m.belt.replace(" Belt",""))||s.displayName.localeCompare(m.displayName);if(o==="evDate")return v(m.date).valueOf()-v(s.date).valueOf()}):i.sort((s,m)=>v(m.date).valueOf()-v(s.date).valueOf()),[i,o,h]),M=n.useMemo(()=>h?S.reverse():S,[S,h]),w=a?"auto":"170px",I=a?16:20,N=n.useCallback(s=>{const m=s.replace(" Belt","");return me[m]?me[m].color:s.includes("Dan")?"#769e49":"#b00"},[]),W=n.useCallback(s=>{const m=window.open(s,"_blank","noopener,noreferrer");m&&(m.opener=null)},[]);return e.jsxs(A.Fragment,{children:[e.jsxs("div",{style:{justifyItems:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:"Recent Belts & Dans"}),e.jsx(ne,{sx:{backgroundColor:"#111",maxWidth:500},children:e.jsxs(le,{sx:{minWidth:360,align:"left"},children:[e.jsx(oe,{children:e.jsxs(T,{children:[e.jsx(y,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222"},children:e.jsx("span",{style:o==="name"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("name"),children:"User"})}),e.jsx(y,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222",width:w},children:e.jsx("div",{style:o==="belt"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("belt"),children:"Belt"})}),e.jsx(y,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!o||u||o==="date"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("date"),children:"Date"})})]})}),e.jsx(ae,{children:L.map((s,m)=>e.jsxs(T,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(y,{align:"left",style:{padding:"0px 0px 0px 16px",width:w},children:e.jsx("span",{style:{fontWeight:500},children:e.jsx(ie,{leader:s,isCurrentUser:s.isCurrentUser,tab:"blackBelts",maxLength:I})})}),e.jsx(y,{align:"left",style:{backgroundColor:N(s.awardName),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(y,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:s.awardName})}),e.jsx(y,{align:"center",style:{fontWeight:500},children:v(s.date).format("MMM DD")})]},m))})]})})]}),e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:"Recent Picks and Projects"}),e.jsx(ne,{sx:{backgroundColor:"#111",maxWidth:650},children:e.jsxs(le,{sx:{minWidth:360,align:"left"},children:[e.jsx(oe,{children:e.jsxs(T,{children:[e.jsx(y,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:w},children:e.jsx("span",{style:o==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evName"),children:"User"})}),e.jsxs(y,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:o==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evLock"),children:"Lock"}),e.jsx("span",{style:o==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evBelt"),children:" (Belt)"})]}),e.jsx(y,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!u||o==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evDate"),children:"Date"})})]})}),e.jsx(ae,{children:M.map((s,m)=>e.jsxs(T,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(y,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:w},children:e.jsx(ie,{leader:s,isCurrentUser:s.isCurrentUser,tab:"blackBelts",maxLength:I})})}),e.jsx(y,{align:"left",style:{backgroundColor:N(s.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(y,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(ot,{onClick:()=>W(s.evidenceUrl),style:{color:"#fff"},children:s.evidenceName})})}),e.jsx(y,{align:"center",children:e.jsx("nobr",{children:v(s.date).format("MMM DD")})})]},m))})]})}),e.jsxs("div",{style:{width:"100%",marginTop:12,fontSize:"0.8rem",textAlign:"center"},children:["Last update: ",d," GMT"]})]})]})}function or({tab:t}){const{data:r,loading:a,error:l,errorMessage:i}=Ae({urls:Mt}),d=Me(),{user:g}=n.useContext(X),c=n.useRef(),{isMobile:o}=P(),u=we(),{bb1:b,bb2:k,compareMode:h}=n.useMemo(()=>{const x=se.parse(d.search);return{bb1:x.bb1?x.bb1:void 0,bb2:x.bb2?x.bb2:void 0,compareMode:!!x.compare}},[d.search]),[p,f]=n.useState(!!b||!!k||h),{highlightedUser:B,sort:L}=n.useMemo(()=>{const x=se.parse(d.search);return{highlightedUser:x.user,sort:x.sort&&At.includes(x.sort)?x.sort:void 0}},[d.search]),S=n.useMemo(()=>({locks:{defaultSort:"locksCollection",columns:[{field:"own",order:"desc",tooltip:"Sort by Own"},{field:"picked",order:"desc",tooltip:"Sort by Picked"},{field:"wishlist",order:"desc",tooltip:"Sort by Wishlist"},{field:"recordedLocks",order:"desc",tooltip:"Sort by Scorecard"}]},safelocks:{defaultSort:"safelocksCollection",columns:[{field:"safelocksOwn",order:"desc",tooltip:"Sort by Own"},{field:"safelocksCracked",order:"desc",tooltip:"Sort by Cracked"},{field:"safelocksWishlist",order:"desc",tooltip:"Sort by Wishlist"}]},blackBelts:{defaultSort:"danPoints",columns:[{field:"danLevel",order:"desc",tooltip:"Sort by Dan Level"},{field:"danPoints",order:"desc",tooltip:"Sort by Dan Points"},{field:"blackBeltCount",order:"desc",tooltip:"Sort by Black Belt Locks"},{field:"blackBeltAwardedAt",order:"asc",tooltip:"Sort by Date"}]},recent:{defaultSort:"",columns:[]}}),[]),M=S[t].columns.find(x=>x.field===L)?S[t].columns.find(x=>x.field===L).order:"desc",w=n.useMemo(()=>{const x=r?r==null?void 0:r.leaderboardData.data.filter(C=>!C.privacyNoLeaderboard).filter(C=>C[S[t].defaultSort]>0):[];return t==="blackBelts"?x.filter(C=>C.blackBeltAwardedAt>0):x},[r,t,S]),I=n.useMemo(()=>r==null?void 0:r.leaderboardData.data.filter(x=>!x.privacyNoLeaderboard).filter(x=>x.blackBeltAwardedAt>0),[r]),N=n.useMemo(()=>L&&M==="desc"?w.sort((x,C)=>(C[L]||0)-(x[L]||0)):L&&M==="asc"?w.sort((x,C)=>(x[L]||0)-(C[L]||0)):w.sort((x,C)=>(C[S[t].defaultSort]||0)-(x[S[t].defaultSort]||0)),[L,M,w,S,t]),W=v(r==null?void 0:r.leaderboardData.metadata.updatedDateTime).format("MM/DD/YY HH:mm"),s=n.useCallback(x=>{f(!1),x&&x!==t&&u("/leaderboard/"+x)},[u,t]),m=p?null:e.jsxs(A.Fragment,{children:[e.jsx(mt,{data:N}),e.jsx(ft,{}),e.jsx(yt,{tab:t}),!o&&e.jsx("div",{style:{flexGrow:1}})]}),D=a?"Loading...":"Leaderboard",Q=o?"Safes":"Safe Locks",U=t==="blackBelts"?"100%":"78vh";if(a)return e.jsx(st,{});if(l)return e.jsx(nt,{errorMessage:i});if(r&&!l)return e.jsxs(A.Fragment,{children:[e.jsx(Re,{title:D,extras:m}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx("div",{style:{flexGrow:1,textAlign:"center",marginBottom:10},children:e.jsxs(lt,{variant:"outlined",size:"large",children:[e.jsx(V,{onClick:()=>s("locks"),selected:t==="locks",disabled:t==="locks",value:"collection",style:{padding:"2px 12px 2px 12px"},children:"Locks"}),e.jsx(V,{onClick:()=>s("safelocks"),selected:t==="safelocks",disabled:t==="safelocks",value:"safelocks",style:{padding:"2px 12px 2px 12px"},children:Q}),e.jsx(V,{onClick:()=>s("blackBelts"),selected:t==="blackBelts",disabled:t==="blackBelts",value:"scorecard",style:{padding:"2px 12px 2px 12px"},children:"Black Belts"}),e.jsx(V,{onClick:()=>s("recent"),selected:t==="recent",disabled:t==="recent",value:"recent",style:{padding:"2px 12px 2px 12px"},children:"Recent"})]})}),t==="blackBelts"&&e.jsx(wt,{blackBeltData:I,compare:p,setCompare:f}),!p&&t!=="recent"&&e.jsxs(A.Fragment,{children:[e.jsx(ne,{sx:{height:U,backgroundColor:"#111"},id:"scrollable",ref:c,children:e.jsxs(le,{stickyHeader:!0,children:[e.jsx(xt,{columns:S[t].columns}),e.jsx(ae,{children:N.map((x,C)=>{const j=!!B&&(B==="me"&&x.id===(g==null?void 0:g.uid)||B===x.displayName);return e.jsx(ht,{index:C,leader:x,scrollableRef:c,highlighted:j,columns:S[t].columns,tab:t},x.id)})})]})}),e.jsxs("div",{style:{width:"100%",marginTop:12,fontSize:"0.8rem",textAlign:"center"},children:["Last update: ",W," GMT"]})]}),t==="recent"&&e.jsx(Bt,{data:r.recentAwardsEvidence})]})]})}const Mt={leaderboardData:Qe,recentAwardsEvidence:Xe},At=["own","picked","recordedLocks","wishlist","safelocksOwn","safelocksCracked","safelocksWishlist","danLevel","danPoints","blackBeltCount","blackBeltAwardedAt"];export{or as default};
