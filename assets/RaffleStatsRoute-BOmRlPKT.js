import{b as S,r as c,j as t,L as b,u as R,d as C,R as y,e as k,N as v,h as T,T as F}from"./index-CrjJpmiC.js";import{e as N}from"./filterFields-B6FRiPu1.js";import{A as L}from"./AdminToolButtons-CYdYJrS9.js";import{R as W}from"./RaffleDataProvider-C7uT3GcQ.js";import{R as j}from"./RaffleContext-BfTT3q6x.js";import{R as A}from"./RaffleHeader-Bi1uzsI-.js";import{L as H}from"./LoadingDisplay-DAnlHeyo.js";import{u as z}from"./useData-U7ZrQV55.js";import{u as M}from"./usePageTitle-DdISuB35.js";import{o as P}from"./dataUrls-DVxTtpO-.js";import{D as Y}from"./DataContext-D_sxQ7vG.js";import{D}from"./DataTableSort-C1zPDqbZ.js";import{R as q,a as E}from"./RaffleYOYLines-D9qZdR0-.js";import{R as $}from"./RaffleHiddenDialog-Nsk_Wmsi.js";import{R as B}from"./RaffleSubHead-k2yAfUVV.js";import"./EmojiEvents-BdMw6gR2.js";import"./filterEntriesAdvanced-CHy8YSRy.js";import"./index-DTCC4g2a.js";import"./setDeep-J6HEwWhX.js";import"./Cached-CCsp1e_E.js";import"./ExpandMore-fEdiMP3l.js";import"./CircularProgress-DfTXp3xF.js";import"./index-B9ygI19o.js";import"./Box-By0E8Z4C.js";import"./AccordionSummary-BVqST_oE.js";import"./Collapse-BZV2ILAR.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-BqztSwIO.js";import"./ArrowDropDown-CWSa6eb7.js";import"./TableRow-DWxoeLEd.js";import"./nivo-line-c7HOXyEw.js";import"./nivo-legends-64FjwmF5.js";import"./isEqual-ClQqGoPP.js";import"./uniq-BfHOACip.js";import"./utcYear-gK7uF64J.js";import"./adminChartDefaults-CBhS7ojG.js";import"./Dialog-_gFDuRXt.js";const O=({summary:n,tableWidth:d,nameLength:o})=>{const a=S(),{getPotFromId:m}=c.useContext(Y),p=[{id:"sortPotNumber",align:"left",name:"#"},{id:"title",align:"left",name:"Title"},{id:"uniqueDonorCount",name:"Donors",align:"center",descending:!0},{id:"totalTickets",name:"Tickets",align:"center",descending:!0}],f=Object.keys(n.pots).map(e=>{var g,h;const i=m(e);if(!i)return null;let l=i!=null&&i.title?i.title.substring(0,o):`unknown (${e})`;return l=((g=i==null?void 0:i.title)==null?void 0:g.length)<o||!(i!=null&&i.title)?l:l+"...",{...n.pots[e],...i,title:l,uniqueDonorCount:((h=n.pots[e])==null?void 0:h.uniqueDonorCount)||0}}).filter(e=>e),u=f.map(e=>e.donors&&e.donors>0?{...e}:{...e,donors:0,tickets:0}),s={columns:p,rows:u,defaultSort:"title",sortable:!0},r=c.useCallback((e,i)=>{const l=f.find(h=>h.title===i),g=l==null?void 0:l.title.replace(/[\s/]/g,"_").replace(/\W/g,"");return e==="title"?t.jsx(b,{onClick:()=>a(`/rafl/?id=${l.id}&name=${g}`),style:{color:"#fff"},children:i}):i},[a,f]);return t.jsx("div",{children:t.jsx(D,{tableData:s,tableWidth:d,linkFunction:r})})},_=({data:n,columns:d,tableWidth:o,nameLength:a})=>{const{allCharities:m}=c.useContext(j);n=m,d=[{id:"displayName",align:"left",name:"Charity Name"},{id:"donors",name:"Donors",align:"center",descending:!0},{id:"donations",name:"Raised",align:"center",displayField:"donationsText",descending:!0}];const p=n.map(s=>{var e;let r=s!=null&&s.name?s==null?void 0:s.name.substring(0,a):"unknown";return r=((e=s==null?void 0:s.name)==null?void 0:e.length)<a?r:r+"...",{...s,displayName:r}}),u={columns:d,rows:p,defaultSort:"displayName",sortable:!0},x=c.useCallback((s,r)=>r,[]);return t.jsxs("div",{children:[t.jsx("div",{style:{justifyItems:"center",marginBottom:20,width:400}}),t.jsx(D,{tableData:u,tableWidth:o,linkFunction:x})]})};function G(){M("RAFL Stats");const{summary:n}=c.useContext(j),{data:d,loading:o,error:a}=z({urls:J}),{raflResponseDetails:m}=d||{},{width:p,isMobile:f}=R(),u=o?"--":"(updated: "+C(n.updatedAt).format("MM/DD/YY hh:mm")+")",x={margin:"26px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},s={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},r=f?"8px 8px 32px 8px":"24px 24px 32px 24px",e=p<=560?p-20:640,i=f?24:48;return o?t.jsx(H,{}):a?null:t.jsxs(y.Fragment,{children:[t.jsxs("div",{style:{minWidth:"320px",maxWidth:700,height:"100%",padding:r,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto"},children:[t.jsx(q,{}),t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#fff"},children:t.jsx("span",{style:{fontSize:"0.8rem",marginTop:0},children:u})}),t.jsx(E,{data:m.detailedData}),t.jsx("div",{style:x,children:"Pots"}),t.jsx(O,{summary:n,tableWidth:e,nameLength:i}),t.jsx("div",{style:s,children:"Charities"}),t.jsx(_,{summary:n,tableWidth:e,nameLength:i})]}),t.jsx($,{})]})}const J={raflResponseDetails:P};function Nt(){const{isMobile:n}=R(),{allPots:d}=c.useContext(j),o=t.jsxs(y.Fragment,{children:[!n&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(L,{})]}),a=n?8:0,m={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:a,paddingRight:a};return t.jsx(k,{filterFields:N,children:t.jsx(W,{allEntries:d,children:t.jsxs("div",{style:m,children:[t.jsx(v,{title:"RAFL Stats",extras:o}),t.jsx(A,{page:"stats"}),t.jsx(B,{text:"Stats!"}),t.jsx(G,{}),t.jsx(T,{}),t.jsx(F,{feature:"raflStats"})]})})})}export{Nt as default};
