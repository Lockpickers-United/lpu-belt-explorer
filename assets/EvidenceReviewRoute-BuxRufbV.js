import{r as o,j as e,R as v,W as A,U as z,u as Y,a6 as I,ac as U,ap as F,d as g,aq as L,L as D,N as O,h as q}from"./index-DUOldBnw.js";import{u as G}from"./usePageTitle-DFUcoWTm.js";import{L as H}from"./LeaderboardName-hQ7qOhMf.js";import{C as J}from"./ChoiceButtonGroup-DTmzPgFv.js";import{C as _}from"./Cached-DOKQ3rkG.js";import{L as $}from"./LoadingDisplayWhite-B7z3URxz.js";import{E as K}from"./ExpandMore-BFCJtvKW.js";import{n as Q}from"./dataUrls-DkJe4Pqg.js";import{A as V,a as X,b as Z}from"./AccordionSummary-DLDHiYYc.js";import{c as ee,d as te,T as re,a as R,b as a,e as se}from"./TableRow-CHOZaiT7.js";import{u as oe}from"./useData-BgMT3Jfy.js";import{L as ne}from"./LoadingDisplay-DNYEKytW.js";import"./ToggleButtonGroup-2jhcjC3c.js";import"./CircularProgress-CSAix4nz.js";import"./Collapse-VwlsLXoP.js";import"./Box-B-qMzern.js";function ie({refresh:n}){const[u,d]=o.useState(!1),[l,p]=o.useState(""),[c,y]=o.useState(!1),C=o.useCallback(async()=>{const i=`${Q}/export-evidence`;d(!0),await fetch(i,{cache:"no-store"}).then(async h=>(d(!1),await h.text())).then(async h=>{p(h),console.log(`export response
`,h),location.reload()}),await n()},[n]);return e.jsxs(v.Fragment,{children:[e.jsx("div",{style:{maxWidth:700,margin:"5px auto 5px auto",padding:2,fontWeight:700,fontSize:"1.2rem",display:"flex",justifyContent:"center"},children:u?e.jsx($,{}):e.jsx(A,{title:"Refresh Evidence Data",arrow:!0,disableFocusListener:!0,children:e.jsx(z,{onClick:C,style:{marginRight:10},children:e.jsx(_,{})})})}),(l==null?void 0:l.status)==="Errors"&&e.jsxs(V,{expanded:c,onChange:()=>y(!c),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(X,{expandIcon:e.jsx(K,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(Z,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(l,null,2)})})]})]})}function ae({data:n,updated:u}){const{isMobile:d}=Y(),{admin:l}=o.useContext(I),p=o.useMemo(()=>[{label:"Modified Picks"},{label:"Scorecard Projects"},{label:"All Projects"}],[]),[c,y]=o.useState(p[0]),C=o.useCallback(t=>y(t),[]);let i;switch(c.label){case"Scorecard Projects":i=n.projects.filter(t=>!t.tabName);break;case"All Projects":i=n.projects;break;case"Modified Picks":i=n.modifiers;break;default:i=n.modifiers.filter(t=>t.blackBelt)}const h=c.label.includes("Modified")?"Lock":"Project",E=c.label.includes("Modified")?"Belt":"Tier",[m,M]=U(),r=m.get("sort"),f=r&&r.includes("ev"),[b,k]=o.useState(!1),[x,S]=o.useState(!1),j=o.useCallback(t=>()=>{r&&t!==r?(m.set("sort",t),k(f?b:!1),S(f?!1:x)):r&&t===r?(k(f?b:!b),S(f?!x:x)):t==="date"?(m.set("sort",t),k(!0)):t==="evDate"?(m.set("sort",t),S(!0)):m.set("sort",t),M(m)},[f,x,b,m,M,r]),W=o.useMemo(()=>i&&r?i.sort((t,s)=>{if(r==="evName")return(t.displayName||"").localeCompare(s.displayName||"");if(r==="evLock")return t.evidenceName.localeCompare(s.evidenceName)||(t.displayName||"").localeCompare(s.displayName||"");if(r==="evBelt")return F(t.belt.replace(" Belt",""),s.belt.replace(" Belt",""))||(t.displayName||"").localeCompare(s.displayName||"");if(r==="evModifier")return t.modifier.localeCompare(s.modifier)||(t.displayName||"").localeCompare(s.displayName||"");if(r==="evDate")return g(s.date).valueOf()-g(t.date).valueOf()}):i.sort((t,s)=>g(s.date).valueOf()-g(t.date).valueOf()),[r,i,x]),T=o.useMemo(()=>x?W.reverse():W,[W,x]),N=d?"auto":"170px",w=d?16:20,B=o.useCallback(t=>{const s=t.replace(" Belt","");return L[s]?L[s].color:t.includes("Dan")?"#769e49":"#b00"},[]),P=o.useCallback(t=>{const s=window.open(t,"_blank","noopener,noreferrer");s&&(s.opener=null)},[]);return e.jsx(v.Fragment,{children:e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:["Project & Pick Review",e.jsxs("div",{style:{fontWeight:400,fontSize:"0.9rem",width:"100%",textAlign:"center",margin:"0px 0px"},children:["Through ",g(u).format("MMM DD, YYYY")]})]}),e.jsx("div",{style:{marginBottom:20},children:e.jsx(J,{options:p,onChange:C})}),e.jsx(ee,{sx:{backgroundColor:"#111",maxWidth:800,margin:"auto"},children:e.jsxs(te,{sx:{minWidth:360,align:"left"},children:[e.jsx(re,{children:e.jsxs(R,{children:[e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:N},children:e.jsx("span",{style:r==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evName"),children:"User"})}),e.jsxs(a,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:r==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evLock"),children:h}),e.jsxs("span",{style:r==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evBelt"),children:["Â (",E,")"]})]}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!f||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evModifier"),children:"Modifier"})}),e.jsx(a,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!f||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evDate"),children:"Date"})})]})}),e.jsx(se,{children:T.map((t,s)=>e.jsxs(R,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(a,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:N},children:e.jsx(H,{leader:t,isCurrentUser:t.isCurrentUser,tab:"blackBelts",maxLength:w})})}),e.jsx(a,{align:"left",style:{backgroundColor:B(t.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(D,{onClick:()=>P(t.evidenceUrl),style:{color:"#fff"},children:t.evidenceName})})}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5,marginRight:5},children:e.jsx(D,{onClick:()=>P(t.evidenceUrl),style:{color:"#fff"},children:t.modifier})})}),e.jsx(a,{align:"center",children:e.jsx("nobr",{children:g(t.date).format("MMM DD, YYYY")})})]},s))})]})}),l&&e.jsx(ie,{})]})})}function We(){var p;G("All Projects");const{data:n,loading:u,error:d}=oe({url:le}),l=e.jsx(v.Fragment,{});return e.jsxs(v.Fragment,{children:[e.jsx(O,{title:"All Projects",extras:l}),(u||d)&&e.jsx(ne,{}),!u&&n&&e.jsx(ae,{data:n,updated:(p=n==null?void 0:n.metadata)==null?void 0:p.updatedDateTime}),e.jsx(q,{})]})}const le="https://explore.lpubelts.com/data/allProjects.json";export{We as default};
