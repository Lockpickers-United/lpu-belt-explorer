import{R as f,b as v,r as a,O as b,j as t,a4 as E,at as k,U as I,F,aI as T,D as U,e as L,a8 as D,N as R,h as S,T as N}from"./index-CIeqWjaI.js";import{l as w}from"./filterFields-9XREaNf4.js";import{u as B}from"./usePageTitle-SdP95Dki.js";import{a as W}from"./LockListContext-4v_01ZVN.js";import{D as O}from"./LockDataProvider-1GP1f7YQ.js";import"./filterEntriesAdvanced-vIWASIZZ.js";import{D as P}from"./DataContext-COZ6fGyj.js";import"./index-BVsW4swF.js";import{e as x}from"./entryName-Dn7ggcla.js";import{I as M}from"./IntroCopy-B0QzcEag.js";import{B as $}from"./BeltStripe-MMkTwgqN.js";import{O as q}from"./OpenInNew-76suZE34.js";import{L as z}from"./ListItem-Bb25B9nT.js";import"./collectionStatsById-DY1NVZ7h.js";import"./useData-De5BWRVX.js";import"./dataUrls-DVxTtpO-.js";import"./setDeep-J6HEwWhX.js";import"./stringUtils-BsiQ3MZ5.js";import"./index-_177152l.js";import"./index-DTJi0fjC.js";import"./index-B-7TJQKc.js";function H({upgradeTree:r=[],baseId:s,expanded:l,onExpand:d}){const p=v(),n=a.useRef(null),[e,o]=a.useState(!1),{id:u}=b.parse(location.search),C=a.useCallback((i,m)=>{d&&d(m?s:!1)},[s,d]);a.useEffect(()=>{if(l&&n&&!e){const m=window.innerWidth<=600?70:74,h=u===s;o(!0),setTimeout(()=>{var j;window.scrollTo({left:0,top:((j=n==null?void 0:n.current)==null?void 0:j.offsetTop)-m,behavior:h?"auto":"smooth"})},h?0:100)}else l||o(!1)},[l,e,s,u]);const g=a.useCallback(i=>()=>{p(`/locks?id=${i.id}`)},[p]),c={maxWidth:700,marginLeft:"auto",marginRight:"auto"},y={color:"#eee",textDecoration:"none",cursor:"pointer","&:hover":{color:"#fff"}};return t.jsxs("div",{ref:n,onChange:C,children:[t.jsx("div",{style:{...c,borderTop:"1px solid #666",height:0}}),r.map(i=>t.jsx(f.Fragment,{children:t.jsxs(z,{style:{...c,minHeight:64,borderTop:"1px solid rgba(255, 255, 255, 0.12)",borderRight:"1px solid #666"},children:[t.jsx($,{value:i.belt}),t.jsx(E,{primary:x(i),primaryTypographyProps:{fontWeight:500},secondary:i.version,style:{padding:"0px 0px 0px 10px"},sx:y,onClick:g(i)}),t.jsx(k,{style:{minWidth:20,marginLeft:16},children:t.jsx(I,{onClick:g(i),children:t.jsx(q,{fontSize:"small",style:{color:"#eee"}})})})]})},i.id)),t.jsx("div",{style:{...c,borderTop:"1px solid #666",height:20}})]})}const _=f.memo(H,(r,s)=>r.baseId===s.baseId&&r.expanded===s.expanded&&r.onExpand===s.onExpand);function A(){const{allEntries:r=[]}=a.useContext(P),{filters:s}=a.useContext(F),[l,d]=a.useState(s.id),p=a.useCallback(e=>r.find(o=>o.id===e),[r]),n=T.map(e=>e.map(o=>p(o)).filter(o=>o)).filter(e=>e.length>0).sort((e,o)=>x(e[0]).localeCompare(x(o[0])));return t.jsx(f.Fragment,{children:t.jsxs("div",{style:{margin:8,padding:"20px 0px"},children:[t.jsx(M,{pageName:"upgrades"}),n.map((e,o)=>t.jsx(_,{upgradeTree:e,baseId:e[0].id,expanded:e[0].id===l,onExpand:d},o))]})})}function xt(){const{lockCollection:r}=a.useContext(U);return B("Upgrades"),t.jsx(L,{filterFields:w,children:t.jsx(O,{allEntries:D,profile:r,children:t.jsxs(W,{children:[t.jsx(R,{title:"Upgrades",extras:null}),t.jsx(A,{profile:r}),t.jsx(S,{extras:null}),t.jsx(N,{feature:"upgrades"})]})})})}export{xt as default};
