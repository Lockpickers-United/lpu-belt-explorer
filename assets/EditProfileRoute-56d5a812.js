import{h as y,i as C,j as e,r as a,Q as c,e as n,C as d,a3 as p,T as L,I as R,c as f,b as x,a1 as P,R as u,U as E,V as S,W as T}from"./index-69a25a31.js";import{l as k}from"./LPU-c3fa7122.js";import{T as F}from"./TextField-84db1f04.js";import{L as w}from"./LinearProgress-3c7c24c9.js";import"./InputLabel-f2b81431.js";var s={},I=C;Object.defineProperty(s,"__esModule",{value:!0});var h=s.default=void 0,_=I(y()),D=e;h=s.default=(0,_.default)((0,D.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");function N(){const{lockCollection:r,updateProfileVisibility:o}=a.useContext(c),[t,l]=a.useState("");a.useEffect(()=>{l(r.displayName)},[r.displayName]);const g=a.useCallback(i=>{const{value:b}=i.target;l(b)},[]),m=a.useCallback(i=>i.target.select(),[]),j=a.useCallback(()=>{try{t?o(!0,t):o(!1,""),n("Updated profile.")}catch(i){console.error("Error while updating profile",i),n("Error while updating profile.")}},[t,o]),v=(t==null?void 0:t.length)>0?`Your profile will be public, as ${t}.`:"Your profile will be private";return e.jsxs(d,{style:{maxWidth:350,marginLeft:"auto",marginRight:"auto",marginTop:16,marginButtom:16},children:[e.jsx(p,{title:"Edit Profile",action:e.jsx(L,{title:"Save",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:j,children:e.jsx(h,{color:"success"})})})}),e.jsxs(f,{children:[e.jsx(x,{children:"Set a display name if you wish your profile to be public. If you want your profile to be private, remove it."}),e.jsx("br",{}),e.jsx(F,{fullWidth:!0,variant:"outlined",color:"secondary",label:"Display Name",helperText:v,maxLength:50,value:t||"",onChange:g,onFocus:m})]})]})}function q(){const r={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return e.jsxs(d,{style:r,children:[e.jsx(p,{title:"Log In!"}),e.jsx(f,{children:e.jsx(x,{variant:"h6",align:"center",children:"You must be logged in to edit your profile."})})]})}function z(){const{authLoaded:r,isLoggedIn:o}=a.useContext(P),{dbLoaded:t}=a.useContext(c);return e.jsxs(u.Fragment,{children:[e.jsx(E,{title:"Edit Profile"}),(!r||!t)&&e.jsxs(u.Fragment,{children:[e.jsx(w,{variant:"indeterminate",color:"secondary"}),e.jsx("img",{alt:"Loading",src:k,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),r&&!o&&e.jsx(q,{}),o&&t&&e.jsx(N,{}),e.jsx(S,{}),e.jsx(T,{feature:"editprofile"})]})}export{z as default};
