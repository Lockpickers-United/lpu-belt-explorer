import{r as t,F as y,j as e,R as F,W as B,U as S,ak as A,a8 as v,au as R,A as T,a6 as E,a5 as I,bc as W,a2 as b,Q as z,P as D,B as O}from"./index-CfbufueW.js";import{B as L,S as w}from"./Sort-CraYu9Gj.js";import{L as M}from"./LockListContext-DBf4ENmo.js";import{a as H,C as V,F as N}from"./FilterAlt-mQn2pkKG.js";import{B as P}from"./Box-Teg10hSI.js";function J({sortValues:c,text:d}){const[s,h]=t.useState(null),m=!!s,C=t.useCallback(n=>h(n.currentTarget),[]),r=t.useCallback(()=>h(null),[]),{filters:p,addFilter:a}=t.useContext(y),{sort:i}=p,{compact:u,setCompact:x}=t.useContext(M),l=t.useCallback(n=>()=>{r(),x(n)},[r,x]),g=t.useCallback(n=>()=>{r(),setTimeout(()=>a("sort",n,!0),0)},[a,r]),j=d?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"VIEW"}):e.jsx(w,{}),k=d?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"};return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:C,children:e.jsx(L,{variant:"dot",color:"secondary",overlap:"circular",invisible:!i,anchorOrigin:k,children:j})})}),e.jsxs(A,{anchorEl:s,open:m,onClose:r,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),c.map(({label:n,value:o})=>e.jsx(v,{onClick:g(o),selected:i===o,children:n},n)),e.jsx(R,{}),e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(v,{onClick:l(!1),selected:!u,children:"Normal"}),e.jsx(v,{onClick:l(!0),selected:u,children:"Compact"})]})]})}function K({onFiltersChanged:c,extraFilters:d=[],text:s}){const{isLoggedIn:h}=t.useContext(T),{beta:m}=t.useContext(E),{filterCount:C,addFilters:r,filterFields:p}=t.useContext(y),[a,i]=t.useState(!1),u=t.useCallback(()=>i(!a),[a]);I("f",u);const x=t.useCallback(()=>i(!0),[]),l=t.useCallback(()=>i(!1),[]),g=t.useCallback((o,f)=>{r([{key:o,value:f},{key:"id",value:void 0},{key:"name",value:void 0},...d],!0),c&&c()},[r,c,d]),j=s?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"FILTER"}):e.jsx(N,{}),k=s?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"},n=s?"dot":null;return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:x,children:e.jsx(L,{variant:n,badgeContent:C,color:"secondary",overlap:"circular",anchorOrigin:k,children:j})})}),e.jsxs(W,{anchor:"right",open:a,onClose:l,children:[e.jsx(b,{variant:"dense",onClick:l,children:e.jsx(z,{variant:"h6",children:"Filters"})}),e.jsx(P,{margin:1,children:e.jsx(D,{direction:"column",style:{minWidth:250},children:p.filter(o=>(!o.beta||m)&&(!o.userBased||h)).map((o,f)=>e.jsx(H,{...o,onFilter:g},f))})}),e.jsxs(b,{variant:"dense",children:[e.jsx(V,{forceText:!0,style:{marginRight:8}}),e.jsx(O,{variant:"outlined",color:"inherit",onClick:l,children:"Done"})]})]})]})}export{K as F,J as S};
