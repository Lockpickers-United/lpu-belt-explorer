import{r as l,j as e,u as R,R as N,N as T,F as w,T as W}from"./index-80de3ed1.js";import{F as B,r as z,f as L,D as F,a as M,b as D}from"./filterFields-e5401cd8.js";import{u as H}from"./usePageTitle-8b0c45ed.js";import{a as k}from"./RaffleContext-52da1787.js";import{N as P}from"./ViewFilterButtons-2c87f26b.js";import{L as y}from"./Link-e139388e.js";import{a as A,b as g,c as E,d as U,T as I,e as G}from"./TableRow-b9779957.js";import{R as K}from"./RaffleSearchBar-e8407123.js";import{a as O}from"./raflCharities-941be44c.js";import{R as V}from"./RaffleHeader-5c97c7b8.js";import{R as _,A as q}from"./AdminRoleButton-4549757f.js";import{R as J}from"./RaffleComingSoon-85009bea.js";import"./useDocumentTitle-4a728d1c.js";import"./useData-760b7197.js";import"./dataUrls-e672e57d.js";import"./LockListContext-100fc817.js";import"./entryName-e82cf1af.js";import"./Badge-56287b91.js";import"./Chip-15397dc4.js";import"./Select-08b48728.js";import"./SearchBox-26406080.js";import"./Box-8da486db.js";import"./Search-177ca487.js";import"./TextField-08612a39.js";import"./ToggleButtonGroup-ed842d59.js";import"./Collapse-7dd972de.js";import"./Dialog-3e598356.js";function Q({children:t,allEntries:r}){const{filters:p}=l.useContext(B),{search:n,id:d,tab:c,name:x,sort:s,image:h,...C}=p,{charitySummaryStats:m}=l.useContext(k),j=l.useMemo(()=>r.map(u=>({...u,fuzzy:z([u.name].join(",")),donors:m&&m[u.name]?m[u.name].donors:0,donations:m&&m[u.name]?m[u.name].donations:0})),[r,m]),a=l.useMemo(()=>{const u=Object.keys(C).map(o=>{const i=C[o];return Array.isArray(i)?i.map(b=>({key:o,value:b})):{key:o,value:i}}).flat(),v=j.filter(o=>u.every(({key:i,value:b})=>Array.isArray(o[i])?o[i].includes(b):o[i]===b)).sort((o,i)=>o.fuzzy.localeCompare(i.fuzzy)),S=n?L.go(z(n),v,{keys:X,threshold:-25e3}).map(o=>({...o.obj,score:o.score})):v;return s?S.sort((o,i)=>s==="potName"?o.title.localeCompare(i.title):s==="contributedBy"?o.contributedBy[0].localeCompare(i.contributedBy[0]):o.potNumber<i.potNumber):S},[C,j,n,s]),f=l.useMemo(()=>({allEntries:r,visibleEntries:a}),[r,a]);return e.jsx(F.Provider,{value:f,children:t})}const X=["fuzzy"];function Y({charity:t}){const{isMobile:r}=R(),p=l.useCallback(x=>{const s=window.open(x,"_blank","noopener,noreferrer");s&&(s.opener=null)},[]),n=t.url?e.jsx(y,{onClick:()=>p(t.url),style:{color:"#fff",fontWeight:500},children:t.name}):e.jsx("span",{style:{color:"#ddd"},children:t.name}),d=r?"0.95rem":"1.0rem",c=r?{fontSize:d,border:0,padding:"6px 10px"}:{fontSize:d,border:0,padding:"10px 16px"};return e.jsxs(A,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:[e.jsx(g,{align:"left",style:c,children:n}),e.jsx(g,{align:"center",style:c,children:t.donations2024>0&&new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumSignificantDigits:3}).format(t.donations2024)}),e.jsx(g,{align:"center",style:c,children:t.donations>0&&new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumSignificantDigits:3}).format(t.donations)})]})}function Z(){const{visibleEntries:t}=l.useContext(F),{isMobile:r}=R(),p=l.useRef(),[n,d]=l.useState("name"),c=l.useCallback(a=>{a!==n&&d(a)},[d,n]),x=t.sort((a,f)=>{switch(n){case"2024":return f.donations2024-a.donations2024;case"2025":return f.donations-a.donations;case"name":return a.name.localeCompare(f.name);default:return a.name.localeCompare(f.name)}}),s={maxWidth:700,marginLeft:"auto",marginRight:"auto"},h=r?"0.9rem":"1.0rem",C=r?"10px 10px":"16px 16px",m=r?"2024":"2024 Contributions",j=r?"2025":"2025 Currently";return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(K,{label:"Approved Charities",sortValues:null}),t.length===0&&e.jsx(P,{label:"Charities"}),t.length>0&&e.jsx(E,{sx:{height:"100%",backgroundColor:"#111"},id:"scrollable",ref:p,children:e.jsxs(U,{stickyHeader:!0,style:s,children:[e.jsx(I,{children:e.jsxs(A,{children:[e.jsx(g,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",padding:C},children:e.jsx(y,{onClick:()=>c("name"),style:{color:n==="name"?"#fff":"#ccc"},children:"Charity Name"})},"Charity Name"),e.jsx(g,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",textAlign:"center"},children:e.jsx(y,{onClick:()=>c("2024"),style:{color:n==="2024"?"#fff":"#ccc"},children:m})},"2024"),e.jsx(g,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",textAlign:"center"},children:e.jsx(y,{onClick:()=>c("2025"),style:{color:n==="2025"?"#fff":"#ccc"},children:j})},"2025")]})}),e.jsx(G,{children:x.map((a,f)=>e.jsx(Y,{charity:a},f))})]})})]})}function Fe(){const{isMobile:t}=R(),{charityStats:r}=l.useContext(k);H("RAFL Charities");const p=O.map(x=>{const s=r==null?void 0:r.find(h=>h.name===x.name);return{...x,donations2025:s?s==null?void 0:s.donations2025:"--"}}),n=t?8:0,d={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:n,paddingRight:n},c=e.jsxs(N.Fragment,{children:[!t&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(_,{}),e.jsx(q,{})]});return e.jsx(M,{filterFields:D,children:e.jsx(Q,{allEntries:p,children:e.jsxs("div",{style:d,children:[e.jsx(T,{title:"RAFL Charities",extras:c}),e.jsx(V,{page:"charities"}),e.jsx(Z,{}),e.jsx(w,{}),e.jsx(W,{feature:"raflCharities"}),e.jsx(J,{})]})})})}export{Fe as default};
