import{b as V,r as a,j as n,J as z,I as B,O as H,P as W,Q as O,U,R as $,F as me,a0 as fe,ai as he,d as P,u as ge,a8 as je,M as ve,aU as be,ab as ye}from"./index-kIRFWdeY.js";import{E as ke}from"./ExpandMore-Dl49RftF.js";import{B as Ce}from"./BeltStripe-4hRrjRRI.js";import{F as _}from"./FieldValue-DkrDEyx-.js";import{S as Ee,E as Ie}from"./EvidenceForm-CTZbP_lf.js";import{e as S}from"./entryName-BO03Pc52.js";import{L as we}from"./Link-B6p-9ZPi.js";import{D as Se}from"./DataContext-BRdMZdV9.js";import"./index-CpZwE69r.js";import{B as Te}from"./BeltIcon-C9FJSaUn.js";import{A as Le,a as De,b as Me}from"./AccordionSummary-B4cIteQK.js";import{L as Re}from"./Link-CcKGhmpf.js";function Fe({entry:t,color:e}){const s=V(),r=S(t).replace(/[\s/]/g,"_").replace(/\W/g,""),u=e||"#fff",m=a.useCallback(f=>{f.preventDefault(),f.stopPropagation(),s(`/locks?id=${t.id}&name=${r}`)},[t.id,s,r]);return n.jsx(z,{title:"View Lock Details",arrow:!0,disableFocusListener:!0,children:n.jsx(B,{onClick:m,children:n.jsx(we,{style:{width:18,height:18,color:u}})})})}var p={},q;function Ae(){if(q)return p;q=1;var t=H();Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var e=t(W()),s=O();return p.default=(0,e.default)((0,s.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),p}var _e=Ae();const qe=U(_e);var x={},N;function Ne(){if(N)return x;N=1;var t=H();Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var e=t(W()),s=O();return x.default=(0,e.default)((0,s.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),x}var Ve=Ne();const ze=U(Ve);P.extend(ye);function Be({owner:t,activity:e,expanded:s,onExpand:l,merged:r}){const u=V(),{setFilters:m}=a.useContext(me),{cardActivity:f,getEntryFromId:y,getProjectEntryFromId:J,getAwardEntryFromId:K}=a.useContext(Se),{admin:Q}=a.useContext(fe),k=y(e.matchId),Y=J(e.matchId),h=K(e.matchId),o=k||Y||h;if(!o)return;const[T,L]=a.useState(!1),C=a.useRef(null);a.useEffect(()=>{if(s&&C&&!T){const w=window.innerWidth<=600?70:74,{id:ue}=he.parse(location.search),A=ue===e.id;L(!0),setTimeout(()=>{window.scrollTo({left:0,top:C.current.offsetTop-w,behavior:A?"auto":"smooth"})},A?0:100)}else s||L(!1)},[s,o,T,e.id]);let c=o?S(o):e.evidenceNotes;const D=e.exceptionType&&e.evidenceNotes&&e.evidenceNotes.toLowerCase()!==c.toLowerCase()?e.evidenceNotes:null;c=e.exceptionType==="nomatch"?`[ ${e.evidenceNotes} ]`:c,c=e.exceptionType&&t&&r&&!h?c+" *":c;const M=["nomatch","duplicate","upgraded"].includes(e.exceptionType)?.5:1,g=e.exceptionId,E=g?f.find(i=>i.id===g):{},R=E?a.useMemo(()=>y(E.matchId),[y,E.matchId]):{},G=R?S(R,"short"):"",X=g?n.jsx(Re,{style:{color:"#99c2e5"},onClick:()=>{Z(g)},children:G}):null;let I=e.exceptionType==="nomatch"?"Could not be matched to a lock or project":e.exceptionType==="badlink"&&!h?"You must provide a valid link.":e.exceptionType==="duplicate"?"Duplicate of ":e.exceptionType==="upgraded"?"Upgraded to ":null;const Z=a.useCallback(i=>{m({id:i})},[m]),ee=e.points===1?"pt":"pts";let d=e.date?P(e.date).format("L"):"(no date)";d=d.replace("/202","/2"),d=d.replace("/201","/1");const ne=e.date?"#fff":"#aaa",j=["belt","dan","hof"].includes(e.awardType),v=t&&!j||Q,F=a.useCallback((i,w)=>{v&&l(w?e.id:!1)},[e,v,l]),te=a.useCallback(i=>{i.preventDefault(),i.stopPropagation(),u("/award")},[u]),se=v?{}:{cursor:"default"},oe=v?n.jsx(ke,{}):n.jsx("div",{style:{width:24}}),{isMobile:b}=ge(),re=b?"block":"flex",ae=b?{display:"block",marginLeft:0,placeItems:"center"}:{display:"flex",margin:"0px 0px 0px 20px"},ie=b?"65%":"56%",le=b?"-2px 0px 3px 0px":"3px 0px 3px 0px",ce=j?"1.1rem":"1rem",de=j?"#121212":"",pe=e.name==="Dan 20"?"ffff2c":"#87c048",xe={maxWidth:700,marginLeft:"auto",marginRight:"auto",display:"flex",placeItems:"center",backgroundColor:de};return n.jsxs(Le,{expanded:s,onChange:F,ref:C,children:[n.jsxs(De,{expandIcon:oe,style:{...xe,...se},children:[n.jsx(Ce,{value:o?o.belt:""}),n.jsxs("div",{style:{margin:"8px 0px 0px 8px",width:ie,flexShrink:0,flexDirection:"column",opacity:M},children:[n.jsxs("div",{style:{display:"flex"},children:[e.awardType==="belt"&&n.jsx("div",{style:{marginTop:-4,marginRight:10},children:n.jsx(Te,{value:o.belt,style:{paddingTop:2}})}),e.awardType==="dan"&&n.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:n.jsx(je,{style:{color:pe}})}),e.awardType==="hof"&&n.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:n.jsx(qe,{style:{color:"#f8f52f"}})}),n.jsx(_,{value:c,textStyle:{marginLeft:"0px",fontWeight:700,fontSize:ce},style:{marginBottom:"2px"}})]}),!!D&&!h&&n.jsx("span",{style:{margin:"0px 0px 0px 15px",fontSize:"0.95rem",lineHeight:1.25,color:"#bbb"},children:D}),!!o&&!!(o!=null&&o.version)&&n.jsx(_,{name:"Version",value:n.jsx(ve,{style:{fontSize:"0.95rem",lineHeight:1.25},children:o==null?void 0:o.version}),textStyle:(o==null?void 0:o.belt)==="Unranked"?{color:"#aaa"}:{}})]}),n.jsxs("div",{style:{display:re,placeItems:"center",marginLeft:10,opacity:M},children:[n.jsxs("div",{style:{display:"flex",width:76},children:[n.jsx("div",{style:{margin:"2px 0px 0px 6px",width:30,flexShrink:0,flexDirection:"column"},children:k&&n.jsx(Fe,{entry:k})}),n.jsx("div",{style:{margin:"0px 0px 0px 6px",flexShrink:0,flexDirection:"column"},children:(t||!j)&&n.jsx(Ee,{activity:e,handleChange:F,exceptionType:e.exceptionType,owner:t})})]}),n.jsxs("div",{style:ae,children:[n.jsx("div",{style:{margin:le,color:ne,width:90,textAlign:"center"},children:d}),!["belt","dan"].includes(e.awardType)&&n.jsx("div",{style:{margin:"1px 0px 0px 22px"},children:n.jsxs("nobr",{children:[n.jsxs("span",{style:{fontWeight:700},children:[e.points," "]}),n.jsx("span",{style:{color:"#666"},children:ee})]})}),t&&e.matchId===be&&n.jsx(z,{title:"Print Certificate",arrow:!0,disableFocusListener:!0,children:n.jsx(B,{onClick:te,style:{marginLeft:30},children:n.jsx(ze,{})})})]})]})]}),s&&n.jsx($.Fragment,{children:n.jsxs(Me,{sx:{padding:"4px 16px 0px 26px"},children:[(I||e.evidenceModifier)&&n.jsxs("div",{style:{margin:"0px 0px 20px 20px",fontWeight:600,fontSize:".95rem"},children:[e.evidenceModifier&&n.jsxs("span",{children:[e.evidenceModifier,"     "]}),I&&n.jsxs("span",{children:["* ",I," ",X]})]}),n.jsx(Ie,{activity:e,handleUpdate:()=>{}})]})})]},e.id)}const Ze=$.memo(Be,(t,e)=>{const s=Object.keys(t.activity),l=Object.keys(e.activity);if(s.length!==l.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==l[r]||t.activity[s[r]]!==e.activity[l[r]])return!1;return t.owner===e.owner&&t.expanded===e.expanded&&t.onExpand===e.onExpand&&t.merged===e.merged});export{Ze as S,Fe as V};
