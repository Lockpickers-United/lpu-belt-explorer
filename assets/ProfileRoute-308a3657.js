import{ai as p,r as s,a1 as g,e as h,j as t,T as C,I as L,C as P,a3 as E,c as y,b as k,Q as v,R as d,U as b,V as F,W as T}from"./index-c7c82851.js";import{L as D,D as I,I as w,C as B,E as R,m as S,k as M,h as N,T as q,i as U,j as V,l as W}from"./FilterButton-671887e3.js";import{d as A}from"./ImageViewer-a5328a2d.js";import{L as H}from"./LinearProgress-891b414c.js";import"./InputLabel-bce33bfa.js";import"./index-46498548.js";import"./index-9eeb0a26.js";import"./Badge-847acbfb.js";function O(){const{userId:e}=p(),{user:a}=s.useContext(g),n=s.useCallback(async()=>{const i=`https://lpubelts.com/#/profile/${a.uid}`;await navigator.clipboard.writeText(i),h("Link to entry copied to clipboard.")},[a.uid]);return!a||e!==a.uid?null:t.jsx(C,{title:"Copy My Profile Link",arrow:!0,disableFocusListener:!0,children:t.jsx(L,{onClick:n,children:t.jsx(A,{})})})}function Q(){const e={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(P,{style:e,children:[t.jsx(E,{title:"Profile Not Found!"}),t.jsx(y,{children:t.jsx(k,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function _({profile:e}){const{compact:a,expanded:n,setExpanded:i}=s.useContext(D),{visibleEntries:o=[]}=s.useContext(I),c=s.useDeferredValue(n);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(w,{profile:e}),a?t.jsx(B,{entries:o}):o.map(l=>t.jsx(R,{entry:l,expanded:l.id===c,onExpand:i},l.id))]})}const $="/assets/LPU-f691d3fe.png";function et(){const[e,a]=s.useState({}),{userId:n}=p(),{getProfile:i}=s.useContext(v),[o,c]=s.useState(!0),[l,u]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const r=await i(n);a(r),u(!1)}catch(r){console.trace("Error loading profile",r),a({}),u(!0)}finally{c(!1)}})()},[n,i]);const f=s.useMemo(()=>{const x=new Set(S.flatMap(({key:r})=>e[r]));return M.filter(r=>x.has(r.id))},[e]),m=t.jsxs(d.Fragment,{children:[t.jsx(N,{}),t.jsx(q,{}),t.jsx(O,{})]}),j=o?"Loading...":"Profile";return t.jsx(d.Fragment,{children:t.jsx(U,{children:t.jsx(V,{allEntries:f,profile:e,children:t.jsxs(W,{children:[t.jsx(b,{title:j,extras:m}),o&&t.jsxs(d.Fragment,{children:[t.jsx(H,{variant:"indeterminate",color:"secondary"}),t.jsx("img",{alt:"Loading",src:$})]}),!o&&e&&!l&&t.jsx(_,{profile:e}),!o&&l&&t.jsx(Q,{}),t.jsx(F,{}),t.jsx(T,{feature:"profile"})]})})})})}export{et as default};
