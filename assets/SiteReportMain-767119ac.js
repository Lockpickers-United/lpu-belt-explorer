import{j as e,R as b}from"./index-a78ab18b.js";import{u as W,L as V}from"./useData-33fe63de.js";import{u as f}from"./useWindowSize-31969c53.js";import{L as M}from"./LockViewsLine-0c1992fa.js";import{A as v,p as R}from"./adminChartDefaults-96584673.js";import{P as T}from"./nivo-line.es-0957c155.js";import{d as j}from"./dayjs.min-c0955e4b.js";import{j as P,s as z}from"./dataUrls-4d4a851c.js";import"./LPU-c3fa7122.js";import"./LinearProgress-dac0ff17.js";const H=({data:n})=>{const{firstVistsLastSevenDays:a}=n,{width:i}=f(),t=i<=360,r=i<=395,s=i<=428,c=i<=560,l=i<=820,m=t?".8rem":r?".85rem":s?".9rem":".95rem",d=400;return e.jsx(v,{tableData:a,tableWidth:d,fontSize:m})},A=({data:n})=>{const{pageTracking:a}=n,{width:i}=f(),t=i<=360,r=i<=395,s=i<=428,c=i<=560,l=i<=820,m=t?".8rem":r?".85rem":s?".9rem":".95rem",d="100%";return e.jsx(v,{tableData:a,tableWidth:d,fontSize:m})},F=({lineData:n})=>{const a=[n.traffic28days.data],i=[],t=new Map,r=new Map,s=new Map;a.forEach(o=>{const k=[],L=[],D=[];for(let h=0;h<o.length;h++){const g=new Map;g.x=o[h].date,g.y=o[h].visitors,k.push(g);const w=new Map;w.x=o[h].date,w.y=o[h].visits,L.push(w);const S=new Map;S.x=o[h].date,S.y=o[h].lockViews,D.push(S)}t.id="Visitors",t.data=k,r.id="Visits",r.data=L,s.id="Lock Views",s.data=D,i.push(r),i.push(t),i.push(s)});const{width:c}=f(),l=c<=360,m=c<=395,d=c<=428,x=c<=560,y=c<=820,p=l||m?200:d?210:y?230:350,u=x?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:70,left:50};return e.jsx("div",{style:{height:p,width:"100%"},children:e.jsx(T,{theme:R,data:i,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:u,height:p,curve:"natural",yScale:{type:"linear",min:0,max:4e3,stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#444",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},Y=({fullData:n})=>{const a=n.traffic28days,i=28;function t(o){return j().subtract(i+1,"day").isBefore(j(o.date))}const r={columns:a.columns.filter(o=>o.id!=="weekend").filter(o=>o.id!=="visitors"),data:a.data.filter(t)},{width:s}=f(),c=s<=360,l=s<=395,m=s<=428,d=s<=560,x=s<=820,y=c?".8rem":l?".85rem":m||d||x?".9rem":".85rem",p=170,u=340;return e.jsx(v,{tableData:r,tableWidth:p,tableHeight:u,fontSize:y})};function C({data:n}){const{width:a}=f(),i=a<=560,s={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}};return e.jsx(b.Fragment,{children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:s,children:[e.jsx(F,{lineData:n}),e.jsx(Y,{fullData:n})]})})})}function Q(){var p;const{data:n,loading:a,error:i}=W({urls:B}),{siteFull:t,siteSummary:r}=n||{},{width:s}=f(),l=s<560?"8px 8px 32px 8px":"24px 24px 32px 24px",m={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},d={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},x=(p=t==null?void 0:t.firstVistsLastSevenDays)!=null&&p.countryCount?d:m,y=a?"--":"(updated: "+j(t==null?void 0:t.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${t==null?void 0:t.metadata.timezone})`;return a?e.jsx(V,{}):i?null:e.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:l,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!t.firstVistsLastSevenDays.countryCount&&e.jsxs(b.Fragment,{children:[e.jsx("div",{style:m,children:"First Visits (Last Seven Days)"}),e.jsx(H,{data:t,tableWidth:"50%"})]}),e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:x,children:["Site Summary",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.85rem"},children:y})]}),e.jsx(C,{data:t})]}),e.jsx("div",{style:d,children:"Weekly Lock Views"}),e.jsx(M,{data:r}),e.jsx("div",{style:d,children:"Page Tracking"}),e.jsx(A,{data:t})]})}const B={siteFull:P,siteSummary:z};export{Q as default};
