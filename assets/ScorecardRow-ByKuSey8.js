import{b as O,r,j as t,K as U,I as $,P as K,Q as P,U as J,V as Q,R as Y,F as ge,a1 as je,aj as ve,L as be,d as G,u as ye,a9 as ke,O as Ce,aV as Ie,ac as Ee}from"./index-DlU4pp1T.js";import{E as Se}from"./ExpandMore-BCWVMP83.js";import{B as we}from"./BeltStripe-DxcfSqq_.js";import{F as z}from"./FieldValue-C8uFGvta.js";import{S as Te,E as Le}from"./EvidenceForm-XI5zGLjM.js";import{e as M}from"./entryName-nLkqVmmL.js";import{L as De}from"./Link-DW1-oHe5.js";import{D as B}from"./DataContext-BUiQXDkT.js";import"./index-Dguw21GC.js";import{B as Me}from"./BeltIcon-DxXF_Dbv.js";import{A as Re,a as Fe,b as Ae}from"./AccordionSummary-DYneYzJ9.js";function Ve({entry:n,color:e}){const o=O(),a=M(n).replace(/[\s/]/g,"_").replace(/\W/g,""),u=e||"#fff",f=r.useCallback(h=>{h.preventDefault(),h.stopPropagation(),o(`/locks?id=${n.id}&name=${a}`)},[n.id,o,a]);return t.jsx(U,{title:"View Lock Details",arrow:!0,disableFocusListener:!0,children:t.jsx($,{onClick:f,children:t.jsx(De,{style:{width:18,height:18,color:u}})})})}var x={},H;function _e(){if(H)return x;H=1;var n=K();Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var e=n(P()),o=J();return x.default=(0,e.default)((0,o.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),x}var qe=_e();const Ne=Q(qe);var m={},W;function ze(){if(W)return m;W=1;var n=K();Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var e=n(P()),o=J();return m.default=(0,e.default)((0,o.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),m}var Be=ze();const He=Q(Be);G.extend(Ee);function We({owner:n,activity:e,expanded:o,onExpand:l,merged:a}){const u=O(),{setFilters:f}=r.useContext(ge),{cardActivity:h,getEntryFromId:y,getProjectEntryFromId:k,getAwardEntryFromId:X}=r.useContext(B),{admin:C}=r.useContext(je),{blackBeltScorecard:R}=r.useContext(B),I=y(e.matchId),Z=k(e.matchId),g=X(e.matchId),s=I||Z||g;if(!s)return;const[F,A]=r.useState(!1),E=r.useRef(null);r.useEffect(()=>{if(o&&E&&!F){const D=window.innerWidth<=600?70:74,{id:he}=ve.parse(location.search),N=he===e.id;A(!0),setTimeout(()=>{window.scrollTo({left:0,top:E.current.offsetTop-D,behavior:N?"auto":"smooth"})},N?0:100)}else o||A(!1)},[o,s,F,e.id]);let c=s?M(s):e.evidenceNotes;const V=e.exceptionType&&e.evidenceNotes&&e.evidenceNotes.toLowerCase()!==c.toLowerCase()?e.evidenceNotes:null;c=e.exceptionType==="nomatch"?`[ ${e.evidenceNotes} ]`:c,c=e.exceptionType&&n&&a&&!g?c+" *":c;const _=["nomatch","duplicate","upgraded"].includes(e.exceptionType)?.5:1,S=e.exceptionId,d=S?h.find(i=>i.id===S):{},w=d?r.useMemo(()=>y(d.matchId),[y,d.matchId]):{},T=d?r.useMemo(()=>k(d.matchId),[k,d.matchId]):{},ee=w?M(w,"short"):"",te=w?t.jsx(be,{style:{color:"#6dbbff"},onClick:()=>{ne(S)},children:ee}):T==null?void 0:T.name;let L=e.exceptionType==="nomatch"?"Could not be matched to a lock or project":e.exceptionType==="badlink"&&!g?"You must provide a valid link.":e.exceptionType==="duplicate"?"Duplicate of ":e.exceptionType==="upgraded"?"Upgraded to ":null;const ne=r.useCallback(i=>{f({id:i})},[f]),oe=e.points===1?"pt":"pts";let p=e.date?G(e.date).format("L"):"(no date)";p=p.replace("/202","/2"),p=p.replace("/201","/1");const se=e.date?"#fff":"#aaa",j=["belt","dan","hof"].includes(e.awardType),v=n&&!j||C,q=r.useCallback((i,D)=>{v&&l(D?e.id:!1)},[e,v,l]),re=r.useCallback(i=>{i.preventDefault(),i.stopPropagation(),u("/award")},[u]),ae=v?{}:{cursor:"default"},ie=v?t.jsx(Se,{}):t.jsx("div",{style:{width:24}}),{isMobile:b}=ye(),le=b?"block":"flex",ce=b?{display:"block",marginLeft:0,placeItems:"center"}:{display:"flex",margin:"0px 0px 0px 20px"},de=b?"65%":"56%",pe=b?"-2px 0px 3px 0px":"3px 0px 3px 0px",xe=j?"1.1rem":"1rem",me=j?"#121212":"",ue=e.name==="Dan 20"?"ffff2c":"#87c048",fe={maxWidth:700,marginLeft:"auto",marginRight:"auto",display:"flex",placeItems:"center",backgroundColor:me};return t.jsxs(Re,{expanded:o,onChange:q,ref:E,children:[t.jsxs(Fe,{expandIcon:ie,style:{...fe,...ae},children:[t.jsx(we,{value:s?s.belt:""}),t.jsxs("div",{style:{margin:"8px 0px 0px 8px",width:de,flexShrink:0,flexDirection:"column",opacity:_},children:[t.jsxs("div",{style:{display:"flex"},children:[e.awardType==="belt"&&t.jsx("div",{style:{marginTop:-4,marginRight:10},children:t.jsx(Me,{value:s.belt,style:{paddingTop:2}})}),e.awardType==="dan"&&t.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:t.jsx(ke,{style:{color:ue}})}),e.awardType==="hof"&&t.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:t.jsx(Ne,{style:{color:"#f8f52f"}})}),t.jsx(z,{value:c,textStyle:{marginLeft:"0px",fontWeight:700,fontSize:xe},style:{marginBottom:"2px"}})]}),!!V&&!g&&t.jsx("span",{style:{margin:"0px 0px 0px 15px",fontSize:"0.95rem",lineHeight:1.25,color:"#bbb"},children:V}),!!s&&!!(s!=null&&s.version)&&t.jsx(z,{name:"Version",value:t.jsx(Ce,{style:{fontSize:"0.95rem",lineHeight:1.25},children:s==null?void 0:s.version}),textStyle:(s==null?void 0:s.belt)==="Unranked"?{color:"#aaa"}:{}}),(L||e.evidenceModifier&&(R||C))&&t.jsxs("div",{style:{margin:"0px 0px 0px 6px",fontWeight:600,fontSize:".95rem"},children:[e.evidenceModifier&&(R||C)&&t.jsxs("span",{style:{marginTop:10},children:["* ",e.evidenceModifier]}),L&&t.jsxs("span",{style:{marginLeft:10,fontSize:".9rem"},children:["* ",L," ",te]})]})]}),t.jsxs("div",{style:{display:le,placeItems:"center",marginLeft:10,opacity:_},children:[t.jsxs("div",{style:{display:"flex",width:76},children:[t.jsx("div",{style:{margin:"2px 0px 0px 6px",width:30,flexShrink:0,flexDirection:"column"},children:I&&t.jsx(Ve,{entry:I})}),t.jsx("div",{style:{margin:"0px 0px 0px 6px",flexShrink:0,flexDirection:"column"},children:(n||!j)&&t.jsx(Te,{activity:e,handleChange:q,exceptionType:e.exceptionType,owner:n})})]}),t.jsxs("div",{style:ce,children:[t.jsx("div",{style:{margin:pe,color:se,width:90,textAlign:"center"},children:p}),!["belt","dan"].includes(e.awardType)&&t.jsx("div",{style:{margin:"1px 0px 0px 22px"},children:t.jsxs("nobr",{children:[t.jsxs("span",{style:{fontWeight:700},children:[e.points," "]}),t.jsx("span",{style:{color:"#666"},children:oe})]})}),n&&e.matchId===Ie&&t.jsx(U,{title:"Print Certificate",arrow:!0,disableFocusListener:!0,children:t.jsx($,{onClick:re,style:{marginLeft:30},children:t.jsx(He,{})})})]})]})]}),o&&t.jsx(Y.Fragment,{children:t.jsx(Ae,{sx:{padding:"4px 16px 0px 26px"},children:t.jsx(Le,{activity:e,handleUpdate:()=>{}})})})]},e.id)}const et=Y.memo(We,(n,e)=>{const o=Object.keys(n.activity),l=Object.keys(e.activity);if(o.length!==l.length)return!1;for(let a=0;a<o.length;a++)if(o[a]!==l[a]||n.activity[o[a]]!==e.activity[l[a]])return!1;return n.owner===e.owner&&n.expanded===e.expanded&&n.onExpand===e.onExpand&&n.merged===e.merged});export{et as S,Ve as V};
