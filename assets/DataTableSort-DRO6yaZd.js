import{r as a,F as de,u as ce,j as t,ax as ae,L as le,U as fe}from"./index-PLA41_BS.js";import{A as pe,a as ge}from"./ArrowDropDown-CuvqbtKQ.js";import{c as he,d as me,T as we,a as q,b as R,e as ye}from"./TableRow-BQHhfha_.js";const Se=({tableData:d,tableWidth:C,tableHeight:A,linkFunction:D,totalsRow:T})=>{var M;const{rows:G,columns:c,defaultSort:l="name",sortable:J,wrap:K=!1}=d,{filters:Q,addFilter:L}=a.useContext(de),{sort:j}=Q,[r,F]=a.useState(j||l),[u,z]=a.useState(!((M=d.columns.find(e=>e.id===l))!=null&&M.descending));a.useEffect(()=>{r!==j&&F(j)},[r,j]);const W=K?{whiteSpace:"inherit"}:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},X=a.useCallback(({rows:e,sort:n,defaultSort:s,ascending:m})=>{const b=(e||[]).slice(),x=b.find(i=>(i==null?void 0:i[n])!==void 0&&(i==null?void 0:i[n])!==null),oe=typeof(x==null?void 0:x[n])==="number",U=(i,f,p,w)=>{const v=i==null?void 0:i[p],y=f==null?void 0:f[p];if(w){const O=Number(v??0),P=Number(y??0);return O<P?-1:O>P?1:0}const S=(v??"").toString(),o=(y??"").toString();return S.localeCompare(o,void 0,{sensitivity:"base"})};return b.sort((i,f)=>{var S;const p=U(i,f,n,oe);if(p!==0)return m?p:-p;const w=b.find(o=>(o==null?void 0:o[s])!==void 0&&(o==null?void 0:o[s])!==null),v=typeof(w==null?void 0:w[s]),y=U(i,f,s,v==="number");return(S=c==null?void 0:c.find(o=>o.id===s))!=null&&S.descending?-y:y}),b},[c]),Y=r||(c!=null&&c.find(e=>e.id===l)?l:"name"),k=X({rows:G,sort:Y,defaultSort:l,ascending:u}),E=k.filter(e=>e[r]&&![0,"0"].includes(e[r])),Z=k.filter(e=>!E.includes(e)),H=r&&r!==l?[...E,...Z]:k;T&&H.push(T);const g={columns:c,data:H};g.columns.filter(e=>(e==null?void 0:e.id)&&(e==null?void 0:e.align));const[N,_]=a.useState(!1);d.columns.map(e=>(e==null?void 0:e.id)==="dateString"&&!N?_(!0):null),d.columns=N?d.columns.filter((e=>e.id!=="date")):d.columns;const B=a.useCallback(e=>{var n;if(e!==r){F(e),L("sort",e,!0);const s=!((n=d.columns.find(m=>m.id===e))!=null&&n.descending);z(s)}else z(!u)},[L,u,r,d.columns]),$=u?t.jsx(pe,{}):t.jsx(ge,{}),{width:h}=ce(),V=h<=360,ee=h<=395,te=h<=428,se=h<=560,ne=h<=820,I=V?".8rem":ee?".85rem":te?".9rem":".95rem",ie={left:14,center:0,right:0},re={left:0,center:0,right:20};return t.jsxs("div",{style:{width:C},children:[t.jsx("div",{style:{fontSize:"1.3rem",margin:"10px"},children:d.title}),t.jsx(he,{id:"statsTable",style:{padding:"0px 0px 0px 4px",width:C,marginLeft:"auto",marginRight:"auto",height:A},component:ae,elevation:2,children:t.jsxs(me,{size:"small",stickyHeader:!!A,style:{width:C},children:[t.jsx(we,{children:t.jsx(q,{style:{backgroundColor:"#111"},children:g.columns.map((e,n)=>t.jsx(R,{sx:{alignContent:"center",justifyItems:e.align,fontSize:I,lineHeight:"1.1rem",padding:"6px 2px",color:"#fff"},component:"th",scope:"row",children:J&&e.id!=="index"&&t.jsxs("div",{style:{display:"flex",marginLeft:n===0?10:20},children:[t.jsx(le,{onClick:()=>B(e.id),style:{color:r===e.id?"#fff":"#bbb",alignContent:"center"},children:t.jsx("nobr",{children:e.name})}),r===e.id?t.jsx(fe,{onClick:()=>B(e.id),style:{padding:0},children:$}):t.jsx("div",{style:{width:24}})]})||t.jsx("div",{style:{display:"flex",marginLeft:n===0?10:20,marginRight:24},children:e.name})},n+1))})}),t.jsx(ye,{children:g.data.map((e,n)=>t.jsx(q,{index:n,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:g.columns.map((s,m)=>s.id!=="spacer"?t.jsx(R,{sx:{...W,textAlign:s.align,fontSize:I,padding:"8px 2px",border:0,color:"#eee"},component:"th",scope:"row",children:t.jsx("div",{style:{textAlign:s.align,marginLeft:ie[s.align],marginRight:re[s.align],fontWeight:T&&n===g.data.length-1?700:"inherit"},children:D(s.id,e[s.id]?(e[s.displayField]||e[s.id]).toLocaleString():"")})},m+1):t.jsx(R,{style:{border:0}},n+1))},n))})]})})]})};export{Se as D};
