import{r as x,F as Ne,av as De,j as r,u as yt,R as ve,b as Gt,$ as We,J as Xe,I as _e,ac as Vt,aH as Yt,aj as $t,d as et,as as qt,bI as Jt,bJ as Kt,D as Zt,N as Qt,e as Xt,a0 as _t,h as er,T as tr}from"./index-577068e1.js";import{L as rr}from"./LoadingDisplay-021d67cf.js";import{u as nr}from"./useData-b5c6c3b2.js";import{u as or}from"./usePageTitle-e996cb09.js";import{_ as ir,d as lr,a as sr,l as ar}from"./lockStats-abb8cb55.js";import{E as cr}from"./ErrorMessage-490723db.js";import{b as Ie,a as dr}from"./chartDefaults-bfd54756.js";import{L as se}from"./Link-aa1253a2.js";import{D as vt,f as ur}from"./DataContext-0f3d5c6d.js";import{r as tt}from"./index-d7344063.js";import{b as fr,c as hr,p as pr,a as gr,s as mr,d as kr,q as xr,e as yr,f as vr}from"./dataUrls-46e31bfb.js";import{e as rt}from"./entryName-16d0d41c.js";import{B as br}from"./BeltStripeMini-322430ff.js";import{a as bt,b as ue,c as nt,d as ot,T as Cr,e as it}from"./TableRow-73e2cbc9.js";import{V as Br}from"./ViewFilterButtons-4190571d.js";import{b as jr}from"./sortFields-b1bde6f9.js";import{F as wr,I as Lr,S as Or}from"./Select-7534469f.js";import{C as Sr}from"./Collapse-f70bc8b0.js";import{l as Pr}from"./uniq-605892ba.js";import{p as Mr,O as Tr,J as Dr,y as Ir,q as Ar,s as zr,T as lt,aP as st,z as Ct,L as Fr,M as at,K as Rr,C as Er,b7 as Wr,b8 as Nr,n as Ue,b9 as Ur,u as Bt,r as jt,o as wt,F as Hr}from"./nivo-legends-0478ad1f.js";import{a as Gr}from"./_baseClone-f0c99f92.js";import{F as ct}from"./line-7af060e6.js";import{a as Ae}from"./adminChartDefaults-c1f0e13b.js";import{b as Vr}from"./filterFields-d7524117.js";import{c as Yr}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-82a4a9fd.js";import"./useDocumentTitle-c81e0a0c.js";import"./nivo-arcs-7cc60a78.js";import"./Sort-6b9ee4d6.js";import"./Chip-6ae3c400.js";import"./FilterAlt-a567d72f.js";import"./Box-1de52f6e.js";import"./LockListContext-01d5d0da.js";import"./ToggleButtonGroup-e86c94da.js";import"./Cancel-0d2f106b.js";import"./rankingRequestData-d3ef79e5.js";function dt(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o<l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o<i||o===void 0&&i>=i)&&(o=i)}return o}function Lt(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o>l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o>i||o===void 0&&i>=i)&&(o=i)}return o}function ze(e,n){let o=0;if(n===void 0)for(let l of e)(l=+l)&&(o+=l);else{let l=-1;for(let i of e)(i=+n(i,++l,e))&&(o+=i)}return o}const $r={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},qr={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},ut={discord:$r,reddit:qr};function Jr({data:e}){const{scorecardStats:n,discordBeltCounts:o,redditBeltCounts:l}=e,{userCounts:i}=n,{filters:B,addFilter:k,removeFilters:w}=x.useContext(Ne),A=Kr(),p=B!=null&&B.dataset?B==null?void 0:B.dataset:"pickerData",[L,P]=x.useState(p),j=x.useCallback(t=>{k("dataset",t,!0),P(t)},[k]),M=9435-i.totalUsers,d=x.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:i.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:M}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},u={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:i.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:i.totalUsers-i.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},f={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:i.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:i.scorecardUsers-i.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},s={parent:"Scorecard Users",data:Object.keys(i.belts).sort((C,F)=>De(C,F)).map(C=>({id:C,label:C,value:i.belts[C]})),colors:Ie,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},c={parent:"Imported Belts",data:Object.keys(i.dans).sort((C,F)=>parseInt(C)-parseInt(F)).map(C=>({id:ft(C),label:ft(C),value:i.dans[C]})),colors:ht,description:"Dan Breakdown"},S={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:ut.discord.Total},{id:"Reddit",label:"Reddit",value:ut.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},z=Object.keys(o).reduce((C,F)=>{const Q=F.replace(" Belt","").trim();return C[Q]=o[F],C},{}),G={parent:"Other LPU Pickers",data:Object.keys(z).filter(C=>!C.includes("Dan")).sort((C,F)=>De(C,F)).map(C=>{const F=C==="Black"?"Black Belt":C;return{id:F,label:F,value:z[C]}}),colors:Ie,description:r.jsxs("span",{children:["Discord Belt Breakdown | ",r.jsx(se,{onClick:()=>j("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},U={parent:"Discord",data:Object.keys(o).filter(C=>C.includes("Dan")).sort((C,F)=>parseInt(C)-parseInt(F)).map(C=>({id:C,label:C,value:o[C]})),colors:ht,description:"Discord Dan Breakdown"},H=Object.keys(l).reduce((C,F)=>{const Q=F.replace(" Belt","").trim();return C[Q]=l[F],C},{}),Y={parent:"Other LPU Pickers",data:Object.keys(H).filter(C=>!C.includes("Dan")).sort((C,F)=>De(C,F)).map(C=>({id:C,label:C,value:H[C]})),colors:Ie,description:r.jsxs("span",{children:["Reddit Belt Breakdown | ",r.jsx(se,{onClick:()=>j("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:t,"LPUbelts Users":u,"Scorecard Users":f,"Imported Belts":s,Black:c,"Other LPU Pickers":S,Discord:G,"Black Belt":U,Reddit:Y}},[o,j,M,l,i]),R=d[L].data,T=d[L].data.reduce((t,u)=>t+u.value,0),v=x.useCallback(t=>{d[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",j(t.id)},200))},[j,d]),O=x.useCallback(()=>{d[d[L].parent].parent?k("dataset",d[L].parent,!0):w(["dataset"]),P(d[L].parent)},[k,d,L,w]),g=x.useCallback((t,u)=>{d[t.id]&&(u.currentTarget.style.cursor="pointer")},[d]),{width:a}=yt(),I=a<=360,y=a<=395,m=a<=428,h=a<=560,E={top:30,right:0,bottom:30,left:0};let W=320;I?W=175:y?W=190:m?W=230:h&&(W=240);const J="1.0rem",K=h?5:4,ee=h?10:8,Z=h?0:8;return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:d[L].description}),r.jsxs("div",{style:{height:W,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[r.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:r.jsx(ir,{data:R,theme:dr,colors:d[L].colors,margin:E,startAngle:d[L].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:K,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/T*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:Z,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:ee,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{v(t)},onMouseEnter:(t,u)=>{g(t,u)},tooltip:t=>{const u=(t.datum.arc.angleDeg>K,t.datum.label+": "),f=t.datum.value;return r.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:h||A?"none":"block"},children:r.jsxs("div",{children:[u,f]})})}})}),r.jsx("div",{style:{width:"100%",position:"absolute",top:W/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:d[L].parent&&r.jsx(se,{onClick:O,style:{color:"#ccc",cursor:"pointer",fontSize:J},children:"back"})})]},"pickPie")]})}function ft(e){const n=["st","nd","rd","th"];return e+""+n[Math.min(4,parseInt(e))-1]}const ht=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function Kr(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function pt({entry:e,index:n,collapse:o=!1}){const l=Gt(),B=rt(e).replace(/[\s/]/g,"_").replace(/\W/g,""),k=x.useCallback(A=>{const p=`/locks?tab=search&search=${A.id}&id=${A.id}&name=${B}`;l(p)},[l,B]),w=e.belt==="Unranked"?"#bbb":"#fff";return r.jsxs(bt,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[r.jsx(ue,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:r.jsx(br,{value:e.belt})}),r.jsx(ue,{align:"left",style:{alignItems:"center"},children:r.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:r.jsx(se,{onClick:()=>k(e),style:{color:w},children:rt(e)})})}),r.jsx(ue,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:e.currentPicks})]},n)}function Zr(){var I;const{visibleEntries:e=[]}=x.useContext(vt),{filters:n,addFilter:o,removeFilters:l}=x.useContext(Ne),{userBelt:i="All Belts",sort:B}=n,[k,w]=x.useState(B);x.useEffect(()=>{w(!!B)},[B]);const A=60;let p=((I=e.find(y=>y.displayRank===A))==null?void 0:I.currentPicks)||0;p=p>2?p:0;const L=x.useMemo(()=>e.filter(y=>y.currentPicks>=p),[e,p]),P=x.useMemo(()=>e.filter(y=>y.currentPicks<p),[e,p]),j=x.useMemo(()=>["All Belts",...We],[]),M=x.useCallback(()=>{const y=j.findIndex(h=>h===i),m=y<j.length-1?y+1:0;o("userBelt",j[m],!0)},[o,j,i]),d=x.useCallback(()=>{const y=j.findIndex(h=>h===i),m=y>0?y-1:j.length-1;o("userBelt",j[m],!0)},[o,j,i]),[R,T]=x.useState(!1),v=x.useCallback(()=>T(!1),[]),O=x.useCallback(()=>T(!0),[]),g=x.useCallback(y=>{y.target.value!=="All Belts"?o("userBelt",y.target.value,!0):l(["userBelt"]),v()},[o,v,l]),a=x.useCallback(()=>{w(!k)},[k]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[r.jsx(Xe,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(_e,{onClick:d,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(lr,{})})}),r.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:r.jsxs(wr,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[r.jsx(Lr,{style:{color:"#bbb"},children:"User Belt"}),r.jsx(Or,{id:"beltSelect",value:i||"All Belts",label:"Brand",open:R,onClose:v,onOpen:O,onChange:g,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:j.map((y,m)=>r.jsx(Vt,{value:j[m],children:j[m]},m))})]})}),r.jsx(Xe,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(_e,{onClick:M,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(sr,{})})})]})}),r.jsx(Br,{sortValues:jr,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[r.jsx(nt,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsxs(ot,{style:{backgroundColor:"#1c1c1c"},children:[r.jsx(Cr,{children:r.jsxs(bt,{style:{padding:"0px",fontWeight:700},children:[r.jsx(ue,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),r.jsx(ue,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),r.jsx(it,{children:L.map((y,m)=>r.jsx(pt,{entry:y,index:m},m))})]})}),r.jsx(Sr,{in:!!k,timeout:"auto",unmountOnExit:!0,children:r.jsx(nt,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsx(ot,{style:{backgroundColor:"#1c1c1c"},children:r.jsx(it,{children:P.map((y,m)=>r.jsx(pt,{entry:y,index:m},m))})})})})]})}),P.length>0&&r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:r.jsx(se,{onClick:a,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!k&&"Show More"||"Show Less"})})})]})}function Qr(e){return e.target.depth}function Xr(e){return e.depth}function _r(e,n){return n-1-e.height}function Ot(e,n){return e.sourceLinks.length?e.depth:n-1}function en(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Lt(e.sourceLinks,Qr)-1:0}function xe(e){return function(){return e}}function gt(e,n){return ye(e.source,n.source)||e.index-n.index}function mt(e,n){return ye(e.target,n.target)||e.index-n.index}function ye(e,n){return e.y0-n.y0}function Fe(e){return e.value}function tn(e){return e.index}function rn(e){return e.nodes}function nn(e){return e.links}function kt(e,n){const o=e.get(n);if(!o)throw new Error("missing: "+n);return o}function xt({nodes:e}){for(const n of e){let o=n.y0,l=o;for(const i of n.sourceLinks)i.y0=o+i.width/2,o+=i.width;for(const i of n.targetLinks)i.y1=l+i.width/2,l+=i.width}}function on(){let e=0,n=0,o=1,l=1,i=24,B=8,k,w=tn,A=Ot,p,L,P=rn,j=nn,M=6;function d(){const t={nodes:P.apply(null,arguments),links:j.apply(null,arguments)};return R(t),T(t),v(t),O(t),I(t),xt(t),t}d.update=function(t){return xt(t),t},d.nodeId=function(t){return arguments.length?(w=typeof t=="function"?t:xe(t),d):w},d.nodeAlign=function(t){return arguments.length?(A=typeof t=="function"?t:xe(t),d):A},d.nodeSort=function(t){return arguments.length?(p=t,d):p},d.nodeWidth=function(t){return arguments.length?(i=+t,d):i},d.nodePadding=function(t){return arguments.length?(B=k=+t,d):B},d.nodes=function(t){return arguments.length?(P=typeof t=="function"?t:xe(t),d):P},d.links=function(t){return arguments.length?(j=typeof t=="function"?t:xe(t),d):j},d.linkSort=function(t){return arguments.length?(L=t,d):L},d.size=function(t){return arguments.length?(e=n=0,o=+t[0],l=+t[1],d):[o-e,l-n]},d.extent=function(t){return arguments.length?(e=+t[0][0],o=+t[1][0],n=+t[0][1],l=+t[1][1],d):[[e,n],[o,l]]},d.iterations=function(t){return arguments.length?(M=+t,d):M};function R({nodes:t,links:u}){for(const[s,c]of t.entries())c.index=s,c.sourceLinks=[],c.targetLinks=[];const f=new Map(t.map((s,c)=>[w(s,c,t),s]));for(const[s,c]of u.entries()){c.index=s;let{source:S,target:z}=c;typeof S!="object"&&(S=c.source=kt(f,S)),typeof z!="object"&&(z=c.target=kt(f,z)),S.sourceLinks.push(c),z.targetLinks.push(c)}if(L!=null)for(const{sourceLinks:s,targetLinks:c}of t)s.sort(L),c.sort(L)}function T({nodes:t}){for(const u of t)u.value=u.fixedValue===void 0?Math.max(ze(u.sourceLinks,Fe),ze(u.targetLinks,Fe)):u.fixedValue}function v({nodes:t}){const u=t.length;let f=new Set(t),s=new Set,c=0;for(;f.size;){for(const S of f){S.depth=c;for(const{target:z}of S.sourceLinks)s.add(z)}if(++c>u)throw new Error("circular link");f=s,s=new Set}}function O({nodes:t}){const u=t.length;let f=new Set(t),s=new Set,c=0;for(;f.size;){for(const S of f){S.height=c;for(const{source:z}of S.targetLinks)s.add(z)}if(++c>u)throw new Error("circular link");f=s,s=new Set}}function g({nodes:t}){const u=dt(t,c=>c.depth)+1,f=(o-e-i)/(u-1),s=new Array(u);for(const c of t){const S=Math.max(0,Math.min(u-1,Math.floor(A.call(null,c,u))));c.layer=S,c.x0=e+S*f,c.x1=c.x0+i,s[S]?s[S].push(c):s[S]=[c]}if(p)for(const c of s)c.sort(p);return s}function a(t){const u=Lt(t,f=>(l-n-(f.length-1)*k)/ze(f,Fe));for(const f of t){let s=n;for(const c of f){c.y0=s,c.y1=s+c.value*u,s=c.y1+k;for(const S of c.sourceLinks)S.width=S.value*u}s=(l-s+k)/(f.length+1);for(let c=0;c<f.length;++c){const S=f[c];S.y0+=s*(c+1),S.y1+=s*(c+1)}K(f)}}function I(t){const u=g(t);k=Math.min(B,(l-n)/(dt(u,f=>f.length)-1)),a(u);for(let f=0;f<M;++f){const s=Math.pow(.99,f),c=Math.max(1-s,(f+1)/M);m(u,s,c),y(u,s,c)}}function y(t,u,f){for(let s=1,c=t.length;s<c;++s){const S=t[s];for(const z of S){let G=0,U=0;for(const{source:Y,value:C}of z.targetLinks){let F=C*(z.layer-Y.layer);G+=ee(Y,z)*F,U+=F}if(!(U>0))continue;let H=(G/U-z.y0)*u;z.y0+=H,z.y1+=H,J(z)}p===void 0&&S.sort(ye),h(S,f)}}function m(t,u,f){for(let s=t.length,c=s-2;c>=0;--c){const S=t[c];for(const z of S){let G=0,U=0;for(const{target:Y,value:C}of z.sourceLinks){let F=C*(Y.layer-z.layer);G+=Z(z,Y)*F,U+=F}if(!(U>0))continue;let H=(G/U-z.y0)*u;z.y0+=H,z.y1+=H,J(z)}p===void 0&&S.sort(ye),h(S,f)}}function h(t,u){const f=t.length>>1,s=t[f];W(t,s.y0-k,f-1,u),E(t,s.y1+k,f+1,u),W(t,l,t.length-1,u),E(t,n,0,u)}function E(t,u,f,s){for(;f<t.length;++f){const c=t[f],S=(u-c.y0)*s;S>1e-6&&(c.y0+=S,c.y1+=S),u=c.y1+k}}function W(t,u,f,s){for(;f>=0;--f){const c=t[f],S=(c.y1-u)*s;S>1e-6&&(c.y0-=S,c.y1-=S),u=c.y0-k}}function J({sourceLinks:t,targetLinks:u}){if(L===void 0){for(const{source:{sourceLinks:f}}of u)f.sort(mt);for(const{target:{targetLinks:f}}of t)f.sort(gt)}}function K(t){if(L===void 0)for(const{sourceLinks:u,targetLinks:f}of t)u.sort(mt),f.sort(gt)}function ee(t,u){let f=t.y0-(t.sourceLinks.length-1)*k/2;for(const{target:s,width:c}of t.sourceLinks){if(s===u)break;f+=c+k}for(const{source:s,width:c}of u.targetLinks){if(s===t)break;f-=c}return f}function Z(t,u){let f=u.y0-(u.targetLinks.length-1)*k/2;for(const{source:s,width:c}of u.targetLinks){if(s===t)break;f+=c+k}for(const{target:s,width:c}of t.sourceLinks){if(s===u)break;f-=c}return f}return d}var ln=Gr,sn=1,an=4;function cn(e){return ln(e,sn|an)}var dn=cn;const un=Yt(dn);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},oe.apply(null,arguments)}var Re={container:{display:"flex",alignItems:"center"},sourceChip:{marginRight:7},targetChip:{marginLeft:7,marginRight:7}},fn={center:en,justify:Ot,start:Xr,end:_r},hn=function(e){return fn[e]},D={layout:"horizontal",align:"center",sort:"auto",colors:{scheme:"nivo"},nodeOpacity:.75,nodeHoverOpacity:1,nodeHoverOthersOpacity:.15,nodeThickness:12,nodeSpacing:12,nodeInnerPadding:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:0,linkOpacity:.25,linkHoverOpacity:.6,linkHoverOthersOpacity:.15,linkContract:0,linkBlendMode:"multiply",enableLinkGradient:!1,enableLabels:!0,label:"id",labelPosition:"inside",labelPadding:9,labelOrientation:"horizontal",labelTextColor:{from:"color",modifiers:[["darker",.8]]},labelComponent:zr,isInteractive:!0,nodeTooltip:function(e){var n=e.node;return r.jsx(lt,{id:n.label,enableChip:!0,color:n.color})},linkTooltip:function(e){var n=e.link;return r.jsx(lt,{id:r.jsxs("span",{style:Re.container,children:[r.jsx(st,{color:n.source.color,style:Re.sourceChip}),r.jsx("strong",{children:n.source.label})," > ",r.jsx("strong",{children:n.target.label}),r.jsx(st,{color:n.target.color,style:Re.targetChip}),r.jsx("strong",{children:n.formattedValue})]})})},legends:[],layers:["links","nodes","labels","legends"],role:"img",animate:!0,motionConfig:"gentle"},pn=function(e){return e.id},gn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=e.width,B=e.height,k=e.sort,w=e.align,A=e.colors,p=e.nodeThickness,L=e.nodeSpacing,P=e.nodeInnerPadding,j=e.nodeBorderColor,M=e.label,d=e.labelTextColor,R=x.useState(null),T=R[0],v=R[1],O=x.useState(null),g=O[0],a=O[1],I=x.useMemo(function(){if(k!=="auto")return k==="input"?null:k==="ascending"?function(s,c){return s.value-c.value}:k==="descending"?function(s,c){return c.value-s.value}:k},[k]),y=k==="input"?null:void 0,m=x.useMemo(function(){return typeof w=="function"?w:hn(w)},[w]),h=Ct(),E=Fr(A,"id"),W=at(j,h),J=Rr(M),K=at(d,h),ee=Er(o),Z=x.useMemo(function(){return function(s){var c=s.data,S=s.formatValue,z=s.layout,G=s.alignFunction,U=s.sortFunction,H=s.linkSortMode,Y=s.nodeThickness,C=s.nodeSpacing,F=s.nodeInnerPadding,Q=s.width,fe=s.height,he=s.getColor,be=s.getLabel,pe=on().nodeAlign(G).nodeSort(U).linkSort(H).nodeWidth(Y).nodePadding(C).size(z==="horizontal"?[Q,fe]:[fe,Q]).nodeId(pn),ie=un(c);return pe(ie),ie.nodes.forEach(function(b){if(b.color=he(b),b.label=be(b),b.formattedValue=S(b.value),z==="horizontal")b.x=b.x0+F,b.y=b.y0,b.width=Math.max(b.x1-b.x0-2*F,0),b.height=Math.max(b.y1-b.y0,0);else{b.x=b.y0,b.y=b.x0+F,b.width=Math.max(b.y1-b.y0,0),b.height=Math.max(b.x1-b.x0-2*F,0);var Ce=b.x0,ge=b.x1;b.x0=b.y0,b.x1=b.y1,b.y0=Ce,b.y1=ge}}),ie.links.forEach(function(b){b.formattedValue=S(b.value),b.color=b.source.color,b.pos0=b.y0,b.pos1=b.y1,b.thickness=b.width,delete b.y0,delete b.y1,delete b.width}),ie}({data:n,formatValue:ee,layout:l,alignFunction:m,sortFunction:I,linkSortMode:y,nodeThickness:p,nodeSpacing:L,nodeInnerPadding:P,width:i,height:B,getColor:E,getLabel:J})},[n,ee,l,m,I,y,p,L,P,i,B,E,J]),t=Z.nodes,u=Z.links,f=x.useMemo(function(){return t.map(function(s){return{id:s.id,label:s.label,color:s.color}})},[t]);return{nodes:t,links:u,legendData:f,getNodeBorderColor:W,currentNode:T,setCurrentNode:v,currentLink:g,setCurrentLink:a,getLabelTextColor:K}},mn=function(e){var n=e.node,o=e.x,l=e.y,i=e.width,B=e.height,k=e.color,w=e.opacity,A=e.borderWidth,p=e.borderColor,L=e.borderRadius,P=e.setCurrent,j=e.isInteractive,M=e.onClick,d=e.tooltip,R=Ue(),T=R.animate,v=R.config,O=Bt({x:o,y:l,width:i,height:B,opacity:w,color:k,config:v,immediate:!T}),g=jt(),a=g.showTooltipFromEvent,I=g.hideTooltip,y=x.useCallback(function(W){P(n),a(x.createElement(d,{node:n}),W,"left")},[P,n,a,d]),m=x.useCallback(function(W){a(x.createElement(d,{node:n}),W,"left")},[a,n,d]),h=x.useCallback(function(){P(null),I()},[P,I]),E=x.useCallback(function(W){M==null||M(n,W)},[M,n]);return r.jsx(wt.rect,{x:O.x,y:O.y,rx:L,ry:L,width:O.width.to(function(W){return Math.max(W,0)}),height:O.height.to(function(W){return Math.max(W,0)}),fill:O.color,fillOpacity:O.opacity,strokeWidth:A,stroke:p,strokeOpacity:w,onMouseEnter:j?y:void 0,onMouseMove:j?m:void 0,onMouseLeave:j?h:void 0,onClick:j?E:void 0})},kn=function(e){var n=e.nodes,o=e.nodeOpacity,l=e.nodeHoverOpacity,i=e.nodeHoverOthersOpacity,B=e.borderWidth,k=e.getBorderColor,w=e.borderRadius,A=e.setCurrentNode,p=e.currentNode,L=e.currentLink,P=e.isCurrentNode,j=e.isInteractive,M=e.onClick,d=e.tooltip,R=function(T){return p||L?P(T)?l:i:o};return r.jsx(r.Fragment,{children:n.map(function(T){return r.jsx(mn,{node:T,x:T.x,y:T.y,width:T.width,height:T.height,color:T.color,opacity:R(T),borderWidth:B,borderColor:k(T),borderRadius:w,setCurrent:A,isInteractive:j,onClick:M,tooltip:d},T.id)})})},xn=function(e){var n=e.id,o=e.layout,l=e.startColor,i=e.endColor;return r.jsxs("linearGradient",oe({id:n,spreadMethod:"pad"},o==="horizontal"?{x1:"0%",x2:"100%",y1:"0%",y2:"0%"}:{x1:"0%",x2:"0%",y1:"0%",y2:"100%"},{children:[r.jsx("stop",{offset:"0%",stopColor:l}),r.jsx("stop",{offset:"100%",stopColor:i})]}))},yn=function(e){var n=e.link,o=e.layout,l=e.path,i=e.color,B=e.opacity,k=e.blendMode,w=e.enableGradient,A=e.setCurrent,p=e.tooltip,L=e.isInteractive,P=e.onClick,j=n.source.id+"."+n.target.id+"."+n.index,M=Ue(),d=M.animate,R=M.config,T=Hr(l),v=Bt({color:i,opacity:B,config:R,immediate:!d}),O=jt(),g=O.showTooltipFromEvent,a=O.hideTooltip,I=x.useCallback(function(E){A(n),g(x.createElement(p,{link:n}),E,"left")},[A,n,g,p]),y=x.useCallback(function(E){g(x.createElement(p,{link:n}),E,"left")},[g,n,p]),m=x.useCallback(function(){A(null),a()},[A,a]),h=x.useCallback(function(E){P==null||P(n,E)},[P,n]);return r.jsxs(r.Fragment,{children:[w&&r.jsx(xn,{id:j,layout:o,startColor:n.startColor||n.source.color,endColor:n.endColor||n.target.color}),r.jsx(wt.path,{fill:w?'url("#'+encodeURI(j)+'")':v.color,d:T,fillOpacity:v.opacity,onMouseEnter:L?I:void 0,onMouseMove:L?y:void 0,onMouseLeave:L?m:void 0,onClick:L?h:void 0,style:{mixBlendMode:k}})]})},vn=function(e){var n=e.links,o=e.layout,l=e.linkOpacity,i=e.linkHoverOpacity,B=e.linkHoverOthersOpacity,k=e.linkContract,w=e.linkBlendMode,A=e.enableLinkGradient,p=e.setCurrentLink,L=e.currentLink,P=e.currentNode,j=e.isCurrentLink,M=e.isInteractive,d=e.onClick,R=e.tooltip,T=function(O){return P||L?j(O)?i:B:l},v=x.useMemo(function(){return o==="horizontal"?(O=ct().curve(Wr),function(g,a){var I=Math.max(1,g.thickness-2*a)/2,y=.12*(g.target.x0-g.source.x1),m=[[g.source.x1,g.pos0-I],[g.source.x1+y,g.pos0-I],[g.target.x0-y,g.pos1-I],[g.target.x0,g.pos1-I],[g.target.x0,g.pos1+I],[g.target.x0-y,g.pos1+I],[g.source.x1+y,g.pos0+I],[g.source.x1,g.pos0+I],[g.source.x1,g.pos0-I]];return O(m)+"Z"}):function(){var g=ct().curve(Nr);return function(a,I){var y=Math.max(1,a.thickness-2*I)/2,m=.12*(a.target.y0-a.source.y1),h=[[a.pos0+y,a.source.y1],[a.pos0+y,a.source.y1+m],[a.pos1+y,a.target.y0-m],[a.pos1+y,a.target.y0],[a.pos1-y,a.target.y0],[a.pos1-y,a.target.y0-m],[a.pos0-y,a.source.y1+m],[a.pos0-y,a.source.y1],[a.pos0+y,a.source.y1]];return g(h)+"Z"}}();var O},[o]);return r.jsx(r.Fragment,{children:n.map(function(O){return r.jsx(yn,{link:O,layout:o,path:v(O,k),color:O.color,opacity:T(O),blendMode:w,enableGradient:A,setCurrent:p,isInteractive:M,onClick:d,tooltip:R},O.source.id+"."+O.target.id+"."+O.index)})})},bn=function(e){var n=e.nodes,o=e.layout,l=e.width,i=e.height,B=e.labelPosition,k=e.labelPadding,w=e.labelOrientation,A=e.getLabelTextColor,p=e.labelComponent,L=Ct(),P=w==="vertical"?-90:0,j=n.map(function(v){var O,g,a;return o==="horizontal"?(g=v.y+v.height/2,v.x<l/2?B==="inside"?(O=v.x1+k,a=w==="vertical"?"middle":"start"):(O=v.x-k,a=w==="vertical"?"middle":"end"):B==="inside"?(O=v.x-k,a=w==="vertical"?"middle":"end"):(O=v.x1+k,a=w==="vertical"?"middle":"start")):o==="vertical"&&(O=v.x+v.width/2,v.y<i/2?B==="inside"?(g=v.y1+k,a=w==="vertical"?"end":"middle"):(g=v.y-k,a=w==="vertical"?"start":"middle"):B==="inside"?(g=v.y-k,a=w==="vertical"?"start":"middle"):(g=v.y1+k,a=w==="vertical"?"end":"middle")),{id:v.id,label:v.label,x:O,y:g,textAnchor:a,color:A(v)}}),M=Ue(),d=M.animate,R=M.config,T=Ur(j.length,j.map(function(v){return{transform:"translate("+v.x+", "+v.y+") rotate("+P+")",color:v.color,config:R,immediate:!d}}));return r.jsx(r.Fragment,{children:T.map(function(v,O){var g=j[O];return r.jsx(p,{dominantBaseline:"central",textAnchor:g.textAnchor,transform:v.transform,style:oe({},L.labels.text,{fill:v.color,pointerEvents:"none"}),node:n[O],children:g.label},g.id)})})},Cn=["isInteractive","animate","motionConfig","theme","renderWrapper"],Bn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=l===void 0?D.layout:l,B=e.sort,k=B===void 0?D.sort:B,w=e.align,A=w===void 0?D.align:w,p=e.width,L=e.height,P=e.margin,j=e.colors,M=j===void 0?D.colors:j,d=e.nodeThickness,R=d===void 0?D.nodeThickness:d,T=e.nodeSpacing,v=T===void 0?D.nodeThickness:T,O=e.nodeInnerPadding,g=O===void 0?D.nodeInnerPadding:O,a=e.nodeBorderColor,I=a===void 0?D.nodeBorderColor:a,y=e.nodeOpacity,m=y===void 0?D.nodeOpacity:y,h=e.nodeHoverOpacity,E=h===void 0?D.nodeHoverOpacity:h,W=e.nodeHoverOthersOpacity,J=W===void 0?D.nodeHoverOthersOpacity:W,K=e.nodeBorderWidth,ee=K===void 0?D.nodeBorderWidth:K,Z=e.nodeBorderRadius,t=Z===void 0?D.nodeBorderRadius:Z,u=e.linkOpacity,f=u===void 0?D.linkOpacity:u,s=e.linkHoverOpacity,c=s===void 0?D.linkHoverOpacity:s,S=e.linkHoverOthersOpacity,z=S===void 0?D.linkHoverOthersOpacity:S,G=e.linkContract,U=G===void 0?D.linkContract:G,H=e.linkBlendMode,Y=H===void 0?D.linkBlendMode:H,C=e.enableLinkGradient,F=C===void 0?D.enableLinkGradient:C,Q=e.enableLabels,fe=Q===void 0?D.enableLabels:Q,he=e.labelComponent,be=he===void 0?D.labelComponent:he,pe=e.labelPosition,ie=pe===void 0?D.labelPosition:pe,b=e.labelPadding,Ce=b===void 0?D.labelPadding:b,ge=e.labelOrientation,St=ge===void 0?D.labelOrientation:ge,He=e.label,Pt=He===void 0?D.label:He,Ge=e.labelTextColor,Mt=Ge===void 0?D.labelTextColor:Ge,Ve=e.nodeTooltip,Tt=Ve===void 0?D.nodeTooltip:Ve,Ye=e.linkTooltip,Dt=Ye===void 0?D.linkTooltip:Ye,$e=e.isInteractive,me=$e===void 0?D.isInteractive:$e,qe=e.onClick,Je=e.legends,It=Je===void 0?D.legends:Je,Ke=e.layers,ae=Ke===void 0?D.layers:Ke,Ze=e.role,At=Ze===void 0?D.role:Ze,zt=e.ariaLabel,Ft=e.ariaLabelledBy,Rt=e.ariaDescribedBy,Et=e.forwardedRef,ce=Tr(p,L,P),Be=ce.margin,je=ce.innerWidth,we=ce.innerHeight,Le=ce.outerWidth,Oe=ce.outerHeight,X=gn({data:n,valueFormat:o,layout:i,width:je,height:we,sort:k,align:A,colors:M,nodeThickness:R,nodeSpacing:v,nodeInnerPadding:g,nodeBorderColor:I,label:Pt,labelTextColor:Mt}),ke=X.nodes,de=X.links,Wt=X.legendData,Nt=X.getNodeBorderColor,$=X.currentNode,Se=X.setCurrentNode,q=X.currentLink,Pe=X.setCurrentLink,Ut=X.getLabelTextColor,Qe=x.useMemo(function(){var _=function(){return!1},re=function(){return!1};if(q&&(_=function(N){var V=N.id;return V===q.source.id||V===q.target.id},re=function(N){var V=N.source,ne=N.target;return V.id===q.source.id&&ne.id===q.target.id}),$){var te=[$.id];de.filter(function(N){var V=N.source,ne=N.target;return V.id===$.id||ne.id===$.id}).forEach(function(N){var V=N.source,ne=N.target;te.push(V.id),te.push(ne.id)}),te=Pr(te),_=function(N){var V=N.id;return te.includes(V)},re=function(N){var V=N.source,ne=N.target;return V.id===$.id||ne.id===$.id}}return{isCurrentNode:_,isCurrentLink:re}},[q,$,de]),Me=Qe.isCurrentNode,Te=Qe.isCurrentLink,Ht=x.useMemo(function(){return{links:de,nodes:ke,margin:Be,width:p,height:L,outerWidth:Le,outerHeight:Oe,currentNode:$,isCurrentNode:Me,setCurrentNode:Se,currentLink:q,isCurrentLink:Te,setCurrentLink:Pe,isInteractive:me}},[de,ke,Be,p,L,Le,Oe,$,Me,Se,q,Te,Pe,me]),le={links:null,nodes:null,labels:null,legends:null};return ae.includes("links")&&(le.links=r.jsx(vn,{links:de,layout:i,linkContract:U,linkOpacity:f,linkHoverOpacity:c,linkHoverOthersOpacity:z,linkBlendMode:Y,enableLinkGradient:F,setCurrentLink:Pe,currentNode:$,currentLink:q,isCurrentLink:Te,isInteractive:me,onClick:qe,tooltip:Dt},"links")),ae.includes("nodes")&&(le.nodes=r.jsx(kn,{nodes:ke,nodeOpacity:m,nodeHoverOpacity:E,nodeHoverOthersOpacity:J,borderWidth:ee,borderRadius:t,getBorderColor:Nt,setCurrentNode:Se,currentNode:$,currentLink:q,isCurrentNode:Me,isInteractive:me,onClick:qe,tooltip:Tt},"nodes")),ae.includes("labels")&&fe&&(le.labels=r.jsx(bn,{nodes:ke,layout:i,width:je,height:we,labelPosition:ie,labelPadding:Ce,labelOrientation:St,getLabelTextColor:Ut,labelComponent:be},"labels")),ae.includes("legends")&&(le.legends=r.jsx(x.Fragment,{children:It.map(function(_,re){return r.jsx(Dr,oe({},_,{containerWidth:je,containerHeight:we,data:Wt}),"legend"+re)})},"legends")),r.jsx(Ir,{width:Le,height:Oe,margin:Be,role:At,ariaLabel:zt,ariaLabelledBy:Ft,ariaDescribedBy:Rt,ref:Et,children:ae.map(function(_,re){var te;return typeof _=="function"?r.jsx(x.Fragment,{children:x.createElement(_,Ht)},re):(te=le==null?void 0:le[_])!=null?te:null})})},jn=x.forwardRef(function(e,n){var o=e.isInteractive,l=o===void 0?D.isInteractive:o,i=e.animate,B=i===void 0?D.animate:i,k=e.motionConfig,w=k===void 0?D.motionConfig:k,A=e.theme,p=e.renderWrapper,L=function(P,j){if(P==null)return{};var M={};for(var d in P)if({}.hasOwnProperty.call(P,d)){if(j.indexOf(d)!==-1)continue;M[d]=P[d]}return M}(e,Cn);return r.jsx(Mr,{animate:B,isInteractive:l,motionConfig:w,renderWrapper:p,theme:A,children:r.jsx(Bn,oe({isInteractive:l},L,{forwardedRef:n}))})}),wn=function(e,n){return r.jsx(Ar,{children:function(o){var l=o.width,i=o.height;return r.jsx(jn,oe({width:l,height:i},e,{ref:n}))}})},Ln=x.forwardRef(wn);const On=[{id:"White",group:1,total:430},{id:"Yellow",group:1,total:749},{id:"Orange",group:1,total:1204},{id:"Green",group:1,total:609},{id:"Blue",group:1,total:243},{id:"Purple",group:1,total:123},{id:"Brown",group:1,total:81},{id:"Red",group:1,total:70},{id:"Black",group:1,total:169}],Sn=[{source:"White",target:"Yellow",value:533},{source:"White",target:"Orange",value:119},{source:"White",target:"Green",value:13},{source:"White",target:"Blue",value:4},{source:"White",target:"Purple",value:3},{source:"White",target:"Brown",value:1},{source:"White",target:"Red",value:1},{source:"Yellow",target:"Orange",value:728},{source:"Yellow",target:"Green",value:82},{source:"Yellow",target:"Blue",value:9},{source:"Yellow",target:"Purple",value:1},{source:"Yellow",target:"Red",value:1},{source:"Orange",target:"Green",value:512},{source:"Orange",target:"Blue",value:28},{source:"Orange",target:"Purple",value:3},{source:"Orange",target:"Black",value:2},{source:"Green",target:"Blue",value:337},{source:"Green",target:"Purple",value:41},{source:"Green",target:"Brown",value:10},{source:"Green",target:"Red",value:7},{source:"Green",target:"Black",value:4},{source:"Blue",target:"Purple",value:194},{source:"Blue",target:"Brown",value:27},{source:"Blue",target:"Red",value:6},{source:"Blue",target:"Black",value:9},{source:"Purple",target:"Brown",value:146},{source:"Purple",target:"Red",value:15},{source:"Purple",target:"Black",value:10},{source:"Brown",target:"Red",value:117},{source:"Brown",target:"Black",value:12},{source:"Red",target:"Black",value:98}],Ee={nodes:On,links:Sn};function Pn(){const[e,n]=x.useState(Ee),[o,l]=x.useState(Ae),[i,B]=x.useState(void 0),k=Mn(),w=x.useCallback(()=>{n(Ee),l(Ae),B(void 0)},[]),A=x.useCallback(p=>{if(k||!p.label||p.label==="White"||p.label==="Black")return;if(p.label===i){w();return}const{nodes:L,links:P}={...Ee},j=We.indexOf(p.label),M=We.slice(0,j),d=L.filter(v=>!M.includes(v.id)),R=P.filter(v=>!M.includes(v.source)&&!M.includes(v.target)),T=Ae.slice(j);n({nodes:d,links:R}),l(T),B(p.label)},[i,w,k]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{textAlign:"center",height:20,marginBottom:5,fontSize:"0.9rem"},children:i&&r.jsx(se,{onClick:w,style:{color:"#ddd",cursor:"pointer"},children:"Reset"})||r.jsx("span",{children:"Click belt for details"})}),r.jsx("div",{style:{height:600},children:r.jsx(Ln,{data:e,layout:"vertical",sort:"input",margin:{top:10,right:10,bottom:20,left:10},align:"center",colors:o,nodeOpacity:1,nodeHoverOthersOpacity:.2,nodeThickness:22,nodeInnerPadding:0,nodeSpacing:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:3,linkOpacity:.6,linkBlendMode:"normal",linkHoverOthersOpacity:.1,linkContract:-.5,enableLinkGradient:!1,labelPosition:"outside",labelOrientation:"horizontal",labelPadding:-10,labelTextColor:{from:"color",modifiers:[["brighter",5]]},onClick:p=>{A(p)},nodeTooltip:({node:p})=>r.jsx("div",{style:{fontSize:"0.8rem",background:"#444",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:r.jsxs("strong",{children:[p.label,": ",p.total]})}),linkTooltip:({link:p})=>r.jsxs("div",{style:{fontSize:"0.8rem",background:"#666",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:[r.jsx("strong",{children:p.source.label})," to ",r.jsx("strong",{children:p.target.label})," (",p.value,")"]})})})]})}function Mn(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function Tn({data:e}){const{width:n}=yt(),l=n<560?"8px 8px 32px 8px":"24px 24px 32px 24px",i={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},B={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return r.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:l,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[r.jsxs("div",{style:B,children:["User Belt Flows",r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:400},children:"Discord users since Nov. 2019"})]}),r.jsx(Pn,{}),r.jsx("div",{style:i,children:"User Drilldown"}),r.jsx(Jr,{data:e}),r.jsx("div",{style:i,children:"Scorecard Locks"}),r.jsx(Zr,{data:e})]})}function Dn({children:e,allEntries:n,scorecardEntries:o,profile:l}){const{filters:i}=x.useContext(Ne),{search:B,id:k,tab:w,name:A,sort:p,image:L,expandAll:P,dataset:j,...M}=i,{userBelt:d}=M,R=x.useCallback(g=>n.find(a=>a.id===g),[n]),T=x.useMemo(()=>Object.keys(o).map(g=>{var I,y,m;const a=R(g);return a?{...o[g],userBelt:Object.keys(o[g].scorecardPicks),currentPicks:o[g].scorecardPicks[d||"All Belts"],...a,makes:a.makeModels[0].make?a.makeModels.map(({make:h})=>h):a.makeModels[0].model,fuzzy:tt(a.makeModels.map(({make:h,model:E})=>[h,E]).flat().filter(h=>h).concat([a.version,a.notes,a.belt]).join(",")),content:[(I=a.media)!=null&&I.some(h=>!h.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(y=a.media)!=null&&y.some(h=>h.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((m=a.links)==null?void 0:m.length)>0?"Has Links":"No Links",$t[a.belt].danPoints>0?"Worth Dan Points":void 0,et(a.lastUpdated).isAfter(et().subtract(1,"days"))?"Updated Recently":void 0,a.belt.startsWith("Black")?"Is Black":void 0,a.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(h=>h),collection:qt.locks.map.map(h=>l&&l[h.key]&&l[h.key].includes(a.id)?h.label:"Not "+h.label),collectionSaves:Yr[a.id]||0,simpleBelt:a.belt.replace(/\s\d/g,"")}:null}).filter(g=>g),[R,l,o,d]),v=x.useMemo(()=>{const g=Object.keys(M).map(m=>{const h=M[m];return Array.isArray(h)?h.map(E=>({key:m,value:E})):{key:m,value:h}}).flat(),a=T.filter(m=>g.every(({key:h,value:E})=>Array.isArray(m[h])?m[h].includes(E):m[h]===E)),I=B&&a.find(m=>m.id===B);let y=a;return I?y=[I]:B&&(y=ur.go(tt(B),a,{keys:In,threshold:-25e3}).map(m=>({...m.obj,score:m.score}))),p?y.sort((m,h)=>{if(p==="beltAscending")return Jt(m.belt,h.belt)||h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy);if(p==="beltDescending")return Kt(m.belt,h.belt)||h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy);if(p==="alphaAscending")return m.fuzzy.localeCompare(h.fuzzy);if(p==="alphaDescending")return h.fuzzy.localeCompare(m.fuzzy)}):y.sort((m,h)=>h.currentPicks-m.currentPicks||m.fuzzy.localeCompare(h.fuzzy)).map((m,h)=>({...m,displayRank:h+1}))},[M,T,B,p]),O=x.useMemo(()=>({allEntries:n,visibleEntries:v,getEntryFromId:R,expandAll:P,profile:l}),[n,R,v,P,l]);return r.jsx(vt.Provider,{value:O,children:e})}const In=["fuzzy"];function yo(){const{lockCollection:e}=x.useContext(Zt);or("Explore Scorecard");const{data:n,loading:o,error:l,errorMessage:i}=nr({urls:An});return r.jsxs(ve.Fragment,{children:[r.jsx(Qt,{title:"Explore Scorecard"}),l&&r.jsx(cr,{errorMessage:i}),o&&r.jsx(rr,{}),!o&&!l&&!!n&&r.jsx(Xt,{filterFields:Vr,children:r.jsx(Dn,{allEntries:_t,scorecardEntries:n.scorecardStats.lockCountsByUserBelt,profile:e,children:r.jsx(Tn,{data:{...n,lockStats:ar}})})}),r.jsx(er,{}),r.jsx(tr,{feature:"stats"})]})}const An={brandDistribution:fr,collectionsStatsCurrent:hr,popularAreas:pr,redditGrowth:gr,siteFullNew:mr,pickStatsData:kr,scorecardStats:xr,discordBeltCounts:yr,redditBeltCounts:vr};export{yo as default};
