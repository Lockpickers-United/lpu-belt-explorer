import{d as L,r as s,F as Y,j as e,X as P,R as S,W as N,B as $,U as y,aj as V,ak as D,at as T,a4 as E,au as M,u as R,L as O,N as U,h as Q,T as _,D as G,e as J}from"./index-BKEokb_7.js";import{p as q}from"./filterFields-BtSw-jpI.js";import{u as H}from"./usePageTitle-CHpVugZJ.js";import{D as B}from"./DataContext-Co6ecJCI.js";import{r as X}from"./index-ByC0RO_Q.js";import{u as K}from"./useData-DZr4V8My.js";import{a as Z}from"./dataUrls-DVxTtpO-.js";import{f as ee}from"./filterEntriesAdvanced-27pjtuL3.js";import{e as te}from"./entryName-pKmttx6A.js";import{s as z}from"./searchEntriesForText-BEk_bRYU.js";import{D as re}from"./DataTableSort-ybDFJfcn.js";import{d as A,F as I,C as oe}from"./download-D3Pm8357.js";import{L as se}from"./List-DH4nQpVI.js";import{C as ie}from"./ContentCopy-CYstEWSz.js";import{S as ne}from"./SearchBox-DdJpMiTW.js";import{V as ae}from"./ViewFilterButtons-BxTdk9Ho.js";import{p as le}from"./sortFields-JfaKIsUc.js";import{A as ce}from"./AdvancedFilters-BNVeeL5D.js";import{E as W,S as de,Y as pe,a as me}from"./ErrorOutline-DdHuaaA9.js";import{P as ue}from"./PhotoCamera-Bpmx1AR7.js";import"./stringUtils-BsiQ3MZ5.js";import"./ArrowDropDown-BnNYq3rS.js";import"./TableRow-AVSLopR4.js";import"./Search-CTWAZVb2.js";import"./useFormControl-b3Qrdq6q.js";import"./Select-CThuolfK.js";import"./Sort-CvDg_Hct.js";import"./TextField-uI5offDj.js";import"./FilterAlt-BIatHJOk.js";import"./HighlightOff-DIGlbuUn.js";import"./Box-PSUVFQE9.js";import"./LockListContext-C0w0pfzp.js";import"./ToggleButtonGroup-B7g58PBd.js";import"./setDeep-J6HEwWhX.js";import"./AddCircle-bw0_FER9.js";import"./Cancel-DD_jIr-4.js";import"./ChoiceButtonGroup-Ma_g6Dr-.js";import"./Collapse-CEULaLyR.js";function he({children:o,profile:x}){var b;const{data:a,loading:c,error:j,_errorMessage:f}=K({urls:xe}),p=L((b=a==null?void 0:a.metadata)==null?void 0:b.updatedDateTime).format("MM/DD/YY HH:mm"),{filters:w,advancedFilterGroups:m}=s.useContext(Y),{search:k,sort:u,expandAll:g}=w,i=s.useMemo(()=>{var r;return a&&!c&&!j?(r=a==null?void 0:a.allProjectsEvidence)==null?void 0:r.evidence:[]},[a,j,c]),n=s.useMemo(()=>i==null?void 0:i.map(r=>{let v;try{v=new URL(r.evidenceUrl).hostname}catch{}return{...r,pickerName:r.displayName||r.tabName,tierName:je[r.tier],dateText:L(r.date).format("MM/DD/YY"),source:r.unclaimed?"Dan Sheet":"Scorecard",validLink:!!v,fuzzy:X([te(r,"long")].concat([r.discipline,r.displayName,r.tabName]).join(",")),score:1}}),[i]),t=s.useMemo(()=>z(k,[...n]),[n,k]),C=s.useMemo(()=>{const r=ee({advancedFilterGroups:m(),entries:n}).sort((l,d)=>l.pickerName.toLowerCase().localeCompare(d.pickerName.toLowerCase())),v=z(k,[...r]);return u?v.sort((l,d)=>u==="discipline"?l.discipline.localeCompare(d.discipline)||l.pickerName.localeCompare(d.pickerName):u==="tier"?l.tier.localeCompare(d.tier)||l.pickerName.localeCompare(d.pickerName):u==="date"?l.date.localeCompare(d.date)||l.pickerName.localeCompare(d.pickerName):u==="source"?l.source.localeCompare(d.source)||l.pickerName.localeCompare(d.pickerName):u==="evidenceUrl"&&l.evidenceUrl.localeCompare(d.evidenceUrl)||l.pickerName.localeCompare(d.pickerName)):v},[m,n,k,u]),F=s.useCallback(r=>i.find(v=>v.id===r),[i]),h=s.useMemo(()=>({allEntries:i,mappedEntries:n,visibleEntries:C,searchedEntries:t,getEntryFromId:F,expandAll:g,profile:x,updateTime:p}),[i,n,C,t,F,g,x,p]);return e.jsx(B.Provider,{value:h,children:o})}const xe={allProjectsEvidence:Z},je={T1:"Tier 1",T2:"Tier 2",T3:"Tier 3",T4:"Tier 4",T5:"Tier 5"};function fe({text:o,entries:x}){const[a,c]=s.useState(null),j=!!a,f=s.useCallback(i=>c(i.currentTarget),[]),p=s.useCallback(()=>c(null),[]),{visibleEntries:w}=s.useContext(B),m=x||w,k=s.useCallback(()=>{const i=JSON.stringify(m);p(),A("lpuProjectsData.json",i),P("Projects downloaded as lpuProjectsData.json")},[p,m]),u=s.useCallback(()=>{const n=m.map(t=>({picker:t.pickerName,discipline:t.discipline,tier:t.tierName,date:t.date,source:t.source,evidence:t.evidenceUrl})).map(t=>`*  ${t.picker} - ${t.discipline}, ${t.tier} (${t.date})`).join(`
`);p(),navigator.clipboard.writeText(n).then(),P("Projects copied to clipboard.")},[p,m]),g=s.useCallback(()=>{const i=["picker","discipline","tier","date","source","evidence"],n=m.map(h=>({picker:h.pickerName,discipline:h.discipline,tier:h.tierName,date:h.date,source:h.source,evidence:h.evidenceUrl})),t=i.join(","),C=n.map(h=>i.map(b=>h[b]).map(b=>{const r=`${b??""}`.replace(/"/g,'""');return/(\s|,|")/.test(r)?`"${r}"`:r}).join(",")).join(`
`),F=`${t}
${C}`;p(),A("lpuProjectsData.csv",F),P("Projects downloaded as lpuProjectsData.csv")},[p,m]);return e.jsxs(S.Fragment,{children:[o?e.jsx(N,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx($,{variant:"outlined",size:"small",onClick:f,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(I,{}),children:"Export"})}):e.jsx(N,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{onClick:f,children:e.jsx(I,{})})}),e.jsxs(V,{anchorEl:a,open:j,onClose:p,children:[!o&&e.jsxs(D,{disabled:!0,children:[e.jsx(T,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(E,{children:"Export"})]}),e.jsxs(D,{onClick:u,children:[e.jsx(T,{children:e.jsx(ie,{fontSize:"small"})}),e.jsx(E,{children:"Copy to clipboard"})]}),e.jsxs(D,{onClick:g,children:[e.jsx(T,{children:e.jsx(se,{fontSize:"small"})}),e.jsx(E,{children:"CSV"})]}),e.jsxs(D,{onClick:k,children:[e.jsx(T,{children:e.jsx(oe,{fontSize:"small"})}),e.jsx(E,{children:"JSON"})]})]})]})}function ke({evidenceUrl:o,handleChange:x=()=>{}}){const a=s.useCallback(j=>{j.preventDefault(),j.stopPropagation();const f=window.open(o,"_blank","noopener,noreferrer");f&&(f.opener=null)},[o]);let c=e.jsx(de,{style:{width:20,height:20}});return o.match(/(https|http):\/\/.*(youtu.be|youtube.com)/)?c=e.jsx(pe,{style:{width:20,height:20}}):o.match(/(https|http):\/\/.*discord.com/)?c=e.jsx(me,{style:{width:20,height:20}}):o.match(/(https|http):\/\/.*imgur.com/)&&(c=e.jsx(ue,{style:{width:20,height:20}})),e.jsxs(S.Fragment,{children:[M(o)&&e.jsx(N,{title:"View Documentation",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{style:{width:40,height:40},onClick:a,children:c})}),!!o&&!M(o)&&e.jsx(N,{title:"Documentation link is not valid",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{style:{width:40,height:40},onClick:x,children:e.jsx(W,{style:{width:22,height:22,color:"#c07b32"}})})}),!o&&e.jsx(N,{title:"Documentation link is missing",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{style:{width:40,height:40},onClick:x,children:e.jsx(W,{style:{width:22,height:22,color:"#e55940"}})})})]})}function Ce(){const{visibleEntries:o=[],updateTime:x}=s.useContext(B),{isMobile:a}=R(),c=s.useCallback(n=>{const t=window.open(n,"_blank","noopener,noreferrer");t&&(t.opener=null)},[]),j=[...o],f=[{id:"pickerName",align:"left",name:"Picker Name"},{id:"discipline",align:"left",name:"Discipline"},{id:"tier",align:"center",name:"Tier"},{id:"date",align:"center",name:"Date"},{id:"source",align:"left",name:"Source"},{id:"evidenceUrl",align:"center",name:"Evidence"}],p="pickerName",w="100%",m={columns:f,rows:j,defaultSort:p,sortable:!0,wrap:!1},k=s.useCallback((n,t,C)=>n==="evidenceUrl"?e.jsx(ke,{evidenceUrl:t}):n==="date"?L(t).format("MM/DD/YY"):n==="discipline"&&M(C)?e.jsx(O,{onClick:()=>c(C),style:{color:"#fff",fontWeight:500},children:t}):t,[c]),u=e.jsxs(S.Fragment,{children:[e.jsx(ne,{label:"Projects",extraFilters:[{key:"tab",value:"search"}],keepOpen:!1,entryCount:o.length}),e.jsx(ae,{sortValues:le,advancedEnabled:!0,extraFilters:[],entryType:"Project",compactMode:!1,resetAll:!0,expandAll:!1}),!a&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]}),g=e.jsx("div",{style:{margin:"30px 0px"},children:e.jsx(fe,{text:!0,entries:o,advancedEnabled:!0})}),i={maxWidth:700,marginLeft:"auto",marginRight:"auto"};return e.jsxs(S.Fragment,{children:[e.jsx(U,{title:"Projects",extras:u}),e.jsxs("div",{style:{margin:8,paddingBottom:8},children:[e.jsx(ce,{}),e.jsxs("div",{style:i,children:[e.jsx("div",{style:{margin:"24px 8px"},children:"The page contains most of our approved projects: those in Scorecards and those entered in the Dan Sheet prior to Sept, 2024. Intended for internal use, many of the links to original requests lead to pages accessible by Black Belts only. (This page not yet optimized for mobile devices.)"}),e.jsx(re,{tableData:m,tableWidth:w,linkFunction:k,linkColumnId:"evidenceUrl",largeFontSize:"0.90rem"}),e.jsxs("div",{style:{margin:"24px 8px",textAlign:"center",fontSize:"0.8rem",color:"#999"},children:["Updated: ",x]})]})]}),e.jsx(Q,{extras:void 0,before:g}),e.jsx(_,{feature:"projectsQuests"})]})}function st(){const{lockCollection:o}=s.useContext(G);return H("Projects & Quests"),e.jsx(J,{filterFields:q,children:e.jsx(he,{profile:o,children:e.jsx(Ce,{})})})}export{st as default};
