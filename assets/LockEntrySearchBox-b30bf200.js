import{u as y,r as i,av as B,j as a,R as L,aa as w}from"./index-001060fd.js";import{I as A,d as C}from"./Search-d0ba0cec.js";import{e as f}from"./entryName-90e2f639.js";import{B as F}from"./BeltStripeMini-18073525.js";import{A as M}from"./Autocomplete-0bd8ebe1.js";import{T}from"./TextField-86a4a226.js";function K({handleChangeLock:m,allEntries:n,disabled:d,reset:b=!1}){const k={maxWidth:700},{isMobile:x}=y(),h=i.useRef(),N=i.useMemo(()=>{let e={};return{allLocks:n==null?void 0:n.sort((o,s)=>{B(o.belt,s.belt)||f(o,"short").localeCompare(f(s,"short"))}).reduce((o,s)=>{const O=s.version?" - "+s.version:"";return s.makeModels.map(l=>{const p=l.make?l.make:l.model,u=l.make?` ${l.model}`:"",R=`${p}${u}${O}`;o.push({id:s.id,lockName:R,make:p,model:u})}),o},[]).filter(o=>o),lockNames:e}},[n]),{allLocks:r,lockNames:c}=N,j=r.filter((e,t)=>r.findIndex(o=>o.lockName===e.lockName)!==t),S=r==null?void 0:r.map(e=>(e.lockName=j.find(t=>t.lockName===e.lockName)?e.lockName+` (${n.find(t=>t.id===e.id).belt})`:e.lockName,e)).map(e=>(c[e.lockName]=`${e.make}${e.model}`,{label:e.lockName,id:e.id,belt:n.find(t=>t.id===e.id).belt})),v=i.useCallback((e,t)=>{m(t?{lockFullName:t.label,lockName:c[t.label],lockId:t.id}:{})},[c,m]),[I,$]=i.useState(!1),g=i.useCallback(()=>$(!1),[]);return a.jsxs(L.Fragment,{children:[a.jsx(M,{disabled:d,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:k,options:S,onChange:v,renderInput:e=>a.jsx(T,{...e,placeholder:"Search Locks",variant:"standard",color:"info",inputRef:h,InputProps:{...e.InputProps,startAdornment:a.jsx(A,{position:"start",children:a.jsx(C,{})})}}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionLabel:e=>e.label,renderOption:(e,t)=>{const{key:o,...s}=e;return a.jsxs("div",{...s,style:{...e.style,height:34,padding:0,overflow:"elipsis",whiteSpace:"nowrap",color:t.belt==="Unranked"?"#aaa":"#fff",fontSize:"0.95rem"},children:[a.jsx(F,{value:t.belt,style:{marginRight:10}}),t.label]},o)}},b||d),a.jsx(w,{invisible:!0,open:I&&x,onClick:g})]})}export{K as L};
