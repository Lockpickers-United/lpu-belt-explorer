import{r as a,ao as z,j as C}from"./index-b0aa62ae.js";import{F as j,r as b,f as A,D as N}from"./filterFields-cb9d364f.js";function R({children:v,allEntries:s,profile:i}){const{filters:y}=a.useContext(j),{search:u,id:h,tab:k,name:F,sort:n,image:I,preview:B,single:D,...l}=y,p=a.useMemo(()=>s.map(r=>({...r,fuzzy:b([r.title,r.winner,r.description,r.potContents].join(",")),collection:z.raffle.map.map(o=>i&&i[o.key]&&i[o.key].includes(r.id)?"In "+o.label:"Not in "+o.label)})),[s,i]),m=a.useMemo(()=>{const r=Object.keys(l).map(e=>{const t=l[e];return Array.isArray(t)?t.map(c=>({key:e,value:c})):{key:e,value:t}}).flat(),o=p.filter(e=>r.every(({key:t,value:c})=>Array.isArray(e[t])?e[t].includes(c):e[t]===c)).sort((e,t)=>e.potNumber-t.potNumber),d=u?A.go(b(u),o,{keys:g,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):o;return n?d.sort((e,t)=>n==="potName"?e.title.localeCompare(t.title):n==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0]):n==="tickets"?parseInt(t.tickets)-parseInt(e.tickets):e.potNumber<t.potNumber):d},[l,p,u,n]),f=a.useCallback(r=>s.find(o=>o.id===r),[s]),x=a.useMemo(()=>({allEntries:s,visibleEntries:m,getPotFromId:f}),[s,m,f]);return C.jsx(N.Provider,{value:x,children:v})}const g=["fuzzy"];export{R};
