import{r as a,j as y}from"./index-b0adaa54.js";import{F as I,f as v,D as A}from"./filterFields-d5f973a5.js";import{r as x}from"./index-a99eacda.js";function k({children:m,allEntries:o}){const{filters:f}=a.useContext(I),{search:i,id:j,tab:g,name:h,sort:r,image:F,preview:B,single:D,...l}=f,p=a.useMemo(()=>{const c=Object.keys(l).map(e=>{const t=l[e];return Array.isArray(t)?t.map(n=>({key:e,value:n})):{key:e,value:t}}).flat(),s=o.filter(e=>c.every(({key:t,value:n})=>Array.isArray(e[t])?e[t].includes(n):e[t]===n)).sort((e,t)=>e.potNumber-t.potNumber),d=i?v.go(x(i),s,{keys:z,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):s;return r?d.sort((e,t)=>r==="potName"?e.title.localeCompare(t.title):r==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):r==="tickets"?parseInt(t.tickets)-parseInt(e.tickets)||e.title.localeCompare(t.title):r==="donors"?parseInt(t.donors)-parseInt(e.donors)||e.title.localeCompare(t.title):r==="dateAdded"?parseInt(t.dateAdded)-parseInt(e.dateAdded)||e.title.localeCompare(t.title):parseInt(e[r])-parseInt(t[r])||e.title.localeCompare(t.title)):d.sort((e,t)=>parseInt(e.donors)-parseInt(t.donors)||e.title.localeCompare(t.title))},[o,l,i,r]),u=a.useCallback(c=>o.find(s=>s.id===c),[o]),C=a.useMemo(()=>({allEntries:o,visibleEntries:p,getPotFromId:u}),[o,p,u]);return y.jsx(A.Provider,{value:C,children:m})}const z=["fuzzy"];export{k as R};
