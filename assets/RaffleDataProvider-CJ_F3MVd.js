import{r as n,F as k,j as v}from"./index-l7pi2VK3.js";import{a as F,f as z}from"./filterEntriesAdvanced-DsSxKcCB.js";import{D as g}from"./DataContext-DEym4wpD.js";import{r as j}from"./index-DJrL_8Yd.js";import{R as D}from"./RaffleContext-CzUW6omB.js";function O({children:x,allEntries:r=[]}){const{summary:u}=n.useContext(D),{filters:y,advancedFilterGroups:l}=n.useContext(k),{search:c,id:N,tab:P,name:R,sort:o,image:T,preview:M,single:A,expandAll:m,...B}=y,f=.3,a=n.useCallback(s=>{const i=c&&s.find(e=>e.id===c);return i?[i]:c?F.go(j(c),s,{keys:I,threshold:-23e3}).map(e=>({...e.obj,score:e.score})).filter(e=>e.score>f):s},[c,f]),p=n.useMemo(()=>a(r),[r,a]),d=n.useMemo(()=>{if(!u||Object.keys(u).length===0||!r)return[];const s=z({advancedFilterGroups:l(),entries:r}).sort((e,t)=>e.potNumber-t.potNumber),i=a([...s]);return o?s.sort((e,t)=>o==="potName"?e.title.localeCompare(t.title):o==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):o==="tickets"?t.totalTickets-e.totalTickets||e.title.localeCompare(t.title):o==="donors"?t.uniqueDonorCount-e.uniqueDonorCount||t.totalTickets-e.totalTickets||e.title.localeCompare(t.title):parseInt(e[o])-parseInt(t[o])||e.title.localeCompare(t.title)):i.sort((e,t)=>t.score-e.score||parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title))},[l,r,a,o,u]),C=n.useCallback(s=>r.find(i=>i.id===s),[r]),h=n.useMemo(()=>({allEntries:r,searchedEntries:p,visibleEntries:d,getPotFromId:C,expandAll:m}),[r,p,d,C,m]);return v.jsx(g.Provider,{value:h,children:x})}const I=["fuzzy"];export{O as R};
