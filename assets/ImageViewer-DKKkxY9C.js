import{Y,Z as R,$ as _,a0 as q,r as c,R as Ce,j as t,bs as Ie,u as ke,a5 as G,O as Le,X as De,a1 as Te,a2 as Ye,U as S,P as Re,Q as ie,W as b,bt as ae}from"./index-BRm7qaRj.js";import{L as _e}from"./Link-BXczcuvH.js";import{L as qe}from"./Launch-BzwsdV7s.js";import{D as Ee}from"./Dialog-WTcnU20k.js";import{L as Fe}from"./LinearProgress-CQQUWIbA.js";import{D as Ae,a as Be}from"./DialogContent-ChoFKo_3.js";const Ue={"CC BY 2.0":"https://creativecommons.org/licenses/by/2.0/","CC BY 3.0":"https://creativecommons.org/licenses/by/3.0/","CC BY 4.0":"https://creativecommons.org/licenses/by/4.0/","CC BY-NC 2.0":"https://creativecommons.org/licenses/by-nc/2.0/","CC BY-NC 3.0":"https://creativecommons.org/licenses/by-nc/3.0/","CC BY-NC 4.0":"https://creativecommons.org/licenses/by-nc/4.0/","CC BY-NC-ND 2.0":"https://creativecommons.org/licenses/by-nc-nd/2.0/","CC BY-NC-ND 3.0":"https://creativecommons.org/licenses/by-nc-nd/3.0/","CC BY-NC-ND 4.0":"https://creativecommons.org/licenses/by-nc-nd/4.0/","CC BY-NC-SA 2.0":"https://creativecommons.org/licenses/by-nc-sa/2.0/","CC BY-NC-SA 3.0":"https://creativecommons.org/licenses/by-nc-sa/3.0/","CC BY-NC-SA 4.0":"https://creativecommons.org/licenses/by-nc-sa/4.0/","CC BY-SA 2.0":"https://creativecommons.org/licenses/by-sa/2.0/","CC BY-SA 3.0":"https://creativecommons.org/licenses/by-sa/3.0/","CC BY-SA 4.0":"https://creativecommons.org/licenses/by-sa/4.0/"};var B={},ce;function Ze(){if(ce)return B;ce=1;var e=Y();Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var i=e(R()),r=_();return B.default=(0,i.default)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),B}var ze=Ze();const Ne=q(ze),Pe="Left",Xe="Right",He="Up",$e="Down",T={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Q={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ue="mousemove",le="mouseup",Ve="touchend",We="touchmove",Ge="touchstart";function Je(e,i,r,u){return e>i?r>0?Xe:Pe:u>0?$e:He}function de(e,i){if(i===0)return e;const r=Math.PI/180*i,u=e[0]*Math.cos(r)+e[1]*Math.sin(r),f=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[u,f]}function Ke(e,i){const r=n=>{const o="touches"in n;o&&n.touches.length>1||e((s,a)=>{a.trackMouse&&!o&&(document.addEventListener(ue,u),document.addEventListener(le,M));const{clientX:d,clientY:g}=o?n.touches[0]:n,h=de([d,g],a.rotationAngle);return a.onTouchStartOrOnMouseDown&&a.onTouchStartOrOnMouseDown({event:n}),Object.assign(Object.assign(Object.assign({},s),Q),{initial:h.slice(),xy:h,start:n.timeStamp||0})})},u=n=>{e((o,s)=>{const a="touches"in n;if(a&&n.touches.length>1)return o;if(n.timeStamp-o.start>s.swipeDuration)return o.swiping?Object.assign(Object.assign({},o),{swiping:!1}):o;const{clientX:d,clientY:g}=a?n.touches[0]:n,[h,L]=de([d,g],s.rotationAngle),l=h-o.xy[0],p=L-o.xy[1],v=Math.abs(l),j=Math.abs(p),w=(n.timeStamp||0)-o.start,X=Math.sqrt(v*v+j*j)/(w||1),C=[l/(w||1),p/(w||1)],F=Je(v,j,l,p),H=typeof s.delta=="number"?s.delta:s.delta[F.toLowerCase()]||T.delta;if(v<H&&j<H&&!o.swiping)return o;const D={absX:v,absY:j,deltaX:l,deltaY:p,dir:F,event:n,first:o.first,initial:o.initial,velocity:X,vxvy:C};D.first&&s.onSwipeStart&&s.onSwipeStart(D),s.onSwiping&&s.onSwiping(D);let y=!1;return(s.onSwiping||s.onSwiped||s[`onSwiped${F}`])&&(y=!0),y&&s.preventScrollOnSwipe&&s.trackTouch&&n.cancelable&&n.preventDefault(),Object.assign(Object.assign({},o),{first:!1,eventData:D,swiping:!0})})},f=n=>{e((o,s)=>{let a;if(o.swiping&&o.eventData){if(n.timeStamp-o.start<s.swipeDuration){a=Object.assign(Object.assign({},o.eventData),{event:n}),s.onSwiped&&s.onSwiped(a);const d=s[`onSwiped${a.dir}`];d&&d(a)}}else s.onTap&&s.onTap({event:n});return s.onTouchEndOrOnMouseUp&&s.onTouchEndOrOnMouseUp({event:n}),Object.assign(Object.assign(Object.assign({},o),Q),{eventData:a})})},m=()=>{document.removeEventListener(ue,u),document.removeEventListener(le,M)},M=n=>{m(),f(n)},I=(n,o)=>{let s=()=>{};if(n&&n.addEventListener){const a=Object.assign(Object.assign({},T.touchEventOptions),o.touchEventOptions),d=[[Ge,r,a],[We,u,Object.assign(Object.assign({},a),o.preventScrollOnSwipe?{passive:!1}:{})],[Ve,f,a]];d.forEach(([g,h,L])=>n.addEventListener(g,h,L)),s=()=>d.forEach(([g,h])=>n.removeEventListener(g,h))}return s},E={ref:n=>{n!==null&&e((o,s)=>{if(o.el===n)return o;const a={};return o.el&&o.el!==n&&o.cleanUpTouch&&(o.cleanUpTouch(),a.cleanUpTouch=void 0),s.trackTouch&&n&&(a.cleanUpTouch=I(n,s)),Object.assign(Object.assign(Object.assign({},o),{el:n}),a)})}};return i.trackMouse&&(E.onMouseDown=r),[E,I]}function Qe(e,i,r,u){return!i.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?i.preventScrollOnSwipe!==r.preventScrollOnSwipe||i.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:u(e.el,i)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:u(e.el,i)})}function et(e){const{trackMouse:i}=e,r=c.useRef(Object.assign({},Q)),u=c.useRef(Object.assign({},T)),f=c.useRef(Object.assign({},u.current));f.current=Object.assign({},u.current),u.current=Object.assign(Object.assign({},T),e);let m;for(m in T)u.current[m]===void 0&&(u.current[m]=T[m]);const[M,I]=c.useMemo(()=>Ke(k=>r.current=k(r.current,u.current),{trackMouse:i}),[i]);return r.current=Qe(r.current,u.current,f.current,I),M}const tt=Ce.forwardRef(function(i,r){return t.jsx(Ie,{direction:"up",ref:r,...i})});var U={},he;function nt(){if(he)return U;he=1;var e=Y();Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var i=e(R()),r=_();return U.default=(0,i.default)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),U}var rt=nt();const fe=q(rt);var Z={},ge;function ot(){if(ge)return Z;ge=1;var e=Y();Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var i=e(R()),r=_();return Z.default=(0,i.default)((0,r.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),Z}var st=ot();const xe=q(st);var z={},ve;function it(){if(ve)return z;ve=1;var e=Y();Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var i=e(R()),r=_();return z.default=(0,i.default)([(0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,r.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),z}var at=it();const ct=q(at);var N={},be;function ut(){if(be)return N;be=1;var e=Y();Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var i=e(R()),r=_();return N.default=(0,i.default)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),N}var lt=ut();const dt=q(lt);var P={},me;function ht(){if(me)return P;me=1;var e=Y();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var i=e(R()),r=_();return P.default=(0,i.default)((0,r.jsx)("path",{d:"M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19z"}),"YoutubeSearchedFor"),P}var ft=ht();const gt=q(ft);function Ct({media:e,openIndex:i,onOpenImage:r,onClose:u,shareParams:f={}}){const[m,M]=c.useState(!0),[I,k]=c.useState(!0),[{x:E,y:n},o]=c.useState({x:0,y:0}),[{x:s,y:a},d]=c.useState({x:0,y:0}),[{x:g,y:h},L]=c.useState({x:0,y:0}),[l,p]=c.useState(1),[v,j]=c.useState(!1),{isMobile:w}=ke(),X=e.find(x=>x.sequenceId===i),C=e.indexOf(X),{fullSizeUrl:F,thumbnailUrl:H,fullUrl:D,title:y,subtitle:ee,subtitleUrl:Se,label:te}=X||{},we=te?`${te} - ${y}`:y,ye=c.useCallback(()=>k(!1),[]),J=c.useCallback(()=>{M(!1),setTimeout(()=>u(),200)},[u]),ne=c.useCallback(()=>p(l+je),[l]),re=c.useCallback(()=>p(Math.max(l-je,1)),[l]),A=c.useCallback(()=>{L({x:0,y:0}),o({x:0,y:0}),d({x:0,y:0}),p(1)},[]),$=c.useCallback(()=>{const x=C===0?e.length-1:C-1;r(e[x].sequenceId),A(),k(!0)},[C,e,r,A]),V=c.useCallback(()=>{const x=C===e.length-1?0:C+1;r(e[x].sequenceId),A(),k(!0)},[C,e,r,A]),oe=c.useCallback(x=>{if(l!==1){j(!0);const O=pe(x),W={x:O.x-s,y:O.y-a};o(W)}},[s,a,l]),se=c.useCallback(x=>{if(v){const O=pe(x),W={x:O.x-E,y:O.y-n};d(W),L(W)}},[v,E,n]),K=c.useCallback(()=>{j(!1)},[]);G("left",$,{preventDefault:!0}),G("right",V,{preventDefault:!0}),G("up",ne,{preventDefault:!0}),G("down",re,{preventDefault:!0});const Oe=et({onSwipedLeft:V,onSwipedRight:$,onSwipedDown:J,swipeDuration:250}),Me=c.useCallback(async()=>{const O=`https://share.lpubelts.com/?${Le.stringify({...f,image:i})}`;await navigator.clipboard.writeText(O),De("Link to entry copied to clipboard.")},[i,f]);return t.jsxs(Ee,{open:m,onClose:J,TransitionComponent:tt,fullScreen:!0,children:[t.jsx(Te,{sx:{position:"relative"},children:t.jsxs(Ye,{children:[t.jsx(S,{edge:"start",color:"inherit",onClick:J,"aria-label":"close",children:t.jsx(Ne,{})}),t.jsxs(Re,{direction:"column",sx:{marginLeft:2,width:"100%"},children:[t.jsx(ie,{variant:"subtitle1",component:"div",children:we}),t.jsx(ie,{variant:"subtitle2",component:"div",style:{color:"#777"},children:t.jsx("a",{href:Se||Ue[ee],target:"_blank",rel:"noopener noreferrer",children:ee})})]}),t.jsx(b,{title:"View Full Size",arrow:!0,disableFocusListener:!0,children:t.jsx(S,{href:D,style:{color:"rgba(255, 255, 255, 0.5)"},target:"_blank",rel:"noopener noreferrer",children:t.jsx(qe,{})})})]})}),I&&t.jsx(Fe,{color:"secondary"}),!w&&e.length>1&&t.jsxs(Ce.Fragment,{children:[t.jsx(b,{title:"Previous Image",arrow:!0,disableFocusListener:!0,children:t.jsx(ae,{onClick:$,sx:{position:"fixed",left:16,top:"50vh",zIndex:1e3},children:t.jsx(fe,{})})}),t.jsx(b,{title:"Next Image",arrow:!0,disableFocusListener:!0,children:t.jsx(ae,{onClick:V,sx:{position:"fixed",right:16,top:"50vh",zIndex:1e3},children:t.jsx(xe,{})})})]}),t.jsx(Ae,{style:{display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",overflow:"hidden"},children:t.jsx("img",{draggable:!1,style:{transform:`translate3d(${g}px, ${h}px, 0px) scale(${l})`,cursor:l>1?"grab":"unset",transition:v?"none":"all 0.1s",maxWidth:"calc(100vw - 64px)",maxHeight:"calc(100vh - 160px)",backgroundSize:50,transformOrigin:"center center"},onLoad:ye,onTouchStart:oe,onMouseDown:oe,onTouchMove:se,onMouseMove:se,onTouchEnd:K,onMouseUp:K,onMouseLeave:K,...Oe,title:y,src:F||H,alt:y})}),t.jsxs(Be,{sx:{maxHeight:64,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:[w&&e.length>0&&t.jsx(b,{title:"Previous Image",arrow:!0,disableFocusListener:!0,children:t.jsx(S,{color:"inherit",onClick:$,"aria-label":"previousImage",children:t.jsx(fe,{})})}),t.jsx(b,{title:"Zoom In",arrow:!0,disableFocusListener:!0,children:t.jsx(S,{color:"inherit",onClick:ne,"aria-label":"zoomIn",children:t.jsx(ct,{})})}),t.jsx(b,{title:"Reset Zoom",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(S,{color:"inherit",onClick:A,"aria-label":"reset",disabled:l===1&&g===0&&h===0,children:t.jsx(gt,{})})})}),t.jsx(b,{title:"Zoom Out",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(S,{color:"inherit",onClick:re,"aria-label":"zoomOut",disabled:l===1,children:t.jsx(dt,{})})})}),t.jsx(b,{title:"Copy Link to Image",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(S,{color:"inherit",onClick:Me,"aria-label":"copyLink",children:t.jsx(_e,{})})})}),w&&e.length>0&&t.jsx(b,{title:"Next Image",arrow:!0,disableFocusListener:!0,children:t.jsx(S,{color:"inherit",onClick:V,"aria-label":"nextImage",children:t.jsx(xe,{})})})]})]})}const pe=e=>e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY},je=.4;export{fe as A,Ne as C,Ct as I,tt as T,xe as a,Ue as l};
