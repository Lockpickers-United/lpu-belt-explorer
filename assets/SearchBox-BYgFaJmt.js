import{r as t,O as P,P as W,Q as z,U as _,a6 as A,F as M,u as O,Z as V,j as e,R as J,J as C,I as j,ac as L}from"./index-BM4DZBjA.js";import{S as b,I as S}from"./Search-C8t-F8zW.js";import{B as H}from"./Sort-B0pvtgwK.js";import{T as Q}from"./TextField-DwPjsRbb.js";function U(r,n){const[i,c]=t.useState(r);return t.useEffect(()=>{const h=setTimeout(()=>c(r),n);return()=>{clearTimeout(h)}},[r,n]),i}var d={},k;function Z(){if(k)return d;k=1;var r=P();Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=r(W()),i=z();return d.default=(0,n.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),d}var $=Z();const G=_($);function ee({label:r,extraFilters:n=[],keepOpen:i}){const[c]=A(),{addFilters:h,removeFilter:m,isFiltered:p}=t.useContext(M),[l,x]=t.useState(c.get("search")||""),{isMobile:u,width:T}=O(),y=T<=500,s=t.useRef();V("s",()=>{var a;return(a=s==null?void 0:s.current)==null?void 0:a.focus()},{preventDefault:!0});const R=t.useCallback(()=>{window.scrollTo({top:0}),x(""),m("search",""),s.current.focus()},[m]),I=t.useCallback(a=>{const{value:E}=a.target;x(E)},[]),o=U(l.replaceAll("	"," "),250);t.useEffect(()=>{o&&o!==c.get("search")?o?(window.scrollTo({top:0}),h([{key:"search",value:o},{key:"id",value:void 0},{key:"name",value:void 0},...n],!0)):(console.log("SearchBox: debounceText is empty"),h([{key:"search",value:o}],!0)):o||m("search","")},[o]);const[f,g]=t.useState(!1),v=t.useCallback(()=>setTimeout(()=>g(!1),0),[]),w=t.useCallback(()=>{g(!0),setTimeout(()=>{s.current.focus(),s.current.select()},0)},[]);t.useEffect(()=>{const a=c.get("search");a!==l&&x(a||"")},[c]);const F=l?e.jsx(S,{position:"end",children:e.jsx(C,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:R,edge:"end",size:"small",children:e.jsx(G,{})})})}):null,B=u?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},q=f&&u?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},D=l?"secondary":"inherit";return e.jsxs(J.Fragment,{children:[!f&&u&&!i&&!p&&e.jsx(C,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(j,{color:"inherit",onClick:w,children:e.jsx(H,{invisible:l.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(b,{})})})}),(f||!u||i||p)&&e.jsx(Q,{placeholder:y?r:`Search ${r}`,InputProps:{inputProps:{ref:s},startAdornment:e.jsx(S,{position:"start",children:e.jsx(b,{color:D})}),endAdornment:F},variant:"standard",color:"secondary",onChange:I,onBlur:v,value:l,style:{...B,...q},fullWidth:!0}),e.jsx(L,{invisible:!0,open:f&&u,onClick:v})]})}export{ee as S};
