import{r,X as f,j as t,W as z,B as x,u as U,R as u,N as w,h as F,T as $}from"./index-C8JhLQMS.js";import{a as B}from"./index-xsH4HHeE.js";import{n as D}from"./dataUrls-DkJe4Pqg.js";import{T as E}from"./TextField-CtpLr4Ee.js";import{u as P}from"./usePageTitle-Bsqu3bvE.js";import"./Select-CCmFDX8s.js";function G({mediaData:o}){const s=r.useCallback(async()=>{await navigator.clipboard.writeText(o),f("Media data copied to clipboard.")},[o]);return t.jsx(z,{title:"Copy Media Data",arrow:!0,disableFocusListener:!0,children:t.jsx(x,{onClick:s,variant:"contained",size:"small",style:{marginLeft:20,height:40,backgroundColor:"#03ac03"},children:"Copy media data to clipboard"})})}function q(){const[o,s]=r.useState(""),[d,c]=r.useState(!1),[e,p]=r.useState(null),[j,y]=r.useState(!1),{flexStyle:v}=U(),h=async i=>{i.preventDefault(),c(!0),new FormData().append("photosetId",o),await B.get(`${D}/flickr-info?id=${o}`,{}).then(n=>{p(n.data),c(!1)}).catch(n=>{y(!0),console.error("error",n)}),j&&f("Something went wrong! Please try again later.")},b=r.useCallback(i=>{const{value:a}=i.target,n=a.match(/(\d{17})/)||[];s(n[0]||"")},[]),m=e!=null&&e.error?JSON.stringify(e==null?void 0:e.error,null,2):void 0,l=m?m.split("\\n"):"",g="",S=!e||e!=null&&e.error?"":e.photos.reduce((i,a)=>{const{seq:n,title:k,credit:R,fullURL:L,thumbnailURL:I,originalURL:T}=a,W=[n,k,R,"CC BY-NC-SA 4.0",g,I,L,g,T].join("	")+`
`;return i+W},""),C=d?{backgroundColor:"#555",color:"#373737"}:{backgroundColor:"#7c9de5",color:"#000"};return t.jsxs("div",{style:{maxWidth:700,padding:0,marginLeft:"auto",marginRight:"auto",marginTop:16,marginBottom:46},children:[t.jsx("form",{action:null,encType:"multipart/form-data",method:"post",onSubmit:h,children:t.jsxs("div",{style:{display:v,marginBottom:50,marginTop:25,alignItems:"bottom"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{fontSize:"0.9rem",fontWeight:700},children:"Enter Photoset ID (e.g. 72177720322353676)"}),t.jsx("br",{}),t.jsx(E,{type:"text",name:"photosetId",value:o,style:{width:300},onChange:b,color:"info",size:"small"})]}),t.jsx("div",{style:{display:"flex",alignItems:"end"},children:t.jsx(x,{onClick:h,variant:"contained",size:"small",disabled:d,style:{marginLeft:20,height:40,...C},children:"Get Photoset Info"})})]})}),e&&e.error&&t.jsx("div",{style:{},children:t.jsxs("div",{style:{backgroundColor:"#ae3737",marginLeft:"auto",marginRight:"auto",padding:"20px 20px",fontSize:"1.4rem",fontWeight:700},children:[t.jsx("div",{children:"Error"}),t.jsx("div",{style:{fontSize:"1.1rem",fontWeight:400},children:l==null?void 0:l.map((i,a)=>t.jsx("div",{children:i},a))})]})}),e&&!e.error&&t.jsxs("div",{style:{},children:[t.jsxs("div",{style:{backgroundColor:"#444",marginLeft:"auto",marginRight:"auto",padding:"20px 20px",fontSize:"1.6rem",fontWeight:700,display:"flex"},children:[t.jsx("div",{style:{flexGrow:1},children:"PHOTOSET IMAGE DATA"}),t.jsx(G,{mediaData:S})]}),t.jsxs("div",{style:{backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",padding:"20px 20px",fontSize:"0.86rem"},children:[t.jsx("div",{style:{fontWeight:600,fontSize:"1.3rem",marginBottom:20},children:`${e==null?void 0:e.title} (${e==null?void 0:e.photoCount} photos)`}),e.photos.map(i=>t.jsxs("div",{style:{marginBottom:20},children:[t.jsx("div",{style:{fontWeight:600,fontSize:"1rem"},children:`${i.seq}. ${i.title}`}),t.jsx("div",{style:{fontWeight:400},children:`fullURL: ${i.fullURL}`}),t.jsx("div",{style:{fontWeight:400},children:`originalURL: ${i.originalURL}`}),t.jsx("div",{style:{fontWeight:400},children:`thumbnailURL: ${i.thumbnailURL}`})]},i.seq))]})]})]})}function Y(){P("Get Flickr Info");const o=t.jsx(u.Fragment,{});return t.jsxs(u.Fragment,{children:[t.jsx(w,{title:"Get Flickr Photoset Info",extras:o}),t.jsx(q,{}),t.jsx(F,{}),t.jsx($,{feature:"flickrInfo"})]})}export{Y as default};
