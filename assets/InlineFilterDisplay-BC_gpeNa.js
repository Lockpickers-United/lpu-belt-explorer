import{r as l,F as A,j as t,a0 as N,aw as V,R as E,ax as k,u as M,a5 as T,a6 as $,L as U,a2 as K}from"./index-CE4ZCYQr.js";import{F as P}from"./FieldValue-aSiMdFhp.js";import{f as v,C as q}from"./FilterAlt-DEGjDKMh.js";import{C as H}from"./Chip-i0UpIJN1.js";import{D as J}from"./DataContext-kX_YzVkQ.js";import{F as Q,I as X,S as Y}from"./Select-B859B-Hn.js";function Z(){const{filters:r,filterCount:i,removeFilter:h,filterFieldsByFieldName:f}=l.useContext(A),C=l.useCallback((n,e)=>()=>{h(n,e)},[h]),c=l.useMemo(()=>{const{search:n,id:e,tab:d,name:p,sort:u,image:s,...y}=r;return Object.keys(y).map(m=>{const o=r[m];return Array.isArray(o)?o.map(b=>({key:m,value:b})):{key:m,value:o}}).flat()},[r]),x=l.useCallback((n,e)=>n==="Belt"?e==="Unranked"?e:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":n==="UL Group"?"Group "+e:n==="Wheels"?`${e} Wheels`:v[e]?v[e]:e,[]);return i===0?null:t.jsx(P,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(N,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:c.map(({key:n,value:e},d)=>{var s;const p=e.startsWith("!")?"#642c2c":"inherit",u=x((s=f[n])==null?void 0:s.label,e).replace("!","NOT ").replace("||"," OR ").replace("&&"," AND ");return t.jsx(H,{label:u,variant:"outlined",style:{marginRight:4,marginBottom:4,backgroundColor:p},onDelete:C(n,e)},d)})})})}function se({profile:r={},collectionType:i,advancedEnabled:h}){var L,S,B;const{userId:f}=V(),{filters:C,filterCount:c,addFilter:x,setShowAdvancedSearch:n,showAdvancedSearch:e}=l.useContext(A),{beltEntries:d=[]}=l.useContext(J),[p,u]=E.useState(!1),s=((L=k[i])==null?void 0:L.labels)||[],y=((S=k[i])==null?void 0:S.keyByLabel)||[],m=((B=k[i])==null?void 0:B.getCollected(r))||[],{isMobile:o}=M(),b=o?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:g=f&&c===0?"Any":null}=C,F=s.includes(g)&&c<2;let j="";g&&(typeof g=="string"?j=g:j="Any");const R=l.useCallback(()=>u(!1),[]),w=l.useCallback(()=>u(!0),[]),D=l.useCallback(a=>{x("collection",a.target.value,!0)},[x]),z=l.useCallback(()=>{n(!e)},[n,e]);if(!c&&!f)return null;const I=o?8:16,O={color:"#ddd",textDecoration:"underline",cursor:"pointer","&:hover":{color:"#fff",fontSize:"0.9rem"}};return t.jsx(T,{style:b,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs($,{style:{paddingTop:0,paddingLeft:I},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[t.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:"Current Filters"}),d.length>1&&t.jsxs("div",{style:{fontWeight:400,fontSize:"1.0rem",marginLeft:8},children:["(",d.length," Locks)"]}),h&&t.jsx("div",{style:{flexGrow:1,textAlign:"right",fontSize:"0.9rem"},children:t.jsx(U,{onClick:z,sx:O,children:"Advanced"})})]}),F&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(Q,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(X,{id:"label",children:"Collection"}),t.jsx(Y,{name:"collection-selector",label:"Collection",open:p,onClose:R,onOpen:w,value:j,onChange:D,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:s.map((a,G)=>{var W;return t.jsxs(K,{value:a,children:[a," (",a==="Any"?m.length:((W=r[y[a]])==null?void 0:W.length)||0,")"]},G)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(q,{})})]}),!F&&t.jsx(Z,{})]})})}export{se as I};
