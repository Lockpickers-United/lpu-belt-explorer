import{r as t,F as L,j as e,J as B,B as F,D as $,Z as O,u as W,R as D,ab as q,ac as w,an as R,A as G,X as J,bq as K,U as N,aj as A,Y as P}from"./index-c4914b37.js";import{L as X}from"./Link-61df66a6.js";import{B as M,d as Z}from"./Sort-354bab09.js";import{d as Q,F as ee,C as te}from"./FilterAlt-b4574b29.js";import{L as se}from"./LockListContext-a5ba590c.js";import{T as oe,a as S}from"./ToggleButtonGroup-6ceaf2a2.js";import{B as z}from"./Box-44f75f00.js";import{d as le}from"./Cancel-f641d353.js";function ne({text:x}){const{filters:m,addFilter:b,removeFilter:i}=t.useContext(L),{expandAll:a}=m,p=t.useCallback(()=>{!a||a==="false"?b("expandAll","Expand All",!0):i("expandAll","Expand All")},[a,b,i]),n=a?"Collapse All":"Expand All";return x?e.jsx("div",{children:e.jsx(B,{title:n,arrow:!0,disableFocusListener:!0,children:e.jsx(X,{onClick:()=>p(),style:{color:"#fff",textDecoration:"none",cursor:"pointer"},size:"small",children:e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:n.toUpperCase()})})})}):e.jsx("div",{children:e.jsx(B,{title:n,arrow:!0,disableFocusListener:!0,children:e.jsx(F,{onClick:()=>p(),style:{color:"#aaa"},size:"small",children:n})})})}function re({sortValues:x,compactMode:m,expandAll:b}){const[i,a]=t.useState(null),p=!!i,n=t.useCallback(l=>a(l.currentTarget),[]),C=t.useCallback(()=>a(null),[]),{filters:f,addFilter:u}=t.useContext(L),{sort:h}=f,{adminRole:k}=t.useContext($),{compact:o,setCompact:s}=t.useContext(O),r=t.useCallback(l=>()=>{C(),s(l)},[C,s]),j=t.useCallback(l=>()=>{C(),setTimeout(()=>u("sort",l,!0),0)},[u,C]),c={vertical:"top",horizontal:"right"},{width:g}=W(),v=g<=500;return e.jsxs(D.Fragment,{children:[e.jsx(B,{title:"View Options",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:n,style:{color:"#ddd"},children:e.jsx(M,{variant:"dot",color:"secondary",invisible:!h,anchorOrigin:c,children:v?e.jsx(Z,{}):"VIEW"})})}),e.jsxs(q,{anchorEl:i,open:p,onClose:C,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),x.map(({label:l,value:y})=>e.jsx(w,{onClick:j(y),selected:h===y,children:l},l)),m&&e.jsxs("div",{children:[e.jsx(R,{}),e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(w,{onClick:r(!1),selected:!o,children:"Normal"}),e.jsx(w,{onClick:r(!0),selected:o,children:"Compact"})]}),k&&b&&e.jsxs("div",{children:[e.jsx(R,{}),e.jsx(ne,{text:!0})]})]})]})}function ie({onFiltersChanged:x}){const{isLoggedIn:m}=t.useContext(G),{beta:b}=t.useContext(O),{filters:i,filterCount:a,addFilters:p,addFilter:n,filterFields:C,removeFilters:f}=t.useContext(L),{tab:u}=t.useContext(se),{belt:h}=i,k=/\/locks/.test(location.hash),o=t.useMemo(()=>u||h||"White",[h,u]),s=t.useMemo(()=>o!=="search"?"belt":"all",[o]),[r,j]=t.useState(o);o!==r&&o!=="search"?j(o):s==="belt"&&o==="search"&&j("search");const[c,g]=t.useState(!1),v=t.useCallback(()=>g(!c),[c]);J("f",v);const l=t.useCallback(d=>()=>{d==="all"?n("tab","search",!0):d==="belt"&&(f(["belt"]),n("tab",r,!0))},[n,r,f]),y=t.useCallback((d,E)=>{p([{key:d,value:E},{key:"id",value:void 0},{key:"name",value:void 0}],!0),x&&x()},[p,x]),I=t.useCallback(()=>g(!0),[]),T=t.useCallback(()=>g(!1),[]),{color:V,lineColor:_="#999"}=A[r]?A[r]:{color:"#inherit"},H=s==="belt"?1:.7,{width:U}=W(),Y=U<=500;return e.jsxs(D.Fragment,{children:[e.jsx(B,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:I,style:{color:"#ddd"},children:e.jsx(M,{variant:"dot",badgeContent:a,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"right"},children:Y?e.jsx(Q,{}):"FILTER"})})}),c&&e.jsxs(K,{anchor:"right",open:c,onClose:T,children:[e.jsx(N,{variant:"dense",onClick:T,style:{padding:"8px 0px 0px 8px"},children:e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:700},children:"Filters"})}),A[r]&&k&&e.jsx("div",{style:{marginLeft:8,marginBottom:8},children:e.jsxs(oe,{variant:"outlined",children:[e.jsxs(S,{onClick:l("belt"),style:{color:s==="belt"?"#eee":"#777",backgroundColor:s==="belt"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"belt",disabled:s==="belt",children:[e.jsx("div",{style:{backgroundColor:V,height:16,width:16,borderColor:_,borderRadius:8,border:"1px solid",marginRight:8,opacity:H}}),r," BELT"]},"belt"),e.jsx(S,{onClick:l("all"),style:{color:s==="all"?"#eee":"#777",backgroundColor:s==="all"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"all",disabled:s==="all",children:"ALL LOCKS"},"all")]})}),e.jsx(z,{margin:1,children:e.jsx(P,{direction:"column",style:{minWidth:250},children:C.filter(d=>(!d.beta||b)&&(!d.userBased||m)).filter(d=>!(s==="belt"&&u!=="search"&&d.label==="Belt")).map((d,E)=>e.jsx(ee,{tab:u,...d,onFilter:y},E))})}),e.jsxs("div",{style:{padding:8},children:[e.jsx(te,{forceText:!0}),e.jsx(F,{variant:"outlined",color:"inherit",onClick:T,children:"Done"})]})]})]})}function be({sortValues:x,extraFilters:m=[],compactMode:b,resetAll:i=!1,expandAll:a=!1,style:p}){const{filters:n,filterCount:C,setFilters:f,isFiltered:u}=t.useContext(L),{tab:h,sort:k,search:o}=n,s=k||C>0||u&&i,r=t.useCallback(()=>{f(i?{tab:h}:{tab:h,search:o})},[i,o,f,h]),{width:j}=W(),c=j<=500,g=c?3:0,v=c?2:0,l=c?40:60;return e.jsxs(z,{style:{display:"flex",paddingTop:g,marginBottom:v,marginLeft:0,justifyContent:"center",...p},sx:{".MuiBadge-anchorOriginTopRightRectangular":{marginTop:"5px"},".MuiButton-root":{minWidth:l}},children:[e.jsx(re,{sortValues:x,compactMode:b,expandAll:a}),e.jsx(ie,{extraFilters:m}),s&&e.jsx(F,{color:"inherit",style:{color:"#bbb"},onClick:r,children:c?e.jsx(le,{}):"RESET"})]})}export{ne as E,be as V};
