import{r as g,d as y,j as e,aj as j,u as L,b as B,ak as N}from"./index-4172e51f.js";import{L as M}from"./LoadingDisplay-ba08e313.js";import{u as W}from"./useData-a1468d4f.js";import{u as R}from"./usePageTitle-db25cc83.js";import{C as z,a as I,b as q,c as U,d as H,e as P,T as O}from"./TopLocks-99f51f30.js";import{e as Y}from"./dataUrls-18fefcdc.js";import{A as E}from"./AdminStatsTable-07ff63d2.js";import{B as F}from"./nivo-bar.es-13d8e9e6.js";import{p as $}from"./adminChartDefaults-e02caa29.js";import{A as G}from"./AdminStatsTableSort-9864a015.js";import{L as J}from"./Link-fec9eec6.js";import"./LPU-c3fa7122.js";import"./LinearProgress-fee51979.js";import"./useDocumentTitle-84dd455f.js";import"./nivo-line.es-3531d88b.js";import"./nivo-legends.es-7dce63ea.js";import"./index-fd192af4.js";import"./TableRow-0ae56e2f.js";const K=({data:t})=>{const r=g.useMemo(()=>{const{dailyAwardsTableData:l}=t,p=l.data.map(a=>a.date),c=y(p.reduce((a,n)=>n>a?n:a)),u=y("2024-10-25"),b=c.subtract(14,"day")>u?c.subtract(14,"day"):u;return{title:"",columns:l.columns,data:l.data.filter(a=>y(a.date).isAfter(b))}},[t]),m="100%",d=".83rem";return e.jsx("div",{style:{width:"100%"},children:e.jsx(E,{tableData:r,tableWidth:m,fontSize:d})})},Q=({data:t})=>{const{maxBeltCounts:r}=t,m=j.map(s=>s.rank>20?null:{id:s.name,label:s.makeModels[0].model,count:r[s.id]||0,value:r[s.id]||0}).filter(s=>s),{width:d}=L(),l=d<=360,p=d<=395,c=d<=428,u=d<=820,b=l?180:p?190:c?200:u?240:250,a={top:0,right:20,bottom:80,left:50},n=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#1a1a1a","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12","#baba12"],x=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000","#000"];return e.jsx("div",{style:{height:b,width:"100%"},children:e.jsx(F,{data:m,margin:a,padding:.15,colors:s=>n[s.index%n.length],labelTextColor:s=>x[s.index%x.length],animate:!0,enableLabel:!0,labelSkipHeight:1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,format:","},enableTotals:!0,axisBottom:{tickRotation:-45},enableGridY:!1,theme:$,isInteractive:!1})})},V=({data:t})=>{const{awardsDisplayNames:r}=t,m=B(),d=!0,[l,p]=g.useState("acquired"),[c,u]=g.useState(!0),b=Object.keys(r).filter(i=>i).map(i=>{const o=r[i].maxAward?r[i].maxAward:0;return{displayName:r[i].displayName||"no display name",acquired:r[i].acquired,maxAward:j[o].makeModels[0].model.replace(" Belt",""),beltName:j[o].name.replace(" Belt",""),userId:i}}).sort((i,o)=>{switch(l){case"acquired":return y(i[l]).valueOf()-y(o[l]).valueOf()||i.displayName.localeCompare(o.displayName);case"maxAward":return N(i.beltName,o.beltName);case"displayName":return i[l].localeCompare(o[l]);default:return i.displayName.localeCompare(o.displayName)}}),n=(c?b:b.reverse()).map((i,o)=>({...i,index:o+1})),x=g.useCallback((i,o)=>{const D=n.find(T=>T.displayName===o);return i==="displayName"?e.jsx(J,{onClick:()=>m(`/profile/${D.userId}/scorecard`),style:{color:"#fff"},children:o}):o},[m,n]),s={columns:[{name:"#",align:"center",id:"index"},{name:"Display Name",align:"left",id:"displayName"},{name:"Belt/Dan",align:"center",id:"maxAward"},{name:"Acquisition Date",align:"center",id:"acquired"}],data:n},{width:f}=L(),h=f<=360,w=f<=395,k=f<=428,S=f<=560,v=f<=820,C=h?".8rem":w?".85rem":".9rem",A="60%";return e.jsx(G,{tableData:s,tableWidth:A,fontSize:C,sortable:d,sort:l,setSort:p,ascending:c,setAscending:u,linkFunction:x})};function xe(){R("Collection Report");const{data:t,loading:r,error:m}=W({url:Y}),d=r?"--":"(updated: "+y(t.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${t.metadata.timezone})`,p=["listUsers","wishlistLocks","recordedLocks","scorecardLocks","pickedLocks","ownLocks"].reduce((x,s)=>{if(!t)return{};const f=t.dailyTableData.data.map(h=>({x:h.date,y:h[s]}));return x[s]={data:f,id:s},x},{}),{width:c}=L(),b=c<560?"8px 8px 32px 8px":"24px 24px 32px 24px",a={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},n={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"};return r?e.jsx(M,{}):m?null:e.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:b,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[e.jsxs("div",{style:n,children:["Collections Summary",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.85rem"},children:d})]}),e.jsx(z,{data:t}),e.jsx("div",{style:a,children:"Awards Summary"}),e.jsx(K,{data:t}),e.jsx("div",{style:a,children:"Import Users by Belt"}),e.jsx(Q,{data:t}),e.jsx("div",{style:a,children:"Import Users"}),e.jsx(V,{data:t}),e.jsx("div",{style:a,children:"List Users"}),e.jsx(I,{data:p}),e.jsx("div",{style:a,children:"List Locks by Date"}),e.jsx(q,{data:p}),e.jsx("div",{style:a,children:"Average Items Per List"}),e.jsx(U,{data:t}),e.jsx("div",{style:a,children:"List Saves by Belt Ranking"}),e.jsx(H,{data:t}),e.jsx("div",{style:a,children:"Last 14 Days"}),e.jsx(P,{data:t}),e.jsx("div",{style:a,children:"Top Locks"}),e.jsx(O,{data:t})]})}export{xe as default};
