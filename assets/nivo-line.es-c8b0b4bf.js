import{r as b,j as R}from"./index-c09e26fd.js";import{c as le,P as Rt,F as tt,Q as kt,S as Ct,U as ze,V as Tt,Y as nt,J as it,b as jt,E as ke,a0 as qt,a1 as Ot,a2 as Et,a3 as At,$ as rt,k as De,a4 as Pt,a5 as Bt,Z as Lt,B as ot,W as Pe,T as Wt,X as It,e as Ft,a6 as Ke,_ as $t,a as Gt,A as zt,D as Ze,p as Dt,a7 as st}from"./nivo-legends.es-9a06d38e.js";import{w as Oe,z as Vt,X as Yt,D as Je,j as Xt,d as Ht}from"./nivo-axes.es-32d13f50.js";import{P as a}from"./index-a4924b09.js";import{k as lt,u as Ut}from"./_createSet-9da7b940.js";import{x as Kt,y as Zt,m as at}from"./line-9dcb4b87.js";import{p as Jt}from"./path-a545ef0e.js";function Nt(){var t=Kt,e=null,n=le(0),r=Zt,i=le(!0),l=null,s=Rt,o=null;function u(c){var h,d,g,p=c.length,y,v=!1,S,M=new Array(p),_=new Array(p);for(l==null&&(o=s(S=Jt())),h=0;h<=p;++h){if(!(h<p&&i(y=c[h],h,c))===v)if(v=!v)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=d;--g)o.point(M[g],_[g]);o.lineEnd(),o.areaEnd()}v&&(M[h]=+t(y,h,c),_[h]=+n(y,h,c),o.point(e?+e(y,h,c):M[h],r?+r(y,h,c):_[h]))}if(S)return o=null,S+""||null}function f(){return at().defined(i).curve(s).context(l)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:le(+c),e=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:le(+c),u):t},u.x1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:le(+c),u):e},u.y=function(c){return arguments.length?(n=typeof c=="function"?c:le(+c),r=null,u):n},u.y0=function(c){return arguments.length?(n=typeof c=="function"?c:le(+c),u):n},u.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:le(+c),u):r},u.lineX0=u.lineY0=function(){return f().x(t).y(n)},u.lineY1=function(){return f().x(t).y(r)},u.lineX1=function(){return f().x(e).y(n)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:le(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,l!=null&&(o=s(l)),u):s},u.context=function(c){return arguments.length?(c==null?l=o=null:o=s(l=c),u):l},u}const Ne=Math.pow(2,-52),Ee=new Uint32Array(512);class Be{static from(e,n=rn,r=on){const i=e.length,l=new Float64Array(i*2);for(let s=0;s<i;s++){const o=e[s];l[2*s]=n(o),l[2*s+1]=r(o)}return new Be(l)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:l}=this,s=e.length>>1;let o=1/0,u=1/0,f=-1/0,c=-1/0;for(let m=0;m<s;m++){const x=e[2*m],C=e[2*m+1];x<o&&(o=x),C<u&&(u=C),x>f&&(f=x),C>c&&(c=C),this._ids[m]=m}const h=(o+f)/2,d=(u+c)/2;let g=1/0,p,y,v;for(let m=0;m<s;m++){const x=We(h,d,e[2*m],e[2*m+1]);x<g&&(p=m,g=x)}const S=e[2*p],M=e[2*p+1];g=1/0;for(let m=0;m<s;m++){if(m===p)continue;const x=We(S,M,e[2*m],e[2*m+1]);x<g&&x>0&&(y=m,g=x)}let _=e[2*y],E=e[2*y+1],z=1/0;for(let m=0;m<s;m++){if(m===p||m===y)continue;const x=tn(S,M,_,E,e[2*m],e[2*m+1]);x<z&&(v=m,z=x)}let F=e[2*v],H=e[2*v+1];if(z===1/0){for(let C=0;C<s;C++)this._dists[C]=e[2*C]-e[0]||e[2*C+1]-e[1];_e(this._ids,this._dists,0,s-1);const m=new Uint32Array(s);let x=0;for(let C=0,j=-1/0;C<s;C++){const B=this._ids[C];this._dists[B]>j&&(m[x++]=B,j=this._dists[B])}this.hull=m.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Ae(S,M,_,E,F,H)){const m=y,x=_,C=E;y=v,_=F,E=H,v=m,F=x,H=C}const q=nn(S,M,_,E,F,H);this._cx=q.x,this._cy=q.y;for(let m=0;m<s;m++)this._dists[m]=We(e[2*m],e[2*m+1],q.x,q.y);_e(this._ids,this._dists,0,s-1),this._hullStart=p;let T=3;r[p]=n[v]=y,r[y]=n[p]=v,r[v]=n[y]=p,i[p]=0,i[y]=1,i[v]=2,l.fill(-1),l[this._hashKey(S,M)]=p,l[this._hashKey(_,E)]=y,l[this._hashKey(F,H)]=v,this.trianglesLen=0,this._addTriangle(p,y,v,-1,-1,-1);for(let m=0,x,C;m<this._ids.length;m++){const j=this._ids[m],B=e[2*j],W=e[2*j+1];if(m>0&&Math.abs(B-x)<=Ne&&Math.abs(W-C)<=Ne||(x=B,C=W,j===p||j===y||j===v))continue;let $=0;for(let V=0,ee=this._hashKey(B,W);V<this._hashSize&&($=l[(ee+V)%this._hashSize],!($!==-1&&$!==r[$]));V++);$=n[$];let k=$,O;for(;O=r[k],!Ae(B,W,e[2*k],e[2*k+1],e[2*O],e[2*O+1]);)if(k=O,k===$){k=-1;break}if(k===-1)continue;let U=this._addTriangle(k,j,r[k],-1,-1,i[k]);i[j]=this._legalize(U+2),i[k]=U,T++;let D=r[k];for(;O=r[D],Ae(B,W,e[2*D],e[2*D+1],e[2*O],e[2*O+1]);)U=this._addTriangle(D,j,O,i[j],-1,i[D]),i[j]=this._legalize(U+2),r[D]=D,T--,D=O;if(k===$)for(;O=n[k],Ae(B,W,e[2*O],e[2*O+1],e[2*k],e[2*k+1]);)U=this._addTriangle(O,j,k,-1,i[k],i[O]),this._legalize(U+2),i[O]=U,r[k]=k,T--,k=O;this._hullStart=n[j]=k,r[k]=n[D]=j,r[j]=D,l[this._hashKey(B,W)]=j,l[this._hashKey(e[2*k],e[2*k+1])]=k}this.hull=new Uint32Array(T);for(let m=0,x=this._hullStart;m<T;m++)this.hull[m]=x,x=r[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Qt(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let l=0,s=0;for(;;){const o=r[e],u=e-e%3;if(s=u+(e+2)%3,o===-1){if(l===0)break;e=Ee[--l];continue}const f=o-o%3,c=u+(e+1)%3,h=f+(o+2)%3,d=n[s],g=n[e],p=n[c],y=n[h];if(en(i[2*d],i[2*d+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1],i[2*y],i[2*y+1])){n[e]=y,n[o]=d;const S=r[h];if(S===-1){let _=this._hullStart;do{if(this._hullTri[_]===h){this._hullTri[_]=e;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(e,S),this._link(o,r[s]),this._link(s,h);const M=f+(o+1)%3;l<Ee.length&&(Ee[l++]=M)}else{if(l===0)break;e=Ee[--l]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,l,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,l),this._link(o+2,s),this.trianglesLen+=3,o}}function Qt(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function We(t,e,n,r){const i=t-n,l=e-r;return i*i+l*l}function Ie(t,e,n,r,i,l){const s=(r-e)*(i-t),o=(n-t)*(l-e);return Math.abs(s-o)>=33306690738754716e-32*Math.abs(s+o)?s-o:0}function Ae(t,e,n,r,i,l){return(Ie(i,l,t,e,n,r)||Ie(t,e,n,r,i,l)||Ie(n,r,i,l,t,e))<0}function en(t,e,n,r,i,l,s,o){const u=t-s,f=e-o,c=n-s,h=r-o,d=i-s,g=l-o,p=u*u+f*f,y=c*c+h*h,v=d*d+g*g;return u*(h*v-y*g)-f*(c*v-y*d)+p*(c*g-h*d)<0}function tn(t,e,n,r,i,l){const s=n-t,o=r-e,u=i-t,f=l-e,c=s*s+o*o,h=u*u+f*f,d=.5/(s*f-o*u),g=(f*c-o*h)*d,p=(s*h-u*c)*d;return g*g+p*p}function nn(t,e,n,r,i,l){const s=n-t,o=r-e,u=i-t,f=l-e,c=s*s+o*o,h=u*u+f*f,d=.5/(s*f-o*u),g=t+(f*c-o*h)*d,p=e+(s*h-u*c)*d;return{x:g,y:p}}function _e(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const l=t[i],s=e[l];let o=i-1;for(;o>=n&&e[t[o]]>s;)t[o+1]=t[o--];t[o+1]=l}else{const i=n+r>>1;let l=n+1,s=r;Re(t,i,l),e[t[n]]>e[t[r]]&&Re(t,n,r),e[t[l]]>e[t[r]]&&Re(t,l,r),e[t[n]]>e[t[l]]&&Re(t,n,l);const o=t[l],u=e[o];for(;;){do l++;while(e[t[l]]<u);do s--;while(e[t[s]]>u);if(s<l)break;Re(t,l,s)}t[n+1]=t[s],t[s]=o,r-l+1>=s-n?(_e(t,e,l,r),_e(t,e,n,s-1)):(_e(t,e,n,s-1),_e(t,e,l,r))}}function Re(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function rn(t){return t[0]}function on(t){return t[1]}const Qe=1e-6;class ye{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,l=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${l}`:(Math.abs(this._x1-i)>Qe||Math.abs(this._y1-l)>Qe)&&(this._+="L"+i+","+l),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=l}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Fe{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class sn{constructor(e,[n,r,i,l]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((l=+l)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=l,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this,l=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,p=0,y=r.length,v,S;g<y;g+=3,p+=2){const M=r[g]*2,_=r[g+1]*2,E=r[g+2]*2,z=e[M],F=e[M+1],H=e[_],q=e[_+1],T=e[E],m=e[E+1],x=H-z,C=q-F,j=T-z,B=m-F,W=x*x+C*C,$=j*j+B*B,k=(x*B-C*j)*2;if(!k)v=(z+T)/2-1e8*B,S=(F+m)/2+1e8*j;else if(Math.abs(k)<1e-8)v=(z+T)/2,S=(F+m)/2;else{const O=1/k;v=z+(B*W-C*$)*O,S=F+(x*$-j*W)*O}l[p]=v,l[p+1]=S}let s=n[n.length-1],o,u=s*4,f,c=e[2*s],h,d=e[2*s+1];i.fill(0);for(let g=0;g<n.length;++g)s=n[g],o=u,f=c,h=d,u=s*4,c=e[2*s],d=e[2*s+1],i[o+2]=i[u]=h-d,i[o+3]=i[u+1]=c-f}render(e){const n=e==null?e=new ye:void 0,{delaunay:{halfedges:r,inedges:i,hull:l},circumcenters:s,vectors:o}=this;if(l.length<=1)return null;for(let c=0,h=r.length;c<h;++c){const d=r[c];if(d<c)continue;const g=Math.floor(c/3)*2,p=Math.floor(d/3)*2,y=s[g],v=s[g+1],S=s[p],M=s[p+1];this._renderSegment(y,v,S,M,e)}let u,f=l[l.length-1];for(let c=0;c<l.length;++c){u=f,f=l[c];const h=Math.floor(i[f]/3)*2,d=s[h],g=s[h+1],p=u*4,y=this._project(d,g,o[p+2],o[p+3]);y&&this._renderSegment(d,g,y[0],y[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new ye:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new ye:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let l=i.length;for(;i[0]===i[l-2]&&i[1]===i[l-1]&&l>1;)l-=2;for(let s=2;s<l;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new Fe;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,l){let s;const o=this._regioncode(e,n),u=this._regioncode(r,i);o===0&&u===0?(l.moveTo(e,n),l.lineTo(r,i)):(s=this._clipSegment(e,n,r,i,o,u))&&(l.moveTo(s[0],s[1]),l.lineTo(s[2],s[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let l=0,s=n.length;l<s;l+=2)for(let o=0,u=i.length;o<u;o+=2)if(n[l]==i[o]&&n[l+1]==i[o+1]&&n[(l+2)%s]==i[(o+u-2)%u]&&n[(l+3)%s]==i[(o+u-1)%u]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:l}}=this,s=r[e];if(s===-1)return null;const o=[];let u=s;do{const f=Math.floor(u/3);if(o.push(n[f*2],n[f*2+1]),u=u%3===2?u-2:u+1,l[u]!==e)break;u=i[u]}while(u!==s&&u!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n)}_clipFinite(e,n){const r=n.length;let i=null,l,s,o=n[r-2],u=n[r-1],f,c=this._regioncode(o,u),h,d;for(let g=0;g<r;g+=2)if(l=o,s=u,o=n[g],u=n[g+1],f=c,c=this._regioncode(o,u),f===0&&c===0)h=d,d=0,i?i.push(o,u):i=[o,u];else{let p,y,v,S,M;if(f===0){if((p=this._clipSegment(l,s,o,u,f,c))===null)continue;[y,v,S,M]=p}else{if((p=this._clipSegment(o,u,l,s,c,f))===null)continue;[S,M,y,v]=p,h=d,d=this._edgecode(y,v),h&&d&&this._edge(e,h,d,i,i.length),i?i.push(y,v):i=[y,v]}h=d,d=this._edgecode(S,M),h&&d&&this._edge(e,h,d,i,i.length),i?i.push(S,M):i=[S,M]}if(i)h=d,d=this._edgecode(i[0],i[1]),h&&d&&this._edge(e,h,d,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,l,s){for(;;){if(l===0&&s===0)return[e,n,r,i];if(l&s)return null;let o,u,f=l||s;f&8?(o=e+(r-e)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(o=e+(r-e)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-e)/(r-e),o=this.xmax):(u=n+(i-n)*(this.xmin-e)/(r-e),o=this.xmin),l?(e=o,n=u,l=this._regioncode(e,n)):(r=o,i=u,s=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,l,s){let o=Array.from(n),u;if((u=this._project(o[0],o[1],r,i))&&o.unshift(u[0],u[1]),(u=this._project(o[o.length-2],o[o.length-1],l,s))&&o.push(u[0],u[1]),o=this._clipFinite(e,o))for(let f=0,c=o.length,h,d=this._edgecode(o[c-2],o[c-1]);f<c;f+=2)h=d,d=this._edgecode(o[f],o[f+1]),h&&d&&(f=this._edge(e,h,d,o,f),c=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,n,r,i,l){for(;n!==r;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(i[l]!==s||i[l+1]!==o)&&this.contains(e,s,o)&&(i.splice(l,0,s,o),l+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const o=(s+2)%i.length,u=(s+4)%i.length;(i[s]===i[o]&&i[o]===i[u]||i[s+1]===i[o+1]&&i[o+1]===i[u+1])&&(i.splice(o,2),s-=2)}return l}_project(e,n,r,i){let l=1/0,s,o,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<l&&(u=this.ymin,o=e+(l=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<l&&(u=this.ymax,o=e+(l=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<l&&(o=this.xmax,u=n+(l=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<l&&(o=this.xmin,u=n+(l=s)*i)}return[o,u]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const ln=2*Math.PI,ve=Math.pow;function an(t){return t[0]}function un(t){return t[1]}function cn(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],l=2*e[r+1],s=2*e[r+2];if((n[s]-n[i])*(n[l+1]-n[i+1])-(n[l]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function hn(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Ve{static from(e,n=an,r=un,i){return new Ve("length"in e?fn(e,n,r,i):Float64Array.from(dn(e,n,r,i)))}constructor(e){this._delaunator=new Be(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&cn(e)){this.collinear=Int32Array.from({length:n.length/2},(d,g)=>g).sort((d,g)=>n[2*d]-n[2*g]||n[2*d+1]-n[2*g+1]);const u=this.collinear[0],f=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,g=n.length/2;d<g;++d){const p=hn(n[2*d],n[2*d+1],h);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Be(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let u=0,f=r.length;u<f;++u){const c=l[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,f=i.length;u<f;++u)o[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,i.length===2&&(s[i[1]]=0))}voronoi(e){return new sn(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:l,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(e);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const u=n[e];if(u===-1)return;let f=u,c=-1;do{if(yield c=s[f],f=f%3===2?f-2:f+1,s[f]!==e)return;if(f=l[f],f===-1){const h=r[(i[e]+1)%r.length];h!==c&&(yield h);return}}while(f!==u)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let l;for(;(l=this._step(r,e,n))>=0&&l!==r&&l!==i;)r=l;return l}_step(e,n,r){const{inedges:i,hull:l,_hullIndex:s,halfedges:o,triangles:u,points:f}=this;if(i[e]===-1||!f.length)return(e+1)%(f.length>>1);let c=e,h=ve(n-f[e*2],2)+ve(r-f[e*2+1],2);const d=i[e];let g=d;do{let p=u[g];const y=ve(n-f[p*2],2)+ve(r-f[p*2+1],2);if(y<h&&(h=y,c=p),g=g%3===2?g-2:g+1,u[g]!==e)break;if(g=o[g],g===-1){if(g=l[(s[e]+1)%l.length],g!==p&&ve(n-f[g*2],2)+ve(r-f[g*2+1],2)<h)return g;break}}while(g!==d);return c}render(e){const n=e==null?e=new ye:void 0,{points:r,halfedges:i,triangles:l}=this;for(let s=0,o=i.length;s<o;++s){const u=i[s];if(u<s)continue;const f=l[s]*2,c=l[u]*2;e.moveTo(r[f],r[f+1]),e.lineTo(r[c],r[c+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n=2){const r=e==null?e=new ye:void 0,{points:i}=this;for(let l=0,s=i.length;l<s;l+=2){const o=i[l],u=i[l+1];e.moveTo(o+n,u),e.arc(o,u,n,0,ln)}return r&&r.value()}renderHull(e){const n=e==null?e=new ye:void 0,{hull:r,points:i}=this,l=r[0]*2,s=r.length;e.moveTo(i[l],i[l+1]);for(let o=1;o<s;++o){const u=2*r[o];e.lineTo(i[u],i[u+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new Fe;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new ye:void 0,{points:i,triangles:l}=this,s=l[e*=3]*2,o=l[e+1]*2,u=l[e+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new Fe;return this.renderTriangle(e,n),n.value()}}function fn(t,e,n,r){const i=t.length,l=new Float64Array(i*2);for(let s=0;s<i;++s){const o=t[s];l[s*2]=e.call(r,o,s,t),l[s*2+1]=n.call(r,o,s,t)}return l}function*dn(t,e,n,r){let i=0;for(const l of t)yield e.call(r,l,i,t),yield n.call(r,l,i,t),++i}var et=function(t){return typeof t=="function"?t:function(e){return e[t]}},gn=function(t){var e=t.points,n=t.x,r=n===void 0?"x":n,i=t.y,l=i===void 0?"y":i,s=et(r),o=et(l);return e.map(function(u){return[s(u),o(u)]})},pn=function(t){var e=t.points,n=t.width,r=t.height,i=t.debug,l=Ve.from(e),s=i?l.voronoi([0,0,n,r]):void 0;return{delaunay:l,voronoi:s}},ut=function(t){var e=t.points,n=t.x,r=t.y,i=t.width,l=t.height,s=t.debug,o=b.useMemo(function(){return gn({points:e,x:n,y:r})},[e,n,r]);return b.useMemo(function(){return pn({points:o,width:i,height:l,debug:s})},[o,i,l,s])},mn=function(t){var e=t.nodes,n=t.width,r=t.height,i=t.x,l=t.y,s=t.onMouseEnter,o=t.onMouseMove,u=t.onMouseLeave,f=t.onClick,c=t.debug,h=b.useRef(null),d=b.useState(null),g=d[0],p=d[1],y=ut({points:e,x:i,y:l,width:n,height:r,debug:c}),v=y.delaunay,S=y.voronoi,M=b.useMemo(function(){if(c&&S)return S.render()},[c,S]),_=b.useCallback(function(q){if(!h.current)return[null,null];var T=tt(h.current,q),m=T[0],x=T[1],C=v.find(m,x);return[C,C!==void 0?e[C]:null]},[h,v]),E=b.useCallback(function(q){var T=_(q),m=T[0],x=T[1];p(m),x&&(s==null||s(x,q))},[_,p,s]),z=b.useCallback(function(q){var T=_(q),m=T[0],x=T[1];p(m),x&&(o==null||o(x,q))},[_,p,o]),F=b.useCallback(function(q){if(p(null),u){var T=void 0;g!==null&&(T=e[g]),T&&u(T,q)}},[p,g,u,e]),H=b.useCallback(function(q){var T=_(q),m=T[0],x=T[1];p(m),x&&(f==null||f(x,q))},[_,p,f]);return R.jsxs("g",{ref:h,children:[c&&S&&R.jsxs(R.Fragment,{children:[R.jsx("path",{d:M,stroke:"red",strokeWidth:1,opacity:.75}),g!==null&&R.jsx("path",{fill:"pink",opacity:.35,d:S.renderCell(g)})]}),R.jsx("rect",{width:n,height:r,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:E,onMouseMove:z,onMouseLeave:F,onClick:H})]})},yn=function(t,e){t.save(),t.globalAlpha=.75,t.beginPath(),e.render(t),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.restore()},bn=function(t,e,n){t.save(),t.globalAlpha=.35,t.beginPath(),e.renderCell(n,t),t.fillStyle="red",t.fill(),t.restore()};function X(){return X=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X.apply(this,arguments)}var ct=function(t){var e=t.point;return R.jsx(jt,{id:R.jsxs("span",{children:["x: ",R.jsx("strong",{children:e.data.xFormatted}),", y:"," ",R.jsx("strong",{children:e.data.yFormatted})]}),enableChip:!0,color:e.serieColor})};ct.propTypes={point:a.object.isRequired};var xn=b.memo(ct),ht=function(t){var e=t.slice,n=t.axis,r=ke(),i=n==="x"?"y":"x";return R.jsx(qt,{rows:e.points.map(function(l){return[R.jsx(Ot,{color:l.serieColor,style:r.tooltip.chip},"chip"),l.serieId,R.jsx("span",{style:r.tooltip.tableCellValue,children:l.data[i+"Formatted"]},"value")]})})};ht.propTypes={slice:a.object.isRequired,axis:a.oneOf(["x","y"]).isRequired};var vn=b.memo(ht),ft={data:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,data:a.arrayOf(a.shape({x:a.oneOfType([a.number,a.string,a.instanceOf(Date)]),y:a.oneOfType([a.number,a.string,a.instanceOf(Date)])})).isRequired})).isRequired,xScale:a.object.isRequired,xFormat:a.oneOfType([a.func,a.string]),yScale:a.object.isRequired,yFormat:a.oneOfType([a.func,a.string]),layers:a.arrayOf(a.oneOfType([a.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),a.func])).isRequired,curve:kt.isRequired,axisTop:Oe,axisRight:Oe,axisBottom:Oe,axisLeft:Oe,enableGridX:a.bool.isRequired,enableGridY:a.bool.isRequired,gridXValues:a.oneOfType([a.number,a.arrayOf(a.oneOfType([a.number,a.string,a.instanceOf(Date)]))]),gridYValues:a.oneOfType([a.number,a.arrayOf(a.oneOfType([a.number,a.string,a.instanceOf(Date)]))]),enablePoints:a.bool.isRequired,pointSymbol:a.func,pointSize:a.number.isRequired,pointColor:a.any.isRequired,pointBorderWidth:a.number.isRequired,pointBorderColor:a.any.isRequired,enablePointLabel:a.bool.isRequired,pointLabel:a.oneOfType([a.string,a.func]).isRequired,markers:a.arrayOf(a.shape({axis:a.oneOf(["x","y"]).isRequired,value:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,style:a.object})),colors:Ct.isRequired,enableArea:a.bool.isRequired,areaOpacity:a.number.isRequired,areaBlendMode:ze.isRequired,areaBaselineValue:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,lineWidth:a.number.isRequired,legends:a.arrayOf(a.shape(Tt)).isRequired,isInteractive:a.bool.isRequired,debugMesh:a.bool.isRequired,tooltip:a.oneOfType([a.func,a.object]).isRequired,enableSlices:a.oneOf(["x","y",!1]).isRequired,debugSlices:a.bool.isRequired,sliceTooltip:a.oneOfType([a.func,a.object]).isRequired,enableCrosshair:a.bool.isRequired,crosshairType:a.string.isRequired},_n=X({},ft,{enablePointLabel:a.bool.isRequired,role:a.string.isRequired,useMesh:a.bool.isRequired},Et,At),wn=X({pixelRatio:a.number.isRequired},ft),dt={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:xn,enableSlices:!1,debugSlices:!1,sliceTooltip:vn,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},ae=X({},dt,{enablePointLabel:!1,useMesh:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),Mn=X({},dt,{pixelRatio:typeof window<"u"&&window.devicePixelRatio||1}),Sn=function(t){var e=t.curve;return b.useMemo(function(){return at().defined(function(n){return n.x!==null&&n.y!==null}).x(function(n){return n.x}).y(function(n){return n.y}).curve(st(e))},[e])},Rn=function(t){var e=t.curve,n=t.yScale,r=t.areaBaselineValue;return b.useMemo(function(){return Nt().defined(function(i){return i.x!==null&&i.y!==null}).x(function(i){return i.x}).y1(function(i){return i.y}).curve(st(e)).y0(n(r))},[e,n,r])},kn=function(t){var e=t.enableSlices,n=t.points,r=t.width,i=t.height;return b.useMemo(function(){if(e===!1)return[];if(e==="x"){var l=new Map;return n.forEach(function(o){o.data.x!==null&&o.data.y!==null&&(l.has(o.x)?l.get(o.x).push(o):l.set(o.x,[o]))}),Array.from(l.entries()).sort(function(o,u){return o[0]-u[0]}).map(function(o,u,f){var c,h=o[0],d=o[1],g=f[u-1],p=f[u+1];return{id:h,x0:c=g?h-(h-g[0])/2:h,x:h,y0:0,y:0,width:p?h-c+(p[0]-h)/2:r-c,height:i,points:d.reverse()}})}if(e==="y"){var s=new Map;return n.forEach(function(o){o.data.x!==null&&o.data.y!==null&&(s.has(o.y)?s.get(o.y).push(o):s.set(o.y,[o]))}),Array.from(s.entries()).sort(function(o,u){return o[0]-u[0]}).map(function(o,u,f){var c,h,d=o[0],g=o[1],p=f[u-1],y=f[u+1];return c=p?d-(d-p[0])/2:d,h=y?d-c+(y[0]-d)/2:i-c,{id:d,x0:0,x:0,y0:c,y:d,width:r,height:h,points:g.reverse()}})}},[e,n])},gt=function(t){var e=t.data,n=t.xScale,r=n===void 0?ae.xScale:n,i=t.xFormat,l=t.yScale,s=l===void 0?ae.yScale:l,o=t.yFormat,u=t.width,f=t.height,c=t.colors,h=c===void 0?ae.colors:c,d=t.curve,g=d===void 0?ae.curve:d,p=t.areaBaselineValue,y=p===void 0?ae.areaBaselineValue:p,v=t.pointColor,S=v===void 0?ae.pointColor:v,M=t.pointBorderColor,_=M===void 0?ae.pointBorderColor:M,E=t.enableSlices,z=E===void 0?ae.enableSlicesTooltip:E,F=Ze(i),H=Ze(o),q=Dt(h,"id"),T=ke(),m=Pe(S,T),x=Pe(_,T),C=b.useState([]),j=C[0],B=C[1],W=b.useMemo(function(){return Ht(e.filter(function(A){return j.indexOf(A.id)===-1}),r,s,u,f)},[e,j,r,s,u,f]),$=W.xScale,k=W.yScale,O=W.series,U=b.useMemo(function(){var A=e.map(function(L){return{id:L.id,label:L.id,color:q(L)}}),G=A.map(function(L){return X({},O.find(function(Y){return Y.id===L.id}),{color:L.color})}).filter(function(L){return!!L.id});return{legendData:A.map(function(L){return X({},L,{hidden:!G.find(function(Y){return Y.id===L.id})})}).reverse(),series:G}},[e,O,q]),D=U.legendData,V=U.series,ee=b.useCallback(function(A){B(function(G){return G.indexOf(A)>-1?G.filter(function(L){return L!==A}):[].concat(G,[A])})},[]),re=function(A){var G=A.series,L=A.getPointColor,Y=A.getPointBorderColor,he=A.formatX,K=A.formatY;return b.useMemo(function(){return G.reduce(function(oe,N){return[].concat(oe,N.data.filter(function(Z){return Z.position.x!==null&&Z.position.y!==null}).map(function(Z,ue){var ne={id:N.id+"."+ue,index:oe.length+ue,serieId:N.id,serieColor:N.color,x:Z.position.x,y:Z.position.y};return ne.color=L(N),ne.borderColor=Y(ne),ne.data=X({},Z.data,{xFormatted:he(Z.data.x),yFormatted:K(Z.data.y)}),ne}))},[])},[G,L,Y,he,K])}({series:V,getPointColor:m,getPointBorderColor:x,formatX:F,formatY:H}),te=kn({enableSlices:z,points:re,width:u,height:f});return{legendData:D,toggleSerie:ee,lineGenerator:Sn({curve:g}),areaGenerator:Rn({curve:g,yScale:k,areaBaselineValue:y}),getColor:q,series:V,xScale:$,yScale:k,slices:te,points:re}},pt=function(t){var e=t.areaBlendMode,n=t.areaOpacity,r=t.color,i=t.fill,l=t.path,s=Lt(),o=s.animate,u=s.config,f=rt(l),c=Ut({color:r,config:u,immediate:!o});return R.jsx(lt.path,{d:f,fill:i||c.color,fillOpacity:n,strokeWidth:0,style:{mixBlendMode:e}})};pt.propTypes={areaBlendMode:ze.isRequired,areaOpacity:a.number.isRequired,color:a.string,fill:a.string,path:a.string.isRequired};var mt=function(t){var e=t.areaGenerator,n=t.areaOpacity,r=t.areaBlendMode,i=t.lines.slice(0).reverse();return R.jsx("g",{children:i.map(function(l){return R.jsx(pt,X({path:e(l.data.map(function(s){return s.position}))},X({areaOpacity:n,areaBlendMode:r},l)),l.id)})})};mt.propTypes={areaGenerator:a.func.isRequired,areaOpacity:a.number.isRequired,areaBlendMode:ze.isRequired,lines:a.arrayOf(a.object).isRequired};var Cn=b.memo(mt),yt=function(t){var e=t.lineGenerator,n=t.points,r=t.color,i=t.thickness,l=b.useMemo(function(){return e(n)},[e,n]),s=rt(l);return R.jsx(lt.path,{d:s,fill:"none",strokeWidth:i,stroke:r})};yt.propTypes={points:a.arrayOf(a.shape({x:a.oneOfType([a.string,a.number]),y:a.oneOfType([a.string,a.number])})),lineGenerator:a.func.isRequired,color:a.string.isRequired,thickness:a.number.isRequired};var Tn=b.memo(yt),bt=function(t){var e=t.lines,n=t.lineGenerator,r=t.lineWidth;return e.slice(0).reverse().map(function(i){var l=i.id,s=i.data,o=i.color;return R.jsx(Tn,{id:l,points:s.map(function(u){return u.position}),lineGenerator:n,color:o,thickness:r},l)})};bt.propTypes={lines:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,color:a.string.isRequired,data:a.arrayOf(a.shape({data:a.shape({x:a.oneOfType([a.string,a.number,a.instanceOf(Date)]),y:a.oneOfType([a.string,a.number,a.instanceOf(Date)])}).isRequired,position:a.shape({x:a.number,y:a.number}).isRequired})).isRequired})).isRequired,lineWidth:a.number.isRequired,lineGenerator:a.func.isRequired};var jn=b.memo(bt),xt=function(t){var e=t.slice,n=t.axis,r=t.debug,i=t.tooltip,l=t.isCurrent,s=t.setCurrent,o=t.onMouseEnter,u=t.onMouseMove,f=t.onMouseLeave,c=t.onClick,h=De(),d=h.showTooltipFromEvent,g=h.hideTooltip,p=b.useCallback(function(M){d(b.createElement(i,{slice:e,axis:n}),M,"right"),s(e),o&&o(e,M)},[d,i,e,o]),y=b.useCallback(function(M){d(b.createElement(i,{slice:e,axis:n}),M,"right"),u&&u(e,M)},[d,i,e,u]),v=b.useCallback(function(M){g(),s(null),f&&f(e,M)},[g,e,f]),S=b.useCallback(function(M){c&&c(e,M)},[e,c]);return R.jsx("rect",{x:e.x0,y:e.y0,width:e.width,height:e.height,stroke:"red",strokeWidth:r?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&r?.35:0,onMouseEnter:p,onMouseMove:y,onMouseLeave:v,onClick:S,"data-testid":"slice-"+e.id})};xt.propTypes={slice:a.object.isRequired,axis:a.oneOf(["x","y"]).isRequired,debug:a.bool.isRequired,height:a.number.isRequired,tooltip:a.oneOfType([a.func,a.object]),isCurrent:a.bool.isRequired,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func};var qn=b.memo(xt),vt=function(t){var e=t.slices,n=t.axis,r=t.debug,i=t.height,l=t.tooltip,s=t.current,o=t.setCurrent,u=t.onMouseEnter,f=t.onMouseMove,c=t.onMouseLeave,h=t.onClick;return e.map(function(d){return R.jsx(qn,{slice:d,axis:n,debug:r,height:i,tooltip:l,setCurrent:o,isCurrent:s!==null&&s.id===d.id,onMouseEnter:u,onMouseMove:f,onMouseLeave:c,onClick:h},d.id)})};vt.propTypes={slices:a.arrayOf(a.shape({id:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,x:a.number.isRequired,y:a.number.isRequired,points:a.arrayOf(a.object).isRequired})).isRequired,axis:a.oneOf(["x","y"]).isRequired,debug:a.bool.isRequired,height:a.number.isRequired,tooltip:a.oneOfType([a.func,a.object]).isRequired,current:a.object,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func};var On=b.memo(vt),_t=function(t){var e=t.points,n=t.symbol,r=t.size,i=t.borderWidth,l=t.enableLabel,s=t.label,o=t.labelYOffset,u=ke(),f=Pt(s),c=e.slice(0).reverse().map(function(h){return{id:h.id,x:h.x,y:h.y,datum:h.data,fill:h.color,stroke:h.borderColor,label:l?f(h.data):null}});return R.jsx("g",{children:c.map(function(h){return R.jsx(Bt,{x:h.x,y:h.y,datum:h.datum,symbol:n,size:r,color:h.fill,borderWidth:i,borderColor:h.stroke,label:h.label,labelYOffset:o,theme:u},h.id)})})};_t.propTypes={points:a.arrayOf(a.object),symbol:a.func,size:a.number.isRequired,color:a.func.isRequired,borderWidth:a.number.isRequired,borderColor:a.func.isRequired,enableLabel:a.bool.isRequired,label:a.oneOfType([a.string,a.func]).isRequired,labelYOffset:a.number};var En=b.memo(_t),wt=function(t){var e=t.points,n=t.width,r=t.height,i=t.margin,l=t.setCurrent,s=t.onMouseEnter,o=t.onMouseMove,u=t.onMouseLeave,f=t.onClick,c=t.tooltip,h=t.debug,d=De(),g=d.showTooltipAt,p=d.hideTooltip,y=b.useCallback(function(_,E){g(b.createElement(c,{point:_}),[_.x+i.left,_.y+i.top],"top"),l(_),s&&s(_,E)},[l,g,c,s,i]),v=b.useCallback(function(_,E){g(b.createElement(c,{point:_}),[_.x+i.left,_.y+i.top],"top"),l(_),o&&o(_,E)},[l,g,c,o]),S=b.useCallback(function(_,E){p(),l(null),u&&u(_,E)},[p,l,u]),M=b.useCallback(function(_,E){f&&f(_,E)},[f]);return R.jsx(mn,{nodes:e,width:n,height:r,onMouseEnter:y,onMouseMove:v,onMouseLeave:S,onClick:M,debug:h})};wt.propTypes={points:a.arrayOf(a.object).isRequired,width:a.number.isRequired,height:a.number.isRequired,margin:a.object.isRequired,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func,tooltip:a.oneOfType([a.func,a.object]).isRequired,debug:a.bool.isRequired};var An=b.memo(wt),$e=function(t){var e=t.data,n=t.xScale,r=t.xFormat,i=t.yScale,l=t.yFormat,s=t.layers,o=t.curve,u=t.areaBaselineValue,f=t.colors,c=t.margin,h=t.width,d=t.height,g=t.axisTop,p=t.axisRight,y=t.axisBottom,v=t.axisLeft,S=t.enableGridX,M=t.enableGridY,_=t.gridXValues,E=t.gridYValues,z=t.lineWidth,F=t.enableArea,H=t.areaOpacity,q=t.areaBlendMode,T=t.enablePoints,m=t.pointSymbol,x=t.pointSize,C=t.pointColor,j=t.pointBorderWidth,B=t.pointBorderColor,W=t.enablePointLabel,$=t.pointLabel,k=t.pointLabelYOffset,O=t.defs,U=t.fill,D=t.markers,V=t.legends,ee=t.isInteractive,re=t.useMesh,te=t.debugMesh,A=t.onMouseEnter,G=t.onMouseMove,L=t.onMouseLeave,Y=t.onClick,he=t.tooltip,K=t.enableSlices,oe=t.debugSlices,N=t.sliceTooltip,Z=t.enableCrosshair,ue=t.crosshairType,ne=t.role,se=ot(h,d,c),fe=se.margin,J=se.innerWidth,ie=se.innerHeight,Ce=se.outerWidth,Te=se.outerHeight,Q=gt({data:e,xScale:n,xFormat:r,yScale:i,yFormat:l,width:J,height:ie,colors:f,curve:o,areaBaselineValue:u,pointColor:C,pointBorderColor:B,enableSlices:K}),je=Q.legendData,qe=Q.toggleSerie,de=Q.lineGenerator,we=Q.areaGenerator,be=Q.series,xe=Q.xScale,w=Q.yScale,I=Q.slices,ce=Q.points,P=ke(),ge=Pe(C,P),Mt=Pe(B,P),Ye=b.useState(null),Me=Ye[0],Xe=Ye[1],He=b.useState(null),Se=He[0],Ue=He[1],pe={grid:R.jsx(Vt,{theme:P,width:J,height:ie,xScale:S?xe:null,yScale:M?w:null,xValues:_,yValues:E},"grid"),markers:R.jsx(Wt,{markers:D,width:J,height:ie,xScale:xe,yScale:w,theme:P},"markers"),axes:R.jsx(Yt,{xScale:xe,yScale:w,width:J,height:ie,theme:P,top:g,right:p,bottom:y,left:v},"axes"),areas:null,lines:R.jsx(jn,{lines:be,lineGenerator:de,lineWidth:z},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:V.map(function(me,Le){return R.jsx(It,X({},me,{containerWidth:J,containerHeight:ie,data:me.data||je,theme:P,toggleSerie:me.toggleSerie?qe:void 0}),"legend."+Le)})},St=Ft(O,be,U);return F&&(pe.areas=R.jsx(Cn,{areaGenerator:we,areaOpacity:H,areaBlendMode:q,lines:be},"areas")),ee&&K!==!1&&(pe.slices=R.jsx(On,{slices:I,axis:K,debug:oe,height:ie,tooltip:N,current:Se,setCurrent:Ue,onMouseEnter:A,onMouseMove:G,onMouseLeave:L,onClick:Y},"slices")),T&&(pe.points=R.jsx(En,{points:ce,symbol:m,size:x,color:ge,borderWidth:j,borderColor:Mt,enableLabel:W,label:$,labelYOffset:k},"points")),ee&&Z&&(Me!==null&&(pe.crosshair=R.jsx(Ke,{width:J,height:ie,x:Me.x,y:Me.y,type:ue},"crosshair")),Se!==null&&(pe.crosshair=R.jsx(Ke,{width:J,height:ie,x:Se.x,y:Se.y,type:K},"crosshair"))),ee&&re&&K===!1&&(pe.mesh=R.jsx(An,{points:ce,width:J,height:ie,margin:fe,current:Me,setCurrent:Xe,onMouseEnter:A,onMouseMove:G,onMouseLeave:L,onClick:Y,tooltip:he,debug:te},"mesh")),R.jsx($t,{defs:St,width:Ce,height:Te,margin:fe,role:ne,children:s.map(function(me,Le){return typeof me=="function"?R.jsx(b.Fragment,{children:me(X({},t,{innerWidth:J,innerHeight:ie,series:be,slices:I,points:ce,xScale:xe,yScale:w,lineGenerator:de,areaGenerator:we,currentPoint:Me,setCurrentPoint:Xe,currentSlice:Se,setCurrentSlice:Ue}))},Le):pe[me]})})};$e.propTypes=_n,$e.defaultProps=ae;var Pn=nt($e),Vn=function(t){return R.jsx(it,{children:function(e){var n=e.width,r=e.height;return R.jsx(Pn,X({width:n,height:r},t))}})},Ge=function(t){var e=t.width,n=t.height,r=t.margin,i=t.pixelRatio,l=t.data,s=t.xScale,o=t.xFormat,u=t.yScale,f=t.yFormat,c=t.curve,h=t.layers,d=t.colors,g=t.lineWidth,p=t.enableArea,y=t.areaBaselineValue,v=t.areaOpacity,S=t.enablePoints,M=t.pointSize,_=t.pointColor,E=t.pointBorderWidth,z=t.pointBorderColor,F=t.enableGridX,H=t.gridXValues,q=t.enableGridY,T=t.gridYValues,m=t.axisTop,x=t.axisRight,C=t.axisBottom,j=t.axisLeft,B=t.legends,W=t.isInteractive,$=t.debugMesh,k=t.onMouseLeave,O=t.onClick,U=t.tooltip,D=t.canvasRef,V=b.useRef(null),ee=ot(e,n,r),re=ee.margin,te=ee.innerWidth,A=ee.innerHeight,G=ee.outerWidth,L=ee.outerHeight,Y=ke(),he=b.useState(null),K=he[0],oe=he[1],N=gt({data:l,xScale:s,xFormat:o,yScale:u,yFormat:f,width:te,height:A,colors:d,curve:c,areaBaselineValue:y,pointColor:_,pointBorderColor:z}),Z=N.lineGenerator,ue=N.areaGenerator,ne=N.series,se=N.xScale,fe=N.yScale,J=N.points,ie=ut({points:J,width:te,height:A,debug:$}),Ce=ie.delaunay,Te=ie.voronoi;b.useEffect(function(){D&&(D.current=V.current),V.current.width=G*i,V.current.height=L*i;var w=V.current.getContext("2d");w.scale(i,i),w.fillStyle=Y.background,w.fillRect(0,0,G,L),w.translate(re.left,re.top),h.forEach(function(I){if(typeof I=="function"&&I({ctx:w,innerWidth:te,innerHeight:A,series:ne,points:J,xScale:se,yScale:fe,lineWidth:g,lineGenerator:Z,areaGenerator:ue,currentPoint:K,setCurrentPoint:oe}),I==="grid"&&Y.grid.line.strokeWidth>0&&(w.lineWidth=Y.grid.line.strokeWidth,w.strokeStyle=Y.grid.line.stroke,F&&Je(w,{width:te,height:A,scale:se,axis:"x",values:H}),q&&Je(w,{width:te,height:A,scale:fe,axis:"y",values:T})),I==="axes"&&Xt(w,{xScale:se,yScale:fe,width:te,height:A,top:m,right:x,bottom:C,left:j,theme:Y}),I==="areas"&&p===!0&&(w.save(),w.globalAlpha=v,ue.context(w),ne.forEach(function(P){w.fillStyle=P.color,w.beginPath(),ue(P.data.map(function(ge){return ge.position})),w.fill()}),w.restore()),I==="lines"&&(Z.context(w),ne.forEach(function(P){w.strokeStyle=P.color,w.lineWidth=g,w.beginPath(),Z(P.data.map(function(ge){return ge.position})),w.stroke()})),I==="points"&&S===!0&&M>0&&J.forEach(function(P){w.fillStyle=P.color,w.beginPath(),w.arc(P.x,P.y,M/2,0,2*Math.PI),w.fill(),E>0&&(w.strokeStyle=P.borderColor,w.lineWidth=E,w.stroke())}),I==="mesh"&&$===!0&&(yn(w,Te),K&&bn(w,Te,K.index)),I==="legends"){var ce=ne.map(function(P){return{id:P.id,label:P.id,color:P.color}}).reverse();B.forEach(function(P){Gt(w,X({},P,{data:P.data||ce,containerWidth:te,containerHeight:A,theme:Y}))})}})},[V,G,L,h,Y,Z,ne,se,fe,F,H,q,T,m,x,C,j,B,J,S,M,K]);var Q=b.useCallback(function(w){var I=tt(V.current,w),ce=I[0],P=I[1];if(!zt(re.left,re.top,te,A,ce,P))return null;var ge=Ce.find(ce-re.left,P-re.top);return J[ge]},[V,re,te,A,Ce]),je=De(),qe=je.showTooltipFromEvent,de=je.hideTooltip,we=b.useCallback(function(w){var I=Q(w);oe(I),I?qe(b.createElement(U,{point:I}),w):de()},[Q,oe,qe,de,U]),be=b.useCallback(function(w){de(),oe(null),K&&k&&k(K,w)},[de,oe,k]),xe=b.useCallback(function(w){if(O){var I=Q(w);I&&O(I,w)}},[Q,O]);return R.jsx("canvas",{ref:V,width:G*i,height:L*i,style:{width:G,height:L,cursor:W?"auto":"normal"},onMouseEnter:W?we:void 0,onMouseMove:W?we:void 0,onMouseLeave:W?be:void 0,onClick:W?xe:void 0})};Ge.propTypes=wn,Ge.defaultProps=Mn;var Bn=nt(Ge),Ln=b.forwardRef(function(t,e){return R.jsx(Bn,X({},t,{canvasRef:e}))});b.forwardRef(function(t,e){return R.jsx(it,{children:function(n){var r=n.width,i=n.height;return R.jsx(Ln,X({width:r,height:i},t,{ref:e}))}})});export{Vn as P};
