import{ad as j,r as s,ae as k,j as i,R as b}from"./index-67942570.js";import{F}from"./DataContext-fbe27826.js";import{I as q}from"./ImageGallery-bf06d094.js";function O({entry:a}){const n=j(),{filters:t,addFilter:r,removeFilters:d}=s.useContext(F),h=s.useCallback(e=>{r("image",e,!0)},[r]),I=s.useCallback(()=>{d(["image"])},[d]),f=s.useCallback(()=>{const{image:e}=k.parse(n.search);return p(e,a)},[a,n]),c=s.useMemo(()=>t.image?+t.image:-1,[t]),x=p(c,a),o=a.media.sort((e,l)=>e.sequenceId-l.sequenceId),m=[...new Set(o==null?void 0:o.map(({label:e})=>e))].filter(e=>e),u=m.length>0?m.map(e=>({label:e,media:a.media.filter(({label:l})=>l===e)})):[{label:"allMedia",media:a.media}];m.length>0&&a.media.filter(e=>!e.label).length>0&&u.push({label:"Other",media:a.media.filter(e=>!e.label)});const C=a.media.sort((e,l)=>{var g;return((g=e.label)==null?void 0:g.localeCompare(l.label||""))||e.sequenceId-l.sequenceId});return i.jsx(b.Fragment,{children:u.map((e,l)=>i.jsx(b.Fragment,{children:i.jsxs("div",{children:[e.label!=="allMedia"&&i.jsx("div",{style:{borderBottom:"1px solid #bbb",marginLeft:0,fontWeight:500},children:e.label}),i.jsx(q,{media:e.media,allMedia:C,openIndex:c,initiallyOpen:x&&l===0,onOpenImage:h,onCloseImage:I,onBackButton:f,shareParams:{id:a.id,name:t.name}})]},l)},l))})}const p=(a,n)=>/\d+/.test(a)&&!!n.media.find(t=>t.sequenceId===a);export{O as L};
