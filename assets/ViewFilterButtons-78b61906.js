import{r as t,j as e,a0 as H,a1 as P,J,aj as K,B as k,G as y,D as U,X as R,R as W,a9 as X,aa as F,al as E,A as Y,V as q,bu as Q,P as Z,ah as L,W as _,u as $}from"./index-76783a10.js";import{L as S}from"./LockListContext-0d853028.js";import{F as v}from"./filterFields-469a27cb.js";import{L as ee}from"./Link-0e15f012.js";import{B as D}from"./Badge-64105b30.js";import{F as te,C as oe}from"./SearchBox-f8dbbcad.js";import{T as se,a as w}from"./ToggleButtonGroup-e6a66ba4.js";import{B as O}from"./Box-a2141129.js";function Ce({label:c,isSearch:C}){const{tab:d,setDisplayAll:r}=t.useContext(S),i=t.useDeferredValue(d),a={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},o=i==="search",m=o&&!C?"No search or filter criteria selected.":e.jsxs("span",{children:["No matching ",c," were found.",e.jsx("br",{}),"Try adjusting filters, search, or tab."]}),x=t.useCallback(()=>{setTimeout(()=>r(!0),50)},[r]);return e.jsxs(H,{style:a,children:[e.jsx(P,{style:{paddingBottom:8},children:e.jsx(J,{variant:"h6",align:"center",children:m})}),o&&e.jsx(K,{style:{paddingBottom:16},children:e.jsx(k,{variant:"outlined",color:"inherit",onClick:x,style:{minWidth:160,margin:"auto"},children:"View all locks"})})]})}function le({text:c}){const{filters:C,addFilter:d,removeFilter:r}=t.useContext(v),{expandAll:i}=C,a=t.useCallback(()=>{!i||i==="false"?d("expandAll","Expand All",!0):r("expandAll","Expand All")},[i,d,r]),o=i?"Collapse All":"Expand All";return c?e.jsx("div",{children:e.jsx(y,{title:o,arrow:!0,disableFocusListener:!0,children:e.jsx(ee,{onClick:()=>a(),style:{color:"#fff",textDecoration:"none",cursor:"pointer"},size:"small",children:e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:o.toUpperCase()})})})}):e.jsx("div",{children:e.jsx(y,{title:o,arrow:!0,disableFocusListener:!0,children:e.jsx(k,{onClick:()=>a(),style:{color:"#aaa"},size:"small",children:o})})})}function ne({sortValues:c,compactMode:C}){const[d,r]=t.useState(null),i=!!d,a=t.useCallback(n=>r(n.currentTarget),[]),o=t.useCallback(()=>r(null),[]),{filters:m,addFilter:x}=t.useContext(v),{sort:p}=m,{adminRole:b}=t.useContext(U),{compact:g,setCompact:s}=t.useContext(R),l=t.useCallback(n=>()=>{o(),s(n)},[o,s]),u=t.useCallback(n=>()=>{o(),setTimeout(()=>x("sort",n,!0),0)},[x,o]),j={vertical:"top",horizontal:"right"};return e.jsxs(W.Fragment,{children:[e.jsx(y,{title:"View Options",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:a,style:{color:"#ddd"},children:e.jsx(D,{variant:"dot",color:"secondary",invisible:!p,anchorOrigin:j,children:"VIEW"})})}),e.jsxs(X,{anchorEl:d,open:i,onClose:o,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),c.map(({label:n,value:f})=>e.jsx(F,{onClick:u(f),selected:p===f,children:n},n)),C&&e.jsxs("div",{children:[e.jsx(E,{}),e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(F,{onClick:l(!1),selected:!g,children:"Normal"}),e.jsx(F,{onClick:l(!0),selected:g,children:"Compact"})]}),b&&e.jsxs("div",{children:[e.jsx(E,{}),e.jsx(le,{text:!0})]})]})]})}function re({onFiltersChanged:c}){const{isLoggedIn:C}=t.useContext(Y),{beta:d}=t.useContext(R),{filters:r,filterCount:i,addFilters:a,addFilter:o,filterFields:m,removeFilters:x}=t.useContext(v),{tab:p}=t.useContext(S),{belt:b}=r,g=/\/locks/.test(location.hash),s=t.useMemo(()=>p||b||"White",[b,p]),l=t.useMemo(()=>s!=="search"?"belt":"all",[s]),[u,j]=t.useState(s);s!==u&&s!=="search"?j(s):l==="belt"&&s==="search"&&j("search");const[n,f]=t.useState(!1),M=t.useCallback(()=>f(!n),[n]);q("f",M);const A=t.useCallback(h=>()=>{h==="all"?o("tab","search",!0):h==="belt"&&(x(["belt"]),o("tab",u,!0))},[o,u,x]),V=t.useCallback((h,T)=>{a([{key:h,value:T},{key:"id",value:void 0},{key:"name",value:void 0}],!0),c&&c()},[a,c]),z=t.useCallback(()=>f(!0),[]),B=t.useCallback(()=>f(!1),[]),{color:I,lineColor:N="#999"}=L[u]?L[u]:{color:"#inherit"},G=l==="belt"?1:.7;return e.jsxs(W.Fragment,{children:[e.jsx(y,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:z,style:{color:"#ddd"},children:e.jsx(D,{variant:"dot",badgeContent:i,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"right"},children:"FILTER"})})}),n&&e.jsxs(Q,{anchor:"right",open:n,onClose:B,children:[e.jsx(Z,{variant:"dense",onClick:B,style:{padding:"8px 0px 0px 8px"},children:e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:700},children:"Filters"})}),L[u]&&g&&e.jsx("div",{style:{marginLeft:8,marginBottom:8},children:e.jsxs(se,{variant:"outlined",children:[e.jsxs(w,{onClick:A("belt"),style:{color:l==="belt"?"#eee":"#777",backgroundColor:l==="belt"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"belt",disabled:l==="belt",children:[e.jsx("div",{style:{backgroundColor:I,height:16,width:16,borderColor:N,borderRadius:8,border:"1px solid",marginRight:8,opacity:G}}),u," BELT"]},"belt"),e.jsx(w,{onClick:A("all"),style:{color:l==="all"?"#eee":"#777",backgroundColor:l==="all"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"all",disabled:l==="all",children:"ALL LOCKS"},"all")]})}),e.jsx(O,{margin:1,children:e.jsx(_,{direction:"column",style:{minWidth:250},children:m.filter(h=>(!h.beta||d)&&(!h.userBased||C)).filter(h=>!(l==="belt"&&p!=="search"&&h.label==="Belt")).map((h,T)=>e.jsx(te,{tab:p,...h,onFilter:V},T))})}),e.jsxs("div",{style:{padding:8},children:[e.jsx(oe,{forceText:!0}),e.jsx(k,{variant:"outlined",color:"inherit",onClick:B,children:"Done"})]})]})]})}function me({sortValues:c,extraFilters:C=[],compactMode:d}){const{filters:r,filterCount:i,setFilters:a}=t.useContext(v),{tab:o,sort:m,search:x}=r,p=m||i>0,b=t.useCallback(()=>{a({tab:o,search:x})},[x,a,o]),{width:g}=$(),s=g<=500,l=s?3:0,u=s?2:0,j=s?80:60;return e.jsxs(O,{style:{display:"flex",paddingTop:l,marginBottom:u,marginLeft:0,justifyContent:"center"},sx:{".MuiBadge-anchorOriginTopRightRectangular":{marginTop:"5px"},".MuiButton-root":{minWidth:j}},children:[e.jsx(ne,{sortValues:c,compactMode:d}),e.jsx(re,{extraFilters:C}),p&&e.jsx(k,{color:"inherit",style:{color:"#bbb"},onClick:b,children:"RESET"})]})}export{le as E,Ce as N,me as V};
