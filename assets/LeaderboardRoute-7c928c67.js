import{j as e,r as i,e as v,A as C,R as h,x as j,y as T,v as k}from"./index-4c4684d3.js";import{T as L}from"./Tracker-6e227e7b.js";import{E as w,G as R,H as S,J as _,q as N,d as D,T as E,r as F,b as I,g as M,I as A,N as H,F as P}from"./Nav-986711dd.js";import{T as q,a as b,b as u,c as W,d as $,e as B}from"./TableRow-97c8695e.js";import{L as G,T as O,I as U,d as z}from"./Search-975deb0f.js";import{A as Y}from"./Autocomplete-84177c2e.js";import"./InputLabel-4e5c3e5a.js";function J(){const t={border:0,padding:"4px 12px",backgroundColor:"#000"};return e.jsx(q,{children:e.jsxs(b,{children:[e.jsx(u,{align:"center",style:t,children:"#"}),e.jsx(u,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),e.jsx(u,{align:"center",style:t,children:e.jsx(w,{})}),e.jsx(u,{align:"center",style:t,children:e.jsx(R,{})}),e.jsx(u,{align:"center",style:t,children:e.jsx(S,{})}),e.jsx(u,{align:"center",style:t,children:e.jsx(_,{})})]})})}function x({align:t="center",user:a,leader:s,value:o}){const{displayName:d,id:r}=s,n=(a==null?void 0:a.uid)===r,c=d?"#eee":"#bbb",l=n?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:c},p={color:c};return e.jsx(u,{align:t,sx:p,style:l,children:o})}function K({index:t,leader:a,user:s,highlighted:o,scrollableRef:d}){const r=i.useRef(),[n,c]=i.useState(!1),l=o?{backgroundColor:"#333"}:{};return i.useEffect(()=>{o&&r&&!n&&setTimeout(()=>{c(!0),d.current.scrollTo({top:r.current.offsetTop-75,behavior:"smooth"})},0)},[o,d,n]),e.jsxs(b,{ref:r,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":o?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...l},children:[e.jsx(x,{leader:a,user:s,value:t+1}),e.jsx(x,{leader:a,user:s,value:a.displayName||"Anonymous",align:"left"}),e.jsx(x,{leader:a,user:s,value:a.own}),e.jsx(x,{leader:a,user:s,value:a.picked}),e.jsx(x,{leader:a,user:s,value:a.recorded}),e.jsx(x,{leader:a,user:s,value:a.wishlist})]},a.id)}function Q({data:t,loading:a}){const s=v(),{user:o}=i.useContext(C),d=i.useRef(),{user:r}=i.useMemo(()=>N.parse(s.search),[s.search]),n=a?"####-##-## ##:##":D(t.metadata.updatedDateTime).format("MM/DD/YY hh:mm"),c=a?V:t.data;return e.jsxs(h.Fragment,{children:[a&&e.jsx(G,{variant:"indeterminate",color:"secondary"}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(W,{sx:{height:"78vh",backgroundColor:"#111"},id:"scrollable",ref:d,children:e.jsxs($,{stickyHeader:!0,children:[e.jsx(J,{}),e.jsx(B,{children:c.map((l,p)=>{const y=!!r&&(r==="me"&&l.id===o.uid||r===l.displayName);return e.jsx(K,{index:p,leader:l,user:o,scrollableRef:d,highlighted:y},l.id)})})]})}),e.jsxs(E,{variant:"caption",align:"right",component:"div",style:{width:"100%",marginTop:8},children:["Last updated: ",n," GMT"]})]})]})}const V=[...Array(40)].map((t,a)=>({id:a,displayName:"........................",own:"---",picked:"---",recorded:"---",wishlist:"--"}));var f={},X=I;Object.defineProperty(f,"__esModule",{value:!0});var g=f.default=void 0,Z=X(F()),m=e;g=f.default=(0,Z.default)([(0,m.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,m.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function ee(){const t=j(),a=i.useCallback(()=>{t("/leaderboard?user=me")},[t]);return e.jsx(M,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(A,{color:"inherit",onClick:a,children:e.jsx(g,{})})})}function ae({data:t}){const a={maxWidth:450},s=j(),o=t.data.filter(r=>r.displayName).map(r=>r.displayName),d=i.useCallback((r,n)=>{n?o.includes(n)&&s(`/leaderboard?user=${n}`):s("/leaderboard")},[s,o]);return e.jsx(Y,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:a,options:o,onChange:d,renderInput:r=>e.jsx(O,{...r,placeholder:"Search",variant:"standard",color:"secondary",InputProps:{...r.InputProps,startAdornment:e.jsx(U,{position:"start",children:e.jsx(z,{})})}})})}function le(){const[t,a]=i.useState({data:[],metadata:{}}),[s,o]=i.useState(!0);i.useEffect(()=>{const r=async()=>{const c=await(await fetch(te)).json();a(c),o(!1)};try{r()}catch(n){console.error("Error loading leaderboard data.",n),T("Error loading leaderboard data. Please reload the page.",{autoHideDuration:null,action:e.jsx(k,{color:"secondary",onClick:()=>window.location.reload(),children:"Refresh"})}),o(!1)}},[]);const d=e.jsxs(h.Fragment,{children:[e.jsx(ae,{data:t}),e.jsx(ee,{}),e.jsx("div",{style:{flexGrow:1}})]});return e.jsxs(h.Fragment,{children:[e.jsx(H,{title:"Collection Leaderboard",extras:d}),e.jsx(Q,{data:t,loading:s}),e.jsx(P,{}),e.jsx(L,{feature:"leaderboard"})]})}const te="https://explore.lpubelts.com/leaderboard/leaderboardData.json";export{le as default};
