import{r as k,F as We,K as Te,j as n,u as bt,R as ve,L as se,b as Yt,a7 as Ue,W as _e,U as et,ak as $t,a0 as qt,aB as Kt,aq as Qt,d as tt,bP as Zt,bQ as Xt,D as Jt,N as _t,e as er,a8 as tr,h as rr,T as nr}from"./index-BoAM5s6V.js";import{L as or}from"./LoadingDisplay-RHQ7ctol.js";import{u as ir}from"./useData-CC-lB9E4.js";import{u as lr}from"./usePageTitle-I8wCtQtS.js";import{_ as sr,N as ar,a as cr,l as dr}from"./lockStats-CMgTTC9f.js";import{E as ur}from"./ErrorMessage-J9glMi8z.js";import{b as Ie,a as fr}from"./chartDefaults-pV7GKcxU.js";import{a as hr}from"./filterEntriesAdvanced-Ca9a_jNQ.js";import{D as Ct}from"./DataContext-QrOcQgax.js";import{r as rt}from"./index-DMT9vf90.js";import{e as nt}from"./entryName-C9FOUkrP.js";import{B as pr}from"./BeltStripeMini-CHP1asiT.js";import{a as Bt,b as ue,c as ot,d as it,T as gr,e as lt}from"./TableRow-BTZhYaIY.js";import{V as mr}from"./ViewFilterButtons-BcItVvRn.js";import{c as kr}from"./sortFields-JfaKIsUc.js";import{F as xr,I as yr,S as vr}from"./Select-Cez70sK8.js";import{C as br}from"./Collapse-DSu8MudO.js";import{l as Cr}from"./uniq-C7JeOX-s.js";import{z as Br,D as jr,O as wr,g as Lr,H as Or,r as Sr,d as jt,p as Pr,t as st,s as Mr,C as Dr,F as at,c as He,R as Tr,B as Ir,h as wt,a as Lt,e as Ot,T as ct,q as dt}from"./nivo-legends-DiZKJz19.js";import{r as Ar}from"./_baseClone-ChHyTiej.js";import{R as zr,Q as Fr}from"./isEqual-DI6t9w9F.js";import{a as Ae}from"./adminChartDefaults-CBhS7ojG.js";import{h as Rr}from"./filterFields-BIZtEZNs.js";import{c as Er}from"./collectionStatsById-DY1NVZ7h.js";import{b as Nr,d as Ur,t as Wr,p as Hr,s as Gr,e as Vr,f as Yr,c as $r,g as qr}from"./dataUrls-DVxTtpO-.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-DpSPoVBm.js";import"./nivo-arcs-BzbHh-Si.js";import"./Sort-CiJtzcWm.js";import"./Search-BCFl_Eb-.js";import"./useFormControl-D_G-ngyM.js";import"./FilterAlt-Ctc8YK6y.js";import"./HighlightOff-D52efuzb.js";import"./Box-DXCzZVn0.js";import"./LockListContext-CvVRzOPg.js";import"./ToggleButtonGroup-D_7iYrTI.js";import"./setDeep-J6HEwWhX.js";import"./AddCircle-DjiJBj94.js";import"./TextField-DaJ5E3i6.js";import"./Cancel-CW8VJlWD.js";function ut(e,r){let i;if(r===void 0)for(const l of e)l!=null&&(i<l||i===void 0&&l>=l)&&(i=l);else{let l=-1;for(let o of e)(o=r(o,++l,e))!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}return i}function St(e,r){let i;if(r===void 0)for(const l of e)l!=null&&(i>l||i===void 0&&l>=l)&&(i=l);else{let l=-1;for(let o of e)(o=r(o,++l,e))!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}return i}function ze(e,r){let i=0;if(r===void 0)for(let l of e)(l=+l)&&(i+=l);else{let l=-1;for(let o of e)(o=+r(o,++l,e))&&(i+=o)}return i}const Kr={Total:3614},Qr={Total:8120},ft={discord:Kr,reddit:Qr};function Zr({data:e}){const{scorecardStats:r,discordBeltCounts:i,redditBeltCounts:l}=e,{userCounts:o}=r,{filters:x,addFilter:h,removeFilters:v}=k.useContext(We),D=Xr(),u=x!=null&&x.dataset?x==null?void 0:x.dataset:"pickerData",[b,S]=k.useState(u),y=k.useCallback(t=>{h("dataset",t,!0),S(t)},[h]),P=9435-o.totalUsers,d=k.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:o.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:P}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},p={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:o.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:o.totalUsers-o.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},g={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:o.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:o.scorecardUsers-o.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},s={parent:"Scorecard Users",data:Object.keys(o.belts).sort((w,F)=>Te(w,F)).map(w=>({id:w,label:w,value:o.belts[w]})),colors:Ie,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},a={parent:"Imported Belts",data:Object.keys(o.dans).sort((w,F)=>parseInt(w)-parseInt(F)).map(w=>({id:ht(w),label:ht(w),value:o.dans[w]})),colors:pt,description:"Dan Breakdown"},O={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:ft.discord.Total},{id:"Reddit",label:"Reddit",value:ft.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},z=Object.keys(i).reduce((w,F)=>{const X=F.replace(" Belt","").trim();return w[X]=i[F],w},{}),G={parent:"Other LPU Pickers",data:Object.keys(z).filter(w=>!w.includes("Dan")).sort((w,F)=>Te(w,F)).map(w=>{const F=w==="Black"?"Black Belt":w;return{id:F,label:F,value:z[w]}}),colors:Ie,description:n.jsxs("span",{children:["Discord Belt Breakdown | ",n.jsx(se,{onClick:()=>y("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},W={parent:"Discord",data:Object.keys(i).filter(w=>w.includes("Dan")).sort((w,F)=>parseInt(w)-parseInt(F)).map(w=>({id:w,label:w,value:i[w]})),colors:pt,description:"Discord Dan Breakdown"},H=Object.keys(l).reduce((w,F)=>{const X=F.replace(" Belt","").trim();return w[X]=l[F],w},{}),Y={parent:"Other LPU Pickers",data:Object.keys(H).filter(w=>!w.includes("Dan")).sort((w,F)=>Te(w,F)).map(w=>({id:w,label:w,value:H[w]})),colors:Ie,description:n.jsxs("span",{children:["Reddit Belt Breakdown | ",n.jsx(se,{onClick:()=>y("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:t,"LPUbelts Users":p,"Scorecard Users":g,"Imported Belts":s,Black:a,"Other LPU Pickers":O,Discord:G,"Black Belt":W,Reddit:Y}},[i,y,P,l,o]),R=d[b].data,T=d[b].data.reduce((t,p)=>t+p.value,0),C=k.useCallback(t=>{d[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",y(t.id)},200))},[y,d]),L=k.useCallback(()=>{d[d[b].parent].parent?h("dataset",d[b].parent,!0):v(["dataset"]),S(d[b].parent)},[h,d,b,v]),m=k.useCallback((t,p)=>{d[t.id]&&(p.currentTarget.style.cursor="pointer")},[d]),{width:c}=bt(),I=c<=360,f=c<=395,j=c<=428,M=c<=560,N={top:30,right:0,bottom:30,left:0};let E=320;I?E=175:f?E=190:j?E=230:M&&(E=240);const K="1.0rem",Q=M?5:4,ee=M?10:8,Z=M?0:8;return n.jsxs(ve.Fragment,{children:[n.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:d[b].description}),n.jsxs("div",{style:{height:E,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[n.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:n.jsx(sr,{data:R,theme:fr,colors:d[b].colors,margin:N,startAngle:d[b].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:Q,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/T*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:Z,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:ee,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{C(t)},onMouseEnter:(t,p)=>{m(t,p)},tooltip:t=>{const p=(t.datum.arc.angleDeg>Q,t.datum.label+": "),g=t.datum.value;return n.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:M||D?"none":"block"},children:n.jsxs("div",{children:[p,g]})})}})}),n.jsx("div",{style:{width:"100%",position:"absolute",top:E/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:d[b].parent&&n.jsx(se,{onClick:L,style:{color:"#ccc",cursor:"pointer",fontSize:K},children:"back"})})]},"pickPie")]})}function ht(e){const r=["st","nd","rd","th"];return e+""+r[Math.min(4,parseInt(e))-1]}const pt=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function Xr(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function gt({entry:e,index:r,collapse:i=!1}){const l=Yt(),x=nt(e).replace(/[\s/]/g,"_").replace(/\W/g,""),h=k.useCallback(D=>{const u=`/locks?tab=search&search=${D.id}&id=${D.id}&name=${x}`;l(u)},[l,x]),v=e.belt==="Unranked"?"#bbb":"#fff";return n.jsxs(Bt,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[n.jsx(ue,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:n.jsx(pr,{value:e.belt})}),n.jsx(ue,{align:"left",style:{alignItems:"center"},children:n.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:n.jsx(se,{onClick:()=>h(e),style:{color:v},children:nt(e)})})}),n.jsx(ue,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:e.currentPicks})]},r)}function Jr(){var I;const{visibleEntries:e=[]}=k.useContext(Ct),{filters:r,addFilter:i,removeFilters:l}=k.useContext(We),{userBelt:o="All Belts",sort:x}=r,[h,v]=k.useState(x);k.useEffect(()=>{v(!!x)},[x]);const D=60;let u=((I=e.find(f=>f.displayRank===D))==null?void 0:I.currentPicks)||0;u=u>2?u:0;const b=k.useMemo(()=>e.filter(f=>f.currentPicks>=u),[e,u]),S=k.useMemo(()=>e.filter(f=>f.currentPicks<u),[e,u]),y=k.useMemo(()=>["All Belts",...Ue],[]),P=k.useCallback(()=>{const f=y.findIndex(M=>M===o),j=f<y.length-1?f+1:0;i("userBelt",y[j],!0)},[i,y,o]),d=k.useCallback(()=>{const f=y.findIndex(M=>M===o),j=f>0?f-1:y.length-1;i("userBelt",y[j],!0)},[i,y,o]),[R,T]=k.useState(!1),C=k.useCallback(()=>T(!1),[]),L=k.useCallback(()=>T(!0),[]),m=k.useCallback(f=>{f.target.value!=="All Belts"?i("userBelt",f.target.value,!0):l(["userBelt"]),C()},[i,C,l]),c=k.useCallback(()=>{v(!h)},[h]);return n.jsxs(ve.Fragment,{children:[n.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:n.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx(_e,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:n.jsx(et,{onClick:d,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:n.jsx(ar,{})})}),n.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:n.jsxs(xr,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[n.jsx(yr,{style:{color:"#bbb"},children:"User Belt"}),n.jsx(vr,{id:"beltSelect",value:o||"All Belts",label:"Brand",open:R,onClose:C,onOpen:L,onChange:m,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:y.map((f,j)=>n.jsx($t,{value:y[j],children:y[j]},j))})]})}),n.jsx(_e,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:n.jsx(et,{onClick:P,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:n.jsx(cr,{})})})]})}),n.jsx(mr,{sortValues:kr,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),n.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:n.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[n.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:n.jsxs(it,{style:{backgroundColor:"#1c1c1c"},children:[n.jsx(gr,{children:n.jsxs(Bt,{style:{padding:"0px",fontWeight:700},children:[n.jsx(ue,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),n.jsx(ue,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),n.jsx(lt,{children:b.map((f,j)=>n.jsx(gt,{entry:f,index:j},j))})]})}),n.jsx(br,{in:!!h,timeout:"auto",unmountOnExit:!0,children:n.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:n.jsx(it,{style:{backgroundColor:"#1c1c1c"},children:n.jsx(lt,{children:S.map((f,j)=>n.jsx(gt,{entry:f,index:j},j))})})})})]})}),S.length>0&&n.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:n.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:n.jsx(se,{onClick:c,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!h&&"Show More"||"Show Less"})})})]})}function _r(e){return e.target.depth}function en(e){return e.depth}function tn(e,r){return r-1-e.height}function Pt(e,r){return e.sourceLinks.length?e.depth:r-1}function rn(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?St(e.sourceLinks,_r)-1:0}function xe(e){return function(){return e}}function mt(e,r){return ye(e.source,r.source)||e.index-r.index}function kt(e,r){return ye(e.target,r.target)||e.index-r.index}function ye(e,r){return e.y0-r.y0}function Fe(e){return e.value}function nn(e){return e.index}function on(e){return e.nodes}function ln(e){return e.links}function xt(e,r){const i=e.get(r);if(!i)throw new Error("missing: "+r);return i}function yt({nodes:e}){for(const r of e){let i=r.y0,l=i;for(const o of r.sourceLinks)o.y0=i+o.width/2,i+=o.width;for(const o of r.targetLinks)o.y1=l+o.width/2,l+=o.width}}function sn(){let e=0,r=0,i=1,l=1,o=24,x=8,h,v=nn,D=Pt,u,b,S=on,y=ln,P=6;function d(){const t={nodes:S.apply(null,arguments),links:y.apply(null,arguments)};return R(t),T(t),C(t),L(t),I(t),yt(t),t}d.update=function(t){return yt(t),t},d.nodeId=function(t){return arguments.length?(v=typeof t=="function"?t:xe(t),d):v},d.nodeAlign=function(t){return arguments.length?(D=typeof t=="function"?t:xe(t),d):D},d.nodeSort=function(t){return arguments.length?(u=t,d):u},d.nodeWidth=function(t){return arguments.length?(o=+t,d):o},d.nodePadding=function(t){return arguments.length?(x=h=+t,d):x},d.nodes=function(t){return arguments.length?(S=typeof t=="function"?t:xe(t),d):S},d.links=function(t){return arguments.length?(y=typeof t=="function"?t:xe(t),d):y},d.linkSort=function(t){return arguments.length?(b=t,d):b},d.size=function(t){return arguments.length?(e=r=0,i=+t[0],l=+t[1],d):[i-e,l-r]},d.extent=function(t){return arguments.length?(e=+t[0][0],i=+t[1][0],r=+t[0][1],l=+t[1][1],d):[[e,r],[i,l]]},d.iterations=function(t){return arguments.length?(P=+t,d):P};function R({nodes:t,links:p}){for(const[s,a]of t.entries())a.index=s,a.sourceLinks=[],a.targetLinks=[];const g=new Map(t.map((s,a)=>[v(s,a,t),s]));for(const[s,a]of p.entries()){a.index=s;let{source:O,target:z}=a;typeof O!="object"&&(O=a.source=xt(g,O)),typeof z!="object"&&(z=a.target=xt(g,z)),O.sourceLinks.push(a),z.targetLinks.push(a)}if(b!=null)for(const{sourceLinks:s,targetLinks:a}of t)s.sort(b),a.sort(b)}function T({nodes:t}){for(const p of t)p.value=p.fixedValue===void 0?Math.max(ze(p.sourceLinks,Fe),ze(p.targetLinks,Fe)):p.fixedValue}function C({nodes:t}){const p=t.length;let g=new Set(t),s=new Set,a=0;for(;g.size;){for(const O of g){O.depth=a;for(const{target:z}of O.sourceLinks)s.add(z)}if(++a>p)throw new Error("circular link");g=s,s=new Set}}function L({nodes:t}){const p=t.length;let g=new Set(t),s=new Set,a=0;for(;g.size;){for(const O of g){O.height=a;for(const{source:z}of O.targetLinks)s.add(z)}if(++a>p)throw new Error("circular link");g=s,s=new Set}}function m({nodes:t}){const p=ut(t,a=>a.depth)+1,g=(i-e-o)/(p-1),s=new Array(p);for(const a of t){const O=Math.max(0,Math.min(p-1,Math.floor(D.call(null,a,p))));a.layer=O,a.x0=e+O*g,a.x1=a.x0+o,s[O]?s[O].push(a):s[O]=[a]}if(u)for(const a of s)a.sort(u);return s}function c(t){const p=St(t,g=>(l-r-(g.length-1)*h)/ze(g,Fe));for(const g of t){let s=r;for(const a of g){a.y0=s,a.y1=s+a.value*p,s=a.y1+h;for(const O of a.sourceLinks)O.width=O.value*p}s=(l-s+h)/(g.length+1);for(let a=0;a<g.length;++a){const O=g[a];O.y0+=s*(a+1),O.y1+=s*(a+1)}Q(g)}}function I(t){const p=m(t);h=Math.min(x,(l-r)/(ut(p,g=>g.length)-1)),c(p);for(let g=0;g<P;++g){const s=Math.pow(.99,g),a=Math.max(1-s,(g+1)/P);j(p,s,a),f(p,s,a)}}function f(t,p,g){for(let s=1,a=t.length;s<a;++s){const O=t[s];for(const z of O){let G=0,W=0;for(const{source:Y,value:w}of z.targetLinks){let F=w*(z.layer-Y.layer);G+=ee(Y,z)*F,W+=F}if(!(W>0))continue;let H=(G/W-z.y0)*p;z.y0+=H,z.y1+=H,K(z)}u===void 0&&O.sort(ye),M(O,g)}}function j(t,p,g){for(let s=t.length,a=s-2;a>=0;--a){const O=t[a];for(const z of O){let G=0,W=0;for(const{target:Y,value:w}of z.sourceLinks){let F=w*(Y.layer-z.layer);G+=Z(z,Y)*F,W+=F}if(!(W>0))continue;let H=(G/W-z.y0)*p;z.y0+=H,z.y1+=H,K(z)}u===void 0&&O.sort(ye),M(O,g)}}function M(t,p){const g=t.length>>1,s=t[g];E(t,s.y0-h,g-1,p),N(t,s.y1+h,g+1,p),E(t,l,t.length-1,p),N(t,r,0,p)}function N(t,p,g,s){for(;g<t.length;++g){const a=t[g],O=(p-a.y0)*s;O>1e-6&&(a.y0+=O,a.y1+=O),p=a.y1+h}}function E(t,p,g,s){for(;g>=0;--g){const a=t[g],O=(a.y1-p)*s;O>1e-6&&(a.y0-=O,a.y1-=O),p=a.y0-h}}function K({sourceLinks:t,targetLinks:p}){if(b===void 0){for(const{source:{sourceLinks:g}}of p)g.sort(kt);for(const{target:{targetLinks:g}}of t)g.sort(mt)}}function Q(t){if(b===void 0)for(const{sourceLinks:p,targetLinks:g}of t)p.sort(kt),g.sort(mt)}function ee(t,p){let g=t.y0-(t.sourceLinks.length-1)*h/2;for(const{target:s,width:a}of t.sourceLinks){if(s===p)break;g+=a+h}for(const{source:s,width:a}of p.targetLinks){if(s===t)break;g-=a}return g}function Z(t,p){let g=p.y0-(p.targetLinks.length-1)*h/2;for(const{source:s,width:a}of p.targetLinks){if(s===t)break;g+=a+h}for(const{target:s,width:a}of t.sourceLinks){if(s===p)break;g-=a}return g}return d}var Re,vt;function an(){if(vt)return Re;vt=1;var e=Ar(),r=1,i=4;function l(o){return e(o,r|i)}return Re=l,Re}var cn=an();const dn=qt(cn);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},oe.apply(null,arguments)}var Ee={container:{display:"flex",alignItems:"center"},sourceChip:{marginRight:7},targetChip:{marginLeft:7,marginRight:7}},un={center:rn,justify:Pt,start:en,end:tn},fn=function(e){return un[e]},A={layout:"horizontal",align:"center",sort:"auto",colors:{scheme:"nivo"},nodeOpacity:.75,nodeHoverOpacity:1,nodeHoverOthersOpacity:.15,nodeThickness:12,nodeInnerPadding:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:0,linkOpacity:.25,linkHoverOpacity:.6,linkHoverOthersOpacity:.15,linkContract:0,linkBlendMode:"multiply",enableLinkGradient:!1,enableLabels:!0,label:"id",labelPosition:"inside",labelPadding:9,labelOrientation:"horizontal",labelTextColor:{from:"color",modifiers:[["darker",.8]]},labelComponent:Lr,isInteractive:!0,nodeTooltip:function(e){var r=e.node;return n.jsx(ct,{id:r.label,enableChip:!0,color:r.color})},linkTooltip:function(e){var r=e.link;return n.jsx(ct,{id:n.jsxs("span",{style:Ee.container,children:[n.jsx(dt,{color:r.source.color,style:Ee.sourceChip}),n.jsx("strong",{children:r.source.label})," > ",n.jsx("strong",{children:r.target.label}),n.jsx(dt,{color:r.target.color,style:Ee.targetChip}),n.jsx("strong",{children:r.formattedValue})]})})},legends:[],layers:["links","nodes","labels","legends"],role:"img",animate:!0,motionConfig:"gentle"},hn=function(e){return e.id},pn=function(e){var r=e.data,i=e.valueFormat,l=e.layout,o=e.width,x=e.height,h=e.sort,v=e.align,D=e.colors,u=e.nodeThickness,b=e.nodeSpacing,S=e.nodeInnerPadding,y=e.nodeBorderColor,P=e.label,d=e.labelTextColor,R=k.useState(null),T=R[0],C=R[1],L=k.useState(null),m=L[0],c=L[1],I=k.useMemo((function(){if(h!=="auto")return h==="input"?null:h==="ascending"?function(s,a){return s.value-a.value}:h==="descending"?function(s,a){return a.value-s.value}:h}),[h]),f=h==="input"?null:void 0,j=k.useMemo((function(){return typeof v=="function"?v:fn(v)}),[v]),M=jt(),N=Pr(D,"id"),E=st(y,M),K=Mr(P),Q=st(d,M),ee=Dr(i),Z=k.useMemo((function(){return(function(s){var a=s.data,O=s.formatValue,z=s.layout,G=s.alignFunction,W=s.sortFunction,H=s.linkSortMode,Y=s.nodeThickness,w=s.nodeSpacing,F=s.nodeInnerPadding,X=s.width,fe=s.height,he=s.getColor,be=s.getLabel,pe=sn().nodeAlign(G).nodeSort(W).linkSort(H).nodeWidth(Y).nodePadding(w).size(z==="horizontal"?[X,fe]:[fe,X]).nodeId(hn),ie=dn(a);return pe(ie),ie.nodes.forEach((function(B){if(B.color=he(B),B.label=be(B),B.formattedValue=O(B.value),z==="horizontal")B.x=B.x0+F,B.y=B.y0,B.width=Math.max(B.x1-B.x0-2*F,0),B.height=Math.max(B.y1-B.y0,0);else{B.x=B.y0,B.y=B.x0+F,B.width=Math.max(B.y1-B.y0,0),B.height=Math.max(B.x1-B.x0-2*F,0);var Ce=B.x0,ge=B.x1;B.x0=B.y0,B.x1=B.y1,B.y0=Ce,B.y1=ge}})),ie.links.forEach((function(B){B.formattedValue=O(B.value),B.color=B.source.color,B.pos0=B.y0,B.pos1=B.y1,B.thickness=B.width,delete B.y0,delete B.y1,delete B.width})),ie})({data:r,formatValue:ee,layout:l,alignFunction:j,sortFunction:I,linkSortMode:f,nodeThickness:u,nodeSpacing:b,nodeInnerPadding:S,width:o,height:x,getColor:N,getLabel:K})}),[r,ee,l,j,I,f,u,b,S,o,x,N,K]),t=Z.nodes,p=Z.links,g=k.useMemo((function(){return t.map((function(s){return{id:s.id,label:s.label,color:s.color}}))}),[t]);return{nodes:t,links:p,legendData:g,getNodeBorderColor:E,currentNode:T,setCurrentNode:C,currentLink:m,setCurrentLink:c,getLabelTextColor:Q}},gn=function(e){var r=e.node,i=e.x,l=e.y,o=e.width,x=e.height,h=e.color,v=e.opacity,D=e.borderWidth,u=e.borderColor,b=e.borderRadius,S=e.setCurrent,y=e.isInteractive,P=e.onClick,d=e.tooltip,R=He(),T=R.animate,C=R.config,L=wt({x:i,y:l,width:o,height:x,opacity:v,color:h,config:C,immediate:!T}),m=Lt(),c=m.showTooltipFromEvent,I=m.hideTooltip,f=k.useCallback((function(E){S(r),c(k.createElement(d,{node:r}),E,"left")}),[S,r,c,d]),j=k.useCallback((function(E){c(k.createElement(d,{node:r}),E,"left")}),[c,r,d]),M=k.useCallback((function(){S(null),I()}),[S,I]),N=k.useCallback((function(E){P==null||P(r,E)}),[P,r]);return n.jsx(Ot.rect,{x:L.x,y:L.y,rx:b,ry:b,width:L.width.to((function(E){return Math.max(E,0)})),height:L.height.to((function(E){return Math.max(E,0)})),fill:L.color,fillOpacity:L.opacity,strokeWidth:D,stroke:u,strokeOpacity:v,onMouseEnter:y?f:void 0,onMouseMove:y?j:void 0,onMouseLeave:y?M:void 0,onClick:y?N:void 0})},mn=function(e){var r=e.nodes,i=e.nodeOpacity,l=e.nodeHoverOpacity,o=e.nodeHoverOthersOpacity,x=e.borderWidth,h=e.getBorderColor,v=e.borderRadius,D=e.setCurrentNode,u=e.currentNode,b=e.currentLink,S=e.isCurrentNode,y=e.isInteractive,P=e.onClick,d=e.tooltip,R=function(T){return u||b?S(T)?l:o:i};return n.jsx(n.Fragment,{children:r.map((function(T){return n.jsx(gn,{node:T,x:T.x,y:T.y,width:T.width,height:T.height,color:T.color,opacity:R(T),borderWidth:x,borderColor:h(T),borderRadius:v,setCurrent:D,isInteractive:y,onClick:P,tooltip:d},T.id)}))})},kn=function(e){var r=e.id,i=e.layout,l=e.startColor,o=e.endColor;return n.jsxs("linearGradient",oe({id:r,spreadMethod:"pad"},i==="horizontal"?{x1:"0%",x2:"100%",y1:"0%",y2:"0%"}:{x1:"0%",x2:"0%",y1:"0%",y2:"100%"},{children:[n.jsx("stop",{offset:"0%",stopColor:l}),n.jsx("stop",{offset:"100%",stopColor:o})]}))},xn=function(e){var r=e.link,i=e.layout,l=e.path,o=e.color,x=e.opacity,h=e.blendMode,v=e.enableGradient,D=e.setCurrent,u=e.tooltip,b=e.isInteractive,S=e.onClick,y=r.source.id+"."+r.target.id+"."+r.index,P=He(),d=P.animate,R=P.config,T=Ir(l),C=wt({color:o,opacity:x,config:R,immediate:!d}),L=Lt(),m=L.showTooltipFromEvent,c=L.hideTooltip,I=k.useCallback((function(N){D(r),m(k.createElement(u,{link:r}),N,"left")}),[D,r,m,u]),f=k.useCallback((function(N){m(k.createElement(u,{link:r}),N,"left")}),[m,r,u]),j=k.useCallback((function(){D(null),c()}),[D,c]),M=k.useCallback((function(N){S==null||S(r,N)}),[S,r]);return n.jsxs(n.Fragment,{children:[v&&n.jsx(kn,{id:y,layout:i,startColor:r.startColor||r.source.color,endColor:r.endColor||r.target.color}),n.jsx(Ot.path,{fill:v?'url("#'+encodeURI(y)+'")':C.color,d:T,fillOpacity:C.opacity,onMouseEnter:b?I:void 0,onMouseMove:b?f:void 0,onMouseLeave:b?j:void 0,onClick:b?M:void 0,style:{mixBlendMode:h}})]})},yn=function(e){var r=e.links,i=e.layout,l=e.linkOpacity,o=e.linkHoverOpacity,x=e.linkHoverOthersOpacity,h=e.linkContract,v=e.linkBlendMode,D=e.enableLinkGradient,u=e.setCurrentLink,b=e.currentLink,S=e.currentNode,y=e.isCurrentLink,P=e.isInteractive,d=e.onClick,R=e.tooltip,T=function(L){return S||b?y(L)?o:x:l},C=k.useMemo((function(){return i==="horizontal"?(L=at().curve(zr),function(m,c){var I=Math.max(1,m.thickness-2*c)/2,f=.12*(m.target.x0-m.source.x1),j=[[m.source.x1,m.pos0-I],[m.source.x1+f,m.pos0-I],[m.target.x0-f,m.pos1-I],[m.target.x0,m.pos1-I],[m.target.x0,m.pos1+I],[m.target.x0-f,m.pos1+I],[m.source.x1+f,m.pos0+I],[m.source.x1,m.pos0+I],[m.source.x1,m.pos0-I]];return L(j)+"Z"}):(function(){var m=at().curve(Fr);return function(c,I){var f=Math.max(1,c.thickness-2*I)/2,j=.12*(c.target.y0-c.source.y1),M=[[c.pos0+f,c.source.y1],[c.pos0+f,c.source.y1+j],[c.pos1+f,c.target.y0-j],[c.pos1+f,c.target.y0],[c.pos1-f,c.target.y0],[c.pos1-f,c.target.y0-j],[c.pos0-f,c.source.y1+j],[c.pos0-f,c.source.y1],[c.pos0+f,c.source.y1]];return m(M)+"Z"}})();var L}),[i]);return n.jsx(n.Fragment,{children:r.map((function(L){return n.jsx(xn,{link:L,layout:i,path:C(L,h),color:L.color,opacity:T(L),blendMode:v,enableGradient:D,setCurrent:u,isInteractive:P,onClick:d,tooltip:R},L.source.id+"."+L.target.id+"."+L.index)}))})},vn=function(e){var r=e.nodes,i=e.layout,l=e.width,o=e.height,x=e.labelPosition,h=e.labelPadding,v=e.labelOrientation,D=e.getLabelTextColor,u=e.labelComponent,b=jt(),S=v==="vertical"?-90:0,y=r.map((function(C){var L,m,c;return i==="horizontal"?(m=C.y+C.height/2,C.x<l/2?x==="inside"?(L=C.x1+h,c=v==="vertical"?"middle":"start"):(L=C.x-h,c=v==="vertical"?"middle":"end"):x==="inside"?(L=C.x-h,c=v==="vertical"?"middle":"end"):(L=C.x1+h,c=v==="vertical"?"middle":"start")):i==="vertical"&&(L=C.x+C.width/2,C.y<o/2?x==="inside"?(m=C.y1+h,c=v==="vertical"?"end":"middle"):(m=C.y-h,c=v==="vertical"?"start":"middle"):x==="inside"?(m=C.y-h,c=v==="vertical"?"start":"middle"):(m=C.y1+h,c=v==="vertical"?"end":"middle")),{id:C.id,label:C.label,x:L,y:m,textAnchor:c,color:D(C)}})),P=He(),d=P.animate,R=P.config,T=Tr(y.length,y.map((function(C){return{transform:"translate("+C.x+", "+C.y+") rotate("+S+")",color:C.color,config:R,immediate:!d}})));return n.jsx(n.Fragment,{children:T.map((function(C,L){var m=y[L];return n.jsx(u,{dominantBaseline:"central",textAnchor:m.textAnchor,transform:C.transform,style:oe({},b.labels.text,{fill:C.color,pointerEvents:"none"}),node:r[L],children:m.label},m.id)}))})},bn=["isInteractive","animate","motionConfig","theme","renderWrapper"],Cn=function(e){var r=e.data,i=e.valueFormat,l=e.layout,o=l===void 0?A.layout:l,x=e.sort,h=x===void 0?A.sort:x,v=e.align,D=v===void 0?A.align:v,u=e.width,b=e.height,S=e.margin,y=e.colors,P=y===void 0?A.colors:y,d=e.nodeThickness,R=d===void 0?A.nodeThickness:d,T=e.nodeSpacing,C=T===void 0?A.nodeThickness:T,L=e.nodeInnerPadding,m=L===void 0?A.nodeInnerPadding:L,c=e.nodeBorderColor,I=c===void 0?A.nodeBorderColor:c,f=e.nodeOpacity,j=f===void 0?A.nodeOpacity:f,M=e.nodeHoverOpacity,N=M===void 0?A.nodeHoverOpacity:M,E=e.nodeHoverOthersOpacity,K=E===void 0?A.nodeHoverOthersOpacity:E,Q=e.nodeBorderWidth,ee=Q===void 0?A.nodeBorderWidth:Q,Z=e.nodeBorderRadius,t=Z===void 0?A.nodeBorderRadius:Z,p=e.linkOpacity,g=p===void 0?A.linkOpacity:p,s=e.linkHoverOpacity,a=s===void 0?A.linkHoverOpacity:s,O=e.linkHoverOthersOpacity,z=O===void 0?A.linkHoverOthersOpacity:O,G=e.linkContract,W=G===void 0?A.linkContract:G,H=e.linkBlendMode,Y=H===void 0?A.linkBlendMode:H,w=e.enableLinkGradient,F=w===void 0?A.enableLinkGradient:w,X=e.enableLabels,fe=X===void 0?A.enableLabels:X,he=e.labelComponent,be=he===void 0?A.labelComponent:he,pe=e.labelPosition,ie=pe===void 0?A.labelPosition:pe,B=e.labelPadding,Ce=B===void 0?A.labelPadding:B,ge=e.labelOrientation,Mt=ge===void 0?A.labelOrientation:ge,Ge=e.label,Dt=Ge===void 0?A.label:Ge,Ve=e.labelTextColor,Tt=Ve===void 0?A.labelTextColor:Ve,Ye=e.nodeTooltip,It=Ye===void 0?A.nodeTooltip:Ye,$e=e.linkTooltip,At=$e===void 0?A.linkTooltip:$e,qe=e.isInteractive,me=qe===void 0?A.isInteractive:qe,Ke=e.onClick,Qe=e.legends,zt=Qe===void 0?A.legends:Qe,Ze=e.layers,ae=Ze===void 0?A.layers:Ze,Xe=e.role,Ft=Xe===void 0?A.role:Xe,Rt=e.ariaLabel,Et=e.ariaLabelledBy,Nt=e.ariaDescribedBy,Ut=e.forwardedRef,ce=wr(u,b,S),Be=ce.margin,je=ce.innerWidth,we=ce.innerHeight,Le=ce.outerWidth,Oe=ce.outerHeight,J=pn({data:r,valueFormat:i,layout:o,width:je,height:we,sort:h,align:D,colors:P,nodeThickness:R,nodeSpacing:C,nodeInnerPadding:m,nodeBorderColor:I,label:Dt,labelTextColor:Tt}),ke=J.nodes,de=J.links,Wt=J.legendData,Ht=J.getNodeBorderColor,$=J.currentNode,Se=J.setCurrentNode,q=J.currentLink,Pe=J.setCurrentLink,Gt=J.getLabelTextColor,Je=k.useMemo((function(){var _=function(){return!1},re=function(){return!1};if(q&&(_=function(U){var V=U.id;return V===q.source.id||V===q.target.id},re=function(U){var V=U.source,ne=U.target;return V.id===q.source.id&&ne.id===q.target.id}),$){var te=[$.id];de.filter((function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id})).forEach((function(U){var V=U.source,ne=U.target;te.push(V.id),te.push(ne.id)})),te=Cr(te),_=function(U){var V=U.id;return te.includes(V)},re=function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id}}return{isCurrentNode:_,isCurrentLink:re}}),[q,$,de]),Me=Je.isCurrentNode,De=Je.isCurrentLink,Vt=k.useMemo((function(){return{links:de,nodes:ke,margin:Be,width:u,height:b,outerWidth:Le,outerHeight:Oe,currentNode:$,isCurrentNode:Me,setCurrentNode:Se,currentLink:q,isCurrentLink:De,setCurrentLink:Pe,isInteractive:me}}),[de,ke,Be,u,b,Le,Oe,$,Me,Se,q,De,Pe,me]),le={links:null,nodes:null,labels:null,legends:null};return ae.includes("links")&&(le.links=n.jsx(yn,{links:de,layout:o,linkContract:W,linkOpacity:g,linkHoverOpacity:a,linkHoverOthersOpacity:z,linkBlendMode:Y,enableLinkGradient:F,setCurrentLink:Pe,currentNode:$,currentLink:q,isCurrentLink:De,isInteractive:me,onClick:Ke,tooltip:At},"links")),ae.includes("nodes")&&(le.nodes=n.jsx(mn,{nodes:ke,nodeOpacity:j,nodeHoverOpacity:N,nodeHoverOthersOpacity:K,borderWidth:ee,borderRadius:t,getBorderColor:Ht,setCurrentNode:Se,currentNode:$,currentLink:q,isCurrentNode:Me,isInteractive:me,onClick:Ke,tooltip:It},"nodes")),ae.includes("labels")&&fe&&(le.labels=n.jsx(vn,{nodes:ke,layout:o,width:je,height:we,labelPosition:ie,labelPadding:Ce,labelOrientation:Mt,getLabelTextColor:Gt,labelComponent:be},"labels")),ae.includes("legends")&&(le.legends=n.jsx(k.Fragment,{children:zt.map((function(_,re){return n.jsx(Or,oe({},_,{containerWidth:je,containerHeight:we,data:Wt}),"legend"+re)}))},"legends")),n.jsx(Sr,{width:Le,height:Oe,margin:Be,role:Ft,ariaLabel:Rt,ariaLabelledBy:Et,ariaDescribedBy:Nt,ref:Ut,children:ae.map((function(_,re){var te;return typeof _=="function"?n.jsx(k.Fragment,{children:k.createElement(_,Vt)},re):(te=le==null?void 0:le[_])!=null?te:null}))})},Bn=k.forwardRef((function(e,r){var i=e.isInteractive,l=i===void 0?A.isInteractive:i,o=e.animate,x=o===void 0?A.animate:o,h=e.motionConfig,v=h===void 0?A.motionConfig:h,D=e.theme,u=e.renderWrapper,b=(function(S,y){if(S==null)return{};var P={};for(var d in S)if({}.hasOwnProperty.call(S,d)){if(y.indexOf(d)!==-1)continue;P[d]=S[d]}return P})(e,bn);return n.jsx(jr,{animate:x,isInteractive:l,motionConfig:v,renderWrapper:u,theme:D,children:n.jsx(Cn,oe({isInteractive:l},b,{forwardedRef:r}))})})),jn=function(e,r){return n.jsx(Br,{children:function(i){var l=i.width,o=i.height;return n.jsx(Bn,oe({width:l,height:o},e,{ref:r}))}})},wn=k.forwardRef(jn);const Ln=[{id:"White",group:1,total:430},{id:"Yellow",group:1,total:749},{id:"Orange",group:1,total:1204},{id:"Green",group:1,total:609},{id:"Blue",group:1,total:243},{id:"Purple",group:1,total:123},{id:"Brown",group:1,total:81},{id:"Red",group:1,total:70},{id:"Black",group:1,total:169}],On=[{source:"White",target:"Yellow",value:533},{source:"White",target:"Orange",value:119},{source:"White",target:"Green",value:13},{source:"White",target:"Blue",value:4},{source:"White",target:"Purple",value:3},{source:"White",target:"Brown",value:1},{source:"White",target:"Red",value:1},{source:"Yellow",target:"Orange",value:728},{source:"Yellow",target:"Green",value:82},{source:"Yellow",target:"Blue",value:9},{source:"Yellow",target:"Purple",value:1},{source:"Yellow",target:"Red",value:1},{source:"Orange",target:"Green",value:512},{source:"Orange",target:"Blue",value:28},{source:"Orange",target:"Purple",value:3},{source:"Orange",target:"Black",value:2},{source:"Green",target:"Blue",value:337},{source:"Green",target:"Purple",value:41},{source:"Green",target:"Brown",value:10},{source:"Green",target:"Red",value:7},{source:"Green",target:"Black",value:4},{source:"Blue",target:"Purple",value:194},{source:"Blue",target:"Brown",value:27},{source:"Blue",target:"Red",value:6},{source:"Blue",target:"Black",value:9},{source:"Purple",target:"Brown",value:146},{source:"Purple",target:"Red",value:15},{source:"Purple",target:"Black",value:10},{source:"Brown",target:"Red",value:117},{source:"Brown",target:"Black",value:12},{source:"Red",target:"Black",value:98}],Ne={nodes:Ln,links:On};function Sn(){const[e,r]=k.useState(Ne),[i,l]=k.useState(Ae),[o,x]=k.useState(void 0),h=Pn(),v=k.useCallback(()=>{r(Ne),l(Ae),x(void 0)},[]),D=k.useCallback(u=>{if(h||!u.label||u.label==="White"||u.label==="Black")return;if(u.label===o){v();return}const{nodes:b,links:S}={...Ne},y=Ue.indexOf(u.label),P=Ue.slice(0,y),d=b.filter(C=>!P.includes(C.id)),R=S.filter(C=>!P.includes(C.source)&&!P.includes(C.target)),T=Ae.slice(y);r({nodes:d,links:R}),l(T),x(u.label)},[o,v,h]);return n.jsxs(ve.Fragment,{children:[n.jsx("div",{style:{textAlign:"center",height:20,marginBottom:5,fontSize:"0.9rem"},children:o&&n.jsx(se,{onClick:v,style:{color:"#ddd",cursor:"pointer"},children:"Reset"})||n.jsx("span",{children:"Click belt for details"})}),n.jsx("div",{style:{height:600},children:n.jsx(wn,{data:e,layout:"vertical",sort:"input",margin:{top:10,right:10,bottom:20,left:10},align:"center",colors:i,nodeOpacity:1,nodeHoverOthersOpacity:.2,nodeThickness:22,nodeInnerPadding:0,nodeSpacing:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:3,linkOpacity:.6,linkBlendMode:"normal",linkHoverOthersOpacity:.1,linkContract:-.5,enableLinkGradient:!1,labelPosition:"outside",labelOrientation:"horizontal",labelPadding:-10,labelTextColor:{from:"color",modifiers:[["brighter",5]]},onClick:u=>{D(u)},nodeTooltip:({node:u})=>n.jsx("div",{style:{fontSize:"0.8rem",background:"#444",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:n.jsxs("strong",{children:[u.label,": ",u.total]})}),linkTooltip:({link:u})=>n.jsxs("div",{style:{fontSize:"0.8rem",background:"#666",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:[n.jsx("strong",{children:u.source.label})," to ",n.jsx("strong",{children:u.target.label}),"Â (",u.value,")"]})})})]})}function Pn(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function Mn({data:e}){const{width:r}=bt(),l=r<560?"8px 8px 32px 8px":"24px 24px 32px 24px",o={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},x={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return n.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:l,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[n.jsxs("div",{style:x,role:"heading","aria-label":"User Belt Flows",children:["User Belt Flows",n.jsx("div",{style:{fontSize:"0.9rem",fontWeight:400},children:"Discord users since Nov. 2019"})]}),n.jsx(Sn,{}),n.jsx("div",{style:o,role:"heading","aria-label":"User Drilldown",children:"User Drilldown"}),n.jsx(Zr,{data:e}),n.jsx("div",{style:o,role:"heading",children:"Scorecard Locks"}),n.jsx(Jr,{data:e})]})}const Dn=(e,r)=>{if(!e||Object.keys(e).length===0)return r;if(!r||r.length===0)return[];const i=(o,x)=>{const h=String(x??""),v=h.startsWith("!"),D=v?h.slice(1):h,u=D.includes("||"),b=!u&&D.includes("@@"),S=u?"||":b?"@@":null,y=S?D.split(S).filter(Boolean):[D].filter(Boolean);return{key:o,values:y,negative:v,operator:u?"OR":"AND"}},l=Object.keys(e).map(o=>{const x=e[o];return Array.isArray(x)?x.map(h=>i(o,h)):i(o,x)}).flat();return r.filter(o=>l.every(({key:x,values:h,negative:v,operator:D})=>{const u=o[x],b=d=>Array.isArray(u)?u.includes(d):u===d,S=h.some(d=>b(d)),y=h.every(d=>b(d)),P=D==="OR"?S:y;return v?!P:P}))};function Tn({children:e,allEntries:r,scorecardEntries:i,profile:l}){const{filters:o}=k.useContext(We),{search:x,id:h,tab:v,name:D,sort:u,image:b,expandAll:S,dataset:y,...P}=o,{userBelt:d}=P,R=k.useCallback(m=>r.find(c=>c.id===m),[r]),T=k.useMemo(()=>Object.keys(i).map(m=>{var I,f,j;const c=R(m);return c?{...i[m],userBelt:Object.keys(i[m].scorecardPicks),currentPicks:i[m].scorecardPicks[d||"All Belts"],...c,makes:c.makeModels[0].make?c.makeModels.map(({make:M})=>M):c.makeModels[0].model,fuzzy:rt(c.makeModels.map(({make:M,model:N})=>[M,N]).flat().filter(M=>M).concat([c.version,c.notes,c.belt]).join(",")),content:[(I=c.media)!=null&&I.some(M=>!M.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(f=c.media)!=null&&f.some(M=>M.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((j=c.links)==null?void 0:j.length)>0?"Has Links":"No Links",Qt[c.belt].danPoints>0?"Worth Dan Points":void 0,tt(c.lastUpdated).isAfter(tt().subtract(1,"days"))?"Updated Recently":void 0,c.belt.startsWith("Black")?"Is Black":void 0,c.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(M=>M),collection:Kt.locks.map.map(M=>l&&l[M.key]&&l[M.key].includes(c.id)?M.label:"Not "+M.label),collectionSaves:Er[c.id]||0,simpleBelt:c.belt.replace(/\s\d/g,"")}:null}).filter(m=>m),[R,l,i,d]),C=k.useMemo(()=>{const m=Dn(P,T),c=x&&m.find(f=>f.id===x);let I=m;return c?I=[c]:x&&(I=hr.go(rt(x),m,{keys:In,threshold:-25e3}).map(f=>({...f.obj,score:f.score}))),u?I.sort((f,j)=>{if(u==="beltAscending")return Zt(f.belt,j.belt)||j.currentPicks-f.currentPicks||f.fuzzy.localeCompare(j.fuzzy);if(u==="beltDescending")return Xt(f.belt,j.belt)||j.currentPicks-f.currentPicks||f.fuzzy.localeCompare(j.fuzzy);if(u==="alphaAscending")return f.fuzzy.localeCompare(j.fuzzy);if(u==="alphaDescending")return j.fuzzy.localeCompare(f.fuzzy)}):I.sort((f,j)=>j.currentPicks-f.currentPicks||f.fuzzy.localeCompare(j.fuzzy)).map((f,j)=>({...f,displayRank:j+1}))},[P,T,x,u]),L=k.useMemo(()=>({allEntries:r,visibleEntries:C,getEntryFromId:R,expandAll:S,profile:l}),[r,R,C,S,l]);return n.jsx(Ct.Provider,{value:L,children:e})}const In=["fuzzy"];function Co(){const{lockCollection:e}=k.useContext(Jt);lr("Explore Scorecard");const{data:r,loading:i,error:l,errorMessage:o}=ir({urls:An});return n.jsxs(ve.Fragment,{children:[n.jsx(_t,{title:"Explore Scorecard"}),l&&n.jsx(ur,{errorMessage:o}),i&&n.jsx(or,{}),!i&&!l&&!!r&&n.jsx(er,{filterFields:Rr,children:n.jsx(Tn,{allEntries:tr,scorecardEntries:r.scorecardStats.lockCountsByUserBelt,profile:e,children:n.jsx(Mn,{data:{...r,lockStats:dr}})})}),n.jsx(rr,{}),n.jsx(nr,{feature:"stats"})]})}const An={brandDistribution:qr,collectionsStatsCurrent:$r,popularAreas:Yr,redditGrowth:Vr,siteFullNew:Gr,pickStatsData:Hr,scorecardStats:Wr,discordBeltCounts:Ur,redditBeltCounts:Nr};export{Co as default};
