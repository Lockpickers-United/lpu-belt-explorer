import{r as n,A as R,I as $,b as z,u as D,j as e,aa as F,ab as W,Q as A,as as J,B as L,X as y,d as O,R as P,W as E,U,aj as V,ak as k,at as b,a4 as g}from"./index-VHPGETNz.js";import{m as q}from"./mycollection-Dqx3MeiB.js";import{B as G}from"./Box-lyMzqLHd.js";import{d as S,F as I,C as H}from"./download-CzjR8NyE.js";import{L as Q}from"./List-CahrTrgV.js";import{e as w}from"./entryName-CaCbdsQ6.js";import{C as X}from"./ContentCopy-CV34kLD1.js";import{D as K}from"./DataContext-DutyMEYg.js";import"./index-CV_Ulnjh.js";function ae({collectionType:c}){const{user:d}=n.useContext(R),{userId:r}=$(),x=z(),{isMobile:C}=D(),v=C?{marginTop:20,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:20,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},m=r===(d==null?void 0:d.uid),t=m?e.jsx("div",{style:{width:"100%",display:"flex",placeItems:"center"},children:e.jsxs("div",{style:{fontSize:"1.0rem",fontWeight:400,width:400,marginLeft:"auto",marginRight:"auto"},children:[e.jsx("strong",{children:"There are no locks in your Scorecard."}),e.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you have picked and recorded.',e.jsx("br",{}),e.jsx("br",{}),e.jsx("img",{alt:"My Collection",src:q})]})}):"There are no locks in this collection.",a=m?c==="safelocks"?"Explore Safe Locks":"Explore Locks":"Go Home",i=n.useCallback(()=>{x(c==="safelocks"?"/safelocks":"/locks")},[x,c]);return e.jsx(G,{alignContent:"center",children:e.jsxs(F,{style:v,children:[e.jsx(W,{children:e.jsx(A,{variant:"h6",align:"center",children:t})}),e.jsxs(J,{children:[e.jsx("div",{style:{width:"100%"}}),e.jsx(L,{variant:"outlined",color:"secondary",onClick:i,style:{whiteSpace:"nowrap",padding:"10px 30px",margin:10},children:a})]})]})})}function ie({text:c,profile:d={},filename:r="scorecardData"}){const[x,C]=n.useState(null),v=!!x,m=n.useCallback(l=>C(l.currentTarget),[]),t=n.useCallback(()=>C(null),[]),{visibleEntries:a=[]}=n.useContext(K),i=n.useMemo(()=>d.userLockNotes||{},[d.userLockNotes]),M=n.useCallback(()=>{const l=a.map(s=>({...s,personalNotes:i[s.matchId]||i[s.id]||""})),j=JSON.stringify(l);t(),S(`${r}.json`,j),y(`Current entries downloaded as ${r}.json`)},[r,t,i,a]),T=n.useCallback(()=>{const j=a.map(s=>({id:s.id,make:s.makeModels.map(u=>u.make).join(","),model:s.makeModels.map(u=>u.model).join(","),version:s.version,belt:s.belt,name:w(s),versionText:s.version?" ("+s.version+")":""})).map(s=>"* "+s.name+s.versionText).join(`
`);t(),navigator.clipboard.writeText(j).then(),y("Current entries copied to clipboard.")},[t,a]),N=n.useCallback(()=>{const l=["id","name","version","belt","modifier","points","date","link","notes"],j=a.map(o=>{var h,p;return{id:o.matchId,make:(h=o.makeModels)==null?void 0:h.map(f=>f.make).join(","),model:(p=o.makeModels)==null?void 0:p.map(f=>f.model).join(","),version:o.version,belt:o.belt,link:o.link,modifier:o.evidenceModifier,points:o.points,date:o.date?O(o.date).format("L"):"",name:w(o),notes:i[o.matchId]||i[o.id]||""}}),s=l.join(","),u=j.map(o=>l.map(h=>o[h]).map(h=>{const p=`${h??""}`.replace(/"/g,'""');return/(\s|,|")/.test(p)?`"${p}"`:p}).join(",")).join(`
`),B=`${s}
${u}`;t(),S(`${r}.csv`,B),y(`Current entries downloaded as ${r}.csv`)},[r,t,i,a]);return e.jsxs(P.Fragment,{children:[c?e.jsx(E,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(L,{variant:"outlined",size:"small",onClick:m,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(I,{}),children:"Export"})}):e.jsx(E,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(U,{onClick:m,children:e.jsx(I,{})})}),e.jsxs(V,{anchorEl:x,open:v,onClose:t,children:[!c&&e.jsxs(k,{disabled:!0,children:[e.jsx(b,{children:e.jsx(I,{fontSize:"small"})}),e.jsx(g,{children:"Export"})]}),e.jsxs(k,{onClick:T,children:[e.jsx(b,{children:e.jsx(X,{fontSize:"small"})}),e.jsx(g,{children:"Copy to clipboard"})]}),e.jsxs(k,{onClick:N,children:[e.jsx(b,{children:e.jsx(Q,{fontSize:"small"})}),e.jsx(g,{children:"CSV"})]}),e.jsxs(k,{onClick:M,children:[e.jsx(b,{children:e.jsx(H,{fontSize:"small"})}),e.jsx(g,{children:"JSON"})]})]})]})}export{ae as N,ie as S};
