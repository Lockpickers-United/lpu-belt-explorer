import{am as m,r as s,a0 as h,u as f,j as t,T as P,I as b,an as E,R as x,C as g,c as j,b as C,f as L,B as v,a3 as T,Q as w,U as B,V as F,W as R}from"./index-d15059df.js";import{m as I,L as D,D as S,I as M,C as N,E as W,n as A,k as H,h as U,T as V,i as q,j as z,l as G}from"./FilterButton-8157af90.js";import{C as O}from"./CopyProfileLinkButton-173d646f.js";import{u as Q}from"./useWindowSize-2598a484.js";import{l as _}from"./LPU-c3fa7122.js";import{L as J}from"./LinearProgress-cdac8ac1.js";import"./InputLabel-44170ff5.js";import"./SwitchBase-83401548.js";import"./ImageViewer-fad3fe1f.js";import"./Link-d42b6687.js";import"./Chip-18cb27d8.js";import"./index-a0bb3c9b.js";import"./index-87442456.js";import"./dayjs.min-70c993cc.js";import"./Badge-56b17561.js";function K(){const{userId:e}=m(),{user:o}=s.useContext(h),n=f(),i=s.useCallback(()=>{n("/profile/edit")},[n]);return e!==(o==null?void 0:o.uid)?null:t.jsx(P,{title:"Edit Profile",arrow:!0,disableFocusListener:!0,children:t.jsx(b,{onClick:i,children:t.jsx(E,{})})})}const X="/assets/mycollection-8a0b4848.png";function Y(){const{user:e}=s.useContext(h),{userId:o}=m(),n=f(),{isMobile:i}=Q(),a=i?{marginTop:-32,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:-32,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},c=o===(e==null?void 0:e.uid),r=c?t.jsxs(x.Fragment,{children:[t.jsxs("span",{children:["There are no locks in your collection.",t.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you own, picked, recorded, or wish to buy.',t.jsx("br",{})]}),t.jsx("img",{alt:"My Collection",src:X})]}):"There are no locks in this collection.",d=c?"Explore":"Go Home",u=s.useCallback(()=>{n("/locks")},[n]);return t.jsx(I,{alignContent:"center",children:t.jsxs(g,{style:a,children:[t.jsx(j,{children:t.jsx(C,{variant:"h6",align:"center",children:r})}),t.jsxs(L,{children:[t.jsx("div",{style:{width:"100%"}}),t.jsx(v,{variant:"outlined",color:"secondary",onClick:u,style:{whiteSpace:"nowrap"},children:d})]})]})})}function Z(){const e={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(g,{style:e,children:[t.jsx(T,{title:"Profile Not Found!"}),t.jsx(j,{children:t.jsx(C,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function $({profile:e}){const{compact:o,expanded:n,setExpanded:i}=s.useContext(D),{visibleEntries:a=[]}=s.useContext(S),c=s.useDeferredValue(n);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(M,{profile:e}),o?t.jsx(N,{entries:a}):a.map(r=>t.jsx(W,{entry:r,expanded:r.id===c,onExpand:i},r.id))]})}function ht(){const[e,o]=s.useState({}),{userId:n}=m(),{getProfile:i}=s.useContext(w),[a,c]=s.useState(!0),[r,d]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const l=await i(n);o(l),d(!1)}catch(l){console.trace("Error loading profile",l),o({}),d(!0)}finally{c(!1)}})()},[n,i]);const u=s.useMemo(()=>{const p=new Set(A.flatMap(({key:l})=>e[l]));return H.filter(l=>p.has(l.id))},[e]),y=t.jsxs(x.Fragment,{children:[t.jsx(U,{}),t.jsx(V,{}),t.jsx(K,{}),t.jsx(O,{})]}),k=a?"Loading...":"Profile";return t.jsx(x.Fragment,{children:t.jsx(q,{children:t.jsx(z,{allEntries:u,profile:e,children:t.jsxs(G,{children:[t.jsx(B,{title:k,extras:y}),a&&t.jsxs(x.Fragment,{children:[t.jsx(J,{variant:"indeterminate",color:"secondary"}),t.jsx("img",{alt:"Loading",src:_,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),!a&&e&&!r&&t.jsx($,{profile:e}),!a&&e&&!r&&u.length===0&&t.jsx(Y,{}),!a&&r&&t.jsx(Z,{}),t.jsx(F,{}),t.jsx(R,{feature:"profile"})]})})})})}export{ht as default};
