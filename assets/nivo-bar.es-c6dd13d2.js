import{_ as qt,a as Nt,D as wt,j as Kt,c as yt,q as Ct,X as Jt,z as Ut}from"./nivo-axes.es-c0d8b228.js";import{aL as pt,r as w,j as c}from"./index-e87f8ca7.js";import{_ as Zt,i as Qt,a as en,b as tn,c as nn,d as It,l as an,e as on,f as rn,g as ln,h as dn,j as sn,u as dt,k as ue,t as Wt,m as un}from"./_createSet-71fc1d31.js";import{_ as cn,a as hn}from"./_baseClone-3fd5b2fe.js";import{c as lt,R as Lt,w as Mt,l as fn,n as bn,s as gn,o as vn,E as Fe,Z as at,$ as mn,H as Ft,J as Ot,k as Rt,B as Ht,a as xn,F as bt,b as yn,G as gt,D as pn,p as kn,W as jt,A as Sn,j as wn,d as Cn,e as Wn,T as Ln,_ as Mn,X as jn}from"./nivo-legends.es-f511e2f0.js";var Vt=Array.prototype.slice;function Vn(e,a){return e[a]}function Tn(){var e=lt([]),a=Lt,i=Mt,n=Vn;function t(o){var l=e.apply(this,arguments),r,d=o.length,s=l.length,h=new Array(s),b;for(r=0;r<s;++r){for(var m=l[r],v=h[r]=new Array(d),y=0,g;y<d;++y)v[y]=g=[0,+n(o[y],m,y,o)],g.data=o[y];v.key=m}for(r=0,b=a(h);r<s;++r)h[b[r]].index=r;return i(h,b),h}return t.keys=function(o){return arguments.length?(e=typeof o=="function"?o:lt(Vt.call(o)),t):e},t.value=function(o){return arguments.length?(n=typeof o=="function"?o:lt(+o),t):n},t.order=function(o){return arguments.length?(a=o==null?Lt:typeof o=="function"?o:lt(Vt.call(o)),t):a},t.offset=function(o){return arguments.length?(i=o??Mt,t):i},t}var Bn=qt;function En(e,a){var i=[];return Bn(e,function(n,t,o){a(n,t,o)&&i.push(n)}),i}var Pn=En,In=Zt,Fn=Pn,On=Nt,Rn=Qt;function Hn(e,a){var i=Rn(e)?In:Fn;return i(e,On(a))}var _n=Hn;const zn=pt(_n);var An=en,Dn=tn,$n="[object Number]";function Xn(e){return typeof e=="number"||Dn(e)&&An(e)==$n}var Yn=Xn;const Tt=pt(Yn);function Gn(e,a,i){var n=-1,t=e.length;a<0&&(a=-a>t?0:t+a),i=i>t?t:i,i<0&&(i+=t),t=a>i?0:i-a>>>0,a>>>=0;for(var o=Array(t);++n<t;)o[n]=e[n+a];return o}var qn=Gn,Nn=nn,Kn=qn;function Jn(e,a){return a.length<2?e:Nn(e,Kn(a,0,-1))}var Un=Jn,Zn=It,Qn=an,ea=Un,ta=on;function na(e,a){return a=Zn(a,e),e=ea(e,a),e==null||delete e[ta(Qn(a))]}var aa=na,ia=rn;function oa(e){return ia(e)?void 0:e}var ra=oa,la=dn,da=hn,sa=aa,ua=It,ca=sn,ha=ra,fa=ln,ba=cn,ga=1,va=2,ma=4,xa=fa(function(e,a){var i={};if(e==null)return i;var n=!1;a=la(a,function(o){return o=ua(o,e),n||(n=o.length>1),o}),ca(e,ba(e),i),n&&(i=da(i,ga|va|ma,ha));for(var t=a.length;t--;)sa(i,a[t]);return i}),ya=xa;const _t=pt(ya);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Se.apply(this,arguments)}var mt={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},pa=function(e){var a=typeof e;return w.isValidElement(e)||a==="string"||a==="function"||a==="object"},ka=function(e){var a=typeof e;return a==="string"||a==="function"},tt=function(e){return e.type==="circle"},xt=function(e){return e.type==="dot"},nt=function(e){return e.type==="rect"},Sa=function(e){var a=e.data,i=e.annotations,n=e.getPosition,t=e.getDimensions;return i.reduce(function(o,l){var r=l.offset||0;return[].concat(o,zn(a,l.match).map(function(d){var s=n(d),h=t(d);return(tt(l)||nt(l))&&(h.size=h.size+2*r,h.width=h.width+2*r,h.height=h.height+2*r),Se({},_t(l,["match","offset"]),s,h,{size:l.size||h.size,datum:d})}))},[])},wa=function(e,a,i,n){var t=Math.atan2(n-a,i-e);return gn(vn(t))},zt=function(e){var a,i,n=e.x,t=e.y,o=e.noteX,l=e.noteY,r=e.noteWidth,d=r===void 0?mt.noteWidth:r,s=e.noteTextOffset,h=s===void 0?mt.noteTextOffset:s;if(Tt(o))a=n+o;else{if(o.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");a=o.abs}if(Tt(l))i=t+l;else{if(l.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");i=l.abs}var b=n,m=t,v=wa(n,t,a,i);if(tt(e)){var y=fn(bn(v),e.size/2);b+=y.x,m+=y.y}if(nt(e)){var g=Math.round((v+90)/45)%8;g===0&&(m-=e.height/2),g===1&&(b+=e.width/2,m-=e.height/2),g===2&&(b+=e.width/2),g===3&&(b+=e.width/2,m+=e.height/2),g===4&&(m+=e.height/2),g===5&&(b-=e.width/2,m+=e.height/2),g===6&&(b-=e.width/2),g===7&&(b-=e.width/2,m-=e.height/2)}var C=a,p=a;return(v+90)%360>180?(C-=d,p-=d):p+=d,{points:[[b,m],[a,i],[p,i]],text:[C,i-h],angle:v+90}},At=function(e){var a=e.data,i=e.annotations,n=e.getPosition,t=e.getDimensions;return w.useMemo(function(){return Sa({data:a,annotations:i,getPosition:n,getDimensions:t})},[a,i,n,t])},Ca=function(e){var a=e.annotations;return w.useMemo(function(){return a.map(function(i){return Se({},i,{computed:zt(Se({},i))})})},[a])},Wa=function(e){return w.useMemo(function(){return zt(e)},[e])},La=function(e){var a=e.datum,i=e.x,n=e.y,t=e.note,o=Fe(),l=at(),r=l.animate,d=l.config,s=dt({x:i,y:n,config:d,immediate:!r});return typeof t=="function"?w.createElement(t,{x:i,y:n,datum:a}):c.jsxs(c.Fragment,{children:[o.annotations.text.outlineWidth>0&&c.jsx(ue.text,{x:s.x,y:s.y,style:Se({},o.annotations.text,{strokeLinejoin:"round",strokeWidth:2*o.annotations.text.outlineWidth,stroke:o.annotations.text.outlineColor}),children:t}),c.jsx(ue.text,{x:s.x,y:s.y,style:_t(o.annotations.text,["outlineWidth","outlineColor"]),children:t})]})},Bt=function(e){var a=e.points,i=e.isOutline,n=i!==void 0&&i,t=Fe(),o=w.useMemo(function(){var d=a[0];return a.slice(1).reduce(function(s,h){return s+" L"+h[0]+","+h[1]},"M"+d[0]+","+d[1])},[a]),l=mn(o);if(n&&t.annotations.link.outlineWidth<=0)return null;var r=Se({},t.annotations.link);return n&&(r.strokeLinecap="square",r.strokeWidth=t.annotations.link.strokeWidth+2*t.annotations.link.outlineWidth,r.stroke=t.annotations.link.outlineColor,r.opacity=t.annotations.link.outlineOpacity),c.jsx(ue.path,{fill:"none",d:l,style:r})},Ma=function(e){var a=e.x,i=e.y,n=e.size,t=Fe(),o=at(),l=o.animate,r=o.config,d=dt({x:a,y:i,radius:n/2,config:r,immediate:!l});return c.jsxs(c.Fragment,{children:[t.annotations.outline.outlineWidth>0&&c.jsx(ue.circle,{cx:d.x,cy:d.y,r:d.radius,style:Se({},t.annotations.outline,{fill:"none",strokeWidth:t.annotations.outline.strokeWidth+2*t.annotations.outline.outlineWidth,stroke:t.annotations.outline.outlineColor,opacity:t.annotations.outline.outlineOpacity})}),c.jsx(ue.circle,{cx:d.x,cy:d.y,r:d.radius,style:t.annotations.outline})]})},ja=function(e){var a=e.x,i=e.y,n=e.size,t=n===void 0?mt.dotSize:n,o=Fe(),l=at(),r=l.animate,d=l.config,s=dt({x:a,y:i,radius:t/2,config:d,immediate:!r});return c.jsxs(c.Fragment,{children:[o.annotations.outline.outlineWidth>0&&c.jsx(ue.circle,{cx:s.x,cy:s.y,r:s.radius,style:Se({},o.annotations.outline,{fill:"none",strokeWidth:2*o.annotations.outline.outlineWidth,stroke:o.annotations.outline.outlineColor,opacity:o.annotations.outline.outlineOpacity})}),c.jsx(ue.circle,{cx:s.x,cy:s.y,r:s.radius,style:o.annotations.symbol})]})},Va=function(e){var a=e.x,i=e.y,n=e.width,t=e.height,o=e.borderRadius,l=o===void 0?6:o,r=Fe(),d=at(),s=d.animate,h=d.config,b=dt({x:a-n/2,y:i-t/2,width:n,height:t,config:h,immediate:!s});return c.jsxs(c.Fragment,{children:[r.annotations.outline.outlineWidth>0&&c.jsx(ue.rect,{x:b.x,y:b.y,rx:l,ry:l,width:b.width,height:b.height,style:Se({},r.annotations.outline,{fill:"none",strokeWidth:r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor,opacity:r.annotations.outline.outlineOpacity})}),c.jsx(ue.rect,{x:b.x,y:b.y,rx:l,ry:l,width:b.width,height:b.height,style:r.annotations.outline})]})},Ta=function(e){var a=e.datum,i=e.x,n=e.y,t=e.note,o=Wa(e);if(!pa(t))throw new Error("note should be a valid react element");return c.jsxs(c.Fragment,{children:[c.jsx(Bt,{points:o.points,isOutline:!0}),tt(e)&&c.jsx(Ma,{x:i,y:n,size:e.size}),xt(e)&&c.jsx(ja,{x:i,y:n,size:e.size}),nt(e)&&c.jsx(Va,{x:i,y:n,width:e.width,height:e.height,borderRadius:e.borderRadius}),c.jsx(Bt,{points:o.points}),c.jsx(La,{datum:a,x:o.text[0],y:o.text[1],note:t})]})},Et=function(e,a){a.forEach(function(i,n){var t=i[0],o=i[1];n===0?e.moveTo(t,o):e.lineTo(t,o)})},Ba=function(e,a){var i=a.annotations,n=a.theme;i.length!==0&&(e.save(),i.forEach(function(t){if(!ka(t.note))throw new Error("note is invalid for canvas implementation");n.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=n.annotations.link.outlineColor,e.lineWidth=n.annotations.link.strokeWidth+2*n.annotations.link.outlineWidth,e.beginPath(),Et(e,t.computed.points),e.stroke(),e.lineCap="butt"),tt(t)&&n.annotations.outline.outlineWidth>0&&(e.strokeStyle=n.annotations.outline.outlineColor,e.lineWidth=n.annotations.outline.strokeWidth+2*n.annotations.outline.outlineWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),xt(t)&&n.annotations.symbol.outlineWidth>0&&(e.strokeStyle=n.annotations.symbol.outlineColor,e.lineWidth=2*n.annotations.symbol.outlineWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),nt(t)&&n.annotations.outline.outlineWidth>0&&(e.strokeStyle=n.annotations.outline.outlineColor,e.lineWidth=n.annotations.outline.strokeWidth+2*n.annotations.outline.outlineWidth,e.beginPath(),e.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),e.stroke()),e.strokeStyle=n.annotations.link.stroke,e.lineWidth=n.annotations.link.strokeWidth,e.beginPath(),Et(e,t.computed.points),e.stroke(),tt(t)&&(e.strokeStyle=n.annotations.outline.stroke,e.lineWidth=n.annotations.outline.strokeWidth,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.stroke()),xt(t)&&(e.fillStyle=n.annotations.symbol.fill,e.beginPath(),e.arc(t.x,t.y,t.size/2,0,2*Math.PI),e.fill()),nt(t)&&(e.strokeStyle=n.annotations.outline.stroke,e.lineWidth=n.annotations.outline.strokeWidth,e.beginPath(),e.rect(t.x-t.width/2,t.y-t.height/2,t.width,t.height),e.stroke()),typeof t.note=="function"?t.note(e,{datum:t.datum,x:t.computed.text[0],y:t.computed.text[1],theme:n}):(e.font=n.annotations.text.fontSize+"px "+n.annotations.text.fontFamily,e.textAlign="left",e.textBaseline="alphabetic",e.fillStyle=n.annotations.text.fill,e.strokeStyle=n.annotations.text.outlineColor,e.lineWidth=2*n.annotations.text.outlineWidth,n.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(t.note,t.computed.text[0],t.computed.text[1]),e.lineJoin="miter"),e.fillText(t.note,t.computed.text[0],t.computed.text[1]))}),e.restore())};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},O.apply(this,arguments)}function Ue(e,a){if(e==null)return{};var i,n,t={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],a.indexOf(i)>=0||(t[i]=e[i]);return t}var Pt,Ea=function(e){var a=e.bars,i=e.annotations,n=At({data:a,annotations:i,getPosition:function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}},getDimensions:function(t){var o=t.height,l=t.width;return{width:l,height:o,size:Math.max(l,o)}}});return c.jsx(c.Fragment,{children:n.map(function(t,o){return c.jsx(Ta,O({},t),o)})})},Pa=function(e){var a=e.width,i=e.height,n=e.legends,t=e.toggleSerie;return c.jsx(c.Fragment,{children:n.map(function(o,l){var r,d=o[0],s=o[1];return c.jsx(jn,O({},d,{containerWidth:a,containerHeight:i,data:(r=d.data)!=null?r:s,toggleSerie:d.toggleSerie&&d.dataFrom==="keys"?t:void 0}),l)})})},Ia=["data"],Fa=function(e){var a,i=e.bar,n=i.data,t=Ue(i,Ia),o=e.style,l=o.borderColor,r=o.color,d=o.height,s=o.labelColor,h=o.labelOpacity,b=o.labelX,m=o.labelY,v=o.transform,y=o.width,g=e.borderRadius,C=e.borderWidth,p=e.label,x=e.shouldRenderLabel,W=e.isInteractive,S=e.onClick,R=e.onMouseEnter,V=e.onMouseLeave,E=e.tooltip,M=e.isFocusable,T=e.ariaLabel,j=e.ariaLabelledBy,H=e.ariaDescribedBy,_=Fe(),P=Rt(),X=P.showTooltipFromEvent,D=P.showTooltipAt,A=P.hideTooltip,I=w.useMemo(function(){return function(){return w.createElement(E,O({},t,n))}},[E,t,n]),q=w.useCallback(function(K){S==null||S(O({color:t.color},n),K)},[t,n,S]),re=w.useCallback(function(K){return X(I(),K)},[X,I]),Z=w.useCallback(function(K){R==null||R(n,K),X(I(),K)},[n,R,X,I]),ce=w.useCallback(function(K){V==null||V(n,K),A()},[n,A,V]),ne=w.useCallback(function(){D(I(),[t.absX+t.width/2,t.absY])},[D,I,t]),Oe=w.useCallback(function(){A()},[A]);return c.jsxs(ue.g,{transform:v,children:[c.jsx(ue.rect,{width:Wt(y,function(K){return Math.max(K,0)}),height:Wt(d,function(K){return Math.max(K,0)}),rx:g,ry:g,fill:(a=n.fill)!=null?a:r,strokeWidth:C,stroke:l,focusable:M,tabIndex:M?0:void 0,"aria-label":T?T(n):void 0,"aria-labelledby":j?j(n):void 0,"aria-describedby":H?H(n):void 0,onMouseEnter:W?Z:void 0,onMouseMove:W?re:void 0,onMouseLeave:W?ce:void 0,onClick:W?q:void 0,onFocus:W&&M?ne:void 0,onBlur:W&&M?Oe:void 0}),x&&c.jsx(ue.text,{x:b,y:m,textAnchor:"middle",dominantBaseline:"central",fillOpacity:h,style:O({},_.labels.text,{pointerEvents:"none",fill:s}),children:p})]})},Oa=["color","label"],Ra=function(e){var a=e.color,i=e.label,n=Ue(e,Oa);return c.jsx(yn,{id:i,value:n.formattedValue,enableChip:!0,color:a})},$={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:Ra,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},G=O({},$,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:Fa,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),oe=O({},$,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:typeof window<"u"&&(Pt=window.devicePixelRatio)!=null?Pt:1}),Dt=function(e,a,i,n,t,o){return yt(n,{all:e.map(a),min:0,max:0},t,o).padding(i)},$t=function(e,a){return e.map(function(i){return O({},a.reduce(function(n,t){return n[t]=null,n},{}),i)})},st=function(e){return Object.keys(e).reduce(function(a,i){return e[i]&&(a[i]=e[i]),a},{})},ut=function(e){return[e,Number(e)]},Ha=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],kt=function(e,a){return e>a},Xt=function(e,a){return e<a},Yt=function(e,a){return Array.from(" ".repeat(a-e),function(i,n){return e+n})},_a=function(e){return kt(e,0)?0:e},za=function(e,a,i,n){var t=e.data,o=e.formatValue,l=e.getColor,r=e.getIndex,d=e.getTooltipLabel,s=e.innerPadding,h=s===void 0?0:s,b=e.keys,m=e.xScale,v=e.yScale,y=e.margin,g=i?Xt:kt,C=t.map(st),p=[];return b.forEach(function(x,W){return Yt(0,m.domain().length).forEach(function(S){var R,V,E,M=ut(t[S][x]),T=M[0],j=M[1],H=r(t[S]),_=((R=m(H))!=null?R:0)+a*W+h*W,P=g(V=j,0)?(E=v(V))!=null?E:0:n,X=function(A,I){var q;return g(A,0)?n-I:((q=v(A))!=null?q:0)-n}(j,P),D={id:x,value:T===null?T:j,formattedValue:o(j),hidden:!1,index:S,indexValue:H,data:C[S]};p.push({key:x+"."+D.indexValue,index:p.length,data:D,x:_,y:P,absX:y.left+_,absY:y.top+P,width:a,height:X,color:l(D),label:d(D)})})}),p},Aa=function(e,a,i,n){var t=e.data,o=e.formatValue,l=e.getIndex,r=e.getColor,d=e.getTooltipLabel,s=e.keys,h=e.innerPadding,b=h===void 0?0:h,m=e.xScale,v=e.yScale,y=e.margin,g=i?Xt:kt,C=t.map(st),p=[];return s.forEach(function(x,W){return Yt(0,v.domain().length).forEach(function(S){var R,V,E,M=ut(t[S][x]),T=M[0],j=M[1],H=l(t[S]),_=g(V=j,0)?n:(E=m(V))!=null?E:0,P=((R=v(H))!=null?R:0)+a*W+b*W,X=function(A,I){var q;return g(A,0)?((q=m(A))!=null?q:0)-n:n-I}(j,_),D={id:x,value:T===null?T:j,formattedValue:o(j),hidden:!1,index:S,indexValue:H,data:C[S]};p.push({key:x+"."+D.indexValue,index:p.length,data:D,x:_,y:P,absX:y.left+_,absY:y.top+P,width:X,height:a,color:r(D),label:d(D)})})}),p},Da=function(e){var a,i,n=e.layout,t=e.minValue,o=e.maxValue,l=e.reverse,r=e.width,d=e.height,s=e.padding,h=s===void 0?0:s,b=e.innerPadding,m=b===void 0?0:b,v=e.valueScale,y=e.indexScale,g=e.hiddenIds,C=g===void 0?[]:g,p=Ue(e,Ha),x=p.keys.filter(function(Z){return!C.includes(Z)}),W=$t(p.data,x),S=n==="vertical"?["y","x",r]:["x","y",d],R=S[0],V=S[1],E=S[2],M=Dt(W,p.getIndex,h,y,E,V),T=O({max:o,min:t,reverse:l},v),j=T.min==="auto"?_a:function(Z){return Z},H=W.reduce(function(Z,ce){return[].concat(Z,x.map(function(ne){return ce[ne]}))},[]).filter(Boolean),_=j(Math.min.apply(Math,H)),P=(i=Math.max.apply(Math,H),isFinite(i)?i:0),X=yt(T,{all:H,min:_,max:P},R==="x"?r:d,R),D=n==="vertical"?[M,X]:[X,M],A=D[0],I=D[1],q=(M.bandwidth()-m*(x.length-1))/x.length,re=[O({},p,{data:W,keys:x,innerPadding:m,xScale:A,yScale:I}),q,T.reverse,(a=X(0))!=null?a:0];return{xScale:A,yScale:I,bars:q>0?n==="vertical"?za.apply(void 0,re):Aa.apply(void 0,re):[]}},$a=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],Xa=function e(a){var i;return a.some(Array.isArray)?e((i=[]).concat.apply(i,a)):a},Ya=function(e,a,i){var n=e.formatValue,t=e.getColor,o=e.getIndex,l=e.getTooltipLabel,r=e.innerPadding,d=e.stackedData,s=e.xScale,h=e.yScale,b=e.margin,m=[];return d.forEach(function(v){return s.domain().forEach(function(y,g){var C,p,x=v[g],W=(C=s(o(x.data)))!=null?C:0,S=((p=function(j){return h(j[i?0:1])}(x))!=null?p:0)+.5*r,R=function(j,H){var _;return((_=h(j[i?1:0]))!=null?_:0)-H}(x,S)-r,V=ut(x.data[v.key]),E=V[0],M=V[1],T={id:v.key,value:E===null?E:M,formattedValue:n(M),hidden:!1,index:g,indexValue:y,data:st(x.data)};m.push({key:v.key+"."+y,index:m.length,data:T,x:W,y:S,absX:b.left+W,absY:b.top+S,width:a,height:R,color:t(T),label:l(T)})})}),m},Ga=function(e,a,i){var n=e.formatValue,t=e.getColor,o=e.getIndex,l=e.getTooltipLabel,r=e.innerPadding,d=e.stackedData,s=e.xScale,h=e.yScale,b=e.margin,m=[];return d.forEach(function(v){return h.domain().forEach(function(y,g){var C,p,x=v[g],W=(C=h(o(x.data)))!=null?C:0,S=((p=function(j){return s(j[i?1:0])}(x))!=null?p:0)+.5*r,R=function(j,H){var _;return((_=s(j[i?0:1]))!=null?_:0)-H}(x,S)-r,V=ut(x.data[v.key]),E=V[0],M=V[1],T={id:v.key,value:E===null?E:M,formattedValue:n(M),hidden:!1,index:g,indexValue:y,data:st(x.data)};m.push({key:v.key+"."+y,index:m.length,data:T,x:S,y:W,absX:b.left+S,absY:b.top+W,width:R,height:a,color:t(T),label:l(T)})})}),m},qa=function(e){var a,i=e.data,n=e.layout,t=e.minValue,o=e.maxValue,l=e.reverse,r=e.width,d=e.height,s=e.padding,h=s===void 0?0:s,b=e.valueScale,m=e.indexScale,v=e.hiddenIds,y=v===void 0?[]:v,g=Ue(e,$a),C=g.keys.filter(function(q){return!y.includes(q)}),p=Tn().keys(C).offset(wn)($t(i,C)),x=n==="vertical"?["y","x",r]:["x","y",d],W=x[0],S=x[1],R=x[2],V=Dt(i,g.getIndex,h,m,R,S),E=O({max:o,min:t,reverse:l},b),M=(a=Xa(p),b.type==="log"?a.filter(function(q){return q!==0}):a),T=Math.min.apply(Math,M),j=Math.max.apply(Math,M),H=yt(E,{all:M,min:T,max:j},W==="x"?r:d,W),_=n==="vertical"?[V,H]:[H,V],P=_[0],X=_[1],D=g.innerPadding>0?g.innerPadding:0,A=V.bandwidth(),I=[O({},g,{innerPadding:D,stackedData:p,xScale:P,yScale:X}),A,E.reverse];return{xScale:P,yScale:X,bars:A>0?n==="vertical"?Ya.apply(void 0,I):Ga.apply(void 0,I):[]}},Na=function(e){var a=e.bars,i=e.direction,n=e.from,t=e.groupMode,o=e.layout,l=e.legendLabel,r=e.reverse,d=Cn(l??(n==="indexes"?"indexValue":"id"));return n==="indexes"?function(s,h,b){var m=Ct(s.map(function(v){var y,g;return{id:(y=v.data.indexValue)!=null?y:"",label:b(v.data),hidden:v.data.hidden,color:(g=v.color)!=null?g:"#000"}}),function(v){return v.id});return h==="horizontal"&&m.reverse(),m}(a,o,d):function(s,h,b,m,v,y){var g=Ct(s.map(function(C){var p;return{id:C.data.id,label:y(C.data),hidden:C.data.hidden,color:(p=C.color)!=null?p:"#000"}}),function(C){return C.id});return(h==="vertical"&&m==="stacked"&&b==="column"&&v!==!0||h==="horizontal"&&m==="stacked"&&v===!0)&&g.reverse(),g}(a,o,i,t,r,d)},Gt=function(e){var a=e.indexBy,i=a===void 0?$.indexBy:a,n=e.keys,t=n===void 0?$.keys:n,o=e.label,l=o===void 0?$.label:o,r=e.tooltipLabel,d=r===void 0?$.tooltipLabel:r,s=e.valueFormat,h=e.colors,b=h===void 0?$.colors:h,m=e.colorBy,v=m===void 0?$.colorBy:m,y=e.borderColor,g=y===void 0?$.borderColor:y,C=e.labelTextColor,p=C===void 0?$.labelTextColor:C,x=e.groupMode,W=x===void 0?$.groupMode:x,S=e.layout,R=S===void 0?$.layout:S,V=e.reverse,E=V===void 0?$.reverse:V,M=e.data,T=e.minValue,j=T===void 0?$.minValue:T,H=e.maxValue,_=H===void 0?$.maxValue:H,P=e.margin,X=e.width,D=e.height,A=e.padding,I=A===void 0?$.padding:A,q=e.innerPadding,re=q===void 0?$.innerPadding:q,Z=e.valueScale,ce=Z===void 0?$.valueScale:Z,ne=e.indexScale,Oe=ne===void 0?$.indexScale:ne,K=e.initialHiddenIds,qe=K===void 0?$.initialHiddenIds:K,Re=e.enableLabel,we=Re===void 0?$.enableLabel:Re,Ve=e.labelSkipWidth,be=Ve===void 0?$.labelSkipWidth:Ve,He=e.labelSkipHeight,Te=He===void 0?$.labelSkipHeight:He,_e=e.legends,ze=_e===void 0?$.legends:_e,Ae=e.legendLabel,De=w.useState(qe??[]),Ce=De[0],le=De[1],Ne=w.useCallback(function(L){le(function(F){return F.indexOf(L)>-1?F.filter(function(fe){return fe!==L}):[].concat(F,[L])})},[]),We=gt(i),Le=gt(l),ge=gt(d),he=pn(s),$e=Fe(),Be=kn(b,v),ae=jt(g,$e),ve=jt(p,$e),J=(W==="grouped"?Da:qa)({layout:R,reverse:E,data:M,getIndex:We,keys:t,minValue:j,maxValue:_,width:X,height:D,getColor:Be,padding:I,innerPadding:re,valueScale:ce,indexScale:Oe,hiddenIds:Ce,formatValue:he,getTooltipLabel:ge,margin:P}),Y=J.bars,Me=J.xScale,Q=J.yScale,me=w.useMemo(function(){return Y.filter(function(L){return L.data.value!==null}).map(function(L,F){return O({},L,{index:F})})},[Y]),xe=w.useCallback(function(L){var F=L.width,fe=L.height;return!!we&&!(be>0&&F<be)&&!(Te>0&&fe<Te)},[we,be,Te]),ye=w.useMemo(function(){return t.map(function(L){var F=Y.find(function(fe){return fe.data.id===L});return O({},F,{data:O({id:L},F==null?void 0:F.data,{hidden:Ce.includes(L)})})})},[Ce,t,Y]),je=w.useMemo(function(){return ze.map(function(L){return[L,Na({bars:L.dataFrom==="keys"?ye:Y,direction:L.direction,from:L.dataFrom,groupMode:W,layout:R,legendLabel:Ae,reverse:E})]})},[ze,ye,Y,W,R,Ae,E]);return{bars:Y,barsWithValue:me,xScale:Me,yScale:Q,getIndex:We,getLabel:Le,getTooltipLabel:ge,formatValue:he,getColor:Be,getBorderColor:ae,getLabelColor:ve,shouldRenderBarLabel:xe,hiddenIds:Ce,toggleSerie:Ne,legendsWithData:je}},Ka=["isInteractive","animate","motionConfig","theme","renderWrapper"],Ja=function(e){var a=e.data,i=e.indexBy,n=e.keys,t=e.margin,o=e.width,l=e.height,r=e.groupMode,d=e.layout,s=e.reverse,h=e.minValue,b=e.maxValue,m=e.valueScale,v=e.indexScale,y=e.padding,g=e.innerPadding,C=e.axisTop,p=e.axisRight,x=e.axisBottom,W=x===void 0?G.axisBottom:x,S=e.axisLeft,R=S===void 0?G.axisLeft:S,V=e.enableGridX,E=V===void 0?G.enableGridX:V,M=e.enableGridY,T=M===void 0?G.enableGridY:M,j=e.gridXValues,H=e.gridYValues,_=e.layers,P=_===void 0?G.layers:_,X=e.barComponent,D=X===void 0?G.barComponent:X,A=e.enableLabel,I=A===void 0?G.enableLabel:A,q=e.label,re=e.labelSkipWidth,Z=re===void 0?G.labelSkipWidth:re,ce=e.labelSkipHeight,ne=ce===void 0?G.labelSkipHeight:ce,Oe=e.labelTextColor,K=e.markers,qe=K===void 0?G.markers:K,Re=e.colorBy,we=e.colors,Ve=e.defs,be=Ve===void 0?G.defs:Ve,He=e.fill,Te=He===void 0?G.fill:He,_e=e.borderRadius,ze=_e===void 0?G.borderRadius:_e,Ae=e.borderWidth,De=Ae===void 0?G.borderWidth:Ae,Ce=e.borderColor,le=e.annotations,Ne=le===void 0?G.annotations:le,We=e.legendLabel,Le=e.tooltipLabel,ge=e.valueFormat,he=e.isInteractive,$e=he===void 0?G.isInteractive:he,Be=e.tooltip,ae=Be===void 0?G.tooltip:Be,ve=e.onClick,J=e.onMouseEnter,Y=e.onMouseLeave,Me=e.legends,Q=e.role,me=Q===void 0?G.role:Q,xe=e.ariaLabel,ye=e.ariaLabelledBy,je=e.ariaDescribedBy,L=e.isFocusable,F=L===void 0?G.isFocusable:L,fe=e.barAriaLabel,Ee=e.barAriaLabelledBy,Pe=e.barAriaDescribedBy,it=e.initialHiddenIds,Ze=at(),Qe=Ze.animate,ot=Ze.config,Ie=Ht(o,l,t),Ke=Ie.outerWidth,rt=Ie.outerHeight,Xe=Ie.margin,de=Ie.innerWidth,pe=Ie.innerHeight,ie=Gt({indexBy:i,label:q,tooltipLabel:Le,valueFormat:ge,colors:we,colorBy:Re,borderColor:Ce,labelTextColor:Oe,groupMode:r,layout:d,reverse:s,data:a,keys:n,minValue:h,maxValue:b,margin:Xe,width:de,height:pe,padding:y,innerPadding:g,valueScale:m,indexScale:v,enableLabel:I,labelSkipWidth:Z,labelSkipHeight:ne,legends:Me,legendLabel:We,initialHiddenIds:it}),Ye=ie.bars,ct=ie.barsWithValue,Ge=ie.xScale,f=ie.yScale,k=ie.getLabel,z=ie.getTooltipLabel,N=ie.getBorderColor,B=ie.getLabelColor,se=ie.shouldRenderBarLabel,ee=ie.toggleSerie,U=ie.legendsWithData,ht=un(ct,{keys:function(u){return u.key},from:function(u){return O({borderColor:N(u),color:u.color,height:0,labelColor:B(u),labelOpacity:0,labelX:u.width/2,labelY:u.height/2,transform:"translate("+u.x+", "+(u.y+u.height)+")",width:u.width},d==="vertical"?{}:{height:u.height,transform:"translate("+u.x+", "+u.y+")",width:0})},enter:function(u){return{borderColor:N(u),color:u.color,height:u.height,labelColor:B(u),labelOpacity:1,labelX:u.width/2,labelY:u.height/2,transform:"translate("+u.x+", "+u.y+")",width:u.width}},update:function(u){return{borderColor:N(u),color:u.color,height:u.height,labelColor:B(u),labelOpacity:1,labelX:u.width/2,labelY:u.height/2,transform:"translate("+u.x+", "+u.y+")",width:u.width}},leave:function(u){return O({borderColor:N(u),color:u.color,height:0,labelColor:B(u),labelOpacity:0,labelX:u.width/2,labelY:0,transform:"translate("+u.x+", "+(u.y+u.height)+")",width:u.width},d==="vertical"?{}:{labelX:0,labelY:u.height/2,height:u.height,transform:"translate("+u.x+", "+u.y+")",width:0})},config:ot,immediate:!Qe,initial:Qe?void 0:null}),Je=w.useMemo(function(){return{borderRadius:ze,borderWidth:De,enableLabel:I,isInteractive:$e,labelSkipWidth:Z,labelSkipHeight:ne,onClick:ve,onMouseEnter:J,onMouseLeave:Y,getTooltipLabel:z,tooltip:ae,isFocusable:F,ariaLabel:fe,ariaLabelledBy:Ee,ariaDescribedBy:Pe}},[ze,De,I,z,$e,ne,Z,ve,J,Y,ae,F,fe,Ee,Pe]),et=Wn(be,Ye,Te,{dataKey:"data",targetKey:"data.fill"}),ke={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};P.includes("annotations")&&(ke.annotations=c.jsx(Ea,{bars:Ye,annotations:Ne},"annotations")),P.includes("axes")&&(ke.axes=c.jsx(Jt,{xScale:Ge,yScale:f,width:de,height:pe,top:C,right:p,bottom:W,left:R},"axes")),P.includes("bars")&&(ke.bars=c.jsx(w.Fragment,{children:ht(function(u,te){return w.createElement(D,O({},Je,{bar:te,style:u,shouldRenderLabel:se(te),label:k(te.data)}))})},"bars")),P.includes("grid")&&(ke.grid=c.jsx(Ut,{width:de,height:pe,xScale:E?Ge:null,yScale:T?f:null,xValues:j,yValues:H},"grid")),P.includes("legends")&&(ke.legends=c.jsx(Pa,{width:de,height:pe,legends:U,toggleSerie:ee},"legends")),P.includes("markers")&&(ke.markers=c.jsx(Ln,{markers:qe,width:de,height:pe,xScale:Ge,yScale:f},"markers"));var ft=w.useMemo(function(){return O({},Je,{margin:Xe,width:o,height:l,innerWidth:de,innerHeight:pe,bars:Ye,legendData:U,enableLabel:I,xScale:Ge,yScale:f,tooltip:ae,getTooltipLabel:z,onClick:ve,onMouseEnter:J,onMouseLeave:Y})},[Je,Xe,o,l,de,pe,Ye,U,I,Ge,f,ae,z,ve,J,Y]);return c.jsx(Mn,{width:Ke,height:rt,margin:Xe,defs:et,role:me,ariaLabel:xe,ariaLabelledBy:ye,ariaDescribedBy:je,isFocusable:F,children:P.map(function(u,te){var St;return typeof u=="function"?c.jsx(w.Fragment,{children:w.createElement(u,ft)},te):(St=ke==null?void 0:ke[u])!=null?St:null})})},Ua=function(e){var a=e.isInteractive,i=a===void 0?G.isInteractive:a,n=e.animate,t=n===void 0?G.animate:n,o=e.motionConfig,l=o===void 0?G.motionConfig:o,r=e.theme,d=e.renderWrapper,s=Ue(e,Ka);return c.jsx(Ft,{animate:t,isInteractive:i,motionConfig:l,renderWrapper:d,theme:r,children:c.jsx(Ja,O({isInteractive:i},s))})},Za=["isInteractive","renderWrapper","theme"],vt=function(e,a,i,n){return e.find(function(t){return Sn(t.x+a.left,t.y+a.top,t.width,t.height,i,n)})},Qa=function(e){var a=e.data,i=e.indexBy,n=e.keys,t=e.margin,o=e.width,l=e.height,r=e.groupMode,d=e.layout,s=e.reverse,h=e.minValue,b=e.maxValue,m=e.valueScale,v=e.indexScale,y=e.padding,g=e.innerPadding,C=e.axisTop,p=e.axisRight,x=e.axisBottom,W=x===void 0?oe.axisBottom:x,S=e.axisLeft,R=S===void 0?oe.axisLeft:S,V=e.enableGridX,E=V===void 0?oe.enableGridX:V,M=e.enableGridY,T=M===void 0?oe.enableGridY:M,j=e.gridXValues,H=e.gridYValues,_=e.layers,P=_===void 0?oe.layers:_,X=e.renderBar,D=X===void 0?function(f,k){var z=k.bar,N=z.color,B=z.height,se=z.width,ee=z.x,U=z.y,ht=k.borderColor,Je=k.borderRadius,et=k.borderWidth,ke=k.label,ft=k.labelColor,u=k.shouldRenderLabel;if(f.fillStyle=N,et>0&&(f.strokeStyle=ht,f.lineWidth=et),f.beginPath(),Je>0){var te=Math.min(Je,B);f.moveTo(ee+te,U),f.lineTo(ee+se-te,U),f.quadraticCurveTo(ee+se,U,ee+se,U+te),f.lineTo(ee+se,U+B-te),f.quadraticCurveTo(ee+se,U+B,ee+se-te,U+B),f.lineTo(ee+te,U+B),f.quadraticCurveTo(ee,U+B,ee,U+B-te),f.lineTo(ee,U+te),f.quadraticCurveTo(ee,U,ee+te,U),f.closePath()}else f.rect(ee,U,se,B);f.fill(),et>0&&f.stroke(),u&&(f.textBaseline="middle",f.textAlign="center",f.fillStyle=ft,f.fillText(ke,ee+se/2,U+B/2))}:X,A=e.enableLabel,I=A===void 0?oe.enableLabel:A,q=e.label,re=e.labelSkipWidth,Z=re===void 0?oe.labelSkipWidth:re,ce=e.labelSkipHeight,ne=ce===void 0?oe.labelSkipHeight:ce,Oe=e.labelTextColor,K=e.colorBy,qe=e.colors,Re=e.borderRadius,we=Re===void 0?oe.borderRadius:Re,Ve=e.borderWidth,be=Ve===void 0?oe.borderWidth:Ve,He=e.borderColor,Te=e.annotations,_e=Te===void 0?oe.annotations:Te,ze=e.legendLabel,Ae=e.tooltipLabel,De=e.valueFormat,Ce=e.isInteractive,le=Ce===void 0?oe.isInteractive:Ce,Ne=e.tooltip,We=Ne===void 0?oe.tooltip:Ne,Le=e.onClick,ge=e.onMouseEnter,he=e.onMouseLeave,$e=e.legends,Be=e.pixelRatio,ae=Be===void 0?oe.pixelRatio:Be,ve=e.canvasRef,J=w.useRef(null),Y=Fe(),Me=Ht(o,l,t),Q=Me.margin,me=Me.innerWidth,xe=Me.innerHeight,ye=Me.outerWidth,je=Me.outerHeight,L=Gt({indexBy:i,label:q,tooltipLabel:Ae,valueFormat:De,colors:qe,colorBy:K,borderColor:He,labelTextColor:Oe,groupMode:r,layout:d,reverse:s,data:a,keys:n,minValue:h,maxValue:b,margin:Q,width:me,height:xe,padding:y,innerPadding:g,valueScale:m,indexScale:v,enableLabel:I,labelSkipWidth:Z,labelSkipHeight:ne,legends:$e,legendLabel:ze}),F=L.bars,fe=L.barsWithValue,Ee=L.xScale,Pe=L.yScale,it=L.getLabel,Ze=L.getTooltipLabel,Qe=L.getBorderColor,ot=L.getLabelColor,Ie=L.shouldRenderBarLabel,Ke=L.legendsWithData,rt=Rt(),Xe=rt.showTooltipFromEvent,de=rt.hideTooltip,pe=Ca({annotations:At({data:F,annotations:_e,getPosition:function(f){return{x:f.x,y:f.y}},getDimensions:function(f){var k=f.width,z=f.height;return{width:k,height:z,size:Math.max(k,z)}}})}),ie=w.useMemo(function(){return{borderRadius:we,borderWidth:be,isInteractive:le,isFocusable:!1,labelSkipWidth:Z,labelSkipHeight:ne,margin:Q,width:o,height:l,innerWidth:me,innerHeight:xe,bars:F,legendData:Ke,enableLabel:I,xScale:Ee,yScale:Pe,tooltip:We,getTooltipLabel:Ze,onClick:Le,onMouseEnter:ge,onMouseLeave:he}},[we,be,le,Z,ne,Q,o,l,me,xe,F,Ke,I,Ee,Pe,We,Ze,Le,ge,he]);w.useEffect(function(){var f,k=(f=J.current)==null?void 0:f.getContext("2d");J.current&&k&&(J.current.width=ye*ae,J.current.height=je*ae,k.scale(ae,ae),k.fillStyle=Y.background,k.fillRect(0,0,ye,je),k.translate(Q.left,Q.top),P.forEach(function(z){z==="grid"?typeof Y.grid.line.strokeWidth=="number"&&Y.grid.line.strokeWidth>0&&(k.lineWidth=Y.grid.line.strokeWidth,k.strokeStyle=Y.grid.line.stroke,E&&wt(k,{width:o,height:l,scale:Ee,axis:"x",values:j}),T&&wt(k,{width:o,height:l,scale:Pe,axis:"y",values:H})):z==="axes"?Kt(k,{xScale:Ee,yScale:Pe,width:me,height:xe,top:C,right:p,bottom:W,left:R,theme:Y}):z==="bars"?fe.forEach(function(N){D(k,{bar:N,borderColor:Qe(N),borderRadius:we,borderWidth:be,label:it(N.data),labelColor:ot(N),shouldRenderLabel:Ie(N)})}):z==="legends"?Ke.forEach(function(N){var B=N[0],se=N[1];xn(k,O({},B,{data:se,containerWidth:me,containerHeight:xe,theme:Y}))}):z==="annotations"?Ba(k,{annotations:pe,theme:Y}):typeof z=="function"&&z(k,ie)}),k.save())},[W,R,p,C,fe,we,be,pe,E,T,Qe,it,ot,j,H,r,l,xe,me,ie,P,d,Ke,Q.left,Q.top,je,ye,ae,D,Ee,Pe,s,Ie,Y,o]);var Ye=w.useCallback(function(f){if(F&&J.current){var k=bt(J.current,f),z=k[0],N=k[1],B=vt(F,Q,z,N);B!==void 0?(Xe(w.createElement(We,O({},B.data,{color:B.color,label:B.label,value:Number(B.data.value)})),f),f.type==="mouseenter"&&(ge==null||ge(B.data,f))):de()}},[de,Q,ge,F,Xe,We]),ct=w.useCallback(function(f){if(F&&J.current){de();var k=bt(J.current,f),z=k[0],N=k[1],B=vt(F,Q,z,N);B&&(he==null||he(B.data,f))}},[de,Q,he,F]),Ge=w.useCallback(function(f){if(F&&J.current){var k=bt(J.current,f),z=k[0],N=k[1],B=vt(F,Q,z,N);B!==void 0&&(Le==null||Le(O({},B.data,{color:B.color}),f))}},[Q,Le,F]);return c.jsx("canvas",{ref:function(f){J.current=f,ve&&"current"in ve&&(ve.current=f)},width:ye*ae,height:je*ae,style:{width:ye,height:je,cursor:le?"auto":"normal"},onMouseEnter:le?Ye:void 0,onMouseMove:le?Ye:void 0,onMouseLeave:le?ct:void 0,onClick:le?Ge:void 0})},ei=w.forwardRef(function(e,a){var i=e.isInteractive,n=e.renderWrapper,t=e.theme,o=Ue(e,Za);return c.jsx(Ft,{isInteractive:i,renderWrapper:n,theme:t,animate:!1,children:c.jsx(Qa,O({},o,{canvasRef:a}))})}),ri=function(e){return c.jsx(Ot,{children:function(a){var i=a.width,n=a.height;return c.jsx(Ua,O({width:i,height:n},e))}})};w.forwardRef(function(e,a){return c.jsx(Ot,{children:function(i){var n=i.width,t=i.height;return c.jsx(ei,O({width:n,height:t},e,{ref:a}))}})});export{ri as B};
