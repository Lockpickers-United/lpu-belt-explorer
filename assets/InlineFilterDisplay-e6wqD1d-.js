import{O as E,P as q,Q as w,U as V,r as l,F as S,j as t,R as v,ad as z,ae as y,$ as A,av as _,aw as F,u as $,a4 as N,a5 as P}from"./index-CBv3gRIw.js";import{F as G}from"./FieldValue-B_sWHyAd.js";import{f as O,C as U}from"./FilterAlt-BPMXITJ7.js";import{C as J}from"./Chip-CSHnYYQu.js";import{F as K,I as Q,S as T}from"./Select-DlkcqYc5.js";var j={},L;function H(){if(L)return j;L=1;var a=E();Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var o=a(q()),c=w();return j.default=(0,o.default)((0,c.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),j}var X=H();const Y=V(X);function Z({filterKey:a,filterValue:o,label:c}){const{removeFilter:d,addFilter:h}=l.useContext(S),[m,p]=l.useState(!1),n=l.useCallback(()=>p(!1),[]),e=l.useCallback(r=>{r.stopPropagation(),p(r.currentTarget)},[]),f=l.useCallback((r,s)=>()=>{const i=String(s??""),u=i.startsWith("!")?i.slice(1):"!"+i;d(r,s),h(r,u),p(!1)},[h,d]),g=l.useCallback((r,s)=>()=>{d(r,s)},[d]),x=o.startsWith("!")?"Show Only Matches":"Exclude Matches";return t.jsxs(v.Fragment,{children:[t.jsx(J,{label:c.replace("!","NOT "),variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:e,deleteIcon:t.jsx(Y,{})}),!!m&&t.jsxs(z,{open:!!m,anchorEl:m,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:n,children:[t.jsx(y,{onClick:f(a,o),children:x}),t.jsx(y,{onClick:g(a,o),children:"Delete Filter"})]})]})}function ee(){const{filters:a,filterCount:o,removeFilter:c,filterFieldsByFieldName:d}=l.useContext(S),h=l.useCallback((n,e)=>()=>{c(n,e)},[c]),m=l.useMemo(()=>{const{search:n,id:e,tab:f,name:g,sort:x,image:r,...s}=a;return Object.keys(s).map(i=>{const u=a[i];return Array.isArray(u)?u.map(b=>({key:i,value:b})):{key:i,value:u}}).flat()},[a]),p=l.useCallback((n,e)=>n==="Belt"?e==="Unranked"?n:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":n==="UL Group"?"Group "+e:n==="Wheels"?`${e} Wheels`:O[e]?O[e]:e,[]);return o===0?null:t.jsx(G,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(A,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:m.map(({key:n,value:e},f)=>{var s;const g=e.startsWith("!")?e.slice(1):e,x=p((s=d[n])==null?void 0:s.label,g),r=e.startsWith("!")?`NOT ${x}`:x;return t.jsx(v.Fragment,{children:t.jsx(Z,{filterKey:n,filterValue:e,label:r,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:h(n,e)})},f)})})})}function ae({profile:a={},collectionType:o}){var k,R,W;const{userId:c}=_(),{filters:d,filterCount:h,addFilter:m}=l.useContext(S),[p,n]=v.useState(!1),e=((k=F[o])==null?void 0:k.labels)||[],f=((R=F[o])==null?void 0:R.keyByLabel)||[],g=((W=F[o])==null?void 0:W.getCollected(a))||[],{isMobile:x}=$(),r=x?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:s=c&&h===0?"Any":null}=d,i=e.includes(s)&&h<2;let u="";s&&(typeof s=="string"?u=s:u="Any");const b=l.useCallback(()=>n(!1),[]),I=l.useCallback(()=>n(!0),[]),D=l.useCallback(C=>{m("collection",C.target.value,!0)},[m]);return!h&&!c?null:t.jsx(N,{style:r,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs(P,{style:{paddingTop:0,paddingLeft:8},children:[i&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(K,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(Q,{id:"label",children:"Collection"}),t.jsx(T,{name:"collection-selector",label:"Collection",open:p,onClose:b,onOpen:I,value:u,onChange:D,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:e.map((C,M)=>{var B;return t.jsxs(y,{value:C,children:[C," (",C==="Any"?g.length:((B=a[f[C]])==null?void 0:B.length)||0,")"]},M)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(U,{})})]}),!i&&t.jsx(ee,{})]})})}export{ae as I};
