import{r as k,F as We,K as Te,j as r,u as bt,R as ve,L as se,b as Yt,a7 as Ue,W as _e,U as et,a8 as $t,a0 as qt,aA as Kt,aq as Zt,d as tt,bJ as Qt,bK as Jt,D as Xt,N as _t,e as er,a9 as tr,h as rr,T as nr}from"./index-CfbufueW.js";import{L as or}from"./LoadingDisplay-DEkT77e7.js";import{u as ir}from"./useData-C3x_X0Lz.js";import{u as lr}from"./usePageTitle-DJo9Kvpp.js";import{_ as sr,N as ar,a as cr,l as dr}from"./lockStats-DrfFx7W_.js";import{E as ur}from"./ErrorMessage-CsLAYtNQ.js";import{b as Ie,a as fr}from"./chartDefaults-pV7GKcxU.js";import{D as Ct,f as hr}from"./DataContext-DTmXlrCt.js";import{r as rt}from"./index-CpxP5rpl.js";import{e as nt}from"./entryName-CeUPQJRQ.js";import{B as pr}from"./BeltStripeMini-BfsQNdzm.js";import{a as Bt,b as ue,c as ot,d as it,T as gr,e as lt}from"./TableRow-CvUCQthU.js";import{V as mr}from"./ViewFilterButtons-dzUxCd59.js";import{b as kr}from"./sortFields-ChCLUnX8.js";import{F as xr,I as yr,S as vr}from"./Select-p8YOBiDD.js";import{C as br}from"./Collapse-CRK-rvOI.js";import{l as Cr}from"./uniq-8nwM2INx.js";import{p as Br,q as jr,O as wr,A as Lr,I as Or,v as Sr,z as jt,G as Pr,H as st,B as Mr,C as Dr,b7 as Tr,b8 as Ir,S as He,b9 as zr,F as Fr,u as wt,x as Lt,n as Ot,T as at,aQ as ct}from"./nivo-legends-BZhGlEP-.js";import{r as Ar}from"./_baseClone-BLdzO1zI.js";import{F as dt}from"./line-CmGFzTjQ.js";import{a as ze}from"./adminChartDefaults-CBhS7ojG.js";import{e as Er}from"./filterFields-BefiPEDN.js";import{c as Rr}from"./collectionStatsById-DY1NVZ7h.js";import{f as Nr}from"./filterEntries-BBFZIbGW.js";import{a as Ur,d as Wr,q as Hr,p as Gr,s as Vr,b as Yr,e as $r,c as qr,f as Kr}from"./dataUrls-DkJe4Pqg.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-bZppGSn4.js";import"./nivo-arcs-fD9URhn2.js";import"./Sort-CraYu9Gj.js";import"./Search-BLyQnuE5.js";import"./useFormControl-Bz7ZT2M0.js";import"./FilterAlt-mQn2pkKG.js";import"./HighlightOff-CFg-COQP.js";import"./Box-Teg10hSI.js";import"./LockListContext-DBf4ENmo.js";import"./ToggleButtonGroup-CMb6VMxM.js";import"./setDeep-J6HEwWhX.js";import"./filterEntriesAdvanced-B_LinbMH.js";import"./AddCircle-oAZd5dRm.js";import"./Autocomplete-B_E8i8Dq.js";import"./TextField-tvdmVQAh.js";import"./Cancel-UZ8pJckF.js";function ut(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o<l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o<i||o===void 0&&i>=i)&&(o=i)}return o}function St(e,n){let o;if(n===void 0)for(const l of e)l!=null&&(o>l||o===void 0&&l>=l)&&(o=l);else{let l=-1;for(let i of e)(i=n(i,++l,e))!=null&&(o>i||o===void 0&&i>=i)&&(o=i)}return o}function Fe(e,n){let o=0;if(n===void 0)for(let l of e)(l=+l)&&(o+=l);else{let l=-1;for(let i of e)(i=+n(i,++l,e))&&(o+=i)}return o}const Zr={Total:3614},Qr={Total:8120},ft={discord:Zr,reddit:Qr};function Jr({data:e}){const{scorecardStats:n,discordBeltCounts:o,redditBeltCounts:l}=e,{userCounts:i}=n,{filters:C,addFilter:m,removeFilters:j}=k.useContext(We),z=Xr(),g=C!=null&&C.dataset?C==null?void 0:C.dataset:"pickerData",[w,P]=k.useState(g),B=k.useCallback(t=>{m("dataset",t,!0),P(t)},[m]),M=9435-i.totalUsers,d=k.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:i.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:M}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},f={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:i.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:i.totalUsers-i.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},h={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:i.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:i.scorecardUsers-i.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},s={parent:"Scorecard Users",data:Object.keys(i.belts).sort((b,A)=>Te(b,A)).map(b=>({id:b,label:b,value:i.belts[b]})),colors:Ie,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},a={parent:"Imported Belts",data:Object.keys(i.dans).sort((b,A)=>parseInt(b)-parseInt(A)).map(b=>({id:ht(b),label:ht(b),value:i.dans[b]})),colors:pt,description:"Dan Breakdown"},O={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:ft.discord.Total},{id:"Reddit",label:"Reddit",value:ft.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},F=Object.keys(o).reduce((b,A)=>{const J=A.replace(" Belt","").trim();return b[J]=o[A],b},{}),G={parent:"Other LPU Pickers",data:Object.keys(F).filter(b=>!b.includes("Dan")).sort((b,A)=>Te(b,A)).map(b=>{const A=b==="Black"?"Black Belt":b;return{id:A,label:A,value:F[b]}}),colors:Ie,description:r.jsxs("span",{children:["Discord Belt Breakdown | ",r.jsx(se,{onClick:()=>B("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},W={parent:"Discord",data:Object.keys(o).filter(b=>b.includes("Dan")).sort((b,A)=>parseInt(b)-parseInt(A)).map(b=>({id:b,label:b,value:o[b]})),colors:pt,description:"Discord Dan Breakdown"},H=Object.keys(l).reduce((b,A)=>{const J=A.replace(" Belt","").trim();return b[J]=l[A],b},{}),Y={parent:"Other LPU Pickers",data:Object.keys(H).filter(b=>!b.includes("Dan")).sort((b,A)=>Te(b,A)).map(b=>({id:b,label:b,value:H[b]})),colors:Ie,description:r.jsxs("span",{children:["Reddit Belt Breakdown | ",r.jsx(se,{onClick:()=>B("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:t,"LPUbelts Users":f,"Scorecard Users":h,"Imported Belts":s,Black:a,"Other LPU Pickers":O,Discord:G,"Black Belt":W,Reddit:Y}},[o,B,M,l,i]),E=d[w].data,D=d[w].data.reduce((t,f)=>t+f.value,0),x=k.useCallback(t=>{d[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",B(t.id)},200))},[B,d]),L=k.useCallback(()=>{d[d[w].parent].parent?m("dataset",d[w].parent,!0):j(["dataset"]),P(d[w].parent)},[m,d,w,j]),p=k.useCallback((t,f)=>{d[t.id]&&(f.currentTarget.style.cursor="pointer")},[d]),{width:c}=bt(),T=c<=360,u=c<=395,v=c<=428,S=c<=560,N={top:30,right:0,bottom:30,left:0};let R=320;T?R=175:u?R=190:v?R=230:S&&(R=240);const K="1.0rem",Z=S?5:4,ee=S?10:8,Q=S?0:8;return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:d[w].description}),r.jsxs("div",{style:{height:R,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[r.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:r.jsx(sr,{data:E,theme:fr,colors:d[w].colors,margin:N,startAngle:d[w].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:Z,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/D*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:Q,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:ee,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{x(t)},onMouseEnter:(t,f)=>{p(t,f)},tooltip:t=>{const f=(t.datum.arc.angleDeg>Z,t.datum.label+": "),h=t.datum.value;return r.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:S||z?"none":"block"},children:r.jsxs("div",{children:[f,h]})})}})}),r.jsx("div",{style:{width:"100%",position:"absolute",top:R/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:d[w].parent&&r.jsx(se,{onClick:L,style:{color:"#ccc",cursor:"pointer",fontSize:K},children:"back"})})]},"pickPie")]})}function ht(e){const n=["st","nd","rd","th"];return e+""+n[Math.min(4,parseInt(e))-1]}const pt=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function Xr(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function gt({entry:e,index:n,collapse:o=!1}){const l=Yt(),C=nt(e).replace(/[\s/]/g,"_").replace(/\W/g,""),m=k.useCallback(z=>{const g=`/locks?tab=search&search=${z.id}&id=${z.id}&name=${C}`;l(g)},[l,C]),j=e.belt==="Unranked"?"#bbb":"#fff";return r.jsxs(Bt,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[r.jsx(ue,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:r.jsx(pr,{value:e.belt})}),r.jsx(ue,{align:"left",style:{alignItems:"center"},children:r.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:r.jsx(se,{onClick:()=>m(e),style:{color:j},children:nt(e)})})}),r.jsx(ue,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:e.currentPicks})]},n)}function _r(){var T;const{visibleEntries:e=[]}=k.useContext(Ct),{filters:n,addFilter:o,removeFilters:l}=k.useContext(We),{userBelt:i="All Belts",sort:C}=n,[m,j]=k.useState(C);k.useEffect(()=>{j(!!C)},[C]);const z=60;let g=((T=e.find(u=>u.displayRank===z))==null?void 0:T.currentPicks)||0;g=g>2?g:0;const w=k.useMemo(()=>e.filter(u=>u.currentPicks>=g),[e,g]),P=k.useMemo(()=>e.filter(u=>u.currentPicks<g),[e,g]),B=k.useMemo(()=>["All Belts",...Ue],[]),M=k.useCallback(()=>{const u=B.findIndex(S=>S===i),v=u<B.length-1?u+1:0;o("userBelt",B[v],!0)},[o,B,i]),d=k.useCallback(()=>{const u=B.findIndex(S=>S===i),v=u>0?u-1:B.length-1;o("userBelt",B[v],!0)},[o,B,i]),[E,D]=k.useState(!1),x=k.useCallback(()=>D(!1),[]),L=k.useCallback(()=>D(!0),[]),p=k.useCallback(u=>{u.target.value!=="All Belts"?o("userBelt",u.target.value,!0):l(["userBelt"]),x()},[o,x,l]),c=k.useCallback(()=>{j(!m)},[m]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[r.jsx(_e,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(et,{onClick:d,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(ar,{})})}),r.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:r.jsxs(xr,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[r.jsx(yr,{style:{color:"#bbb"},children:"User Belt"}),r.jsx(vr,{id:"beltSelect",value:i||"All Belts",label:"Brand",open:E,onClose:x,onOpen:L,onChange:p,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:B.map((u,v)=>r.jsx($t,{value:B[v],children:B[v]},v))})]})}),r.jsx(_e,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:r.jsx(et,{onClick:M,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:r.jsx(cr,{})})})]})}),r.jsx(mr,{sortValues:kr,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[r.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsxs(it,{style:{backgroundColor:"#1c1c1c"},children:[r.jsx(gr,{children:r.jsxs(Bt,{style:{padding:"0px",fontWeight:700},children:[r.jsx(ue,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),r.jsx(ue,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),r.jsx(lt,{children:w.map((u,v)=>r.jsx(gt,{entry:u,index:v},v))})]})}),r.jsx(br,{in:!!m,timeout:"auto",unmountOnExit:!0,children:r.jsx(ot,{sx:{backgroundColor:"#111",width:"100%"},children:r.jsx(it,{style:{backgroundColor:"#1c1c1c"},children:r.jsx(lt,{children:P.map((u,v)=>r.jsx(gt,{entry:u,index:v},v))})})})})]})}),P.length>0&&r.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:r.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:r.jsx(se,{onClick:c,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!m&&"Show More"||"Show Less"})})})]})}function en(e){return e.target.depth}function tn(e){return e.depth}function rn(e,n){return n-1-e.height}function Pt(e,n){return e.sourceLinks.length?e.depth:n-1}function nn(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?St(e.sourceLinks,en)-1:0}function xe(e){return function(){return e}}function mt(e,n){return ye(e.source,n.source)||e.index-n.index}function kt(e,n){return ye(e.target,n.target)||e.index-n.index}function ye(e,n){return e.y0-n.y0}function Ae(e){return e.value}function on(e){return e.index}function ln(e){return e.nodes}function sn(e){return e.links}function xt(e,n){const o=e.get(n);if(!o)throw new Error("missing: "+n);return o}function yt({nodes:e}){for(const n of e){let o=n.y0,l=o;for(const i of n.sourceLinks)i.y0=o+i.width/2,o+=i.width;for(const i of n.targetLinks)i.y1=l+i.width/2,l+=i.width}}function an(){let e=0,n=0,o=1,l=1,i=24,C=8,m,j=on,z=Pt,g,w,P=ln,B=sn,M=6;function d(){const t={nodes:P.apply(null,arguments),links:B.apply(null,arguments)};return E(t),D(t),x(t),L(t),T(t),yt(t),t}d.update=function(t){return yt(t),t},d.nodeId=function(t){return arguments.length?(j=typeof t=="function"?t:xe(t),d):j},d.nodeAlign=function(t){return arguments.length?(z=typeof t=="function"?t:xe(t),d):z},d.nodeSort=function(t){return arguments.length?(g=t,d):g},d.nodeWidth=function(t){return arguments.length?(i=+t,d):i},d.nodePadding=function(t){return arguments.length?(C=m=+t,d):C},d.nodes=function(t){return arguments.length?(P=typeof t=="function"?t:xe(t),d):P},d.links=function(t){return arguments.length?(B=typeof t=="function"?t:xe(t),d):B},d.linkSort=function(t){return arguments.length?(w=t,d):w},d.size=function(t){return arguments.length?(e=n=0,o=+t[0],l=+t[1],d):[o-e,l-n]},d.extent=function(t){return arguments.length?(e=+t[0][0],o=+t[1][0],n=+t[0][1],l=+t[1][1],d):[[e,n],[o,l]]},d.iterations=function(t){return arguments.length?(M=+t,d):M};function E({nodes:t,links:f}){for(const[s,a]of t.entries())a.index=s,a.sourceLinks=[],a.targetLinks=[];const h=new Map(t.map((s,a)=>[j(s,a,t),s]));for(const[s,a]of f.entries()){a.index=s;let{source:O,target:F}=a;typeof O!="object"&&(O=a.source=xt(h,O)),typeof F!="object"&&(F=a.target=xt(h,F)),O.sourceLinks.push(a),F.targetLinks.push(a)}if(w!=null)for(const{sourceLinks:s,targetLinks:a}of t)s.sort(w),a.sort(w)}function D({nodes:t}){for(const f of t)f.value=f.fixedValue===void 0?Math.max(Fe(f.sourceLinks,Ae),Fe(f.targetLinks,Ae)):f.fixedValue}function x({nodes:t}){const f=t.length;let h=new Set(t),s=new Set,a=0;for(;h.size;){for(const O of h){O.depth=a;for(const{target:F}of O.sourceLinks)s.add(F)}if(++a>f)throw new Error("circular link");h=s,s=new Set}}function L({nodes:t}){const f=t.length;let h=new Set(t),s=new Set,a=0;for(;h.size;){for(const O of h){O.height=a;for(const{source:F}of O.targetLinks)s.add(F)}if(++a>f)throw new Error("circular link");h=s,s=new Set}}function p({nodes:t}){const f=ut(t,a=>a.depth)+1,h=(o-e-i)/(f-1),s=new Array(f);for(const a of t){const O=Math.max(0,Math.min(f-1,Math.floor(z.call(null,a,f))));a.layer=O,a.x0=e+O*h,a.x1=a.x0+i,s[O]?s[O].push(a):s[O]=[a]}if(g)for(const a of s)a.sort(g);return s}function c(t){const f=St(t,h=>(l-n-(h.length-1)*m)/Fe(h,Ae));for(const h of t){let s=n;for(const a of h){a.y0=s,a.y1=s+a.value*f,s=a.y1+m;for(const O of a.sourceLinks)O.width=O.value*f}s=(l-s+m)/(h.length+1);for(let a=0;a<h.length;++a){const O=h[a];O.y0+=s*(a+1),O.y1+=s*(a+1)}Z(h)}}function T(t){const f=p(t);m=Math.min(C,(l-n)/(ut(f,h=>h.length)-1)),c(f);for(let h=0;h<M;++h){const s=Math.pow(.99,h),a=Math.max(1-s,(h+1)/M);v(f,s,a),u(f,s,a)}}function u(t,f,h){for(let s=1,a=t.length;s<a;++s){const O=t[s];for(const F of O){let G=0,W=0;for(const{source:Y,value:b}of F.targetLinks){let A=b*(F.layer-Y.layer);G+=ee(Y,F)*A,W+=A}if(!(W>0))continue;let H=(G/W-F.y0)*f;F.y0+=H,F.y1+=H,K(F)}g===void 0&&O.sort(ye),S(O,h)}}function v(t,f,h){for(let s=t.length,a=s-2;a>=0;--a){const O=t[a];for(const F of O){let G=0,W=0;for(const{target:Y,value:b}of F.sourceLinks){let A=b*(Y.layer-F.layer);G+=Q(F,Y)*A,W+=A}if(!(W>0))continue;let H=(G/W-F.y0)*f;F.y0+=H,F.y1+=H,K(F)}g===void 0&&O.sort(ye),S(O,h)}}function S(t,f){const h=t.length>>1,s=t[h];R(t,s.y0-m,h-1,f),N(t,s.y1+m,h+1,f),R(t,l,t.length-1,f),N(t,n,0,f)}function N(t,f,h,s){for(;h<t.length;++h){const a=t[h],O=(f-a.y0)*s;O>1e-6&&(a.y0+=O,a.y1+=O),f=a.y1+m}}function R(t,f,h,s){for(;h>=0;--h){const a=t[h],O=(a.y1-f)*s;O>1e-6&&(a.y0-=O,a.y1-=O),f=a.y0-m}}function K({sourceLinks:t,targetLinks:f}){if(w===void 0){for(const{source:{sourceLinks:h}}of f)h.sort(kt);for(const{target:{targetLinks:h}}of t)h.sort(mt)}}function Z(t){if(w===void 0)for(const{sourceLinks:f,targetLinks:h}of t)f.sort(kt),h.sort(mt)}function ee(t,f){let h=t.y0-(t.sourceLinks.length-1)*m/2;for(const{target:s,width:a}of t.sourceLinks){if(s===f)break;h+=a+m}for(const{source:s,width:a}of f.targetLinks){if(s===t)break;h-=a}return h}function Q(t,f){let h=f.y0-(f.targetLinks.length-1)*m/2;for(const{source:s,width:a}of f.targetLinks){if(s===t)break;h+=a+m}for(const{target:s,width:a}of t.sourceLinks){if(s===f)break;h-=a}return h}return d}var Ee,vt;function cn(){if(vt)return Ee;vt=1;var e=Ar(),n=1,o=4;function l(i){return e(i,n|o)}return Ee=l,Ee}var dn=cn();const un=qt(dn);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},oe.apply(null,arguments)}var Re={container:{display:"flex",alignItems:"center"},sourceChip:{marginRight:7},targetChip:{marginLeft:7,marginRight:7}},fn={center:nn,justify:Pt,start:tn,end:rn},hn=function(e){return fn[e]},I={layout:"horizontal",align:"center",sort:"auto",colors:{scheme:"nivo"},nodeOpacity:.75,nodeHoverOpacity:1,nodeHoverOthersOpacity:.15,nodeThickness:12,nodeInnerPadding:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:0,linkOpacity:.25,linkHoverOpacity:.6,linkHoverOthersOpacity:.15,linkContract:0,linkBlendMode:"multiply",enableLinkGradient:!1,enableLabels:!0,label:"id",labelPosition:"inside",labelPadding:9,labelOrientation:"horizontal",labelTextColor:{from:"color",modifiers:[["darker",.8]]},labelComponent:Lr,isInteractive:!0,nodeTooltip:function(e){var n=e.node;return r.jsx(at,{id:n.label,enableChip:!0,color:n.color})},linkTooltip:function(e){var n=e.link;return r.jsx(at,{id:r.jsxs("span",{style:Re.container,children:[r.jsx(ct,{color:n.source.color,style:Re.sourceChip}),r.jsx("strong",{children:n.source.label})," > ",r.jsx("strong",{children:n.target.label}),r.jsx(ct,{color:n.target.color,style:Re.targetChip}),r.jsx("strong",{children:n.formattedValue})]})})},legends:[],layers:["links","nodes","labels","legends"],role:"img",animate:!0,motionConfig:"gentle"},pn=function(e){return e.id},gn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=e.width,C=e.height,m=e.sort,j=e.align,z=e.colors,g=e.nodeThickness,w=e.nodeSpacing,P=e.nodeInnerPadding,B=e.nodeBorderColor,M=e.label,d=e.labelTextColor,E=k.useState(null),D=E[0],x=E[1],L=k.useState(null),p=L[0],c=L[1],T=k.useMemo((function(){if(m!=="auto")return m==="input"?null:m==="ascending"?function(s,a){return s.value-a.value}:m==="descending"?function(s,a){return a.value-s.value}:m}),[m]),u=m==="input"?null:void 0,v=k.useMemo((function(){return typeof j=="function"?j:hn(j)}),[j]),S=jt(),N=Pr(z,"id"),R=st(B,S),K=Mr(M),Z=st(d,S),ee=Dr(o),Q=k.useMemo((function(){return(function(s){var a=s.data,O=s.formatValue,F=s.layout,G=s.alignFunction,W=s.sortFunction,H=s.linkSortMode,Y=s.nodeThickness,b=s.nodeSpacing,A=s.nodeInnerPadding,J=s.width,fe=s.height,he=s.getColor,be=s.getLabel,pe=an().nodeAlign(G).nodeSort(W).linkSort(H).nodeWidth(Y).nodePadding(b).size(F==="horizontal"?[J,fe]:[fe,J]).nodeId(pn),ie=un(a);return pe(ie),ie.nodes.forEach((function(y){if(y.color=he(y),y.label=be(y),y.formattedValue=O(y.value),F==="horizontal")y.x=y.x0+A,y.y=y.y0,y.width=Math.max(y.x1-y.x0-2*A,0),y.height=Math.max(y.y1-y.y0,0);else{y.x=y.y0,y.y=y.x0+A,y.width=Math.max(y.y1-y.y0,0),y.height=Math.max(y.x1-y.x0-2*A,0);var Ce=y.x0,ge=y.x1;y.x0=y.y0,y.x1=y.y1,y.y0=Ce,y.y1=ge}})),ie.links.forEach((function(y){y.formattedValue=O(y.value),y.color=y.source.color,y.pos0=y.y0,y.pos1=y.y1,y.thickness=y.width,delete y.y0,delete y.y1,delete y.width})),ie})({data:n,formatValue:ee,layout:l,alignFunction:v,sortFunction:T,linkSortMode:u,nodeThickness:g,nodeSpacing:w,nodeInnerPadding:P,width:i,height:C,getColor:N,getLabel:K})}),[n,ee,l,v,T,u,g,w,P,i,C,N,K]),t=Q.nodes,f=Q.links,h=k.useMemo((function(){return t.map((function(s){return{id:s.id,label:s.label,color:s.color}}))}),[t]);return{nodes:t,links:f,legendData:h,getNodeBorderColor:R,currentNode:D,setCurrentNode:x,currentLink:p,setCurrentLink:c,getLabelTextColor:Z}},mn=function(e){var n=e.node,o=e.x,l=e.y,i=e.width,C=e.height,m=e.color,j=e.opacity,z=e.borderWidth,g=e.borderColor,w=e.borderRadius,P=e.setCurrent,B=e.isInteractive,M=e.onClick,d=e.tooltip,E=He(),D=E.animate,x=E.config,L=wt({x:o,y:l,width:i,height:C,opacity:j,color:m,config:x,immediate:!D}),p=Lt(),c=p.showTooltipFromEvent,T=p.hideTooltip,u=k.useCallback((function(R){P(n),c(k.createElement(d,{node:n}),R,"left")}),[P,n,c,d]),v=k.useCallback((function(R){c(k.createElement(d,{node:n}),R,"left")}),[c,n,d]),S=k.useCallback((function(){P(null),T()}),[P,T]),N=k.useCallback((function(R){M==null||M(n,R)}),[M,n]);return r.jsx(Ot.rect,{x:L.x,y:L.y,rx:w,ry:w,width:L.width.to((function(R){return Math.max(R,0)})),height:L.height.to((function(R){return Math.max(R,0)})),fill:L.color,fillOpacity:L.opacity,strokeWidth:z,stroke:g,strokeOpacity:j,onMouseEnter:B?u:void 0,onMouseMove:B?v:void 0,onMouseLeave:B?S:void 0,onClick:B?N:void 0})},kn=function(e){var n=e.nodes,o=e.nodeOpacity,l=e.nodeHoverOpacity,i=e.nodeHoverOthersOpacity,C=e.borderWidth,m=e.getBorderColor,j=e.borderRadius,z=e.setCurrentNode,g=e.currentNode,w=e.currentLink,P=e.isCurrentNode,B=e.isInteractive,M=e.onClick,d=e.tooltip,E=function(D){return g||w?P(D)?l:i:o};return r.jsx(r.Fragment,{children:n.map((function(D){return r.jsx(mn,{node:D,x:D.x,y:D.y,width:D.width,height:D.height,color:D.color,opacity:E(D),borderWidth:C,borderColor:m(D),borderRadius:j,setCurrent:z,isInteractive:B,onClick:M,tooltip:d},D.id)}))})},xn=function(e){var n=e.id,o=e.layout,l=e.startColor,i=e.endColor;return r.jsxs("linearGradient",oe({id:n,spreadMethod:"pad"},o==="horizontal"?{x1:"0%",x2:"100%",y1:"0%",y2:"0%"}:{x1:"0%",x2:"0%",y1:"0%",y2:"100%"},{children:[r.jsx("stop",{offset:"0%",stopColor:l}),r.jsx("stop",{offset:"100%",stopColor:i})]}))},yn=function(e){var n=e.link,o=e.layout,l=e.path,i=e.color,C=e.opacity,m=e.blendMode,j=e.enableGradient,z=e.setCurrent,g=e.tooltip,w=e.isInteractive,P=e.onClick,B=n.source.id+"."+n.target.id+"."+n.index,M=He(),d=M.animate,E=M.config,D=Fr(l),x=wt({color:i,opacity:C,config:E,immediate:!d}),L=Lt(),p=L.showTooltipFromEvent,c=L.hideTooltip,T=k.useCallback((function(N){z(n),p(k.createElement(g,{link:n}),N,"left")}),[z,n,p,g]),u=k.useCallback((function(N){p(k.createElement(g,{link:n}),N,"left")}),[p,n,g]),v=k.useCallback((function(){z(null),c()}),[z,c]),S=k.useCallback((function(N){P==null||P(n,N)}),[P,n]);return r.jsxs(r.Fragment,{children:[j&&r.jsx(xn,{id:B,layout:o,startColor:n.startColor||n.source.color,endColor:n.endColor||n.target.color}),r.jsx(Ot.path,{fill:j?'url("#'+encodeURI(B)+'")':x.color,d:D,fillOpacity:x.opacity,onMouseEnter:w?T:void 0,onMouseMove:w?u:void 0,onMouseLeave:w?v:void 0,onClick:w?S:void 0,style:{mixBlendMode:m}})]})},vn=function(e){var n=e.links,o=e.layout,l=e.linkOpacity,i=e.linkHoverOpacity,C=e.linkHoverOthersOpacity,m=e.linkContract,j=e.linkBlendMode,z=e.enableLinkGradient,g=e.setCurrentLink,w=e.currentLink,P=e.currentNode,B=e.isCurrentLink,M=e.isInteractive,d=e.onClick,E=e.tooltip,D=function(L){return P||w?B(L)?i:C:l},x=k.useMemo((function(){return o==="horizontal"?(L=dt().curve(Tr),function(p,c){var T=Math.max(1,p.thickness-2*c)/2,u=.12*(p.target.x0-p.source.x1),v=[[p.source.x1,p.pos0-T],[p.source.x1+u,p.pos0-T],[p.target.x0-u,p.pos1-T],[p.target.x0,p.pos1-T],[p.target.x0,p.pos1+T],[p.target.x0-u,p.pos1+T],[p.source.x1+u,p.pos0+T],[p.source.x1,p.pos0+T],[p.source.x1,p.pos0-T]];return L(v)+"Z"}):(function(){var p=dt().curve(Ir);return function(c,T){var u=Math.max(1,c.thickness-2*T)/2,v=.12*(c.target.y0-c.source.y1),S=[[c.pos0+u,c.source.y1],[c.pos0+u,c.source.y1+v],[c.pos1+u,c.target.y0-v],[c.pos1+u,c.target.y0],[c.pos1-u,c.target.y0],[c.pos1-u,c.target.y0-v],[c.pos0-u,c.source.y1+v],[c.pos0-u,c.source.y1],[c.pos0+u,c.source.y1]];return p(S)+"Z"}})();var L}),[o]);return r.jsx(r.Fragment,{children:n.map((function(L){return r.jsx(yn,{link:L,layout:o,path:x(L,m),color:L.color,opacity:D(L),blendMode:j,enableGradient:z,setCurrent:g,isInteractive:M,onClick:d,tooltip:E},L.source.id+"."+L.target.id+"."+L.index)}))})},bn=function(e){var n=e.nodes,o=e.layout,l=e.width,i=e.height,C=e.labelPosition,m=e.labelPadding,j=e.labelOrientation,z=e.getLabelTextColor,g=e.labelComponent,w=jt(),P=j==="vertical"?-90:0,B=n.map((function(x){var L,p,c;return o==="horizontal"?(p=x.y+x.height/2,x.x<l/2?C==="inside"?(L=x.x1+m,c=j==="vertical"?"middle":"start"):(L=x.x-m,c=j==="vertical"?"middle":"end"):C==="inside"?(L=x.x-m,c=j==="vertical"?"middle":"end"):(L=x.x1+m,c=j==="vertical"?"middle":"start")):o==="vertical"&&(L=x.x+x.width/2,x.y<i/2?C==="inside"?(p=x.y1+m,c=j==="vertical"?"end":"middle"):(p=x.y-m,c=j==="vertical"?"start":"middle"):C==="inside"?(p=x.y-m,c=j==="vertical"?"start":"middle"):(p=x.y1+m,c=j==="vertical"?"end":"middle")),{id:x.id,label:x.label,x:L,y:p,textAnchor:c,color:z(x)}})),M=He(),d=M.animate,E=M.config,D=zr(B.length,B.map((function(x){return{transform:"translate("+x.x+", "+x.y+") rotate("+P+")",color:x.color,config:E,immediate:!d}})));return r.jsx(r.Fragment,{children:D.map((function(x,L){var p=B[L];return r.jsx(g,{dominantBaseline:"central",textAnchor:p.textAnchor,transform:x.transform,style:oe({},w.labels.text,{fill:x.color,pointerEvents:"none"}),node:n[L],children:p.label},p.id)}))})},Cn=["isInteractive","animate","motionConfig","theme","renderWrapper"],Bn=function(e){var n=e.data,o=e.valueFormat,l=e.layout,i=l===void 0?I.layout:l,C=e.sort,m=C===void 0?I.sort:C,j=e.align,z=j===void 0?I.align:j,g=e.width,w=e.height,P=e.margin,B=e.colors,M=B===void 0?I.colors:B,d=e.nodeThickness,E=d===void 0?I.nodeThickness:d,D=e.nodeSpacing,x=D===void 0?I.nodeThickness:D,L=e.nodeInnerPadding,p=L===void 0?I.nodeInnerPadding:L,c=e.nodeBorderColor,T=c===void 0?I.nodeBorderColor:c,u=e.nodeOpacity,v=u===void 0?I.nodeOpacity:u,S=e.nodeHoverOpacity,N=S===void 0?I.nodeHoverOpacity:S,R=e.nodeHoverOthersOpacity,K=R===void 0?I.nodeHoverOthersOpacity:R,Z=e.nodeBorderWidth,ee=Z===void 0?I.nodeBorderWidth:Z,Q=e.nodeBorderRadius,t=Q===void 0?I.nodeBorderRadius:Q,f=e.linkOpacity,h=f===void 0?I.linkOpacity:f,s=e.linkHoverOpacity,a=s===void 0?I.linkHoverOpacity:s,O=e.linkHoverOthersOpacity,F=O===void 0?I.linkHoverOthersOpacity:O,G=e.linkContract,W=G===void 0?I.linkContract:G,H=e.linkBlendMode,Y=H===void 0?I.linkBlendMode:H,b=e.enableLinkGradient,A=b===void 0?I.enableLinkGradient:b,J=e.enableLabels,fe=J===void 0?I.enableLabels:J,he=e.labelComponent,be=he===void 0?I.labelComponent:he,pe=e.labelPosition,ie=pe===void 0?I.labelPosition:pe,y=e.labelPadding,Ce=y===void 0?I.labelPadding:y,ge=e.labelOrientation,Mt=ge===void 0?I.labelOrientation:ge,Ge=e.label,Dt=Ge===void 0?I.label:Ge,Ve=e.labelTextColor,Tt=Ve===void 0?I.labelTextColor:Ve,Ye=e.nodeTooltip,It=Ye===void 0?I.nodeTooltip:Ye,$e=e.linkTooltip,zt=$e===void 0?I.linkTooltip:$e,qe=e.isInteractive,me=qe===void 0?I.isInteractive:qe,Ke=e.onClick,Ze=e.legends,Ft=Ze===void 0?I.legends:Ze,Qe=e.layers,ae=Qe===void 0?I.layers:Qe,Je=e.role,At=Je===void 0?I.role:Je,Et=e.ariaLabel,Rt=e.ariaLabelledBy,Nt=e.ariaDescribedBy,Ut=e.forwardedRef,ce=wr(g,w,P),Be=ce.margin,je=ce.innerWidth,we=ce.innerHeight,Le=ce.outerWidth,Oe=ce.outerHeight,X=gn({data:n,valueFormat:o,layout:i,width:je,height:we,sort:m,align:z,colors:M,nodeThickness:E,nodeSpacing:x,nodeInnerPadding:p,nodeBorderColor:T,label:Dt,labelTextColor:Tt}),ke=X.nodes,de=X.links,Wt=X.legendData,Ht=X.getNodeBorderColor,$=X.currentNode,Se=X.setCurrentNode,q=X.currentLink,Pe=X.setCurrentLink,Gt=X.getLabelTextColor,Xe=k.useMemo((function(){var _=function(){return!1},re=function(){return!1};if(q&&(_=function(U){var V=U.id;return V===q.source.id||V===q.target.id},re=function(U){var V=U.source,ne=U.target;return V.id===q.source.id&&ne.id===q.target.id}),$){var te=[$.id];de.filter((function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id})).forEach((function(U){var V=U.source,ne=U.target;te.push(V.id),te.push(ne.id)})),te=Cr(te),_=function(U){var V=U.id;return te.includes(V)},re=function(U){var V=U.source,ne=U.target;return V.id===$.id||ne.id===$.id}}return{isCurrentNode:_,isCurrentLink:re}}),[q,$,de]),Me=Xe.isCurrentNode,De=Xe.isCurrentLink,Vt=k.useMemo((function(){return{links:de,nodes:ke,margin:Be,width:g,height:w,outerWidth:Le,outerHeight:Oe,currentNode:$,isCurrentNode:Me,setCurrentNode:Se,currentLink:q,isCurrentLink:De,setCurrentLink:Pe,isInteractive:me}}),[de,ke,Be,g,w,Le,Oe,$,Me,Se,q,De,Pe,me]),le={links:null,nodes:null,labels:null,legends:null};return ae.includes("links")&&(le.links=r.jsx(vn,{links:de,layout:i,linkContract:W,linkOpacity:h,linkHoverOpacity:a,linkHoverOthersOpacity:F,linkBlendMode:Y,enableLinkGradient:A,setCurrentLink:Pe,currentNode:$,currentLink:q,isCurrentLink:De,isInteractive:me,onClick:Ke,tooltip:zt},"links")),ae.includes("nodes")&&(le.nodes=r.jsx(kn,{nodes:ke,nodeOpacity:v,nodeHoverOpacity:N,nodeHoverOthersOpacity:K,borderWidth:ee,borderRadius:t,getBorderColor:Ht,setCurrentNode:Se,currentNode:$,currentLink:q,isCurrentNode:Me,isInteractive:me,onClick:Ke,tooltip:It},"nodes")),ae.includes("labels")&&fe&&(le.labels=r.jsx(bn,{nodes:ke,layout:i,width:je,height:we,labelPosition:ie,labelPadding:Ce,labelOrientation:Mt,getLabelTextColor:Gt,labelComponent:be},"labels")),ae.includes("legends")&&(le.legends=r.jsx(k.Fragment,{children:Ft.map((function(_,re){return r.jsx(Or,oe({},_,{containerWidth:je,containerHeight:we,data:Wt}),"legend"+re)}))},"legends")),r.jsx(Sr,{width:Le,height:Oe,margin:Be,role:At,ariaLabel:Et,ariaLabelledBy:Rt,ariaDescribedBy:Nt,ref:Ut,children:ae.map((function(_,re){var te;return typeof _=="function"?r.jsx(k.Fragment,{children:k.createElement(_,Vt)},re):(te=le==null?void 0:le[_])!=null?te:null}))})},jn=k.forwardRef((function(e,n){var o=e.isInteractive,l=o===void 0?I.isInteractive:o,i=e.animate,C=i===void 0?I.animate:i,m=e.motionConfig,j=m===void 0?I.motionConfig:m,z=e.theme,g=e.renderWrapper,w=(function(P,B){if(P==null)return{};var M={};for(var d in P)if({}.hasOwnProperty.call(P,d)){if(B.indexOf(d)!==-1)continue;M[d]=P[d]}return M})(e,Cn);return r.jsx(jr,{animate:C,isInteractive:l,motionConfig:j,renderWrapper:g,theme:z,children:r.jsx(Bn,oe({isInteractive:l},w,{forwardedRef:n}))})})),wn=function(e,n){return r.jsx(Br,{children:function(o){var l=o.width,i=o.height;return r.jsx(jn,oe({width:l,height:i},e,{ref:n}))}})},Ln=k.forwardRef(wn);const On=[{id:"White",group:1,total:430},{id:"Yellow",group:1,total:749},{id:"Orange",group:1,total:1204},{id:"Green",group:1,total:609},{id:"Blue",group:1,total:243},{id:"Purple",group:1,total:123},{id:"Brown",group:1,total:81},{id:"Red",group:1,total:70},{id:"Black",group:1,total:169}],Sn=[{source:"White",target:"Yellow",value:533},{source:"White",target:"Orange",value:119},{source:"White",target:"Green",value:13},{source:"White",target:"Blue",value:4},{source:"White",target:"Purple",value:3},{source:"White",target:"Brown",value:1},{source:"White",target:"Red",value:1},{source:"Yellow",target:"Orange",value:728},{source:"Yellow",target:"Green",value:82},{source:"Yellow",target:"Blue",value:9},{source:"Yellow",target:"Purple",value:1},{source:"Yellow",target:"Red",value:1},{source:"Orange",target:"Green",value:512},{source:"Orange",target:"Blue",value:28},{source:"Orange",target:"Purple",value:3},{source:"Orange",target:"Black",value:2},{source:"Green",target:"Blue",value:337},{source:"Green",target:"Purple",value:41},{source:"Green",target:"Brown",value:10},{source:"Green",target:"Red",value:7},{source:"Green",target:"Black",value:4},{source:"Blue",target:"Purple",value:194},{source:"Blue",target:"Brown",value:27},{source:"Blue",target:"Red",value:6},{source:"Blue",target:"Black",value:9},{source:"Purple",target:"Brown",value:146},{source:"Purple",target:"Red",value:15},{source:"Purple",target:"Black",value:10},{source:"Brown",target:"Red",value:117},{source:"Brown",target:"Black",value:12},{source:"Red",target:"Black",value:98}],Ne={nodes:On,links:Sn};function Pn(){const[e,n]=k.useState(Ne),[o,l]=k.useState(ze),[i,C]=k.useState(void 0),m=Mn(),j=k.useCallback(()=>{n(Ne),l(ze),C(void 0)},[]),z=k.useCallback(g=>{if(m||!g.label||g.label==="White"||g.label==="Black")return;if(g.label===i){j();return}const{nodes:w,links:P}={...Ne},B=Ue.indexOf(g.label),M=Ue.slice(0,B),d=w.filter(x=>!M.includes(x.id)),E=P.filter(x=>!M.includes(x.source)&&!M.includes(x.target)),D=ze.slice(B);n({nodes:d,links:E}),l(D),C(g.label)},[i,j,m]);return r.jsxs(ve.Fragment,{children:[r.jsx("div",{style:{textAlign:"center",height:20,marginBottom:5,fontSize:"0.9rem"},children:i&&r.jsx(se,{onClick:j,style:{color:"#ddd",cursor:"pointer"},children:"Reset"})||r.jsx("span",{children:"Click belt for details"})}),r.jsx("div",{style:{height:600},children:r.jsx(Ln,{data:e,layout:"vertical",sort:"input",margin:{top:10,right:10,bottom:20,left:10},align:"center",colors:o,nodeOpacity:1,nodeHoverOthersOpacity:.2,nodeThickness:22,nodeInnerPadding:0,nodeSpacing:0,nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.5]]},nodeBorderRadius:3,linkOpacity:.6,linkBlendMode:"normal",linkHoverOthersOpacity:.1,linkContract:-.5,enableLinkGradient:!1,labelPosition:"outside",labelOrientation:"horizontal",labelPadding:-10,labelTextColor:{from:"color",modifiers:[["brighter",5]]},onClick:g=>{z(g)},nodeTooltip:({node:g})=>r.jsx("div",{style:{fontSize:"0.8rem",background:"#444",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:r.jsxs("strong",{children:[g.label,": ",g.total]})}),linkTooltip:({link:g})=>r.jsxs("div",{style:{fontSize:"0.8rem",background:"#666",padding:"3px 4px",color:"#ddd",borderRadius:"5px"},children:[r.jsx("strong",{children:g.source.label})," to ",r.jsx("strong",{children:g.target.label})," (",g.value,")"]})})})]})}function Mn(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function Dn({data:e}){const{width:n}=bt(),l=n<560?"8px 8px 32px 8px":"24px 24px 32px 24px",i={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},C={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return r.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:l,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[r.jsxs("div",{style:C,role:"heading","aria-label":"User Belt Flows",children:["User Belt Flows",r.jsx("div",{style:{fontSize:"0.9rem",fontWeight:400},children:"Discord users since Nov. 2019"})]}),r.jsx(Pn,{}),r.jsx("div",{style:i,role:"heading","aria-label":"User Drilldown",children:"User Drilldown"}),r.jsx(Jr,{data:e}),r.jsx("div",{style:i,role:"heading",children:"Scorecard Locks"}),r.jsx(_r,{data:e})]})}function Tn({children:e,allEntries:n,scorecardEntries:o,profile:l}){const{filters:i}=k.useContext(We),{search:C,id:m,tab:j,name:z,sort:g,image:w,expandAll:P,dataset:B,...M}=i,{userBelt:d}=M,E=k.useCallback(p=>n.find(c=>c.id===p),[n]),D=k.useMemo(()=>Object.keys(o).map(p=>{var T,u,v;const c=E(p);return c?{...o[p],userBelt:Object.keys(o[p].scorecardPicks),currentPicks:o[p].scorecardPicks[d||"All Belts"],...c,makes:c.makeModels[0].make?c.makeModels.map(({make:S})=>S):c.makeModels[0].model,fuzzy:rt(c.makeModels.map(({make:S,model:N})=>[S,N]).flat().filter(S=>S).concat([c.version,c.notes,c.belt]).join(",")),content:[(T=c.media)!=null&&T.some(S=>!S.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(u=c.media)!=null&&u.some(S=>S.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((v=c.links)==null?void 0:v.length)>0?"Has Links":"No Links",Zt[c.belt].danPoints>0?"Worth Dan Points":void 0,tt(c.lastUpdated).isAfter(tt().subtract(1,"days"))?"Updated Recently":void 0,c.belt.startsWith("Black")?"Is Black":void 0,c.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(S=>S),collection:Kt.locks.map.map(S=>l&&l[S.key]&&l[S.key].includes(c.id)?S.label:"Not "+S.label),collectionSaves:Rr[c.id]||0,simpleBelt:c.belt.replace(/\s\d/g,"")}:null}).filter(p=>p),[E,l,o,d]),x=k.useMemo(()=>{const p=Nr(M,D),c=C&&p.find(u=>u.id===C);let T=p;return c?T=[c]:C&&(T=hr.go(rt(C),p,{keys:In,threshold:-25e3}).map(u=>({...u.obj,score:u.score}))),g?T.sort((u,v)=>{if(g==="beltAscending")return Qt(u.belt,v.belt)||v.currentPicks-u.currentPicks||u.fuzzy.localeCompare(v.fuzzy);if(g==="beltDescending")return Jt(u.belt,v.belt)||v.currentPicks-u.currentPicks||u.fuzzy.localeCompare(v.fuzzy);if(g==="alphaAscending")return u.fuzzy.localeCompare(v.fuzzy);if(g==="alphaDescending")return v.fuzzy.localeCompare(u.fuzzy)}):T.sort((u,v)=>v.currentPicks-u.currentPicks||u.fuzzy.localeCompare(v.fuzzy)).map((u,v)=>({...u,displayRank:v+1}))},[M,D,C,g]),L=k.useMemo(()=>({allEntries:n,visibleEntries:x,getEntryFromId:E,expandAll:P,profile:l}),[n,E,x,P,l]);return r.jsx(Ct.Provider,{value:L,children:e})}const In=["fuzzy"];function jo(){const{lockCollection:e}=k.useContext(Xt);lr("Explore Scorecard");const{data:n,loading:o,error:l,errorMessage:i}=ir({urls:zn});return r.jsxs(ve.Fragment,{children:[r.jsx(_t,{title:"Explore Scorecard"}),l&&r.jsx(ur,{errorMessage:i}),o&&r.jsx(or,{}),!o&&!l&&!!n&&r.jsx(er,{filterFields:Er,children:r.jsx(Tn,{allEntries:tr,scorecardEntries:n.scorecardStats.lockCountsByUserBelt,profile:e,children:r.jsx(Dn,{data:{...n,lockStats:dr}})})}),r.jsx(rr,{}),r.jsx(nr,{feature:"stats"})]})}const zn={brandDistribution:Kr,collectionsStatsCurrent:qr,popularAreas:$r,redditGrowth:Yr,siteFullNew:Vr,pickStatsData:Gr,scorecardStats:Hr,discordBeltCounts:Wr,redditBeltCounts:Ur};export{jo as default};
