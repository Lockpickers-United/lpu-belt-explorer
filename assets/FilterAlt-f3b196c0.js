import{r as t,O as B,P as w,j as e,u as E,F as M,J as T,I,B as q,a4 as L,X as G,R as J,aa as X,ac as K}from"./index-358cf55c.js";import{d as D}from"./Search-eb4b844c.js";import{B as Q}from"./Sort-9379a15a.js";import{T as U}from"./TextField-c2add89f.js";import{I as A,C as Y}from"./Chip-42802da5.js";import{D as Z}from"./DataContext-eb10ae68.js";import"./index-e21bed11.js";import{F as N,I as ee,S as te}from"./Select-41c1ecaa.js";import{B as re}from"./Box-21b0306e.js";function se(a,n){const[c,o]=t.useState(a);return t.useEffect(()=>{const h=setTimeout(()=>o(a),n||500);return()=>{clearTimeout(h)}},[a,n]),c}const b={safelocksOwn:"Own",safelockCracked:"Cracked",safelockWishlist:"Wishlist",shippingSplit:"Shipping included",shippingNotSplit:"Winner may pay shipping"};var R={},ne=w;Object.defineProperty(R,"__esModule",{value:!0});var O=R.default=void 0,oe=ne(B()),ae=e;O=R.default=(0,oe.default)((0,ae.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll");function _e({forceText:a}){const{isMobile:n}=E(),{filterCount:c,clearFilters:o}=t.useContext(M);return c===0?null:n&&!a?e.jsx(T,{title:"Clear Filters",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:o,children:e.jsx(O,{})})}):e.jsx(q,{variant:"outlined",color:"inherit",onClick:o,style:{minWidth:120,marginRight:8},children:"ClearÂ Filters"})}var W={},ie=w;Object.defineProperty(W,"__esModule",{value:!0});var V=W.default=void 0,le=ie(B()),ue=e;V=W.default=(0,le.default)((0,ue.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function Fe({label:a,extraFilters:n=[],keepOpen:c}){const[o]=L(),{filters:h,addFilters:C,removeFilter:g,isFiltered:j}=t.useContext(M),[f,p]=t.useState(h.search||""),{isMobile:m,width:y}=E(),S=y<=500,d=t.useRef();G("s",()=>{var x;return(x=d==null?void 0:d.current)==null?void 0:x.focus()},{preventDefault:!0});const _=t.useCallback(()=>{window.scrollTo({top:0}),p(""),g("search",""),d.current.focus()},[g]),k=t.useCallback(x=>{const{value:$}=x.target;p($),$.length===0&&g("search","")},[g]),u=se(f,250).replaceAll("	"," ");t.useEffect(()=>{u&&u!==o.get("search")&&(u?(window.scrollTo({top:0}),C([{key:"search",value:u},{key:"id",value:void 0},{key:"name",value:void 0},...n],!0)):C([{key:"search",value:u}],!0))},[u]);const[v,r]=t.useState(!1),i=t.useCallback(()=>setTimeout(()=>r(!1),0),[]),F=t.useCallback(()=>{r(!0),setTimeout(()=>{d.current.focus(),d.current.select()},0)},[]);t.useEffect(()=>{const x=o.get("search");x!==f&&p(x||"")},[o]);const s=f?e.jsx(A,{position:"end",children:e.jsx(T,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{color:"inherit",onClick:_,edge:"end",size:"small",children:e.jsx(V,{})})})}):null,l=m?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},z=v&&m?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},H=f?"secondary":"inherit";return e.jsxs(J.Fragment,{children:[!v&&m&&!c&&!j&&e.jsx(T,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{color:"inherit",onClick:F,children:e.jsx(Q,{invisible:f.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(D,{})})})}),(v||!m||c||j)&&e.jsx(U,{placeholder:S?a:`Search ${a}`,InputProps:{inputProps:{ref:d},startAdornment:e.jsx(A,{position:"start",children:e.jsx(D,{color:H})}),endAdornment:s},variant:"standard",color:"secondary",onChange:k,onBlur:i,value:f,style:{...l,...z},fullWidth:!0}),e.jsx(X,{invisible:!0,open:v&&m,onClick:i})]})}function Te({label:a,fieldName:n,onFilter:c,sort:o,tab:h}){const{visibleEntries:C}=t.useContext(Z),{filters:g}=t.useContext(M),j=t.useMemo(()=>h==="search"||!h?C:C.filter(r=>r.simpleBelt===h),[h,C]),[f,p]=t.useState(!1),m=t.useCallback(r=>{p(!1),setTimeout(()=>c(n,r.target.value,!0),0),setTimeout(()=>document.activeElement.blur())},[n,c]),y=t.useCallback(()=>{p(!1),setTimeout(()=>document.activeElement.blur())},[]),S=t.useCallback(()=>p(!0),[]),{counts:d,options:_}=t.useMemo(()=>{const r=j.map(s=>s[n]).flat().filter(s=>s),i=r.reduce((s,l)=>(s[l]||(s[l]=0),s[l]++,s),{}),F=[...new Set(r)].sort((s,l)=>{if(o)return o(s,l);if(typeof s=="string"&&typeof l=="string")return s.localeCompare(l);if(Number.isInteger(s)&&Number.isInteger(l))return s-l});return{counts:i,options:F}},[j,n,o]),k=t.useDeferredValue(g),u=k[n],v=Array.isArray(u)?k[n]:u?[u]:[];return e.jsxs(N,{style:{minWidth:120,maxWidth:300,marginTop:8},fullWidth:!0,children:[e.jsx(ee,{id:`filter-${n}`,color:"secondary",children:a}),e.jsx(te,{multiple:!0,label:a,labelId:`filter-${n}`,value:v,onChange:m,style:{marginBottom:0},color:"secondary",open:f,onClose:y,onOpen:S,onBlur:y,MenuProps:{PaperProps:{style:{maxHeight:ce*8+de}}},renderValue:r=>e.jsx(re,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:r.map(i=>e.jsx(Y,{label:b[i]?b[i]:i},i))}),children:_.map((r,i)=>e.jsx(K,{value:r,children:b[r]?b[r]:r+` (${d[r]||0})`},i))})]})}const ce=48,de=8;var P={},he=w;Object.defineProperty(P,"__esModule",{value:!0});var fe=P.default=void 0,pe=he(B()),me=e;fe=P.default=(0,pe.default)((0,me.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt");export{_e as C,Te as F,Fe as S,fe as d,b as f};
