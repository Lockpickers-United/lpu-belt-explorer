import{j as t,R as b}from"./index-ee05425d.js";import{u as D,L as V}from"./useData-ad2792eb.js";import{u as x}from"./useWindowSize-aefed370.js";import{L as R}from"./LockViewsLine-a778b2a9.js";import{A as j,p as M}from"./adminChartDefaults-5a4d48d2.js";import{P}from"./nivo-line.es-db82d4e9.js";import{d as W}from"./dayjs.min-da7b112a.js";import"./LPU-c3fa7122.js";import"./LinearProgress-63fa438c.js";import"./TableRow-ec111ec2.js";const F=({data:o})=>{const{firstVistsLastSevenDays:n}=o,{width:e}=x(),i=e<=360,r=e<=395,s=e<=428,c=e<=560,m=e<=820,d=i?".8rem":r?".85rem":s?".9rem":".95rem",l=400;return t.jsx(j,{tableData:n,tableWidth:l,fontSize:d})},T=({data:o})=>{const{pageTracking:n}=o,{width:e}=x(),i=e<=360,r=e<=395,s=e<=428,c=e<=560,m=e<=820,d=i?".8rem":r?".85rem":s?".9rem":".95rem",l="100%";return t.jsx(j,{tableData:n,tableWidth:l,fontSize:d})},H=({lineData:o})=>{const n=[o.traffic28days.data],e=[],i=new Map,r=new Map,s=new Map;n.forEach(a=>{const v=[],k=[],L=[];for(let p=0;p<a.length;p++){const g=new Map;g.x=a[p].date,g.y=a[p].visitors,v.push(g);const w=new Map;w.x=a[p].date,w.y=a[p].visits,k.push(w);const S=new Map;S.x=a[p].date,S.y=a[p].lockViews,L.push(S)}i.id="Visitors",i.data=v,r.id="Visits",r.data=k,s.id="Lock Views",s.data=L,e.push(r),e.push(i),e.push(s)});const{width:c}=x(),m=c<=360,d=c<=395,l=c<=428,f=c<=560,h=c<=820,u=m||d?200:l?210:h?230:350,y=f?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:u,width:"100%"},children:t.jsx(P,{theme:M,data:e,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:y,height:u,curve:"natural",yScale:{type:"linear",min:0,max:4e3,stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#444",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},z=({fullData:o})=>{const n=o.traffic28days,e=28;function i(a){return W().subtract(e+1,"day").isBefore(W(a.date))}const r={columns:n.columns.filter(a=>a.id!=="weekend").filter(a=>a.id!=="visitors"),data:n.data.filter(i)},{width:s}=x(),c=s<=360,m=s<=395,d=s<=428,l=s<=560,f=s<=820,h=c?".8rem":m?".85rem":d||l||f?".9rem":".85rem",u=170,y=340;return t.jsx(j,{tableData:r,tableWidth:u,tableHeight:y,fontSize:h})};function A({data:o}){const{width:n}=x(),e=n<=560,s={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...e?{}:{display:"flex"}};return t.jsx(b.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:s,children:[t.jsx(H,{lineData:o}),t.jsx(z,{fullData:o})]})})})}function K(){var h;const{data:o,loading:n,error:e}=D({urls:C}),{siteFull:i,siteSummary:r}=o||{},{width:s}=x(),m=s<560?"8px 8px 32px 8px":"24px 24px 32px 24px",d={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},l={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},f=(h=i==null?void 0:i.firstVistsLastSevenDays)!=null&&h.countryCount?l:d;return n?t.jsx(V,{}):e?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:m,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!i.firstVistsLastSevenDays.countryCount&&t.jsxs(b.Fragment,{children:[t.jsx("div",{style:d,children:"First Visits (Last Seven Days)"}),t.jsx(F,{data:i,tableWidth:"50%"})]}),t.jsxs(b.Fragment,{children:[t.jsxs("div",{style:f,children:["Site Summary",t.jsx("br",{})]}),t.jsx(A,{data:i})]}),t.jsx("div",{style:l,children:"Weekly Lock Views"}),t.jsx(R,{data:r}),t.jsx("div",{style:l,children:"Page Tracking"}),t.jsx(T,{data:i})]})}const C={siteFull:"https://explore.lpubelts.com/data/statsSiteFull.json",siteSummary:"https://explore.lpubelts.com/data/statsSiteSummary.json"};export{K as default};
