import{Y as P,Z as _,$ as A,a0 as M,ac as $,r,F as L,u as O,a5 as H,br as J,j as e,R as U,W as j,U as S,ai as V}from"./index-UBzCiWGi.js";import{S as b,I as k}from"./Search-DCN_Mi4q.js";import{B as Y}from"./Sort-DEFxbh5W.js";import{T as Z}from"./TextField-Cbl9-Ur-.js";var l={},R;function G(){if(R)return l;R=1;var c=P();Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var h=c(_()),n=A();return l.default=(0,h.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),l}var K=G();const N=M(K);function te({label:c,extraFilters:h=[],entryCount:n=0,keepOpen:p}){const[u]=$(),{addFilters:m,removeFilter:x,isFiltered:g}=r.useContext(L),[o,f]=r.useState(u.get("search")||""),{isMobile:i,width:T}=O(),y=T<=500,t=r.useRef();H("s",()=>{var s;return(s=t==null?void 0:t.current)==null?void 0:s.focus()},{preventDefault:!0});const w=n>1?`Search ${n?n.toString()+" ":""}${c}`:"Search",F=r.useCallback(()=>{window.scrollTo({top:0}),f(""),x("search",""),t.current.focus()},[x]),I=r.useCallback(s=>{const{value:E}=s.target;f(E)},[]),a=J(o.replaceAll("	"," "),250);r.useEffect(()=>{a&&a!==u.get("search")?a?(window.scrollTo({top:0}),m([{key:"search",value:a},{key:"id",value:void 0},{key:"name",value:void 0},...h],!0)):(console.log("SearchBox: debounceText is empty"),m([{key:"search",value:a}],!0)):a||x("search","")},[a]);const[d,v]=r.useState(!1),C=r.useCallback(()=>setTimeout(()=>v(!1),0),[]),B=r.useCallback(()=>{v(!0),setTimeout(()=>{t.current.focus(),t.current.select()},0)},[]);r.useEffect(()=>{const s=u.get("search");s!==o&&f(s||"")},[u]);const q=o?e.jsx(k,{position:"end",children:e.jsx(j,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:F,edge:"end",size:"small",children:e.jsx(N,{})})})}):null,W=i?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},z=d&&i?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},D=o?"secondary":"inherit";return e.jsxs(U.Fragment,{children:[!d&&i&&!p&&!g&&e.jsx(j,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(S,{color:"inherit",onClick:B,children:e.jsx(Y,{invisible:o.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(b,{})})})}),(d||!i||p||g)&&e.jsx(Z,{placeholder:y?c:w,InputProps:{inputProps:{ref:t},startAdornment:e.jsx(k,{position:"start",children:e.jsx(b,{color:D})}),endAdornment:q},variant:"standard",color:"secondary",onChange:I,onBlur:C,value:o,style:{...W,...z},fullWidth:!0}),e.jsx(V,{invisible:!0,open:d&&i,onClick:C})]})}export{te as S};
