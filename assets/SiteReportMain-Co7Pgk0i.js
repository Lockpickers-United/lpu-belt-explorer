import{u as j,j as t,d as L,R as A,r as k,b as H,L as R}from"./index-BciVRwCK.js";import{L as z}from"./LoadingDisplay-CLfqkACL.js";import{u as F}from"./useData-fHgkInZF.js";import{u as E}from"./usePageTitle-Dxw-Sp-j.js";import{s as B}from"./dataUrls-DVxTtpO-.js";import{L as I}from"./LockViewsLine-Cpr1zDQb.js";import{A as V}from"./AdminStatsTable-bnM3rMiJ.js";import{y as Y}from"./nivo-line--_pOvXZ6.js";import{p as G}from"./adminChartDefaults-CBhS7ojG.js";import{C as O}from"./ChoiceButtonGroup-zeqObJhO.js";import{c as U,d as X,T as $,a as P,b as C,e as q}from"./TableRow-Cjp2qElq.js";import{A as J}from"./AdminStatsTableSort-XsRqHmtM.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-5iv8lwMp.js";import"./chartDefaults-pV7GKcxU.js";import"./nivo-legends-BulgWC0K.js";import"./isEqual-C4cPn6H-.js";import"./uniq-CCxjAaOU.js";import"./utcYear-DEll-H_L.js";import"./ToggleButtonGroup-lorbU37y.js";import"./ArrowDropDown-fZQ9yDl3.js";const K=({data:r})=>{const{firstVistsLastSevenDays:a}=r,{width:i}=j(),s=i<=360,m=i<=395,o=i<=428,d=i<=560,l=i<=820,c=s?".8rem":m?".85rem":o?".9rem":".95rem";return t.jsx(V,{tableData:a,tableWidth:400,fontSize:c})},Q=({data:r})=>{const{pageTracking:a}=r,i=Object.keys(a.data[13]).sort((f,p)=>a.data[13][p]-a.data[13][f]).filter(f=>f!=="total"&&f!=="date");i.unshift("date"),i.push("total");const m={columns:i.reduce((f,p)=>{const x=a.columns.find(e=>e.id===p);return f.push(x),f},[]),data:a.data},{width:o}=j(),d=o<=360,l=o<=395,c=o<=428,w=o<=560,S=o<=820,g=d?".8rem":l?".85rem":c?".9rem":".95rem";return t.jsx(V,{tableData:m,tableWidth:"100%",fontSize:g})},Z=({lineData:r})=>{const a=[r.traffic28days.data],i=[],s=new Map,m=new Map,o=new Map;a.forEach(p=>{const x=[],e=[],n=[];for(let b=0;b<p.length;b++){let y=p[b].date;y=y+" 23:59:59";const W=new Map;W.x=y,W.y=p[b].visitors,x.push(W);const T=new Map;T.x=y,T.y=p[b].visits,e.push(T);const D=new Map;D.x=y,D.y=p[b].lockViews,n.push(D)}s.id="Visitors",s.data=x,m.id="Visits",m.data=e,o.id="Lock Views",o.data=n,i.push(m),i.push(s),i.push(o)});const{width:d}=j(),l=d<=360,c=d<=395,w=d<=428,S=d<=560,g=d<=820,v=l||c?200:w?210:g?230:350,f=S?{top:10,right:20,bottom:50,left:50}:{top:25,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:v,width:"100%"},children:t.jsx(Y,{theme:G,data:i,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:f,height:v,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.0f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d %H:%M:%S"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#b4b4b4",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},_=({fullData:r})=>{const a=r.traffic28days,i=28;function s(p){return L().subtract(i+1,"day").isBefore(L(p.date))}const m={columns:a.columns.filter(p=>p.id!=="weekend").filter(p=>p.id!=="visitors"),data:a.data.filter(s)},{width:o}=j(),d=o<=360,l=o<=395,c=o<=428,w=o<=560,S=o<=820,g=d?".8rem":l?".85rem":c||w||S?".9rem":".85rem";return t.jsx(V,{tableData:m,tableWidth:170,tableHeight:340,fontSize:g})};function N({data:r}){const{width:a}=j(),i=a<=560,o={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}};return t.jsx(A.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:o,children:[t.jsx(Z,{lineData:r}),t.jsx(_,{fullData:r})]})})})}const tt=({data:r})=>{const a=r.popularCountries1,i=r.popularCountries2,{width:s}=j(),m=s<=560,l={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...m?{}:{display:"flex"}},c="400px",w=".95rem";return t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:l,children:[t.jsx(V,{tableData:a,tableWidth:c,fontSize:w,wrap:!0}),t.jsx("div",{style:{width:"75px"},children:"Â "}),t.jsx(V,{tableData:i,tableWidth:c,fontSize:w,wrap:!0})]})})};function et({data:r}){const{width:a}=j(),i=a<500,s=a<700,m=s?280:400,o=s?260:375,d=i?320:450,l={border:0,padding:"4px 8px 0px 0px",fontWeight:400},S={...{width:"100%",padding:"8px 16px",marginTop:16,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...s?{}:{display:"flex"}},g=k.useMemo(()=>{const{popularCountries:x,popularEuropeanCountries:e,popularStates:n}=r.popularAreas;return[{label:"Worldwide",data:x,map:st},{label:"Europe",data:e,map:it},{label:"US States",data:n,map:ot}]},[r]),[v,f]=k.useState(g[0]),p=k.useCallback(x=>f(x),[]);return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(O,{options:g,onChange:p}),t.jsxs("div",{style:S,children:[t.jsx("div",{style:{backgroundColor:"#000",border:"1px solid #666",padding:12,align:"center",margin:"10px 0px 0px 0px",width:200,height:m,marginLeft:"auto",marginRight:"auto"},children:t.jsx(U,{id:"areaList",sx:{height:o,backgroundColor:"#111",margin:"auto"},children:t.jsxs(X,{stickyHeader:!0,children:[t.jsx($,{children:t.jsxs(P,{children:[t.jsx(C,{style:{padding:"4px 10px 4px 12px",fontWeight:700,textAlign:"right"},children:"#"}),t.jsx(C,{style:{padding:"4px 0px",fontWeight:700},children:"Area"})]})}),t.jsx(q,{children:v.data.data.map((x,e)=>t.jsxs(P,{index:e,children:[t.jsx(C,{style:l,sx:{textAlign:"right",padding:"0px",width:34},children:e+1},e+1),t.jsx(C,{style:l,children:x.area},x.area)]},e))})]})})}),t.jsx("div",{style:{flexGrow:1,width:d},children:t.jsx("img",{id:"mapImage",alt:"map",src:v.map,width:d})})]})]})}const st="https://explore.lpubelts.com/maps/mapWorld.gif",it="https://explore.lpubelts.com/maps/mapEurope.gif",ot="https://explore.lpubelts.com/maps/mapUSA.gif",at=({data:r})=>{const a=[360,375,384,393,412,414,428,430,1024,1440,1536,1920,2560,3440],i=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(b=>{const y=b+"";n.width===b&&(e[y]=e[y]?e[y]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),s=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(b=>{const y=b+"";n.width<=b&&(e[y]=e[y]?e[y]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),o=Object.keys(i).sort((e,n)=>e-n).filter(e=>e!=="total"&&e!=="359-").map(e=>({lockViews:i[e],width:e,percentViews:Math.floor(i[e]/i.total*100)+"%",cumulativeViews:Math.floor(s[e]/i.total*100)+"%"}));o.unshift({lockViews:i["359-"],width:"359-",percentViews:Math.floor(i["359-"]/i.total*100)+"%",cumulativeViews:Math.floor(s["359-"]/i.total*100)+"%"}),o.push({lockViews:i.total,width:"total",percentViews:"100%",cumulativeViews:"100%"});const d={columns:[...r.screenWidths.columns,{name:"Percent Views",align:"center",id:"percentViews"},{name:"Cumulative Views",align:"center",id:"cumulativeViews"}],data:o},{width:l}=j(),c=l<=360,w=l<=395,S=l<=428,g=l<=560,v=l<=820,f=c?".8rem":w?".85rem":S||g||v?".9rem":".85rem";return t.jsx("div",{children:t.jsx(V,{tableData:d,tableWidth:550,tableHeight:650,fontSize:f})})},nt=({data:r})=>{const a=H(),{searchTerms:i}=r,s=!0,[m,o]=k.useState("completedSearches"),[d,l]=k.useState(!0),c=[{name:"#",align:"center",id:"index"},...i.columns,{id:"viewsPerSearch",name:"Views/Search",align:"center"}],w=i.data.reduce((h,u)=>{h=h||{};const M=u.completedSearches>0?u.lockViews/u.completedSearches:0;return h[u.term]=Math.round(M),h},{}),g=i.data.map(h=>({...h,viewsPerSearch:w[h.term]})).sort((h,u)=>{switch(m){case"lockViews":return(u.lockViews||0)-(h.lockViews||0)||h.term.localeCompare(u.term);case"completedSearches":return(u.completedSearches||0)-(h.completedSearches||0)||h.term.localeCompare(u.term);case"viewsPerSearch":return(u.viewsPerSearch||0)-(h.viewsPerSearch||0)||h.term.localeCompare(u.term);default:return(u.lockViews||0)-(h.lockViews||0)||h.term.localeCompare(u.term)}}).slice(0,300).map((h,u)=>({index:u+1,...h})),v=d?g:g.reverse(),f={columns:c,data:v},p=k.useCallback((h,u)=>h==="term"?t.jsx(R,{onClick:()=>a(`/locks?tab=search&search=${u}`),style:{color:"#fff"},children:u}):u,[a]),{width:x}=j(),e=x<=360,n=x<=395,b=x<=428,y=x<=560,W=x<=820,T=e?".8rem":n?".85rem":b||y||W?".9rem":".85rem";return t.jsx("div",{children:t.jsx(J,{tableData:f,tableWidth:550,fontSize:T,sortable:s,tableHeight:750,sort:m,setSort:o,ascending:d,setAscending:l,linkFunction:p})})};function Lt(){var g;E("Site Report");const{data:r,loading:a,error:i}=F({urls:rt}),{siteFullNew:s}=r||{},{width:m}=j(),d=m<560?"8px 8px 32px 8px":"24px 24px 32px 24px",l={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},c={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},w=(g=s==null?void 0:s.firstVistsLastSevenDays)!=null&&g.countryCount?c:l,S=a?"--":"(updated: "+L(s==null?void 0:s.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${s==null?void 0:s.metadata.timezone})`;return a?t.jsx(z,{}):i?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:d,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!s.firstVistsLastSevenDays.countryCount&&t.jsxs(A.Fragment,{children:[t.jsx("div",{style:l,children:"First Visits (Last Seven Days)"}),t.jsx(K,{data:s,tableWidth:"50%"})]}),t.jsxs("div",{style:w,children:["Site Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.85rem"},children:S})]}),t.jsx(N,{data:s}),t.jsx("div",{style:c,children:"Weekly Lock Views"}),t.jsx(I,{data:s}),t.jsx("div",{style:c,children:"Page Tracking"}),t.jsx(Q,{data:s}),t.jsx("div",{style:c,children:"Popular Areas"}),t.jsx(et,{data:s}),!!s.popularCountries1&&t.jsxs(A.Fragment,{children:[t.jsx("div",{style:c,children:"Popular Countries"}),t.jsx(tt,{data:s})]}),t.jsx("div",{style:c,children:"Lock Views by Search Term"}),t.jsx(nt,{data:s}),t.jsx("div",{style:c,children:"Lock Views by Screen Width"}),t.jsx(at,{data:s})]})}const rt={siteFullNew:B};export{Lt as default};
