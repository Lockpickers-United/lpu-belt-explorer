import{r as a,j as o,ae as j,U as h,J as k,af as C,R as P,N as y,O as S,P as F}from"./index-03f7f184.js";import{D as L,a as N,d as D}from"./BeltStripe-92be6882.js";import{S as E,F as v,a as w,l as R}from"./sortFields-2dfc02c5.js";import{a as B}from"./LockListContext-8528a58e.js";import{L as u}from"./LoadingDisplay-b11c1229.js";import{u as T}from"./useData-50cd3b3b.js";import{u as W}from"./useWindowSize-ca99ee8d.js";import{N as b}from"./NoProfileData-21cdc61a.js";import{P as I}from"./ProfileNotFound-7369bba5.js";import{S as $,d as A,a as M}from"./safelocks-82d973f4.js";import{I as O}from"./InlineFilterDisplay-c6004115.js";import{P as U}from"./ProfileHeader-3f4554a6.js";import"./Select-7cd51ee9.js";import"./LoadingDisplay-fbea82b9.js";import"./Search-3c4fee4f.js";import"./Sort-9571245a.js";import"./TextField-11e81479.js";import"./LPU-c3fa7122.js";import"./LinearProgress-d3c0a794.js";import"./index-e6ce98a9.js";import"./index-232b21aa.js";import"./ImageViewer-000b3f20.js";import"./Link-4f6cb35f.js";import"./Dialog-3ff9c834.js";import"./ContentCopy-3e11d357.js";import"./CopyProfileLinkButton-50cee6cf.js";import"./ToggleButtonGroup-9178fab3.js";import"./Link-8c78cef7.js";function V({profile:i}){const[r,d]=a.useState(!1),{visibleEntries:n=[]}=a.useContext(L),m=a.useDeferredValue(r);return o.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:0},children:[o.jsx(O,{profile:i,collectionType:"safelocks"}),n==null?void 0:n.map(l=>o.jsx($,{entry:l,expanded:l.id===m,onExpand:d},l.id))]})}function ho(){const{userId:i}=j(),{user:r}=a.useContext(h),{getProfile:d,lockCollection:n}=a.useContext(k),{isMobile:m}=W(),l=a.useCallback(async()=>{try{const t=(r==null?void 0:r.uid)!==i?await d(i):n;if(t){const f=t.displayName?t.displayName.toLowerCase().endsWith("s")?`${t.displayName}'`:`${t.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${f} Safe Locks`}return t}catch(t){return console.error("Error loading profile.",t),null}},[d,n,r,i]),{data:e={},loading:s,error:p}=T({loadFn:l}),c=a.useMemo(()=>{if(s||!e)return[];const t=new Set(C.safelocks.getCollected(e));return A.filter(f=>t.has(f.id))},[e,s]),x=o.jsxs(P.Fragment,{children:[o.jsx(E,{label:"Collection"}),o.jsx(v,{}),o.jsx(w,{sortValues:R}),!m&&o.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]}),g=s?"Loading...":"Safe Locks";return s||!e?o.jsx(u,{}):o.jsx(N,{filterFields:D,children:o.jsx(M,{allEntries:c,profile:e,children:o.jsx(B,{children:o.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[o.jsx(y,{title:g,extras:x}),o.jsx(U,{profile:e,page:"safelocks",owner:r&&r.uid===i}),s&&o.jsx(u,{}),!s&&e&&!p&&c.length>0&&o.jsx(V,{profile:e}),!s&&e&&!p&&c.length===0&&o.jsx(b,{collectionType:"safelocks"}),!s&&(!e||p)&&o.jsx(I,{}),o.jsx(S,{}),o.jsx(F,{feature:"profile"})]})})})})}export{ho as default};
