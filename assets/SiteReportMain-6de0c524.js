import{j as e,R as b}from"./index-9d2ec8bd.js";import{u as W,L as V}from"./useData-f09e7622.js";import{u as x}from"./useWindowSize-ff846502.js";import{L as M}from"./LockViewsLine-a7a1eea3.js";import{A as v,p as R}from"./adminChartDefaults-fefc39ce.js";import{P as T}from"./nivo-line.es-0c950a94.js";import{d as j}from"./dayjs.min-55d04f5b.js";import"./LPU-c3fa7122.js";import"./LinearProgress-29ca7fab.js";import"./TableRow-2627555a.js";const P=({data:n})=>{const{firstVistsLastSevenDays:a}=n,{width:i}=x(),t=i<=360,r=i<=395,s=i<=428,c=i<=560,l=i<=820,m=t?".8rem":r?".85rem":s?".9rem":".95rem",d=400;return e.jsx(v,{tableData:a,tableWidth:d,fontSize:m})},z=({data:n})=>{const{pageTracking:a}=n,{width:i}=x(),t=i<=360,r=i<=395,s=i<=428,c=i<=560,l=i<=820,m=t?".8rem":r?".85rem":s?".9rem":".95rem",d="100%";return e.jsx(v,{tableData:a,tableWidth:d,fontSize:m})},H=({lineData:n})=>{const a=[n.traffic28days.data],i=[],t=new Map,r=new Map,s=new Map;a.forEach(o=>{const k=[],L=[],D=[];for(let p=0;p<o.length;p++){const g=new Map;g.x=o[p].date,g.y=o[p].visitors,k.push(g);const S=new Map;S.x=o[p].date,S.y=o[p].visits,L.push(S);const w=new Map;w.x=o[p].date,w.y=o[p].lockViews,D.push(w)}t.id="Visitors",t.data=k,r.id="Visits",r.data=L,s.id="Lock Views",s.data=D,i.push(r),i.push(t),i.push(s)});const{width:c}=x(),l=c<=360,m=c<=395,d=c<=428,f=c<=560,y=c<=820,h=l||m?200:d?210:y?230:350,u=f?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:70,left:50};return e.jsx("div",{style:{height:h,width:"100%"},children:e.jsx(T,{theme:R,data:i,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:u,height:h,curve:"natural",yScale:{type:"linear",min:0,max:4e3,stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#444",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},A=({fullData:n})=>{const a=n.traffic28days,i=28;function t(o){return j().subtract(i+1,"day").isBefore(j(o.date))}const r={columns:a.columns.filter(o=>o.id!=="weekend").filter(o=>o.id!=="visitors"),data:a.data.filter(t)},{width:s}=x(),c=s<=360,l=s<=395,m=s<=428,d=s<=560,f=s<=820,y=c?".8rem":l?".85rem":m||d||f?".9rem":".85rem",h=170,u=340;return e.jsx(v,{tableData:r,tableWidth:h,tableHeight:u,fontSize:y})};function F({data:n}){const{width:a}=x(),i=a<=560,s={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}};return e.jsx(b.Fragment,{children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:s,children:[e.jsx(H,{lineData:n}),e.jsx(A,{fullData:n})]})})})}function J(){var h;const{data:n,loading:a,error:i}=W({urls:Y}),{siteFull:t,siteSummary:r}=n||{},{width:s}=x(),l=s<560?"8px 8px 32px 8px":"24px 24px 32px 24px",m={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},d={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},f=(h=t==null?void 0:t.firstVistsLastSevenDays)!=null&&h.countryCount?d:m,y=a?"--":"(updated: "+j(t==null?void 0:t.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${t==null?void 0:t.metadata.timezone})`;return a?e.jsx(V,{}):i?null:e.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:l,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!t.firstVistsLastSevenDays.countryCount&&e.jsxs(b.Fragment,{children:[e.jsx("div",{style:m,children:"First Visits (Last Seven Days)"}),e.jsx(P,{data:t,tableWidth:"50%"})]}),e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:f,children:["Site Summary",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.7rem"},children:y})]}),e.jsx(F,{data:t})]}),e.jsx("div",{style:d,children:"Weekly Lock Views"}),e.jsx(M,{data:r}),e.jsx("div",{style:d,children:"Page Tracking"}),e.jsx(z,{data:t})]})}const Y={siteFull:"https://explore.lpubelts.com/data/statsSiteFull.json",siteSummary:"https://explore.lpubelts.com/data/statsSiteSummary.json"};export{J as default};
