import{Z as Y,$ as J,a0 as K,a1 as Q,r as a,j as e,X as R,V as P,R as S,b as Z,J as W,K as ee,M as te,O as H,P as ie,Q as E,U as I,aB as oe,B as se,T as O,u as T,A as _,a8 as re,ab as ae,ac as ne,a6 as le,F as de,D as ce,aC as pe,a9 as me,e as xe,N as he,h as ue}from"./index-D2wWF4eV.js";import{l as fe}from"./filterFields-CH2lb3w5.js";import{l as ge}from"./sortFields-CZ4oDFSx.js";import{D as we}from"./LockDataProvider-CK13dSe7.js";import{L as G,a as je}from"./LockListContext-CjyrjrKG.js";import{S as ve}from"./SearchBox-N-HzpYT9.js";import{L as ke}from"./LoadingDisplay-D7Lt4OeE.js";import{u as be}from"./useData-FrS22tTP.js";import{N as ye}from"./NoProfileData-DtmC1P9U.js";import{P as Ce}from"./ProfileNotFound-g00ELBOu.js";import{E as Le}from"./ExpandMore-CiIEfGBL.js";import{B as Se}from"./BeltStripe-Bopknm8f.js";import{C as Be}from"./EvidenceForm-DG1S5W69.js";import{D as Me,R as Ae,O as Ee,a as Fe,C as De,b as Te}from"./Casino-ZGlaSlRR.js";import{F as y}from"./FieldValue-azH8yRyu.js";import{B as Ie}from"./BeltIcon-EbIKF-zF.js";import{F as z}from"./FilterChip-CixFsX_y.js";import{E as Re,C as Pe,a as We}from"./ExportButton-9lxf0Rph.js";import{C as Ve}from"./CopyEntryTextButton-BWxtP0KZ.js";import{L as He}from"./LockImageGallery-DCKrM9UE.js";import{C as ze,L as Ne}from"./LogEntryButton-0ERFmdwX.js";import{D as V}from"./DataContext-9aEkd-m_.js";import{A as $e,a as qe,b as Oe}from"./AccordionSummary-CcHMyV03.js";import{M as N}from"./index-BVZyDk-M.js";import{r as $}from"./index-8QK8JElO.js";import{A as _e}from"./AccordionActions-BUxuV10P.js";import"./filterEntriesAdvanced-BpCLDXue.js";import"./index-CBULl7sm.js";import"./entryName-qVJcomiL.js";import{X as U}from"./nivo-bar-C8o9bOeV.js";import{p as X}from"./chartDefaults-pV7GKcxU.js";import{P as Ge}from"./ProfileHeader-BKhlQk-N.js";import{A as Ue}from"./AdvancedFilters-lfoPCrTd.js";import{V as Xe}from"./ViewFilterButtons-B5zmP8zy.js";import"./collectionStatsById-DY1NVZ7h.js";import"./dataUrls-DVxTtpO-.js";import"./setDeep-J6HEwWhX.js";import"./stringUtils-BsiQ3MZ5.js";import"./Search-cTtCKf1-.js";import"./useFormControl-DpTK2Cco.js";import"./Select-B0O-J1tq.js";import"./Sort-CXNpMNTX.js";import"./TextField-BlxM0R7x.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-NdDYQNGH.js";import"./mycollection-Dqx3MeiB.js";import"./Box-DNz0cYrI.js";import"./Launch-DrDNr0Gj.js";import"./ErrorOutline-Do079LbM.js";import"./PhotoCamera-B6y6iOff.js";import"./LockEntrySearchBox-fPZqWt5t.js";import"./BeltStripeMini-BNKWSUo6.js";import"./HighlightOff-mu2jlE8_.js";/* empty css                  */import"./pageData-BY6jrYM9.js";import"./index-B0RSoHqe.js";import"./sanitizeValues-CezK7BzH.js";import"./LocalizationProvider-ODQmi1_r.js";import"./index-D4G5KCu6.js";import"./colorManipulator-CAus30eQ.js";import"./DialogContent-B6zp1ANr.js";import"./ListItem-Do80POzu.js";import"./Dialog-CiCyXVI3.js";import"./VideocamOutlined-B1HMCDey.js";import"./Checkbox-DfEIPCJ8.js";import"./SwitchBase-CTalnMLY.js";import"./LoadingDisplay-6U_fMIus.js";import"./CircularProgress-IXxQyD76.js";import"./LoadingDisplaySmall-CNJDKXCE.js";import"./OpenInNew-BktzRdsi.js";import"./glossary-B-_vYIGQ.js";import"./Link-n5ajNHpY.js";import"./Cancel-BSkAUm43.js";import"./Zoom-Brk1Q-nU.js";import"./Collapse-DzHDVPD0.js";import"./download-Cmm84ckB.js";import"./List-D-F1Mgol.js";import"./ContentCopy-DMeaJ_9D.js";import"./ImageGallery-BY8icFVN.js";import"./ImageViewer-DD_Fede6.js";import"./ImageListItem-CiXOwsvm.js";import"./isEqual-Bg7TlDNY.js";import"./uniq-s6In2jO3.js";import"./utcYear-Dywrsh2W.js";import"./_baseClone-tXGZUm-_.js";import"./CopyProfileLinkButton-Bv1Dnhhy.js";import"./ToggleButtonGroup-DB7hZSal.js";import"./ChoiceButtonGroup-BJx8EDxq.js";import"./FilterAlt-Bm8t17hK.js";import"./AddCircle-DU5EGwsU.js";var D={},q;function Ye(){if(q)return D;q=1;var t=Y();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var o=t(J()),n=K();return D.default=(0,o.default)((0,n.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),D}var Je=Ye();const Ke=Q(Je);function Qe(){const{compact:t,setCompact:o,setExpanded:n}=a.useContext(G),l=a.useCallback(()=>{o(!t),n(null)},[t,o,n]);return e.jsx(R,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:l,children:e.jsx(Ke,{color:t?"secondary":"inherit"})})})}function Ze({entry:t,expanded:o,onExpand:n,scorecardId:l}){var g,b,C,B,M;const w=Z(),{expandAll:j}=a.useContext(V),{userId:h}=W(),[u,i]=a.useState(!1),s={maxWidth:700,marginLeft:"auto",marginRight:"auto"},x=a.useRef(null),p=[...new Set([...t.relatedIds||[],...ee(t.id)])].sort((d,c)=>te(H[d].belt,H[c].belt)||d.localeCompare(c)),f=a.useCallback((d,c)=>{n&&n(c?t.id:!1)},[t,n]);a.useEffect(()=>{if(o&&x&&!u&&!j){const c=window.innerWidth<=600?70:74,{id:v}=ie.parse(location.search),m=v===t.id;i(!0),setTimeout(()=>{window.scrollTo({left:0,top:x.current.offsetTop-c,behavior:m?"auto":"smooth"})},m?0:100)}else o||i(!1)},[o,t,u,j]);const r=a.useMemo(()=>{var d;return e.jsx(E,{direction:"column",spacing:0,sx:{flexWrap:"wrap"},children:(d=t.makeModels)==null?void 0:d.map(({make:c,model:v},m)=>e.jsx(I,{style:{fontWeight:500,fontSize:"1.07rem",lineHeight:1.25,marginBottom:"4px"},children:c&&c!==v?`${c} ${v}`:v},m))})},[t.makeModels]),k=a.useCallback(d=>{d.preventDefault(),d.stopPropagation();const c=l&&h&&`/profile/${h}/scorecard?scorecardId=${l}`;w(c)},[w,l,h]);return e.jsxs($e,{expanded:o,onChange:f,style:s,ref:x,children:[e.jsxs(qe,{expandIcon:e.jsx(Le,{}),sx:{".MuiAccordionSummary-content":{alignItems:"center"}},style:{},children:[e.jsx(Se,{value:t.belt}),e.jsxs("div",{style:{margin:"12px 0px 8px 8px",width:"55%",flexShrink:0,flexDirection:"column"},children:[e.jsx(y,{value:r,textStyle:t.belt==="Unranked"?{color:"#aaa",marginLeft:"0px"}:{marginLeft:"0px"},style:{marginBottom:"2px"}}),!!t.version&&e.jsx(y,{name:"Version",value:e.jsx(I,{style:{fontSize:"0.95rem",lineHeight:1.25},children:t.version}),textStyle:t.belt==="Unranked"?{color:"#aaa"}:{}})]}),e.jsx("div",{style:{margin:"6px 0px 0px 0px",flexGrow:1,flexDirection:"column"},children:((g=t.lockingMechanisms)==null?void 0:g.length)>0&&e.jsx(y,{value:e.jsx(E,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:(b=t.lockingMechanisms)==null?void 0:b.sort().map((d,c)=>e.jsx(z,{value:d,field:"lockingMechanisms"},c))})})}),l&&e.jsx("div",{style:{margin:"0px 10px 0px 0px"},children:e.jsx(R,{title:"View in Scorecard",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:k,size:"small","aria-label":"scorecard",children:e.jsx(oe,{})})})})]}),o&&e.jsxs(S.Fragment,{children:[e.jsxs(Oe,{sx:{padding:"8px 16px 0px 16px"},children:[e.jsxs(E,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:[e.jsx(y,{style:{width:"50%",marginLeft:"0px"},value:e.jsxs(S.Fragment,{children:[e.jsxs(I,{style:{marginLeft:"0px",fontSize:"1rem",lineHeight:1.25,fontWeight:500},children:[t.belt,e.jsx(Me,{belt:t.belt})]}),e.jsx(Ie,{value:t.belt,style:{marginBottom:-10}})]})}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx(Be,{id:t.id,makeModels:t.makeModels})})]}),!!t.notes&&e.jsx(E,{direction:"row",spacing:0,sx:{width:"100%",flexWrap:"wrap"},children:e.jsx(y,{name:"Comments",value:e.jsx(I,{component:"div",style:{marginTop:-16},children:e.jsx(N,{rehypePlugins:[[$,{target:"_blank"}]],children:t.notes})})})}),!!((C=t.features)!=null&&C.length)&&e.jsx(y,{name:"Features",value:e.jsx(E,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.features.map((d,c)=>e.jsx(z,{value:d,field:"features"},c))})}),(p==null?void 0:p.length)>1&&!h&&e.jsx(y,{name:"Other Versions",value:e.jsx(S.Fragment,{children:p.map(d=>e.jsx(Ae,{id:d,onExpand:n,entryId:t.id},d))})}),!!t.description&&e.jsx("div",{style:{margin:8},children:e.jsx(N,{rehypePlugins:[[$,{target:"_blank",rel:["nofollow","noopener","noreferrer"]}]],children:t.description})}),e.jsx("div",{style:{margin:"12px 0px 20px 6px"},children:e.jsx(Re,{entry:t})}),!!((B=t.media)!=null&&B.length)&&e.jsx(y,{value:e.jsx(He,{entry:t})}),e.jsxs("div",{style:{display:"flex"},children:[!!((M=t.links)!=null&&M.length)&&e.jsx(y,{name:"Links",value:e.jsx(E,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:d,url:c},v)=>e.jsx(se,{href:c,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:d},v))})}),e.jsx(y,{name:"For sale",style:{marginLeft:15},value:e.jsx(Ee,{entry:t,buttonType:"text"})})]})]}),e.jsx(_e,{disableSpacing:!0,children:e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsxs("div",{style:{flexGrow:1,justifyItems:"left"},children:[!j&&e.jsx(O,{feature:"lock",id:t.id}),e.jsx(ze,{entry:t}),e.jsx(Fe,{entry:t}),e.jsx(Ne,{entry:t})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Ve,{entry:t}),e.jsx(Pe,{entry:t})]})]})})]})]})}const et=S.memo(Ze,(t,o)=>t.entry.id===o.entry.id&&t.expanded===o.expanded&&t.onExpand===o.onExpand);function tt({lockCollection:t,userText:o,collectionBarHeight:n}){const l=t.own?t.own.length:0,w=t.picked?t.picked.length:0,j=t.recordedLocks?t.recordedLocks.length:0,h=t.wishlist?t.wishlist.length:0,i=l+w+j+h?{own:l,picked:w,recorded:j,wishlist:h}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},x={own:250,picked:280,recorded:260,wishlist:100},p={own:Math.min(s.own,i.own),picked:Math.min(s.picked,i.picked),recorded:Math.min(s.recorded,i.recorded),wishlist:Math.min(s.wishlist,i.wishlist)},f={own:i.own>s.own?0:s.own-p.own,picked:i.picked>s.picked?0:s.picked-p.picked,recorded:i.recorded>s.recorded?0:s.recorded-p.recorded,wishlist:i.wishlist>s.wishlist?0:s.wishlist-p.wishlist},r={own:2,picked:2,recorded:2,wishlist:2},k={own:Math.max(i.own-(p.own+f.own+r.own),0),picked:Math.max(i.picked-(p.picked+f.picked+r.picked),0),recorded:Math.max(i.recorded-(p.recorded+f.recorded+r.recorded),0),wishlist:Math.max(i.wishlist-(p.wishlist+f.wishlist+r.wishlist),0)},g={own:Math.min(x.own-i.own,x.own-s.own-r.own),picked:Math.min(x.picked-i.picked,x.picked-s.picked-r.picked),recorded:Math.min(x.recorded-i.recorded,x.recorded-s.recorded-r.recorded),wishlist:Math.min(x.wishlist-i.wishlist,x.wishlist-s.wishlist-r.wishlist)},b=["own","picked","recorded","wishlist"],C=b.map((L,A)=>({row:b[A],"Average A":p[L],"Average B":f[L],Average:r[L],USER:k[L],"Top 10":g[L]})),{width:B}=T(),M=B<=560,d=n,c=M?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},v=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],m=t?[{title:o,color:"#3c90c5",width:"14px"}]:[];m.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const F=({items:L})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),L.map(A=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:A.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:A.width},children:A.title})]},A.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(S.Fragment,{children:[e.jsx("div",{style:{height:d},children:e.jsx(U,{data:C,keys:["Average A","Average B","Average","USER","Top 10"],theme:X,indexBy:"row",margin:c,padding:.2,valueScale:{type:"linear"},colors:v,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(F,{items:m})]})}function it({beltData:t}){const{width:o}=T(),n=o<=360,l=o<=560,w=175,j=l?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},h=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],u=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{children:[e.jsx("div",{style:{height:w,padding:"0px 8px 0px 8px",width:"100%"},children:e.jsx(U,{data:t,margin:j,padding:.15,colors:i=>h[i.index%h.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:X,isInteractive:!1,enableLabel:!0,label:i=>i.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:i=>u[i.index%u.length]})},"bar"),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]})}function ot({profile:t,entries:o}){const{userId:n}=W(),{user:l}=a.useContext(_),w=n===(l==null?void 0:l.uid)?"You":"User",j=a.useMemo(()=>{const c=re.concat("Unranked"),v=o.map(({belt:m})=>m.includes("Black")?"Black":m).reduce((m,F)=>(m[F]||(m[F]=0),m[F]++,m),{});return c.map(m=>({id:m,label:m,count:v[m]||0,value:v[m]||0}))},[o]),{isMobile:h}=T(),u=h?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:i}=T(),s=i<=360,x=i<=395,p=i<=428,f=i<=560,g={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...f?{}:{display:"flex"}},b=f?"100%":"50%",C=f?"100%":"50%",B=s?200:f?210:180,M=f?160:170,d=s?150:170;return e.jsx(ae,{style:u,sx:{paddingBottom:5},children:e.jsx(ne,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:g,children:[e.jsx("div",{style:{width:b,verticalAlign:"top",height:B},children:e.jsx(tt,{lockCollection:t,userText:w,collectionBarHeight:M})}),e.jsx("div",{style:{width:C,height:d,marginTop:"0px"},children:e.jsx(it,{beltData:j})})]})})})})}function st({onSelect:t}){const{visibleEntries:o=[]}=a.useContext(V),n=a.useCallback(()=>{const l=Math.floor(Math.random()*o.length),w=o[l];t(w.id)},[o,t]);return le("r",()=>n(),{preventDefault:!0}),e.jsx(R,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{onClick:n,children:e.jsx(De,{style:{color:"#999"}})})})}function rt({profile:t,pickerActivity:o,owner:n}){const{compact:l}=a.useContext(G),[w,j]=a.useState(!1),{visibleEntries:h=[]}=a.useContext(V),u=a.useDeferredValue(w),{setAdvancedFilterGroups:i,advancedFilterGroups:s}=a.useContext(de),[x,p]=a.useState(!0);a.useEffect(()=>{const r={_id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fieldName:"collection",matchType:"Is",operator:"OR",values:["Any"]};x&&s().length===0&&i([r]),p(!1)},[s,x,i]);const f=o.reduce((r,k)=>(k.matchId&&k.id&&(r[k.matchId]=k.id),r),{});return e.jsx(S.Fragment,{children:e.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(Ge,{profile:t,page:"collection",owner:n}),e.jsx(ot,{profile:t,entries:h}),e.jsx(Ue,{}),l?e.jsx(Te,{entries:h}):h.map(r=>e.jsx(et,{entry:r,expanded:r.id===u,onExpand:j,scorecardId:f[r.id]},r.id)),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(st,{onSelect:j})})]})})}function $i(){const{user:t}=a.useContext(_),{userId:o}=W(),{getProfile:n,getPickerActivity:l}=a.useContext(ce),{isMobile:w}=T(),j=a.useCallback(async()=>{try{const g=await n(o);if(g){const C=g.displayName?g.displayName.toLowerCase().endsWith("s")?`${g.displayName}'`:`${g.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${C} Profile`}const b=await l(o);return{profile:g,pickerActivity:b}}catch(g){return console.error("Error loading profile.",g),null}},[l,n,o]),{data:h={},loading:u,error:i}=be({loadFn:j}),{profile:s,pickerActivity:x}=h||{},p=a.useMemo(()=>{if(u||!s)return[];const g=new Set(pe.locks.getCollected(s));return me.filter(b=>g.has(b.id))},[s,u]),f=e.jsxs(S.Fragment,{children:[e.jsx(ve,{label:"Collection"}),e.jsx(Xe,{sortValues:ge,advancedEnabled:!0,compactMode:!1,resetAll:!0,expandAll:!1}),!w&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Qe,{})]}),r=u?"Loading...":"Profile",k=e.jsx("div",{style:{margin:"30px 0px"},children:e.jsx(We,{text:!0})});return e.jsx(xe,{filterFields:fe,children:e.jsx(we,{allEntries:p,profile:s,children:e.jsxs(je,{children:[e.jsx(he,{title:r,extras:f}),u&&e.jsx(ke,{}),!u&&s&&!i&&e.jsx(rt,{profile:s,pickerActivity:x,owner:t&&t.uid===o}),!u&&s&&!i&&p.length===0&&e.jsx(ye,{}),!u&&(!s||i)&&e.jsx(Ce,{}),e.jsx(ue,{before:k}),e.jsx(O,{feature:"profile"})]})})})}export{$i as default};
