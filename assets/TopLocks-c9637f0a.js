import{r as h,u as w,j as a,R as y,d as v}from"./index-82f69014.js";import{A as x}from"./AdminStatsTable-8e2e6973.js";import{a as k}from"./ReportsContext-71ba14f8.js";import{B as L}from"./nivo-bar.es-a6554631.js";import{p as U,b as C}from"./adminChartDefaults-e02caa29.js";import{P as j}from"./nivo-line.es-0b0a9269.js";const z=({cohort:t})=>{const{data:r,allDataLoaded:i}=h.useContext(k),{collectionsStatsCurrent:n}=r,d=h.useMemo(()=>i?{columns:[{name:"List Name",id:"list",align:"left"},{align:"center",id:"totalUsers",name:"Total Users"},{name:"List Users",align:"center",id:"userCount"},{id:"totalSaves",align:"center",name:"Total Saves"},{name:"% List Users",id:"percentListUsers",align:"center"},{id:"averageSaves",align:"center",name:"Average Items"}],data:W.map(c=>{const{userCount:f,totalSaves:g,averageSaves:S}=n[t].listStats[c.listName];return{totalUsers:n[t].totalProfiles,list:c.label,userCount:f,listUsers:f,totalSaves:g,percentListUsers:Math.round(100*f/n[t].listStats.allLists.userCount)+"%",averageSaves:Math.round(S)}})}:{},[i,t,n]),{width:l}=w(),s=l<=360,p=l<=395,m=l<=428,b=l<=560,u=l<=820,e=s?".8rem":p?".85rem":m?".9rem":".95rem",o="100%";return a.jsx(y.Fragment,{children:a.jsx(x,{tableData:d,tableWidth:o,fontSize:e})})},W=[{listName:"allLists",label:"All Lists"},{listName:"own",label:"Own"},{listName:"picked",label:"Picked"},{listName:"recorded",label:"Recorded"},{listName:"recordedLocks",label:"Scorecard"},{listName:"wishlist",label:"Wishlist"},{listName:"safelocksOwn",label:"Safelocks Own"},{listName:"safelocksCracked",label:"Safelocks Cracked"},{listName:"safelocksWishlist",label:"Safelocks Wishlist"},{listName:"raffleWatchlist",label:"Raffle Watchlist"},{listName:"awards",label:"Awards"},{listName:"projects",label:"Projects"}],O=({cohort:t})=>{const{collectionSummary:r}=h.useContext(k),i=r(t).data.filter(s=>!["Raffle Watchlist","Awards","Projects"].includes(s.list)).map(s=>({id:s.list,label:s.list,count:s.averageSaves,value:s.averageSaves})),n=270,d={top:0,right:20,bottom:100,left:50},l=["#aeaeae","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac"];return a.jsx("div",{style:{height:n,width:"100%"},children:a.jsx(L,{data:i,margin:d,padding:.15,colors:s=>l[s.index%l.length],animate:!0,enableLabel:!0,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},axisBottom:{tickRotation:-45},enableGridY:!1,theme:U,isInteractive:!1})})},I=({cohort:t})=>{const{data:r}=h.useContext(k),{collectionStatsDaily:i}=r,n=i.dayData.map(g=>({x:g[t].date,y:g[t].listUsers||0})),l=[{id:"listUsers",data:t==="blackBeltOnly"?n.filter(g=>v(g.x)>v("2024-07-15")):n}],{width:s}=w(),p=s<=360,m=s<=395,b=s<=428,u=s<=560,e=s<=820,o=p||m?200:b?210:e?230:300,c=u?-45:0,f=u?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:45,left:50};return a.jsx("div",{style:{height:o},children:a.jsx(j,{theme:B,data:l,enableGridX:!1,enableGridY:!1,colors:["#007de2","#16325d"],lineWidth:3,margin:f,height:o,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.0f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b",tickSize:5,tickPadding:5,tickRotation:c,direction:"row",legendOffset:-12,tickValues:"every month"},legends:[{anchor:"bottom",itemTextColor:"#ddd",direction:"row",justify:!1,translateX:0,translateY:75,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},N={grid:{line:{stroke:"#333",strokeWidth:1}}},B={...U,...N},Y=({cohort:t})=>{const{data:r,collectionListLabels:i}=h.useContext(k),n=r.collectionsStatsCurrent[t].listSavesByBelt,l=["own","picked","wishlist","recordedLocks"].map(e=>({...n[e],list:i[e]})),{width:s}=w(),p=s<=560,m=270,b=p?1:2,u={top:0,right:20,bottom:30,left:50};return a.jsx("div",{style:{height:m},children:a.jsx(L,{data:l,keys:["White","Yellow","Orange","Green","Blue","Purple","Brown","Red","Black","Unranked"],indexBy:"list",groupMode:"grouped",margin:u,padding:.1,innerPadding:0,borderRadius:b,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},maxValue:"auto",theme:U,colors:C,animate:!0,enableGridY:!1,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,format:","},isInteractive:!0})})};function F({cohort:t}){const{data:r}=h.useContext(k),{collectionStatsDaily:i}=r,n=h.useMemo(()=>{const s=i.dayData.map(e=>e.date),m=v(s.reduce((e,o)=>o>e?o:e)).subtract(14,"day"),b=[{name:"Date",id:"date",align:"left"},{align:"center",id:"totalUsers",name:"Total Users"},{name:"List Users",id:"listUsers",align:"center"},{align:"center",id:"totalSaves",name:"Total Saves"},{name:"Owned Users",id:"ownUsers",align:"center"},{name:"Picked Users",id:"pickedUsers",align:"center"},{id:"scorecardUsers",align:"center",name:"Scorecard Users"},{id:"wishlistUsers",align:"center",name:"Wishlist Users"},{id:"newUsers",align:"center",name:"New Users"}],u=i.dayData.map(e=>{var o,c,f,g;return{date:e[t].date,totalUsers:e[t].totalProfiles,listUsers:e[t].listUsers,totalSaves:e[t].totalSaves,ownUsers:(o=e[t].listStats.find(S=>S.listName==="own"))==null?void 0:o.userCount,pickedUsers:(c=e[t].listStats.find(S=>S.listName==="picked"))==null?void 0:c.userCount,scorecardUsers:(f=e[t].listStats.find(S=>S.listName==="recordedLocks"))==null?void 0:f.userCount,wishlistUsers:(g=e[t].listStats.find(S=>S.listName==="wishlist"))==null?void 0:g.userCount,newUsers:e[t].newListUsers}});return{title:"",columns:b,data:u.filter(e=>v(e.date).isAfter(m))}},[t,i]),d="100%",l=".83rem";return a.jsx("div",{style:{width:"100%"},children:a.jsx(x,{tableData:n,tableWidth:d,fontSize:l})})}const G=({cohort:t})=>{const{data:r}=h.useContext(k),i=[{name:"#",id:"rank",align:"center"},{name:"Lock",id:"name",align:"left"},{name:"Saves",id:"saveCount",align:"center"}],n={title:"Own",columns:i,data:r.collectionsStatsCurrent[t].listStats.own.topItems},d={title:"Picked",columns:i,data:r.collectionsStatsCurrent[t].listStats.picked.topItems},l={title:"Wishlist",columns:i,data:r.collectionsStatsCurrent[t].listStats.wishlist.topItems},s={title:"Scorecard",columns:i,data:r.collectionsStatsCurrent[t].listStats.recordedLocks.topItems.slice(0,25)},{width:p}=w(),m=p<=560,e={...{width:"100%",padding:"0px",marginBottom:12,alignContent:"top",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...m?{}:{display:"flex"}},o="400px",c=".83rem";return a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:e,children:[a.jsx(x,{tableData:n,tableWidth:o,fontSize:c,wrap:!0}),a.jsx("div",{style:{width:"75px"},children:" "}),a.jsx(x,{tableData:d,tableWidth:o,fontSize:c,wrap:!0})]}),a.jsxs("div",{style:e,children:[a.jsx(x,{tableData:l,tableWidth:o,fontSize:c,wrap:!0}),a.jsx("div",{style:{width:"75px"},children:" "}),a.jsx(x,{tableData:s,tableWidth:o,fontSize:c,wrap:!0})]})]})};export{I as C,G as T,O as a,z as b,Y as c,F as d};
