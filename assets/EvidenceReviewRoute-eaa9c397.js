import{r as s,j as e,R as b,G as E,I as A,u as z,a2 as F,ag as Y,ah as P,d as L,N as I,F as U}from"./index-86150f4f.js";import{u as _}from"./usePageTitle-df2bdd59.js";import{L as q}from"./LeaderboardName-6f540bc9.js";import{C as G}from"./ChoiceButtonGroup-dbf00e46.js";import{d as O}from"./Cached-ca0bc1a8.js";import{L as H}from"./LoadingDisplayWhite-cfe047a2.js";import{d as J}from"./ExpandMore-7518f889.js";import{A as $,a as K,b as Q}from"./AccordionSummary-127f0dce.js";import{c as V,d as X,T as Z,a as w,b as c,e as ee}from"./TableRow-9ca235ed.js";import{L as B}from"./Link-833bdd66.js";import{u as te}from"./useData-e4b95ed0.js";import{L as re}from"./LoadingDisplay-f395dd7e.js";import"./useDocumentTitle-4e272b15.js";import"./ToggleButtonGroup-0c56bda5.js";import"./CircularProgress-62e10e19.js";import"./Collapse-28175f23.js";import"./Box-12f38a11.js";function oe({refresh:i}){const[x,d]=s.useState(!1),[a,n]=s.useState(""),[g,y]=s.useState(!1),l=s.useCallback(async()=>{const v=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/export-evidence":"https://explore.lpubelts.com:8443/export-evidence";d(!0),await fetch(v,{cache:"no-store"}).then(async h=>(d(!1),await h.text())).then(async h=>{n(h),console.log(`export response
`,h),location.reload()}),await i()},[i]);return e.jsxs(b.Fragment,{children:[e.jsx("div",{style:{maxWidth:700,margin:"5px auto 5px auto",padding:2,fontWeight:700,fontSize:"1.2rem",display:"flex",justifyContent:"center"},children:x?e.jsx(H,{}):e.jsx(E,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(A,{onClick:l,style:{marginRight:10},children:e.jsx(O,{})})})}),(a==null?void 0:a.status)==="Errors"&&e.jsxs($,{expanded:g,onChange:()=>y(!g),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(K,{expandIcon:e.jsx(J,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(Q,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(a,null,2)})})]})]})}function se({data:i,updated:x}){const{isMobile:d}=z(),a=s.useMemo(()=>[{label:"Scorecard Projects"},{label:"All Projects"},{label:"Modified Picks"},{label:"BB Modified"}],[]),[n,g]=s.useState(a[0]),y=s.useCallback(t=>g(t),[]);let l;switch(n.label){case"Scorecard Projects":l=i.projects.filter(t=>!t.tabName);break;case"All Projects":l=i.projects;break;case"Modified Picks":l=i.modifiers;break;default:l=i.modifiers.filter(t=>t.blackBelt)}const v=n.label.includes("Modified")?"Lock":"Project",h=n.label.includes("Modified")?"Belt":"Tier",[p,M]=F(),r=p.get("sort"),m=r&&r.includes("ev"),[j,C]=s.useState(!1),[f,k]=s.useState(!1),u=s.useCallback(t=>()=>{r&&t!==r?(p.set("sort",t),C(m?j:!1),k(m?!1:f)):r&&t===r?(C(m?j:!j),k(m?!f:f)):t==="date"?(p.set("sort",t),C(!0)):t==="evDate"?(p.set("sort",t),k(!0)):p.set("sort",t),M(p)},[m,f,j,p,M,r]),S=s.useMemo(()=>l&&r?l.sort((t,o)=>{if(r==="evName")return(t.displayName||"").localeCompare(o.displayName||"");if(r==="evLock")return t.evidenceName.localeCompare(o.evidenceName)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evBelt")return Y(t.belt.replace(" Belt",""),o.belt.replace(" Belt",""))||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evModifier")return t.modifier.localeCompare(o.modifier)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evDate")return o.date.localeCompare(t.date)}):l.sort((t,o)=>o.date.localeCompare(t.date)),[r,l,f]),R=s.useMemo(()=>f?S.reverse():S,[S,f]),N=d?"auto":"170px",D=d?16:20,T=s.useCallback(t=>{const o=t.replace(" Belt","");return P[o]?P[o].color:t.includes("Dan")?"#769e49":"#b00"},[]),W=s.useCallback(t=>{const o=window.open(t,"_blank","noopener,noreferrer");o&&(o.opener=null)},[]);return e.jsx(b.Fragment,{children:e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:["Project & Pick Review",e.jsxs("div",{style:{fontWeight:400,fontSize:"0.9rem",width:"100%",textAlign:"center",margin:"0px 0px"},children:["Through ",L(x).format("MMM DD, YYYY")]}),e.jsx(oe,{})]}),e.jsx("div",{style:{marginBottom:20},children:e.jsx(G,{options:a,onChange:y})}),e.jsx(V,{sx:{backgroundColor:"#111",maxWidth:800,margin:"auto"},children:e.jsxs(X,{sx:{minWidth:360,align:"left"},children:[e.jsx(Z,{children:e.jsxs(w,{children:[e.jsx(c,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:N},children:e.jsx("span",{style:r==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:u("evName"),children:"User"})}),e.jsxs(c,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:r==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:u("evLock"),children:v}),e.jsxs("span",{style:r==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:u("evBelt"),children:["Â (",h,")"]})]}),n.label==="Modified Picks"&&e.jsx(c,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!m||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:u("evModifier"),children:"Modifier"})}),e.jsx(c,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!m||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:u("evDate"),children:"Date"})})]})}),e.jsx(ee,{children:R.map((t,o)=>e.jsxs(w,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(c,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:N},children:e.jsx(q,{leader:t,isCurrentUser:t.isCurrentUser,tab:"blackBelts",maxLength:D})})}),e.jsx(c,{align:"left",style:{backgroundColor:T(t.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(c,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(B,{onClick:()=>W(t.evidenceUrl),style:{color:"#fff"},children:t.evidenceName})})}),n.label==="Modified Picks"&&e.jsx(c,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5,marginRight:5},children:e.jsx(B,{onClick:()=>W(t.evidenceUrl),style:{color:"#fff"},children:t.modifier})})}),e.jsx(c,{align:"center",children:e.jsx("nobr",{children:L(t.date).format("MMM DD, YYYY")})})]},o))})]})})]})})}function ke(){var n;_("All Projects");const{data:i,loading:x,error:d}=te({url:ie}),a=e.jsx(b.Fragment,{});return e.jsxs(b.Fragment,{children:[e.jsx(I,{title:"All Projects",extras:a}),(x||d)&&e.jsx(re,{}),!x&&i&&e.jsx(se,{data:i,updated:(n=i==null?void 0:i.metadata)==null?void 0:n.updatedDateTime}),e.jsx(U,{})]})}const ie="https://explore.lpubelts.com/data/allProjects.json";export{ke as default};
