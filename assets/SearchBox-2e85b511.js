import{r as t,K as _,M as R,j as e,u as M,G as T,I as F,B as $,Y as V,a5 as z,V as O,R as H,ab as L}from"./index-da834cbb.js";import{F as S,D as U}from"./filterFields-537cc431.js";import{F as G,I as q,S as K}from"./Select-08081d1f.js";import{B as Y}from"./Box-a2a6d045.js";import{C as J,I}from"./Chip-c792f458.js";import{d as P}from"./Search-6b5824b3.js";import{B as Q}from"./Badge-6c11dca7.js";import{T as X}from"./TextField-622bc4f5.js";function Z(i,s){const[o,r]=t.useState(i);return t.useEffect(()=>{const p=setTimeout(()=>r(i),s||500);return()=>{clearTimeout(p)}},[i,s]),o}var k={},N=R;Object.defineProperty(k,"__esModule",{value:!0});var w=k.default=void 0,ee=N(_()),te=e;w=k.default=(0,ee.default)((0,te.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll");function ge({forceText:i}){const{isMobile:s}=M(),{filterCount:o,clearFilters:r}=t.useContext(S);return o===0?null:s&&!i?e.jsx(T,{title:"Clear Filters",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{onClick:r,children:e.jsx(w,{})})}):e.jsx($,{variant:"outlined",color:"inherit",onClick:r,style:{minWidth:120,marginRight:8},children:"ClearÂ Filters"})}const me=[{label:"Default",value:void 0},{label:"Alphabetical (Ascending)",value:"alphaAscending"},{label:"Alphabetical (Descending)",value:"alphaDescending"},{label:"Belt (Ascending)",value:"beltAscending"},{label:"Belt (Descending)",value:"beltDescending"},{label:"Popularity",value:"popularity"},{label:"Recently Updated",value:"recentlyUpdated"}],ve=[{label:"Default",value:void 0},{label:"UL Group (Ascending)",value:"groupAscending"},{label:"UL Group (Descending)",value:"groupDescending"},{label:"Difficulty Tier (Ascending)",value:"tierAscending"},{label:"Difficulty Tier (Descending)",value:"tierDescending"},{label:"Alphabetical (Ascending)",value:"alphaAscending"},{label:"Alphabetical (Descending)",value:"alphaDescending"},{label:"Recently Updated",value:"recentlyUpdated"}],be=[{label:"Default",value:void 0},{label:"Dan Points (Ascending)",value:"danPointsAscending"},{label:"Dan Points (Descending)",value:"danPointsDescending"},{label:"Date (Ascending)",value:"dateAscending"},{label:"Date (Descending)",value:"dateDescending"},{label:"Belt (Ascending)",value:"beltAscending"},{label:"Belt (Descending)",value:"beltDescending"},{label:"Alphabetical (Ascending)",value:"alphaAscending"},{label:"Alphabetical (Descending)",value:"alphaDescending"}];function xe({label:i,fieldName:s,onFilter:o,sort:r,tab:p}){const{visibleEntries:g}=t.useContext(U),{filters:C}=t.useContext(S),c=t.useMemo(()=>p==="search"||!p?g:g.filter(a=>a.simpleBelt===p),[p,g]),[b,u]=t.useState(!1),d=t.useCallback(a=>{u(!1),setTimeout(()=>o(s,a.target.value,!0),0),setTimeout(()=>document.activeElement.blur())},[s,o]),D=t.useCallback(()=>{u(!1),setTimeout(()=>document.activeElement.blur())},[]),y=t.useCallback(()=>u(!0),[]),{counts:f,options:m}=t.useMemo(()=>{const a=c.map(l=>l[s]).flat().filter(l=>l),h=a.reduce((l,n)=>(l[n]||(l[n]=0),l[n]++,l),{}),j=[...new Set(a)].sort((l,n)=>{if(r)return r(l,n);if(typeof l=="string"&&typeof n=="string")return l.localeCompare(n);if(Number.isInteger(l)&&Number.isInteger(n))return l-n});return{counts:h,options:j}},[c,s,r]),x=t.useDeferredValue(C),v=x[s],A=Array.isArray(v)?x[s]:v?[v]:[];return e.jsxs(G,{style:{minWidth:120,maxWidth:300,marginTop:8},fullWidth:!0,children:[e.jsx(q,{id:`filter-${s}`,color:"secondary",children:i}),e.jsx(K,{multiple:!0,label:i,labelId:`filter-${s}`,value:A,onChange:d,style:{marginBottom:0},color:"secondary",open:b,onClose:D,onOpen:y,onBlur:D,MenuProps:{PaperProps:{style:{maxHeight:ne*8+le}}},renderValue:a=>e.jsx(Y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(h=>e.jsx(J,{label:h},h))}),children:m.map((a,h)=>e.jsx(V,{value:a,children:`${a} (${f[a]||0})`},h))})]})}const ne=48,le=8;var B={},se=R;Object.defineProperty(B,"__esModule",{value:!0});var E=B.default=void 0,ae=se(_()),re=e;E=B.default=(0,ae.default)((0,re.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function Ce({label:i,extraFilters:s=[],keepOpen:o}){const[r]=z(),{filters:p,addFilters:g,removeFilter:C}=t.useContext(S),[c,b]=t.useState(p.search||""),{isMobile:u}=M(),d=t.useRef();O("s",()=>{var n;return(n=d==null?void 0:d.current)==null?void 0:n.focus()},{preventDefault:!0});const D=t.useCallback(()=>{window.scrollTo({top:0}),b(""),C("search",""),d.current.focus()},[C]),y=t.useCallback(n=>{const{value:W}=n.target;b(W)},[]),f=Z(c,250);t.useEffect(()=>{f!==r.get("search")&&(f?(window.scrollTo({top:0}),g([{key:"search",value:f},{key:"id",value:void 0},{key:"name",value:void 0},...s],!0)):g([{key:"search",value:f}],!0))},[f]);const[m,x]=t.useState(!1),v=t.useCallback(()=>setTimeout(()=>x(!1),0),[]),A=t.useCallback(()=>{x(!0),setTimeout(()=>{d.current.focus(),d.current.select()},0)},[]);t.useEffect(()=>{const n=r.get("search");n!==c&&b(n||"")},[r]);const a=c?e.jsx(I,{position:"end",children:e.jsx(T,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:D,edge:"end",size:"small",children:e.jsx(E,{})})})}):null,h=u?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},j=m&&u?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},l=c?"secondary":"inherit";return e.jsxs(H.Fragment,{children:[!m&&u&&!o&&e.jsx(T,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:A,children:e.jsx(Q,{invisible:c.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(P,{})})})}),(m||!u||o)&&e.jsx(X,{placeholder:`Search ${i}`,InputProps:{inputProps:{ref:d},startAdornment:e.jsx(I,{position:"start",children:e.jsx(P,{color:l})}),endAdornment:a},variant:"standard",color:"secondary",onChange:y,onBlur:v,value:c,style:{...h,...j},fullWidth:!0}),e.jsx(L,{invisible:!0,open:m&&u,onClick:v})]})}export{ge as C,xe as F,Ce as S,ve as d,me as l,be as s};
