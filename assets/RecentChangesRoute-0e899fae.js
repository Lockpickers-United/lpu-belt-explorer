import{b as f,r as x,j as e,R as l,U as h,d as s,Q as u,Z as p,N as j,F as k,T as v}from"./index-6a047522.js";import{u as y}from"./usePageTitle-96b93c2e.js";import{B as R}from"./BeltStripe-43ed42dd.js";import{F}from"./FieldValue-57d31eb7.js";import{L}from"./LockImageGallery-20726e2a.js";import{e as c}from"./entryName-c62a57d3.js";import{L as T}from"./ListItem-0c2266fe.js";import{a as C,l as P}from"./filterFields-7ad5d8bc.js";import{D}from"./LockDataProvider-aa23f7c0.js";import"./useDocumentTitle-d4f04620.js";import"./ImageGallery-846242d1.js";import"./ImageViewer-57e39ab3.js";import"./Link-5983e843.js";import"./Launch-7a04fc10.js";import"./Dialog-bfe5725c.js";import"./LinearProgress-cbd63946.js";import"./DialogContent-ca28d233.js";import"./ImageListItem-5d6f69d5.js";import"./index-24459bf6.js";function M({entry:t}){var r;const d=f(),a=c(t).replace(/[\s/]/g,"_").replace(/\W/g,""),i=x.useCallback(o=>{o.preventDefault(),o.stopPropagation(),d(`/locks?id=${t.id}&name=${a}`)},[t.id,d,a]);return e.jsx(l.Fragment,{children:e.jsxs(T,{style:{minHeight:64,borderTop:"1px solid rgba(255, 255, 255, 0.12)",display:"block",margin:"20px 0px"},children:[e.jsxs("div",{style:{display:"flex",width:"100%",cursor:"pointer"},onClick:i,children:[e.jsx(R,{value:t.belt}),e.jsx(h,{primary:c(t),primaryTypographyProps:{fontWeight:500,fontSize:"1.1rem"},secondary:t.version,secondaryTypographyProps:{fontSize:"1rem"},style:{padding:"0px 0px 0px 10px"}})]}),!!((r=t.media)!=null&&r.length)&&e.jsx(F,{value:e.jsx(L,{entry:t})})]},t.id)})}function N({allEntries:t}){const m=t.reduce((a,i)=>{var o;const r=(o=i==null?void 0:i.media)==null?void 0:o.filter(n=>s(n.dateAdded).isAfter(s().subtract(14,"day"))).sort((n,g)=>s(g.dateAdded).diff(s(n.dateAdded)));return(r==null?void 0:r.length)>0&&a.push({...i,media:r}),a},[]).sort((a,i)=>Math.floor(s(i.lastUpdated).valueOf()/3600)-Math.floor(s(a.lastUpdated).valueOf()/3600)||`${a.makeModels[0].make}${a.makeModels[0].model}`.localeCompare(`${i.makeModels[0].make}${i.makeModels[0].model}`));return e.jsxs(l.Fragment,{children:[e.jsxs("div",{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto",marginTop:20,fontWeight:500,fontSize:"1.5rem"},children:["Recently added images (last ",14," days)"]}),m.length>0?e.jsx(u,{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto"},children:m.map(a=>e.jsx(M,{entry:a},a.id))}):e.jsx("div",{style:{padding:0,maxWidth:700,marginLeft:"auto",marginRight:"auto",marginTop:20,fontSize:"1rem"},children:"None found"})]})}function J(){return y("Recent Changes"),e.jsx(C,{filterFields:P,children:e.jsx(D,{allEntries:p,profile:void 0,children:e.jsxs(l.Fragment,{children:[e.jsx(j,{title:"Recent Changes"}),e.jsx(N,{allEntries:p}),e.jsx(k,{}),e.jsx(v,{feature:"recentChanges"})]})})})}export{J as default};
