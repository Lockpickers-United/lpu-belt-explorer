import{b as H,r,j as n,W as O,U as V,Y as pe,Z as xe,$ as me,a0 as fe,R as $,F as ue,a6 as he,O as ge,L as je,d as U,u as be,af as ye,Q as ke,aT as Ce,ai as Ie}from"./index-CgbmztF-.js";import{E as Te}from"./ExpandMore-C5q-0khN.js";import{B as Se}from"./BeltStripe-BKypJxLs.js";import{F as W}from"./FieldValue-BcUZRXb5.js";import{S as we,E as Ee}from"./EvidenceForm-CK23zHea.js";import{e as D}from"./entryName-Whx2M7nZ.js";import{L as Le}from"./Link-CYwwnRLl.js";import"./filterEntriesAdvanced-zM-ebys6.js";import{D as q}from"./DataContext-DuP_QL9_.js";import"./index-DDjMlZ7v.js";import{B as ve}from"./BeltIcon-BlbVBi2c.js";import{E as De}from"./EmojiEvents-BdL1OU4g.js";import{A as Fe,a as Ae,b as Me}from"./AccordionSummary-nIQn-OJQ.js";function Re({entry:t,color:e}){const o=H(),a=D(t).replace(/[\s/]/g,"_").replace(/\W/g,""),m=e||"#fff",f=r.useCallback(u=>{u.preventDefault(),u.stopPropagation(),o(`/locks?id=${t.id}&name=${a}`)},[t.id,o,a]);return n.jsx(O,{title:"View Lock Details",arrow:!0,disableFocusListener:!0,children:n.jsx(V,{onClick:f,children:n.jsx(Le,{style:{width:18,height:18,color:m}})})})}var x={},_;function Ne(){if(_)return x;_=1;var t=pe();Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var e=t(xe()),o=me();return x.default=(0,e.default)((0,o.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),x}var Be=Ne();const ze=fe(Be);U.extend(Ie);function We({owner:t,activity:e,expanded:o,onExpand:i,merged:a}){const m=H(),{setFilters:f}=r.useContext(ue),{cardActivity:u,getEntryFromId:y,getProjectEntryFromId:k,getAwardEntryFromId:K}=r.useContext(q),{admin:C}=r.useContext(he),{blackBeltScorecard:F}=r.useContext(q),I=y(e.matchId),Y=k(e.matchId),h=K(e.matchId),s=I||Y||h;if(!s)return;const[A,M]=r.useState(!1),T=r.useRef(null);r.useEffect(()=>{if(o&&T&&!A){const v=window.innerWidth<=600?70:74,{id:de}=ge.parse(location.search),z=de===e.id;M(!0),setTimeout(()=>{window.scrollTo({left:0,top:T.current.offsetTop-v,behavior:z?"auto":"smooth"})},z?0:100)}else o||M(!1)},[o,s,A,e.id]);let c=s?D(s):e.evidenceNotes;const R=e.exceptionType&&e.evidenceNotes&&e.evidenceNotes.toLowerCase()!==c.toLowerCase()?e.evidenceNotes:null;c=e.exceptionType==="nomatch"?`[ ${e.evidenceNotes} ]`:c,c=e.exceptionType&&t&&a&&!h?c+" *":c;const N=["nomatch","duplicate","upgraded"].includes(e.exceptionType)?.5:1,S=e.exceptionId,d=S?u.find(l=>l.id===S):{},w=d?r.useMemo(()=>y(d.matchId),[y,d.matchId]):{},E=d?r.useMemo(()=>k(d.matchId),[k,d.matchId]):{},J=w?D(w,"short"):"",Q=w?n.jsx(je,{style:{color:"#6dbbff"},onClick:()=>{Z(S)},children:J}):E==null?void 0:E.name;let L=e.exceptionType==="nomatch"?"Could not be matched to a lock or project":e.exceptionType==="badlink"&&!h?"You must provide a valid link.":e.exceptionType==="duplicate"?"Duplicate of ":e.exceptionType==="upgraded"?"Upgraded to ":null;const Z=r.useCallback(l=>{f({id:l})},[f]),G=e.points===1?"pt":"pts";let p=e.date?U(e.date).format("L"):"(no date)";p=p.replace("/202","/2"),p=p.replace("/201","/1");const P=e.date?"#fff":"#aaa",g=["belt","dan","hof"].includes(e.awardType),j=t&&!g||C,B=r.useCallback((l,v)=>{j&&i(v?e.id:!1)},[e,j,i]),X=r.useCallback(l=>{l.preventDefault(),l.stopPropagation(),m("/award")},[m]),ee=j?{}:{cursor:"default"},ne=j?n.jsx(Te,{}):n.jsx("div",{style:{width:24}}),{isMobile:b}=be(),te=b?"block":"flex",se=b?{display:"block",marginLeft:0,placeItems:"center"}:{display:"flex",margin:"0px 0px 0px 20px"},oe=b?"65%":"56%",re=b?"-2px 0px 3px 0px":"3px 0px 3px 0px",ae=g?"1.1rem":"1rem",le=g?"#121212":"",ie=e.name==="Dan 20"?"ffff2c":"#87c048",ce={maxWidth:700,marginLeft:"auto",marginRight:"auto",display:"flex",placeItems:"center",backgroundColor:le};return n.jsxs(Fe,{expanded:o,onChange:B,ref:T,children:[n.jsxs(Ae,{expandIcon:ne,style:{...ce,...ee},children:[n.jsx(Se,{value:s?s.belt:""}),n.jsxs("div",{style:{margin:"8px 0px 0px 8px",width:oe,flexShrink:0,flexDirection:"column",opacity:N},children:[n.jsxs("div",{style:{display:"flex"},children:[e.awardType==="belt"&&n.jsx("div",{style:{marginTop:-4,marginRight:10},children:n.jsx(ve,{value:s.belt,style:{paddingTop:2}})}),e.awardType==="dan"&&n.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:n.jsx(ye,{style:{color:ie}})}),e.awardType==="hof"&&n.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:n.jsx(De,{style:{color:"#f8f52f"}})}),n.jsx(W,{value:c,textStyle:{marginLeft:"0px",fontWeight:700,fontSize:ae},style:{marginBottom:"2px"}})]}),!!R&&!h&&n.jsx("span",{style:{margin:"0px 0px 0px 15px",fontSize:"0.95rem",lineHeight:1.25,color:"#bbb"},children:R}),!!s&&!!(s!=null&&s.version)&&n.jsx(W,{name:"Version",value:n.jsx(ke,{style:{fontSize:"0.95rem",lineHeight:1.25},children:s==null?void 0:s.version}),textStyle:(s==null?void 0:s.belt)==="Unranked"?{color:"#aaa"}:{}}),(L||e.evidenceModifier&&(F||C))&&n.jsxs("div",{style:{margin:"0px 0px 0px 6px",fontWeight:600,fontSize:".95rem"},children:[e.evidenceModifier&&(F||C)&&n.jsxs("span",{style:{marginTop:10},children:["* ",e.evidenceModifier]}),L&&n.jsxs("span",{style:{marginLeft:10,fontSize:".9rem"},children:["* ",L," ",Q]})]})]}),n.jsxs("div",{style:{display:te,placeItems:"center",marginLeft:10,opacity:N},children:[n.jsxs("div",{style:{display:"flex",width:76},children:[n.jsx("div",{style:{margin:"2px 0px 0px 6px",width:30,flexShrink:0,flexDirection:"column"},children:I&&n.jsx(Re,{entry:I})}),n.jsx("div",{style:{margin:"0px 0px 0px 6px",flexShrink:0,flexDirection:"column"},children:(t||!g)&&n.jsx(we,{activity:e,handleChange:B,exceptionType:e.exceptionType,owner:t})})]}),n.jsxs("div",{style:se,children:[n.jsx("div",{style:{margin:re,color:P,width:90,textAlign:"center"},children:p}),!["belt","dan"].includes(e.awardType)&&n.jsx("div",{style:{margin:"1px 0px 0px 22px"},children:n.jsxs("nobr",{children:[n.jsxs("span",{style:{fontWeight:700},children:[e.points," "]}),n.jsx("span",{style:{color:"#666"},children:G})]})}),t&&e.matchId===Ce&&n.jsx(O,{title:"Print Certificate",arrow:!0,disableFocusListener:!0,children:n.jsx(V,{onClick:X,style:{marginLeft:30},children:n.jsx(ze,{})})})]})]})]}),t&&o&&n.jsx($.Fragment,{children:n.jsx(Me,{sx:{padding:"4px 16px 0px 26px"},children:n.jsx(Ee,{activity:e,handleUpdate:()=>{}})})})]},e.id)}const Pe=$.memo(We,(t,e)=>{const o=Object.keys(t.activity),i=Object.keys(e.activity);if(o.length!==i.length)return!1;for(let a=0;a<o.length;a++)if(o[a]!==i[a]||t.activity[o[a]]!==e.activity[i[a]])return!1;return t.owner===e.owner&&t.expanded===e.expanded&&t.onExpand===e.onExpand&&t.merged===e.merged});export{Pe as S,Re as V};
