import{r as b,j as R}from"./index-55f0431c.js";import{c as re,z as ot,F as lt,A as At,C as Ee,I as Lt,K as Xe,T as Pt,M as at,J as ut,w as Bt,E as ke,L as Wt,N as It,O as $t,P as Ft,$ as ht,q as ct,y as He,Q as Gt,R as zt,Z as Dt,S as Vt,B as ft,W as Pe,U as Yt,V as Xt,Y as Ht,X as Kt,v as Ut,a0 as et,_ as Zt,a1 as tt,a2 as Nt,a3 as Jt,a4 as Qt,D as nt,x as en,a5 as tn,a6 as dt}from"./nivo-legends.es-9968c9f0.js";import{K as u}from"./index-7f28d120.js";var Fe=Math.PI,Ge=2*Fe,me=1e-6,nn=Ge-me;function ze(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ke(){return new ze}ze.prototype=Ke.prototype={constructor:ze,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,l=this._y1,s=n-t,a=r-e,f=o-t,h=l-e,c=f*f+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>me)if(!(Math.abs(h*s-a*f)>me)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-o,g=r-l,p=s*s+a*a,m=d*d+g*g,_=Math.sqrt(p),S=Math.sqrt(c),M=i*Math.tan((Fe-Math.acos((p+c-m)/(2*_*S)))/2),x=M/S,j=M/_;Math.abs(x-1)>me&&(this._+="L"+(t+x*f)+","+(e+x*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>f*g)+","+(this._x1=t+j*s)+","+(this._y1=e+j*a)}},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var l=n*Math.cos(r),s=n*Math.sin(r),a=t+l,f=e+s,h=1^o,c=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+a+","+f:(Math.abs(this._x1-a)>me||Math.abs(this._y1-f)>me)&&(this._+="L"+a+","+f),n&&(c<0&&(c=c%Ge+Ge),c>nn?this._+="A"+n+","+n+",0,1,"+h+","+(t-l)+","+(e-s)+"A"+n+","+n+",0,1,"+h+","+(this._x1=a)+","+(this._y1=f):c>me&&(this._+="A"+n+","+n+",0,"+ +(c>=Fe)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function gt(t){return t[0]}function pt(t){return t[1]}function yt(){var t=gt,e=pt,n=re(!0),r=null,i=ot,o=null;function l(s){var a,f=s.length,h,c=!1,d;for(r==null&&(o=i(d=Ke())),a=0;a<=f;++a)!(a<f&&n(h=s[a],a,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,a,s),+e(h,a,s));if(d)return o=null,d+""||null}return l.x=function(s){return arguments.length?(t=typeof s=="function"?s:re(+s),l):t},l.y=function(s){return arguments.length?(e=typeof s=="function"?s:re(+s),l):e},l.defined=function(s){return arguments.length?(n=typeof s=="function"?s:re(!!s),l):n},l.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),l):i},l.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),l):r},l}function rn(){var t=gt,e=null,n=re(0),r=pt,i=re(!0),o=null,l=ot,s=null;function a(h){var c,d,g,p=h.length,m,_=!1,S,M=new Array(p),x=new Array(p);for(o==null&&(s=l(S=Ke())),c=0;c<=p;++c){if(!(c<p&&i(m=h[c],c,h))===_)if(_=!_)d=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=c-1;g>=d;--g)s.point(M[g],x[g]);s.lineEnd(),s.areaEnd()}_&&(M[c]=+t(m,c,h),x[c]=+n(m,c,h),s.point(e?+e(m,c,h):M[c],r?+r(m,c,h):x[c]))}if(S)return s=null,S+""||null}function f(){return yt().defined(i).curve(l).context(o)}return a.x=function(h){return arguments.length?(t=typeof h=="function"?h:re(+h),e=null,a):t},a.x0=function(h){return arguments.length?(t=typeof h=="function"?h:re(+h),a):t},a.x1=function(h){return arguments.length?(e=h==null?null:typeof h=="function"?h:re(+h),a):e},a.y=function(h){return arguments.length?(n=typeof h=="function"?h:re(+h),r=null,a):n},a.y0=function(h){return arguments.length?(n=typeof h=="function"?h:re(+h),a):n},a.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:re(+h),a):r},a.lineX0=a.lineY0=function(){return f().x(t).y(n)},a.lineY1=function(){return f().x(t).y(r)},a.lineX1=function(){return f().x(e).y(n)},a.defined=function(h){return arguments.length?(i=typeof h=="function"?h:re(!!h),a):i},a.curve=function(h){return arguments.length?(l=h,o!=null&&(s=l(o)),a):l},a.context=function(h){return arguments.length?(h==null?o=s=null:s=l(o=h),a):o},a}const it=Math.pow(2,-52),Ae=new Uint32Array(512);class Be{static from(e,n=un,r=hn){const i=e.length,o=new Float64Array(i*2);for(let l=0;l<i;l++){const s=e[l];o[2*l]=n(s),o[2*l+1]=r(s)}return new Be(o)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,l=e.length>>1;let s=1/0,a=1/0,f=-1/0,h=-1/0;for(let y=0;y<l;y++){const v=e[2*y],k=e[2*y+1];v<s&&(s=v),k<a&&(a=k),v>f&&(f=v),k>h&&(h=k),this._ids[y]=y}const c=(s+f)/2,d=(a+h)/2;let g=1/0,p,m,_;for(let y=0;y<l;y++){const v=Ie(c,d,e[2*y],e[2*y+1]);v<g&&(p=y,g=v)}const S=e[2*p],M=e[2*p+1];g=1/0;for(let y=0;y<l;y++){if(y===p)continue;const v=Ie(S,M,e[2*y],e[2*y+1]);v<g&&v>0&&(m=y,g=v)}let x=e[2*m],j=e[2*m+1],z=1/0;for(let y=0;y<l;y++){if(y===p||y===m)continue;const v=ln(S,M,x,j,e[2*y],e[2*y+1]);v<z&&(_=y,z=v)}let $=e[2*_],H=e[2*_+1];if(z===1/0){for(let k=0;k<l;k++)this._dists[k]=e[2*k]-e[0]||e[2*k+1]-e[1];Me(this._ids,this._dists,0,l-1);const y=new Uint32Array(l);let v=0;for(let k=0,q=-1/0;k<l;k++){const P=this._ids[k];this._dists[P]>q&&(y[v++]=P,q=this._dists[P])}this.hull=y.subarray(0,v),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Le(S,M,x,j,$,H)){const y=m,v=x,k=j;m=_,x=$,j=H,_=y,$=v,H=k}const O=an(S,M,x,j,$,H);this._cx=O.x,this._cy=O.y;for(let y=0;y<l;y++)this._dists[y]=Ie(e[2*y],e[2*y+1],O.x,O.y);Me(this._ids,this._dists,0,l-1),this._hullStart=p;let T=3;r[p]=n[_]=m,r[m]=n[p]=_,r[_]=n[m]=p,i[p]=0,i[m]=1,i[_]=2,o.fill(-1),o[this._hashKey(S,M)]=p,o[this._hashKey(x,j)]=m,o[this._hashKey($,H)]=_,this.trianglesLen=0,this._addTriangle(p,m,_,-1,-1,-1);for(let y=0,v,k;y<this._ids.length;y++){const q=this._ids[y],P=e[2*q],W=e[2*q+1];if(y>0&&Math.abs(P-v)<=it&&Math.abs(W-k)<=it||(v=P,k=W,q===p||q===m||q===_))continue;let F=0;for(let V=0,ee=this._hashKey(P,W);V<this._hashSize&&(F=o[(ee+V)%this._hashSize],!(F!==-1&&F!==r[F]));V++);F=n[F];let C=F,E;for(;E=r[C],!Le(P,W,e[2*C],e[2*C+1],e[2*E],e[2*E+1]);)if(C=E,C===F){C=-1;break}if(C===-1)continue;let K=this._addTriangle(C,q,r[C],-1,-1,i[C]);i[q]=this._legalize(K+2),i[C]=K,T++;let D=r[C];for(;E=r[D],Le(P,W,e[2*D],e[2*D+1],e[2*E],e[2*E+1]);)K=this._addTriangle(D,q,E,i[q],-1,i[D]),i[q]=this._legalize(K+2),r[D]=D,T--,D=E;if(C===F)for(;E=n[C],Le(P,W,e[2*E],e[2*E+1],e[2*C],e[2*C+1]);)K=this._addTriangle(E,q,C,-1,i[C],i[E]),this._legalize(K+2),i[E]=K,r[C]=C,T--,C=E;this._hullStart=n[q]=C,r[C]=n[D]=q,r[q]=D,o[this._hashKey(P,W)]=q,o[this._hashKey(e[2*C],e[2*C+1])]=C}this.hull=new Uint32Array(T);for(let y=0,v=this._hullStart;y<T;y++)this.hull[y]=v,v=r[v];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(sn(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,l=0;for(;;){const s=r[e],a=e-e%3;if(l=a+(e+2)%3,s===-1){if(o===0)break;e=Ae[--o];continue}const f=s-s%3,h=a+(e+1)%3,c=f+(s+2)%3,d=n[l],g=n[e],p=n[h],m=n[c];if(on(i[2*d],i[2*d+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[e]=m,n[s]=d;const S=r[c];if(S===-1){let x=this._hullStart;do{if(this._hullTri[x]===c){this._hullTri[x]=e;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(e,S),this._link(s,r[l]),this._link(l,c);const M=f+(s+1)%3;o<Ae.length&&(Ae[o++]=M)}else{if(o===0)break;e=Ae[--o]}}return l}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,o,l){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,l),this.trianglesLen+=3,s}}function sn(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function Ie(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function $e(t,e,n,r,i,o){const l=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(l-s)>=33306690738754716e-32*Math.abs(l+s)?l-s:0}function Le(t,e,n,r,i,o){return($e(i,o,t,e,n,r)||$e(t,e,n,r,i,o)||$e(n,r,i,o,t,e))<0}function on(t,e,n,r,i,o,l,s){const a=t-l,f=e-s,h=n-l,c=r-s,d=i-l,g=o-s,p=a*a+f*f,m=h*h+c*c,_=d*d+g*g;return a*(c*_-m*g)-f*(h*_-m*d)+p*(h*g-c*d)<0}function ln(t,e,n,r,i,o){const l=n-t,s=r-e,a=i-t,f=o-e,h=l*l+s*s,c=a*a+f*f,d=.5/(l*f-s*a),g=(f*h-s*c)*d,p=(l*c-a*h)*d;return g*g+p*p}function an(t,e,n,r,i,o){const l=n-t,s=r-e,a=i-t,f=o-e,h=l*l+s*s,c=a*a+f*f,d=.5/(l*f-s*a),g=t+(f*h-s*c)*d,p=e+(l*c-a*h)*d;return{x:g,y:p}}function Me(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=t[i],l=e[o];let s=i-1;for(;s>=n&&e[t[s]]>l;)t[s+1]=t[s--];t[s+1]=o}else{const i=n+r>>1;let o=n+1,l=r;Ce(t,i,o),e[t[n]]>e[t[r]]&&Ce(t,n,r),e[t[o]]>e[t[r]]&&Ce(t,o,r),e[t[n]]>e[t[o]]&&Ce(t,n,o);const s=t[o],a=e[s];for(;;){do o++;while(e[t[o]]<a);do l--;while(e[t[l]]>a);if(l<o)break;Ce(t,o,l)}t[n+1]=t[l],t[l]=s,r-o+1>=l-n?(Me(t,e,o,r),Me(t,e,n,l-1)):(Me(t,e,n,l-1),Me(t,e,o,r))}}function Ce(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function un(t){return t[0]}function hn(t){return t[1]}const rt=1e-6;class be{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>rt||Math.abs(this._y1-o)>rt)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class De{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class cn{constructor(e,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,p=0,m=r.length,_,S;g<m;g+=3,p+=2){const M=r[g]*2,x=r[g+1]*2,j=r[g+2]*2,z=e[M],$=e[M+1],H=e[x],O=e[x+1],T=e[j],y=e[j+1],v=H-z,k=O-$,q=T-z,P=y-$,W=v*v+k*k,F=q*q+P*P,C=(v*P-k*q)*2;if(!C)_=(z+T)/2-1e8*P,S=($+y)/2+1e8*q;else if(Math.abs(C)<1e-8)_=(z+T)/2,S=($+y)/2;else{const E=1/C;_=z+(P*W-k*F)*E,S=$+(v*F-q*W)*E}o[p]=_,o[p+1]=S}let l=n[n.length-1],s,a=l*4,f,h=e[2*l],c,d=e[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],s=a,f=h,c=d,a=l*4,h=e[2*l],d=e[2*l+1],i[s+2]=i[a]=c-d,i[s+3]=i[a+1]=h-f}render(e){const n=e==null?e=new be:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:l,vectors:s}=this;if(o.length<=1)return null;for(let h=0,c=r.length;h<c;++h){const d=r[h];if(d<h)continue;const g=Math.floor(h/3)*2,p=Math.floor(d/3)*2,m=l[g],_=l[g+1],S=l[p],M=l[p+1];this._renderSegment(m,_,S,M,e)}let a,f=o[o.length-1];for(let h=0;h<o.length;++h){a=f,f=o[h];const c=Math.floor(i[f]/3)*2,d=l[c],g=l[c+1],p=a*4,m=this._project(d,g,s[p+2],s[p+3]);m&&this._renderSegment(d,g,m[0],m[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new be:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new be:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let l=2;l<o;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&n.lineTo(i[l],i[l+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new De;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,o){let l;const s=this._regioncode(e,n),a=this._regioncode(r,i);s===0&&a===0?(o.moveTo(e,n),o.lineTo(r,i)):(l=this._clipSegment(e,n,r,i,s,a))&&(o.moveTo(l[0],l[1]),o.lineTo(l[2],l[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let o=0,l=n.length;o<l;o+=2)for(let s=0,a=i.length;s<a;s+=2)if(n[o]==i[s]&&n[o+1]==i[s+1]&&n[(o+2)%l]==i[(s+a-2)%a]&&n[(o+3)%l]==i[(s+a-1)%a]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,l=r[e];if(l===-1)return null;const s=[];let a=l;do{const f=Math.floor(a/3);if(s.push(n[f*2],n[f*2+1]),a=a%3===2?a-2:a+1,o[a]!==e)break;a=i[a]}while(a!==l&&a!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n)}_clipFinite(e,n){const r=n.length;let i=null,o,l,s=n[r-2],a=n[r-1],f,h=this._regioncode(s,a),c,d;for(let g=0;g<r;g+=2)if(o=s,l=a,s=n[g],a=n[g+1],f=h,h=this._regioncode(s,a),f===0&&h===0)c=d,d=0,i?i.push(s,a):i=[s,a];else{let p,m,_,S,M;if(f===0){if((p=this._clipSegment(o,l,s,a,f,h))===null)continue;[m,_,S,M]=p}else{if((p=this._clipSegment(s,a,o,l,h,f))===null)continue;[S,M,m,_]=p,c=d,d=this._edgecode(m,_),c&&d&&this._edge(e,c,d,i,i.length),i?i.push(m,_):i=[m,_]}c=d,d=this._edgecode(S,M),c&&d&&this._edge(e,c,d,i,i.length),i?i.push(S,M):i=[S,M]}if(i)c=d,d=this._edgecode(i[0],i[1]),c&&d&&this._edge(e,c,d,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,o,l){for(;;){if(o===0&&l===0)return[e,n,r,i];if(o&l)return null;let s,a,f=o||l;f&8?(s=e+(r-e)*(this.ymax-n)/(i-n),a=this.ymax):f&4?(s=e+(r-e)*(this.ymin-n)/(i-n),a=this.ymin):f&2?(a=n+(i-n)*(this.xmax-e)/(r-e),s=this.xmax):(a=n+(i-n)*(this.xmin-e)/(r-e),s=this.xmin),o?(e=s,n=a,o=this._regioncode(e,n)):(r=s,i=a,l=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,o,l){let s=Array.from(n),a;if((a=this._project(s[0],s[1],r,i))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],o,l))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let f=0,h=s.length,c,d=this._edgecode(s[h-2],s[h-1]);f<h;f+=2)c=d,d=this._edgecode(s[f],s[f+1]),c&&d&&(f=this._edge(e,c,d,s,f),h=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,n,r,i,o){for(;n!==r;){let l,s;switch(n){case 5:n=4;continue;case 4:n=6,l=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,l=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,l=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,l=this.xmin,s=this.ymin;break}(i[o]!==l||i[o+1]!==s)&&this.contains(e,l,s)&&(i.splice(o,0,l,s),o+=2)}if(i.length>4)for(let l=0;l<i.length;l+=2){const s=(l+2)%i.length,a=(l+4)%i.length;(i[l]===i[s]&&i[s]===i[a]||i[l+1]===i[s+1]&&i[s+1]===i[a+1])&&(i.splice(s,2),l-=2)}return o}_project(e,n,r,i){let o=1/0,l,s,a;if(i<0){if(n<=this.ymin)return null;(l=(this.ymin-n)/i)<o&&(a=this.ymin,s=e+(o=l)*r)}else if(i>0){if(n>=this.ymax)return null;(l=(this.ymax-n)/i)<o&&(a=this.ymax,s=e+(o=l)*r)}if(r>0){if(e>=this.xmax)return null;(l=(this.xmax-e)/r)<o&&(s=this.xmax,a=n+(o=l)*i)}else if(r<0){if(e<=this.xmin)return null;(l=(this.xmin-e)/r)<o&&(s=this.xmin,a=n+(o=l)*i)}return[s,a]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const fn=2*Math.PI,ve=Math.pow;function dn(t){return t[0]}function gn(t){return t[1]}function pn(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],o=2*e[r+1],l=2*e[r+2];if((n[l]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[l+1]-n[i+1])>1e-10)return!1}return!0}function yn(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Ue{static from(e,n=dn,r=gn,i){return new Ue("length"in e?mn(e,n,r,i):Float64Array.from(bn(e,n,r,i)))}constructor(e){this._delaunator=new Be(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&pn(e)){this.collinear=Int32Array.from({length:n.length/2},(d,g)=>g).sort((d,g)=>n[2*d]-n[2*g]||n[2*d+1]-n[2*g+1]);const a=this.collinear[0],f=this.collinear[this.collinear.length-1],h=[n[2*a],n[2*a+1],n[2*f],n[2*f+1]],c=1e-8*Math.hypot(h[3]-h[1],h[2]-h[0]);for(let d=0,g=n.length/2;d<g;++d){const p=yn(n[2*d],n[2*d+1],c);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Be(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let a=0,f=r.length;a<f;++a){const h=o[a%3===2?a-2:a+1];(r[a]===-1||l[h]===-1)&&(l[h]=a)}for(let a=0,f=i.length;a<f;++a)s[i[a]]=a;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],l[i[0]]=1,i.length===2&&(l[i[1]]=0))}voronoi(e){return new cn(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:l,collinear:s}=this;if(s){const c=s.indexOf(e);c>0&&(yield s[c-1]),c<s.length-1&&(yield s[c+1]);return}const a=n[e];if(a===-1)return;let f=a,h=-1;do{if(yield h=l[f],f=f%3===2?f-2:f+1,l[f]!==e)return;if(f=o[f],f===-1){const c=r[(i[e]+1)%r.length];c!==h&&(yield c);return}}while(f!==a)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,e,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(e,n,r){const{inedges:i,hull:o,_hullIndex:l,halfedges:s,triangles:a,points:f}=this;if(i[e]===-1||!f.length)return(e+1)%(f.length>>1);let h=e,c=ve(n-f[e*2],2)+ve(r-f[e*2+1],2);const d=i[e];let g=d;do{let p=a[g];const m=ve(n-f[p*2],2)+ve(r-f[p*2+1],2);if(m<c&&(c=m,h=p),g=g%3===2?g-2:g+1,a[g]!==e)break;if(g=s[g],g===-1){if(g=o[(l[e]+1)%o.length],g!==p&&ve(n-f[g*2],2)+ve(r-f[g*2+1],2)<c)return g;break}}while(g!==d);return h}render(e){const n=e==null?e=new be:void 0,{points:r,halfedges:i,triangles:o}=this;for(let l=0,s=i.length;l<s;++l){const a=i[l];if(a<l)continue;const f=o[l]*2,h=o[a]*2;e.moveTo(r[f],r[f+1]),e.lineTo(r[h],r[h+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n=2){const r=e==null?e=new be:void 0,{points:i}=this;for(let o=0,l=i.length;o<l;o+=2){const s=i[o],a=i[o+1];e.moveTo(s+n,a),e.arc(s,a,n,0,fn)}return r&&r.value()}renderHull(e){const n=e==null?e=new be:void 0,{hull:r,points:i}=this,o=r[0]*2,l=r.length;e.moveTo(i[o],i[o+1]);for(let s=1;s<l;++s){const a=2*r[s];e.lineTo(i[a],i[a+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new De;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new be:void 0,{points:i,triangles:o}=this,l=o[e*=3]*2,s=o[e+1]*2,a=o[e+2]*2;return n.moveTo(i[l],i[l+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new De;return this.renderTriangle(e,n),n.value()}}function mn(t,e,n,r){const i=t.length,o=new Float64Array(i*2);for(let l=0;l<i;++l){const s=t[l];o[l*2]=e.call(r,s,l,t),o[l*2+1]=n.call(r,s,l,t)}return o}function*bn(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}var st=function(t){return typeof t=="function"?t:function(e){return e[t]}},xn=function(t){var e=t.points,n=t.x,r=n===void 0?"x":n,i=t.y,o=i===void 0?"y":i,l=st(r),s=st(o);return e.map(function(a){return[l(a),s(a)]})},_n=function(t){var e=t.points,n=t.width,r=t.height,i=t.debug,o=Ue.from(e),l=i?o.voronoi([0,0,n,r]):void 0;return{delaunay:o,voronoi:l}},mt=function(t){var e=t.points,n=t.x,r=t.y,i=t.width,o=t.height,l=t.debug,s=b.useMemo(function(){return xn({points:e,x:n,y:r})},[e,n,r]);return b.useMemo(function(){return _n({points:s,width:i,height:o,debug:l})},[s,i,o,l])},vn=function(t){var e=t.nodes,n=t.width,r=t.height,i=t.x,o=t.y,l=t.onMouseEnter,s=t.onMouseMove,a=t.onMouseLeave,f=t.onClick,h=t.debug,c=b.useRef(null),d=b.useState(null),g=d[0],p=d[1],m=mt({points:e,x:i,y:o,width:n,height:r,debug:h}),_=m.delaunay,S=m.voronoi,M=b.useMemo(function(){if(h&&S)return S.render()},[h,S]),x=b.useCallback(function(O){if(!c.current)return[null,null];var T=lt(c.current,O),y=T[0],v=T[1],k=_.find(y,v);return[k,k!==void 0?e[k]:null]},[c,_]),j=b.useCallback(function(O){var T=x(O),y=T[0],v=T[1];p(y),v&&(l==null||l(v,O))},[x,p,l]),z=b.useCallback(function(O){var T=x(O),y=T[0],v=T[1];p(y),v&&(s==null||s(v,O))},[x,p,s]),$=b.useCallback(function(O){if(p(null),a){var T=void 0;g!==null&&(T=e[g]),T&&a(T,O)}},[p,g,a,e]),H=b.useCallback(function(O){var T=x(O),y=T[0],v=T[1];p(y),v&&(f==null||f(v,O))},[x,p,f]);return R.jsxs("g",{ref:c,children:[h&&S&&R.jsxs(R.Fragment,{children:[R.jsx("path",{d:M,stroke:"red",strokeWidth:1,opacity:.75}),g!==null&&R.jsx("path",{fill:"pink",opacity:.35,d:S.renderCell(g)})]}),R.jsx("rect",{width:n,height:r,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:j,onMouseMove:z,onMouseLeave:$,onClick:H})]})},Mn=function(t,e){t.save(),t.globalAlpha=.75,t.beginPath(),e.render(t),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.restore()},wn=function(t,e,n){t.save(),t.globalAlpha=.35,t.beginPath(),e.renderCell(n,t),t.fillStyle="red",t.fill(),t.restore()};function X(){return X=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X.apply(this,arguments)}var bt=function(t){var e=t.point;return R.jsx(Bt,{id:R.jsxs("span",{children:["x: ",R.jsx("strong",{children:e.data.xFormatted}),", y:"," ",R.jsx("strong",{children:e.data.yFormatted})]}),enableChip:!0,color:e.serieColor})};bt.propTypes={point:u.object.isRequired};var Sn=b.memo(bt),xt=function(t){var e=t.slice,n=t.axis,r=ke(),i=n==="x"?"y":"x";return R.jsx(Wt,{rows:e.points.map(function(o){return[R.jsx(It,{color:o.serieColor,style:r.tooltip.chip},"chip"),o.serieId,R.jsx("span",{style:r.tooltip.tableCellValue,children:o.data[i+"Formatted"]},"value")]})})};xt.propTypes={slice:u.object.isRequired,axis:u.oneOf(["x","y"]).isRequired};var Rn=b.memo(xt),_t={data:u.arrayOf(u.shape({id:u.oneOfType([u.string,u.number]).isRequired,data:u.arrayOf(u.shape({x:u.oneOfType([u.number,u.string,u.instanceOf(Date)]),y:u.oneOfType([u.number,u.string,u.instanceOf(Date)])})).isRequired})).isRequired,xScale:u.object.isRequired,xFormat:u.oneOfType([u.func,u.string]),yScale:u.object.isRequired,yFormat:u.oneOfType([u.func,u.string]),layers:u.arrayOf(u.oneOfType([u.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),u.func])).isRequired,curve:At.isRequired,axisTop:Ee,axisRight:Ee,axisBottom:Ee,axisLeft:Ee,enableGridX:u.bool.isRequired,enableGridY:u.bool.isRequired,gridXValues:u.oneOfType([u.number,u.arrayOf(u.oneOfType([u.number,u.string,u.instanceOf(Date)]))]),gridYValues:u.oneOfType([u.number,u.arrayOf(u.oneOfType([u.number,u.string,u.instanceOf(Date)]))]),enablePoints:u.bool.isRequired,pointSymbol:u.func,pointSize:u.number.isRequired,pointColor:u.any.isRequired,pointBorderWidth:u.number.isRequired,pointBorderColor:u.any.isRequired,enablePointLabel:u.bool.isRequired,pointLabel:u.oneOfType([u.string,u.func]).isRequired,markers:u.arrayOf(u.shape({axis:u.oneOf(["x","y"]).isRequired,value:u.oneOfType([u.number,u.string,u.instanceOf(Date)]).isRequired,style:u.object})),colors:Lt.isRequired,enableArea:u.bool.isRequired,areaOpacity:u.number.isRequired,areaBlendMode:Xe.isRequired,areaBaselineValue:u.oneOfType([u.number,u.string,u.instanceOf(Date)]).isRequired,lineWidth:u.number.isRequired,legends:u.arrayOf(u.shape(Pt)).isRequired,isInteractive:u.bool.isRequired,debugMesh:u.bool.isRequired,tooltip:u.oneOfType([u.func,u.object]).isRequired,enableSlices:u.oneOf(["x","y",!1]).isRequired,debugSlices:u.bool.isRequired,sliceTooltip:u.oneOfType([u.func,u.object]).isRequired,enableCrosshair:u.bool.isRequired,crosshairType:u.string.isRequired},Cn=X({},_t,{enablePointLabel:u.bool.isRequired,role:u.string.isRequired,useMesh:u.bool.isRequired},$t,Ft),kn=X({pixelRatio:u.number.isRequired},_t),vt={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:Sn,enableSlices:!1,debugSlices:!1,sliceTooltip:Rn,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},ae=X({},vt,{enablePointLabel:!1,useMesh:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),Tn=X({},vt,{pixelRatio:typeof window<"u"&&window.devicePixelRatio||1}),qn=function(t){var e=t.curve;return b.useMemo(function(){return yt().defined(function(n){return n.x!==null&&n.y!==null}).x(function(n){return n.x}).y(function(n){return n.y}).curve(dt(e))},[e])},jn=function(t){var e=t.curve,n=t.yScale,r=t.areaBaselineValue;return b.useMemo(function(){return rn().defined(function(i){return i.x!==null&&i.y!==null}).x(function(i){return i.x}).y1(function(i){return i.y}).curve(dt(e)).y0(n(r))},[e,n,r])},On=function(t){var e=t.enableSlices,n=t.points,r=t.width,i=t.height;return b.useMemo(function(){if(e===!1)return[];if(e==="x"){var o=new Map;return n.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(o.has(s.x)?o.get(s.x).push(s):o.set(s.x,[s]))}),Array.from(o.entries()).sort(function(s,a){return s[0]-a[0]}).map(function(s,a,f){var h,c=s[0],d=s[1],g=f[a-1],p=f[a+1];return{id:c,x0:h=g?c-(c-g[0])/2:c,x:c,y0:0,y:0,width:p?c-h+(p[0]-c)/2:r-h,height:i,points:d.reverse()}})}if(e==="y"){var l=new Map;return n.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(l.has(s.y)?l.get(s.y).push(s):l.set(s.y,[s]))}),Array.from(l.entries()).sort(function(s,a){return s[0]-a[0]}).map(function(s,a,f){var h,c,d=s[0],g=s[1],p=f[a-1],m=f[a+1];return h=p?d-(d-p[0])/2:d,c=m?d-h+(m[0]-d)/2:i-h,{id:d,x0:0,x:0,y0:h,y:d,width:r,height:c,points:g.reverse()}})}},[e,n])},Mt=function(t){var e=t.data,n=t.xScale,r=n===void 0?ae.xScale:n,i=t.xFormat,o=t.yScale,l=o===void 0?ae.yScale:o,s=t.yFormat,a=t.width,f=t.height,h=t.colors,c=h===void 0?ae.colors:h,d=t.curve,g=d===void 0?ae.curve:d,p=t.areaBaselineValue,m=p===void 0?ae.areaBaselineValue:p,_=t.pointColor,S=_===void 0?ae.pointColor:_,M=t.pointBorderColor,x=M===void 0?ae.pointBorderColor:M,j=t.enableSlices,z=j===void 0?ae.enableSlicesTooltip:j,$=nt(i),H=nt(s),O=en(c,"id"),T=ke(),y=Pe(S,T),v=Pe(x,T),k=b.useState([]),q=k[0],P=k[1],W=b.useMemo(function(){return tn(e.filter(function(A){return q.indexOf(A.id)===-1}),r,l,a,f)},[e,q,r,l,a,f]),F=W.xScale,C=W.yScale,E=W.series,K=b.useMemo(function(){var A=e.map(function(B){return{id:B.id,label:B.id,color:O(B)}}),G=A.map(function(B){return X({},E.find(function(Y){return Y.id===B.id}),{color:B.color})}).filter(function(B){return!!B.id});return{legendData:A.map(function(B){return X({},B,{hidden:!G.find(function(Y){return Y.id===B.id})})}).reverse(),series:G}},[e,E,O]),D=K.legendData,V=K.series,ee=b.useCallback(function(A){P(function(G){return G.indexOf(A)>-1?G.filter(function(B){return B!==A}):[].concat(G,[A])})},[]),se=function(A){var G=A.series,B=A.getPointColor,Y=A.getPointBorderColor,ce=A.formatX,U=A.formatY;return b.useMemo(function(){return G.reduce(function(oe,J){return[].concat(oe,J.data.filter(function(Z){return Z.position.x!==null&&Z.position.y!==null}).map(function(Z,ue){var ne={id:J.id+"."+ue,index:oe.length+ue,serieId:J.id,serieColor:J.color,x:Z.position.x,y:Z.position.y};return ne.color=B(J),ne.borderColor=Y(ne),ne.data=X({},Z.data,{xFormatted:ce(Z.data.x),yFormatted:U(Z.data.y)}),ne}))},[])},[G,B,Y,ce,U])}({series:V,getPointColor:y,getPointBorderColor:v,formatX:$,formatY:H}),te=On({enableSlices:z,points:se,width:a,height:f});return{legendData:D,toggleSerie:ee,lineGenerator:qn({curve:g}),areaGenerator:jn({curve:g,yScale:C,areaBaselineValue:m}),getColor:O,series:V,xScale:F,yScale:C,slices:te,points:se}},wt=function(t){var e=t.areaBlendMode,n=t.areaOpacity,r=t.color,i=t.fill,o=t.path,l=Dt(),s=l.animate,a=l.config,f=ht(o),h=Vt({color:r,config:a,immediate:!s});return R.jsx(ct.path,{d:f,fill:i||h.color,fillOpacity:n,strokeWidth:0,style:{mixBlendMode:e}})};wt.propTypes={areaBlendMode:Xe.isRequired,areaOpacity:u.number.isRequired,color:u.string,fill:u.string,path:u.string.isRequired};var St=function(t){var e=t.areaGenerator,n=t.areaOpacity,r=t.areaBlendMode,i=t.lines.slice(0).reverse();return R.jsx("g",{children:i.map(function(o){return R.jsx(wt,X({path:e(o.data.map(function(l){return l.position}))},X({areaOpacity:n,areaBlendMode:r},o)),o.id)})})};St.propTypes={areaGenerator:u.func.isRequired,areaOpacity:u.number.isRequired,areaBlendMode:Xe.isRequired,lines:u.arrayOf(u.object).isRequired};var En=b.memo(St),Rt=function(t){var e=t.lineGenerator,n=t.points,r=t.color,i=t.thickness,o=b.useMemo(function(){return e(n)},[e,n]),l=ht(o);return R.jsx(ct.path,{d:l,fill:"none",strokeWidth:i,stroke:r})};Rt.propTypes={points:u.arrayOf(u.shape({x:u.oneOfType([u.string,u.number]),y:u.oneOfType([u.string,u.number])})),lineGenerator:u.func.isRequired,color:u.string.isRequired,thickness:u.number.isRequired};var An=b.memo(Rt),Ct=function(t){var e=t.lines,n=t.lineGenerator,r=t.lineWidth;return e.slice(0).reverse().map(function(i){var o=i.id,l=i.data,s=i.color;return R.jsx(An,{id:o,points:l.map(function(a){return a.position}),lineGenerator:n,color:s,thickness:r},o)})};Ct.propTypes={lines:u.arrayOf(u.shape({id:u.oneOfType([u.string,u.number]).isRequired,color:u.string.isRequired,data:u.arrayOf(u.shape({data:u.shape({x:u.oneOfType([u.string,u.number,u.instanceOf(Date)]),y:u.oneOfType([u.string,u.number,u.instanceOf(Date)])}).isRequired,position:u.shape({x:u.number,y:u.number}).isRequired})).isRequired})).isRequired,lineWidth:u.number.isRequired,lineGenerator:u.func.isRequired};var Ln=b.memo(Ct),kt=function(t){var e=t.slice,n=t.axis,r=t.debug,i=t.tooltip,o=t.isCurrent,l=t.setCurrent,s=t.onMouseEnter,a=t.onMouseMove,f=t.onMouseLeave,h=t.onClick,c=He(),d=c.showTooltipFromEvent,g=c.hideTooltip,p=b.useCallback(function(M){d(b.createElement(i,{slice:e,axis:n}),M,"right"),l(e),s&&s(e,M)},[d,i,e,s]),m=b.useCallback(function(M){d(b.createElement(i,{slice:e,axis:n}),M,"right"),a&&a(e,M)},[d,i,e,a]),_=b.useCallback(function(M){g(),l(null),f&&f(e,M)},[g,e,f]),S=b.useCallback(function(M){h&&h(e,M)},[e,h]);return R.jsx("rect",{x:e.x0,y:e.y0,width:e.width,height:e.height,stroke:"red",strokeWidth:r?1:0,strokeOpacity:.75,fill:"red",fillOpacity:o&&r?.35:0,onMouseEnter:p,onMouseMove:m,onMouseLeave:_,onClick:S,"data-testid":"slice-"+e.id})};kt.propTypes={slice:u.object.isRequired,axis:u.oneOf(["x","y"]).isRequired,debug:u.bool.isRequired,height:u.number.isRequired,tooltip:u.oneOfType([u.func,u.object]),isCurrent:u.bool.isRequired,setCurrent:u.func.isRequired,onMouseEnter:u.func,onMouseMove:u.func,onMouseLeave:u.func,onClick:u.func};var Pn=b.memo(kt),Tt=function(t){var e=t.slices,n=t.axis,r=t.debug,i=t.height,o=t.tooltip,l=t.current,s=t.setCurrent,a=t.onMouseEnter,f=t.onMouseMove,h=t.onMouseLeave,c=t.onClick;return e.map(function(d){return R.jsx(Pn,{slice:d,axis:n,debug:r,height:i,tooltip:o,setCurrent:s,isCurrent:l!==null&&l.id===d.id,onMouseEnter:a,onMouseMove:f,onMouseLeave:h,onClick:c},d.id)})};Tt.propTypes={slices:u.arrayOf(u.shape({id:u.oneOfType([u.number,u.string,u.instanceOf(Date)]).isRequired,x:u.number.isRequired,y:u.number.isRequired,points:u.arrayOf(u.object).isRequired})).isRequired,axis:u.oneOf(["x","y"]).isRequired,debug:u.bool.isRequired,height:u.number.isRequired,tooltip:u.oneOfType([u.func,u.object]).isRequired,current:u.object,setCurrent:u.func.isRequired,onMouseEnter:u.func,onMouseMove:u.func,onMouseLeave:u.func,onClick:u.func};var Bn=b.memo(Tt),qt=function(t){var e=t.points,n=t.symbol,r=t.size,i=t.borderWidth,o=t.enableLabel,l=t.label,s=t.labelYOffset,a=ke(),f=Gt(l),h=e.slice(0).reverse().map(function(c){return{id:c.id,x:c.x,y:c.y,datum:c.data,fill:c.color,stroke:c.borderColor,label:o?f(c.data):null}});return R.jsx("g",{children:h.map(function(c){return R.jsx(zt,{x:c.x,y:c.y,datum:c.datum,symbol:n,size:r,color:c.fill,borderWidth:i,borderColor:c.stroke,label:c.label,labelYOffset:s,theme:a},c.id)})})};qt.propTypes={points:u.arrayOf(u.object),symbol:u.func,size:u.number.isRequired,color:u.func.isRequired,borderWidth:u.number.isRequired,borderColor:u.func.isRequired,enableLabel:u.bool.isRequired,label:u.oneOfType([u.string,u.func]).isRequired,labelYOffset:u.number};var Wn=b.memo(qt),jt=function(t){var e=t.points,n=t.width,r=t.height,i=t.margin,o=t.setCurrent,l=t.onMouseEnter,s=t.onMouseMove,a=t.onMouseLeave,f=t.onClick,h=t.tooltip,c=t.debug,d=He(),g=d.showTooltipAt,p=d.hideTooltip,m=b.useCallback(function(x,j){g(b.createElement(h,{point:x}),[x.x+i.left,x.y+i.top],"top"),o(x),l&&l(x,j)},[o,g,h,l,i]),_=b.useCallback(function(x,j){g(b.createElement(h,{point:x}),[x.x+i.left,x.y+i.top],"top"),o(x),s&&s(x,j)},[o,g,h,s]),S=b.useCallback(function(x,j){p(),o(null),a&&a(x,j)},[p,o,a]),M=b.useCallback(function(x,j){f&&f(x,j)},[f]);return R.jsx(vn,{nodes:e,width:n,height:r,onMouseEnter:m,onMouseMove:_,onMouseLeave:S,onClick:M,debug:c})};jt.propTypes={points:u.arrayOf(u.object).isRequired,width:u.number.isRequired,height:u.number.isRequired,margin:u.object.isRequired,setCurrent:u.func.isRequired,onMouseEnter:u.func,onMouseMove:u.func,onMouseLeave:u.func,onClick:u.func,tooltip:u.oneOfType([u.func,u.object]).isRequired,debug:u.bool.isRequired};var In=b.memo(jt),Ve=function(t){var e=t.data,n=t.xScale,r=t.xFormat,i=t.yScale,o=t.yFormat,l=t.layers,s=t.curve,a=t.areaBaselineValue,f=t.colors,h=t.margin,c=t.width,d=t.height,g=t.axisTop,p=t.axisRight,m=t.axisBottom,_=t.axisLeft,S=t.enableGridX,M=t.enableGridY,x=t.gridXValues,j=t.gridYValues,z=t.lineWidth,$=t.enableArea,H=t.areaOpacity,O=t.areaBlendMode,T=t.enablePoints,y=t.pointSymbol,v=t.pointSize,k=t.pointColor,q=t.pointBorderWidth,P=t.pointBorderColor,W=t.enablePointLabel,F=t.pointLabel,C=t.pointLabelYOffset,E=t.defs,K=t.fill,D=t.markers,V=t.legends,ee=t.isInteractive,se=t.useMesh,te=t.debugMesh,A=t.onMouseEnter,G=t.onMouseMove,B=t.onMouseLeave,Y=t.onClick,ce=t.tooltip,U=t.enableSlices,oe=t.debugSlices,J=t.sliceTooltip,Z=t.enableCrosshair,ue=t.crosshairType,ne=t.role,le=ft(c,d,h),fe=le.margin,N=le.innerWidth,ie=le.innerHeight,Te=le.outerWidth,qe=le.outerHeight,Q=Mt({data:e,xScale:n,xFormat:r,yScale:i,yFormat:o,width:N,height:ie,colors:f,curve:s,areaBaselineValue:a,pointColor:k,pointBorderColor:P,enableSlices:U}),je=Q.legendData,Oe=Q.toggleSerie,de=Q.lineGenerator,we=Q.areaGenerator,xe=Q.series,_e=Q.xScale,w=Q.yScale,I=Q.slices,he=Q.points,L=ke(),ge=Pe(k,L),Ot=Pe(P,L),Ze=b.useState(null),Se=Ze[0],Ne=Ze[1],Je=b.useState(null),Re=Je[0],Qe=Je[1],pe={grid:R.jsx(Yt,{theme:L,width:N,height:ie,xScale:S?_e:null,yScale:M?w:null,xValues:x,yValues:j},"grid"),markers:R.jsx(Xt,{markers:D,width:N,height:ie,xScale:_e,yScale:w,theme:L},"markers"),axes:R.jsx(Ht,{xScale:_e,yScale:w,width:N,height:ie,theme:L,top:g,right:p,bottom:m,left:_},"axes"),areas:null,lines:R.jsx(Ln,{lines:xe,lineGenerator:de,lineWidth:z},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:V.map(function(ye,We){return R.jsx(Kt,X({},ye,{containerWidth:N,containerHeight:ie,data:ye.data||je,theme:L,toggleSerie:ye.toggleSerie?Oe:void 0}),"legend."+We)})},Et=Ut(E,xe,K);return $&&(pe.areas=R.jsx(En,{areaGenerator:we,areaOpacity:H,areaBlendMode:O,lines:xe},"areas")),ee&&U!==!1&&(pe.slices=R.jsx(Bn,{slices:I,axis:U,debug:oe,height:ie,tooltip:J,current:Re,setCurrent:Qe,onMouseEnter:A,onMouseMove:G,onMouseLeave:B,onClick:Y},"slices")),T&&(pe.points=R.jsx(Wn,{points:he,symbol:y,size:v,color:ge,borderWidth:q,borderColor:Ot,enableLabel:W,label:F,labelYOffset:C},"points")),ee&&Z&&(Se!==null&&(pe.crosshair=R.jsx(et,{width:N,height:ie,x:Se.x,y:Se.y,type:ue},"crosshair")),Re!==null&&(pe.crosshair=R.jsx(et,{width:N,height:ie,x:Re.x,y:Re.y,type:U},"crosshair"))),ee&&se&&U===!1&&(pe.mesh=R.jsx(In,{points:he,width:N,height:ie,margin:fe,current:Se,setCurrent:Ne,onMouseEnter:A,onMouseMove:G,onMouseLeave:B,onClick:Y,tooltip:ce,debug:te},"mesh")),R.jsx(Zt,{defs:Et,width:Te,height:qe,margin:fe,role:ne,children:l.map(function(ye,We){return typeof ye=="function"?R.jsx(b.Fragment,{children:ye(X({},t,{innerWidth:N,innerHeight:ie,series:xe,slices:I,points:he,xScale:_e,yScale:w,lineGenerator:de,areaGenerator:we,currentPoint:Se,setCurrentPoint:Ne,currentSlice:Re,setCurrentSlice:Qe}))},We):pe[ye]})})};Ve.propTypes=Cn,Ve.defaultProps=ae;var $n=at(Ve),Yn=function(t){return R.jsx(ut,{children:function(e){var n=e.width,r=e.height;return R.jsx($n,X({width:n,height:r},t))}})},Ye=function(t){var e=t.width,n=t.height,r=t.margin,i=t.pixelRatio,o=t.data,l=t.xScale,s=t.xFormat,a=t.yScale,f=t.yFormat,h=t.curve,c=t.layers,d=t.colors,g=t.lineWidth,p=t.enableArea,m=t.areaBaselineValue,_=t.areaOpacity,S=t.enablePoints,M=t.pointSize,x=t.pointColor,j=t.pointBorderWidth,z=t.pointBorderColor,$=t.enableGridX,H=t.gridXValues,O=t.enableGridY,T=t.gridYValues,y=t.axisTop,v=t.axisRight,k=t.axisBottom,q=t.axisLeft,P=t.legends,W=t.isInteractive,F=t.debugMesh,C=t.onMouseLeave,E=t.onClick,K=t.tooltip,D=t.canvasRef,V=b.useRef(null),ee=ft(e,n,r),se=ee.margin,te=ee.innerWidth,A=ee.innerHeight,G=ee.outerWidth,B=ee.outerHeight,Y=ke(),ce=b.useState(null),U=ce[0],oe=ce[1],J=Mt({data:o,xScale:l,xFormat:s,yScale:a,yFormat:f,width:te,height:A,colors:d,curve:h,areaBaselineValue:m,pointColor:x,pointBorderColor:z}),Z=J.lineGenerator,ue=J.areaGenerator,ne=J.series,le=J.xScale,fe=J.yScale,N=J.points,ie=mt({points:N,width:te,height:A,debug:F}),Te=ie.delaunay,qe=ie.voronoi;b.useEffect(function(){D&&(D.current=V.current),V.current.width=G*i,V.current.height=B*i;var w=V.current.getContext("2d");w.scale(i,i),w.fillStyle=Y.background,w.fillRect(0,0,G,B),w.translate(se.left,se.top),c.forEach(function(I){if(typeof I=="function"&&I({ctx:w,innerWidth:te,innerHeight:A,series:ne,points:N,xScale:le,yScale:fe,lineWidth:g,lineGenerator:Z,areaGenerator:ue,currentPoint:U,setCurrentPoint:oe}),I==="grid"&&Y.grid.line.strokeWidth>0&&(w.lineWidth=Y.grid.line.strokeWidth,w.strokeStyle=Y.grid.line.stroke,$&&tt(w,{width:te,height:A,scale:le,axis:"x",values:H}),O&&tt(w,{width:te,height:A,scale:fe,axis:"y",values:T})),I==="axes"&&Nt(w,{xScale:le,yScale:fe,width:te,height:A,top:y,right:v,bottom:k,left:q,theme:Y}),I==="areas"&&p===!0&&(w.save(),w.globalAlpha=_,ue.context(w),ne.forEach(function(L){w.fillStyle=L.color,w.beginPath(),ue(L.data.map(function(ge){return ge.position})),w.fill()}),w.restore()),I==="lines"&&(Z.context(w),ne.forEach(function(L){w.strokeStyle=L.color,w.lineWidth=g,w.beginPath(),Z(L.data.map(function(ge){return ge.position})),w.stroke()})),I==="points"&&S===!0&&M>0&&N.forEach(function(L){w.fillStyle=L.color,w.beginPath(),w.arc(L.x,L.y,M/2,0,2*Math.PI),w.fill(),j>0&&(w.strokeStyle=L.borderColor,w.lineWidth=j,w.stroke())}),I==="mesh"&&F===!0&&(Mn(w,qe),U&&wn(w,qe,U.index)),I==="legends"){var he=ne.map(function(L){return{id:L.id,label:L.id,color:L.color}}).reverse();P.forEach(function(L){Jt(w,X({},L,{data:L.data||he,containerWidth:te,containerHeight:A,theme:Y}))})}})},[V,G,B,c,Y,Z,ne,le,fe,$,H,O,T,y,v,k,q,P,N,S,M,U]);var Q=b.useCallback(function(w){var I=lt(V.current,w),he=I[0],L=I[1];if(!Qt(se.left,se.top,te,A,he,L))return null;var ge=Te.find(he-se.left,L-se.top);return N[ge]},[V,se,te,A,Te]),je=He(),Oe=je.showTooltipFromEvent,de=je.hideTooltip,we=b.useCallback(function(w){var I=Q(w);oe(I),I?Oe(b.createElement(K,{point:I}),w):de()},[Q,oe,Oe,de,K]),xe=b.useCallback(function(w){de(),oe(null),U&&C&&C(U,w)},[de,oe,C]),_e=b.useCallback(function(w){if(E){var I=Q(w);I&&E(I,w)}},[Q,E]);return R.jsx("canvas",{ref:V,width:G*i,height:B*i,style:{width:G,height:B,cursor:W?"auto":"normal"},onMouseEnter:W?we:void 0,onMouseMove:W?we:void 0,onMouseLeave:W?xe:void 0,onClick:W?_e:void 0})};Ye.propTypes=kn,Ye.defaultProps=Tn;var Fn=at(Ye),Gn=b.forwardRef(function(t,e){return R.jsx(Fn,X({},t,{canvasRef:e}))});b.forwardRef(function(t,e){return R.jsx(ut,{children:function(n){var r=n.width,i=n.height;return R.jsx(Gn,X({width:r,height:i},t,{ref:e}))}})});export{Yn as P,yt as m,Ke as p};
