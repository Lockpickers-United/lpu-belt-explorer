import{j as t,a1 as T,R as D,r as L}from"./index-22b17585.js";import{L as C}from"./LoadingDisplay-e465641e.js";import{u as R}from"./useData-95d5a2a4.js";import{u as P}from"./usePageTitle-10556a5d.js";import{u as y}from"./useWindowSize-5d0e8479.js";import{e as V,s as M,p as H}from"./dataUrls-b6a2c15e.js";import{C as z,L as F}from"./ChoiceButtonGroup-3485e758.js";import{A as S,p as E}from"./adminChartDefaults-567b5188.js";import{P as B}from"./nivo-line.es-dedb6af2.js";import{c as I,d as Y,T as G,a as A,b as j,e as U}from"./TableRow-2d2a0961.js";import"./LPU-c3fa7122.js";import"./LinearProgress-9cbaa68f.js";import"./useDocumentTitle-73edbd39.js";import"./chartDefaults-9fc07b21.js";import"./ToggleButtonGroup-7e6c15c9.js";import"./nivo-legends.es-80739c99.js";import"./index-4c712aee.js";const X=({data:a})=>{const{firstVistsLastSevenDays:o}=a,{width:i}=y(),e=i<=360,r=i<=395,s=i<=428,l=i<=560,c=i<=820,m=e?".8rem":r?".85rem":s?".9rem":".95rem",n=400;return t.jsx(S,{tableData:o,tableWidth:n,fontSize:m})},N=({data:a})=>{const{pageTracking:o}=a,{width:i}=y(),e=i<=360,r=i<=395,s=i<=428,l=i<=560,c=i<=820,m=e?".8rem":r?".85rem":s?".9rem":".95rem",n="100%";return t.jsx(S,{tableData:o,tableWidth:n,fontSize:m})},O=({lineData:a})=>{const o=[a.traffic28days.data],i=[],e=new Map,r=new Map,s=new Map;o.forEach(d=>{const x=[],h=[],w=[];for(let g=0;g<d.length;g++){const v=new Map;v.x=d[g].date,v.y=d[g].visitors,x.push(v);const W=new Map;W.x=d[g].date,W.y=d[g].visits,h.push(W);const k=new Map;k.x=d[g].date,k.y=d[g].lockViews,w.push(k)}e.id="Visitors",e.data=x,r.id="Visits",r.data=h,s.id="Lock Views",s.data=w,i.push(r),i.push(e),i.push(s)});const{width:l}=y(),c=l<=360,m=l<=395,n=l<=428,f=l<=560,u=l<=820,p=c||m?200:n?210:u?230:350,b=f?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:p,width:"100%"},children:t.jsx(B,{theme:E,data:i,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:b,height:p,curve:"natural",yScale:{type:"linear",min:0,max:4e3,stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#444",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},$=({fullData:a})=>{const o=a.traffic28days,i=28;function e(d){return T().subtract(i+1,"day").isBefore(T(d.date))}const r={columns:o.columns.filter(d=>d.id!=="weekend").filter(d=>d.id!=="visitors"),data:o.data.filter(e)},{width:s}=y(),l=s<=360,c=s<=395,m=s<=428,n=s<=560,f=s<=820,u=l?".8rem":c?".85rem":m||n||f?".9rem":".85rem",p=170,b=340;return t.jsx(S,{tableData:r,tableWidth:p,tableHeight:b,fontSize:u})};function q({data:a}){const{width:o}=y(),i=o<=560,s={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}};return t.jsx(D.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:s,children:[t.jsx(O,{lineData:a}),t.jsx($,{fullData:a})]})})})}const J=({data:a})=>{const o=a.popularCountries1,i=a.popularCountries2,{width:e}=y(),r=e<=560,c={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...r?{}:{display:"flex"}},m="400px",n=".95rem";return t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:c,children:[t.jsx(S,{tableData:o,tableWidth:m,fontSize:n,wrap:!0}),t.jsx("div",{style:{width:"75px"},children:"Â "}),t.jsx(S,{tableData:i,tableWidth:m,fontSize:n,wrap:!0})]})})};function K({data:a}){const{width:o}=y(),i=o<500,e=o<700,r=e?280:400,s=e?260:375,l=i?320:450,c={border:0,padding:"4px 8px 0px 0px",fontWeight:400},f={...{width:"100%",padding:"8px 16px",marginTop:16,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...e?{}:{display:"flex"}},u=L.useMemo(()=>{const{popularCountries:x,popularEuropeanCountries:h,popularStates:w}=a.popularAreas;return[{label:"Worldwide",data:x,map:Q},{label:"Europe",data:h,map:Z},{label:"US States",data:w,map:_}]},[a]),[p,b]=L.useState(u[0]),d=L.useCallback(x=>b(x),[]);return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(z,{options:u,onChange:d}),t.jsxs("div",{style:f,children:[t.jsx("div",{style:{backgroundColor:"#000",border:"1px solid #666",padding:12,align:"center",margin:"10px 0px 0px 0px",width:200,height:r,marginLeft:"auto",marginRight:"auto"},children:t.jsx(I,{id:"areaList",sx:{height:s,backgroundColor:"#111",margin:"auto"},children:t.jsxs(Y,{stickyHeader:!0,children:[t.jsx(G,{children:t.jsxs(A,{children:[t.jsx(j,{style:{padding:"4px 10px 4px 12px",fontWeight:700,textAlign:"right"},children:"#"}),t.jsx(j,{style:{padding:"4px 0px",fontWeight:700},children:"Area"})]})}),t.jsx(U,{children:p.data.data.map((x,h)=>t.jsxs(A,{index:h,children:[t.jsx(j,{style:c,sx:{textAlign:"right",padding:"0px",width:34},children:h+1},h+1),t.jsx(j,{style:c,children:x.area},x.area)]},h))})]})})}),t.jsx("div",{style:{flexGrow:1,width:l},children:t.jsx("img",{id:"mapImage",alt:"map",src:p.map,width:l})})]})]})}const Q="https://explore.lpubelts.com/maps/mapWorld.gif",Z="https://explore.lpubelts.com/maps/mapEurope.gif",_="https://explore.lpubelts.com/maps/mapUSA.gif";function ft(){var p;P("Site Report");const{data:a,loading:o,error:i}=R({urls:tt}),{siteFull:e,siteSummary:r}=a||{},{width:s}=y(),c=s<560?"8px 8px 32px 8px":"24px 24px 32px 24px",m={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},n={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},f=(p=e==null?void 0:e.firstVistsLastSevenDays)!=null&&p.countryCount?n:m,u=o?"--":"(updated: "+T(e==null?void 0:e.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${e==null?void 0:e.metadata.timezone})`;return o?t.jsx(C,{}):i?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:c,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!e.firstVistsLastSevenDays.countryCount&&t.jsxs(D.Fragment,{children:[t.jsx("div",{style:m,children:"First Visits (Last Seven Days)"}),t.jsx(X,{data:e,tableWidth:"50%"})]}),t.jsxs("div",{style:f,children:["Site Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.85rem"},children:u})]}),t.jsx(q,{data:e}),t.jsx("div",{style:n,children:"Weekly Lock Views"}),t.jsx(F,{data:r}),t.jsx("div",{style:n,children:"Page Tracking"}),t.jsx(N,{data:e}),t.jsx("div",{style:n,children:"Popular Areas"}),t.jsx(K,{data:a}),!!e.popularCountries1&&t.jsxs(D.Fragment,{children:[t.jsx("div",{style:n,children:"Popular Countries"}),t.jsx(J,{data:e})]})]})}const tt={siteFull:V,siteSummary:M,popularAreas:H};export{ft as default};
