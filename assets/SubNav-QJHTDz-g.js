import{r as l,F,d as m,j as z,a8 as B,b as I,u as A}from"./index-CfbufueW.js";import{f as D,D as E}from"./DataContext-DTmXlrCt.js";import{r as j}from"./index-CpxP5rpl.js";import{b as P}from"./filterFields-BefiPEDN.js";import{f as U}from"./filterEntriesAdvanced-B_LinbMH.js";import{i as G}from"./stringUtils-BsiQ3MZ5.js";import{e as N}from"./entryName-CeUPQJRQ.js";import{F as W,I as $,S as _}from"./Select-p8YOBiDD.js";import{T as H,a as J}from"./ToggleButtonGroup-CMb6VMxM.js";function R(c,t,u=.3){const n=t&&c.find(o=>o.id===t);if(n)return[n];const i=/^\/(.*)\/$/.exec(t);return i&&G(i[1])?c.reduce((o,p)=>(N(p,"long").match(new RegExp(i[1],"i"))&&o.push(p),o),[]):t?D.go(j(t),c,{keys:["fuzzy"],threshold:-23e3}).map(o=>({...o.obj,score:o.score})).filter(o=>o.score>u):c.slice()}function ee({children:c,allEntries:t=[],profile:u}){const{filters:n,advancedFilterGroups:i}=l.useContext(F),{search:o,id:p,tab:a,name:x,sort:y,image:b,expandAll:S,...q}=n,[f,k]=l.useState(.3),C=l.useMemo(()=>t.map(s=>{var g,d;return{...s,originalEntry:s,makes:s.makeModels[0].make?s.makeModels.map(({make:e})=>e):s.makeModels[0].model,requestCount:(g=s.requestedBy)==null?void 0:g.length,danPoints:0,fuzzy:j(s.makeModels.map(({make:e,model:r})=>[e,r]).flat().filter(e=>e).concat([s.version,s.notes,s.belt]).join(",")),content:[(d=s.media)!=null&&d.some(e=>!e.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",m(s.dateRequested).isAfter(m().subtract(1,"days"))?"Requested Recently":void 0].flat().filter(e=>e)}}),[t]),v=l.useMemo(()=>R(C,o,f),[C,o,f]),h=l.useMemo(()=>{const s=U({advancedFilterGroups:i(),entries:C}),g=R(s,o,f),d=y??"dateRequested";return[...g].sort((e,r)=>d==="alphaAscending"?e.fuzzy.localeCompare(r.fuzzy):d==="alphaDescending"?r.fuzzy.localeCompare(e.fuzzy):d==="requestStatus"?P(e.requestStatus,r.requestStatus)||e.fuzzy.localeCompare(r.fuzzy):d==="requestCount"?r.requestCount-e.requestCount||e.fuzzy.localeCompare(r.fuzzy):d==="recentlyUpdated"?Math.floor(m(r.lastUpdated).valueOf()/3600)-Math.floor(m(e.lastUpdated).valueOf()/3600)||e.fuzzy.localeCompare(r.fuzzy):d==="dateRequested"?m(r.dateRequested).valueOf()-m(e.dateRequested).valueOf()||e.fuzzy.localeCompare(r.fuzzy):m(r.dateRequested).valueOf()-m(e.dateRequested).valueOf()||e.fuzzy.localeCompare(r.fuzzy))},[i,C,o,f,y]),M=l.useCallback(s=>t.find(g=>g.id===s),[t]),O=l.useMemo(()=>({allEntries:t,searchedEntries:v,visibleEntries:h,getEntryFromId:M,expandAll:S,profile:u,searchCutoff:f,setSearchCutoff:k}),[t,v,h,M,S,u,f]);return z.jsx(E.Provider,{value:O,children:c})}function te({form:c,name:t,optionsList:u,label:n=null,variant:i="outlined",size:o="small",width:p=350,changeHandler:a,multiple:x=!1,defaultValue:y,placeholder:b="Please Choose"}){const[S,q]=l.useState(!1),f=l.useCallback(()=>q(!1),[]),k=l.useCallback(()=>q(!0),[]),C=l.useCallback(v=>{a(v),!x&&f()},[a,f,x]);return z.jsxs(W,{id:`${t}FormControl`,size:o,color:"info",variant:i,style:{marginBottom:0,width:p||"auto"},children:[n&&z.jsx($,{style:{color:"#bbb"},children:n}),z.jsx(_,{id:`${t}Select`,value:c[t]||y,multiple:x,name:t,label:n,open:S,onClose:f,onOpen:k,onChange:C,placeholder:b,style:{fontWeight:400,color:"#eee",fontSize:"1.1rem"},children:u.map((v,h)=>z.jsx(B,{value:u[h],children:u[h]},h))})]})}function oe({options:c,defaultValue:t,onNavChange:u=()=>{}}){const n=I(),i=l.useCallback(a=>{u(),n(a==null?void 0:a.page)},[u,n]),{isMobile:o}=A(),p=o?{fontSize:"0.95rem",lineHeight:"1.1rem"}:{fontSize:"1.0rem",fontWeight:500};return z.jsx(H,{variant:"outlined",children:c.map(a=>z.jsx(J,{onClick:()=>i(a),style:{color:t===a.label?"#eee":"#aaa",backgroundColor:t===a.label?"#292929":"#111",padding:"6px 12px",borderColor:"#000",borderRadius:0,...p},value:a.label,children:a.label},a.label))})}export{ee as D,oe as S,te as a};
