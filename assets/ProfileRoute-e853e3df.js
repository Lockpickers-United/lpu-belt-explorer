import{ai as C,r as p,X as D,u as A,j as e,T as N,I as U,aj as z,R as y,a0 as P,a2 as R,b as E,a3 as G,B as O,a1 as V,J as Y,N as q,K as J,O as K}from"./index-530055b9.js";import{B as X,u as _,L as Q,D as Z,I as $,j as ee,S as te,f as ie,d as se,l as oe,g as ne,h as re,i as ae}from"./sortFields-7d026d79.js";import{C as de,E as le,b as ce,T as he,D as xe}from"./data-cb01976a.js";import{u as pe,L as me}from"./useData-281caf0b.js";import{u as v}from"./useWindowSize-65a8115a.js";import{C as ue}from"./CopyProfileLinkButton-d9b93014.js";import"./dayjs.min-fa980086.js";import{B as I}from"./nivo-bar.es-589e7e13.js";import{p as W}from"./chartDefaults-e88ecc0b.js";import"./ImageViewer-685b8efa.js";import"./Link-cc4219f9.js";import"./LinearProgress-7cfb403b.js";import"./Search-3368aa80.js";import"./InputLabel-3aa2fed0.js";import"./Sort-412a4954.js";import"./TextField-9921c0d5.js";import"./index-42e80c88.js";import"./index-03ac7ace.js";import"./LPU-c3fa7122.js";import"./nivo-legends.es-dcec68dd.js";function ge(){const{userId:i}=C(),{user:r}=p.useContext(D),l=A(),a=p.useCallback(()=>{l("/profile/edit")},[l]);return i!==(r==null?void 0:r.uid)?null:e.jsx(N,{title:"Edit Profile",arrow:!0,disableFocusListener:!0,children:e.jsx(U,{onClick:a,children:e.jsx(z,{})})})}const we="/assets/mycollection-8a0b4848.png";function fe(){const{user:i}=p.useContext(D),{userId:r}=C(),l=A(),{isMobile:a}=v(),s=a?{marginTop:-32,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:-32,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},n=r===(i==null?void 0:i.uid),d=n?e.jsxs(y.Fragment,{children:[e.jsxs("span",{children:["There are no locks in your collection.",e.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you own, picked, recorded, or wish to buy.',e.jsx("br",{})]}),e.jsx("img",{alt:"My Collection",src:we})]}):"There are no locks in this collection.",u=n?"Explore":"Go Home",t=p.useCallback(()=>{l("/locks")},[l]);return e.jsx(X,{alignContent:"center",children:e.jsxs(P,{style:s,children:[e.jsx(R,{children:e.jsx(E,{variant:"h6",align:"center",children:d})}),e.jsxs(G,{children:[e.jsx("div",{style:{width:"100%"}}),e.jsx(O,{variant:"outlined",color:"secondary",onClick:t,style:{whiteSpace:"nowrap"},children:u})]})]})})}function je(){const i={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return e.jsxs(P,{style:i,children:[e.jsx(V,{title:"Profile Not Found!"}),e.jsx(R,{children:e.jsx(E,{variant:"h6",align:"center",children:"This profile was not found."})})]})}function ve({lockCollection:i,userText:r,collectionBarHeight:l}){const a=i.own?i.own.length:0,s=i.picked?i.picked.length:0,n=i.recorded?i.recorded.length:0,d=i.wishlist?i.wishlist.length:0,t=a+s+n+d?{own:a,picked:s,recorded:n,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},o={own:14,picked:11,recorded:11,wishlist:8},h={own:250,picked:280,recorded:260,wishlist:100},c={own:Math.min(o.own,t.own),picked:Math.min(o.picked,t.picked),recorded:Math.min(o.recorded,t.recorded),wishlist:Math.min(o.wishlist,t.wishlist)},m={own:t.own>o.own?0:o.own-c.own,picked:t.picked>o.picked?0:o.picked-c.picked,recorded:t.recorded>o.recorded?0:o.recorded-c.recorded,wishlist:t.wishlist>o.wishlist?0:o.wishlist-c.wishlist},g={own:2,picked:2,recorded:2,wishlist:2},F={own:Math.max(t.own-(c.own+m.own+g.own),0),picked:Math.max(t.picked-(c.picked+m.picked+g.picked),0),recorded:Math.max(t.recorded-(c.recorded+m.recorded+g.recorded),0),wishlist:Math.max(t.wishlist-(c.wishlist+m.wishlist+g.wishlist),0)},B={own:Math.min(h.own-t.own,h.own-o.own-g.own),picked:Math.min(h.picked-t.picked,h.picked-o.picked-g.picked),recorded:Math.min(h.recorded-t.recorded,h.recorded-o.recorded-g.recorded),wishlist:Math.min(h.wishlist-t.wishlist,h.wishlist-o.wishlist-g.wishlist)},b=["own","picked","recorded","wishlist"],S=b.map((w,j)=>({row:b[j],"Average A":c[w],"Average B":m[w],Average:g[w],USER:F[w],"Top 10":B[w]})),{width:L}=v(),M=L<=560,T=l,k=M?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},x=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],f=i?[{title:r,color:"#3c90c5",width:"14px"}]:[];f.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const H=({items:w})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),w.map(j=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:j.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:j.width},children:j.title})]},j.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(y.Fragment,{children:[e.jsx("div",{style:{height:T},children:e.jsx(I,{data:S,keys:["Average A","Average B","Average","USER","Top 10"],theme:W,indexBy:"row",margin:k,padding:.2,valueScale:{type:"linear"},colors:x,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(H,{items:f})]})}function be({beltData:i}){const{width:r}=v(),l=r<=360,a=r<=560,s=l?190:a?200:175,n=a?{top:0,right:20,bottom:50,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],u=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:s,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(I,{data:i,margin:n,padding:.15,colors:t=>d[t.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:W,isInteractive:!1,enableLabel:!0,label:t=>t.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:t=>u[t.index%u.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function ke({profile:i,entries:r}){const{userId:l}=C(),{user:a}=p.useContext(D),s=l===(a==null?void 0:a.uid)?"You":"User",n=p.useMemo(()=>{const T=_.concat("Unranked"),k=r.map(({belt:x})=>x.includes("Black")?"Black":x).reduce((x,f)=>(x[f]||(x[f]=0),x[f]++,x),{});return T.map(x=>({id:x,label:x,count:k[x]||0,value:k[x]||0}))},[r]),{isMobile:d}=v(),u=d?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:t}=v(),o=t<=360,h=t<=395,c=t<=428,m=t<=560,B={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...m?{}:{display:"flex"}},b=m?"100%":"50%",S=m?"100%":"50%",L=o?200:m?210:180,M=170;return e.jsx(P,{style:u,sx:{paddingBottom:5},children:e.jsx(R,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:B,children:[e.jsx("div",{style:{width:b,verticalAlign:"top",height:L},children:e.jsx(ve,{lockCollection:i,userText:s,collectionBarHeight:170})}),e.jsx("div",{style:{width:S,height:M,marginTop:"0px"},children:e.jsx(be,{beltData:n})})]})})})})}function ye({profile:i}){const{compact:r,expanded:l,setExpanded:a}=p.useContext(Q),{visibleEntries:s=[]}=p.useContext(Z),n=p.useDeferredValue(l);return e.jsxs("div",{style:{margin:8,paddingBottom:32},children:[e.jsx($,{profile:i}),e.jsx(ke,{profile:i,entries:s}),r?e.jsx(de,{entries:s}):s.map(d=>e.jsx(le,{entry:d,expanded:d.id===n,onExpand:a},d.id))]})}function Ve(){const{userId:i}=C(),{getProfile:r}=p.useContext(Y),{isMobile:l}=v(),a=p.useCallback(async()=>{try{return await r(i)}catch(h){return console.error("Error loading profile.",h),null}},[r,i]),{data:s={},loading:n,error:d}=pe({loadFn:a}),u=p.useMemo(()=>{if(n||!s)return[];const h=new Set(ee.flatMap(({key:c})=>s[c]));return ce.filter(c=>h.has(c.id))},[s,n]),t=e.jsxs(y.Fragment,{children:[e.jsx(te,{label:"Collection"}),e.jsx(ie,{}),e.jsx(se,{sortValues:oe}),!l&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(he,{}),e.jsx(ge,{}),e.jsx(ue,{})]}),o=n?"Loading...":"Profile";return e.jsx(y.Fragment,{children:e.jsx(ne,{filterFields:re,children:e.jsx(xe,{allEntries:u,profile:s,children:e.jsxs(ae,{children:[e.jsx(q,{title:o,extras:t}),n&&e.jsx(me,{}),!n&&s&&!d&&e.jsx(ye,{profile:s}),!n&&s&&!d&&u.length===0&&e.jsx(fe,{}),!n&&(!s||d)&&e.jsx(je,{}),e.jsx(J,{}),e.jsx(K,{feature:"profile"})]})})})})}export{Ve as default};
