import{Y as $,Z as L,$ as O,a0 as V,ac as H,r,F as J,u as U,a5 as Y,br as S,j as e,R as Z,W as b,U as R,ai as G,T as K}from"./index-BqkzzdQy.js";import{S as y,I as w}from"./Search-B9U9uvCe.js";import{B as N}from"./Sort-B4kCZrNk.js";import{T as Q}from"./TextField-DNvsujpb.js";var i={},F;function X(){if(F)return i;F=1;var l=$();Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=l(L()),n=O();return i.default=(0,h.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),i}var ee=X();const re=V(ee);function ne({label:l,extraFilters:h=[],entryCount:n=0,keepOpen:p}){const[u]=H(),{addFilters:g,removeFilter:f,isFiltered:v}=r.useContext(J),[a,m]=r.useState(u.get("search")||""),{isMobile:c,width:I}=U(),B=I<=500,s=r.useRef();Y("s",()=>{var t;return(t=s==null?void 0:s.current)==null?void 0:t.focus()},{preventDefault:!0});const q=n>1?`Search ${n?n.toString()+" ":""}${l}`:"Search",W=r.useCallback(()=>{window.scrollTo({top:0}),m(""),f("search",""),s.current.focus()},[f]),E=r.useCallback(t=>{const{value:M}=t.target;m(M)},[]),[o]=S(a.replaceAll("	"," "),250);r.useEffect(()=>{o&&o!==u.get("search")?o?(window.scrollTo({top:0}),g([{key:"search",value:o},{key:"id",value:void 0},{key:"name",value:void 0},...h],!0)):(console.log("SearchBox: debounceText is empty"),g([{key:"search",value:o}],!0)):o||f("search","")},[o]);const[x]=S(a.replaceAll("	"," ").trim(),2e3),[C,j]=r.useState(null);r.useEffect(()=>{if(x){j(x);const t=setTimeout(()=>j(null),0);return()=>clearTimeout(t)}},[x]);const[d,T]=r.useState(!1),k=r.useCallback(()=>setTimeout(()=>T(!1),0),[]),z=r.useCallback(()=>{T(!0),setTimeout(()=>{s.current.focus(),s.current.select()},0)},[]);r.useEffect(()=>{const t=u.get("search");t!==a&&m(t||"")},[u]);const A=a?e.jsx(w,{position:"end",children:e.jsx(b,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{color:"inherit",onClick:W,edge:"end",size:"small",children:e.jsx(re,{})})})}):null,D=c?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},P=d&&c?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},_=a?"secondary":"inherit";return e.jsxs(Z.Fragment,{children:[!d&&c&&!p&&!v&&e.jsx(b,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{color:"inherit",onClick:z,children:e.jsx(N,{invisible:a.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(y,{})})})}),(d||!c||p||v)&&e.jsx(Q,{placeholder:B?l:q,InputProps:{inputProps:{ref:s},startAdornment:e.jsx(w,{position:"start",children:e.jsx(y,{color:_})}),endAdornment:A},variant:"standard",color:"secondary",onChange:E,onBlur:k,value:a,style:{...D,...P},fullWidth:!0}),e.jsx(G,{invisible:!0,open:d&&c,onClick:k}),C&&e.jsx(K,{feature:"search",search:C})]})}export{ne as S};
