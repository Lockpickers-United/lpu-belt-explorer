import{r as y,u as ie,j as t,aw as re,L as oe,U as de}from"./index-Dxa7y6sP.js";import{A as ce,a as ae}from"./ArrowDropDown-BbYzqsn3.js";import{c as le,d as pe,T as fe,a as O,b as A,e as ge}from"./TableRow-CAxWVmmX.js";const je=({tableData:o,tableWidth:S,tableHeight:L,linkFunction:P,totalsRow:C})=>{var E;const{rows:q,columns:c,defaultSort:a="name",sortable:D,wrap:G=!1}=o,[d,x]=y.useState(a),[j,T]=y.useState(!((E=o.columns.find(e=>e.id===a))!=null&&E.descending)),J=G?{whiteSpace:"inherit"}:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},K=y.useCallback(({rows:e,sort:n,defaultSort:s,ascending:h})=>{const b=(e||[]).slice(),R=b.find(i=>(i==null?void 0:i[n])!==void 0&&(i==null?void 0:i[n])!==null),ne=typeof(R==null?void 0:R[n])==="number",M=(i,l,p,m)=>{const v=i==null?void 0:i[p],w=l==null?void 0:l[p];if(m){const U=Number(v??0),F=Number(w??0);return U<F?-1:U>F?1:0}const u=(v??"").toString(),r=(w??"").toString();return u.localeCompare(r,void 0,{sensitivity:"base"})};return b.sort((i,l)=>{var u;const p=M(i,l,n,ne);if(p!==0)return h?p:-p;const m=b.find(r=>(r==null?void 0:r[s])!==void 0&&(r==null?void 0:r[s])!==null),v=typeof(m==null?void 0:m[s]),w=M(i,l,s,v==="number");return(u=c==null?void 0:c.find(r=>r.id===s))!=null&&u.descending?-w:w}),b},[c]),Q=d||(c!=null&&c.find(e=>e.id===a)?a:"name"),k=K({rows:q,sort:Q,defaultSort:a,ascending:j}),z=k.filter(e=>e[d]&&![0,"0"].includes(e[d])),W=k.filter(e=>!z.includes(e)),H=d&&d!==a?[...z,...W]:k;C&&H.push(C);const f={columns:c,data:H};f.columns.filter(e=>(e==null?void 0:e.id)&&(e==null?void 0:e.align));const[I,X]=y.useState(!1);o.columns.map(e=>(e==null?void 0:e.id)==="dateString"&&!I?X(!0):null),o.columns=I?o.columns.filter((e=>e.id!=="date")):o.columns;const N=y.useCallback(e=>{var n;if(e!==d){x(e);const s=!((n=o.columns.find(h=>h.id===e))!=null&&n.descending);T(s)}else T(!j)},[j,T,x,d,o]),Y=j?t.jsx(ce,{}):t.jsx(ae,{}),{width:g}=ie(),Z=g<=360,_=g<=395,$=g<=428,V=g<=560,ee=g<=820,B=Z?".8rem":_?".85rem":$?".9rem":".95rem",te={left:14,center:0,right:0},se={left:0,center:0,right:20};return t.jsxs("div",{style:{width:S},children:[t.jsx("div",{style:{fontSize:"1.3rem",margin:"10px"},children:o.title}),t.jsx(le,{id:"statsTable",style:{padding:"0px 0px 0px 4px",width:S,marginLeft:"auto",marginRight:"auto",height:L},component:re,elevation:2,children:t.jsxs(pe,{size:"small",stickyHeader:!!L,style:{width:S},children:[t.jsx(fe,{children:t.jsx(O,{style:{backgroundColor:"#111"},children:f.columns.map((e,n)=>t.jsx(A,{sx:{alignContent:"center",justifyItems:e.align,fontSize:B,lineHeight:"1.1rem",padding:"6px 2px",color:"#fff"},component:"th",scope:"row",children:D&&e.id!=="index"&&t.jsxs("div",{style:{display:"flex",marginLeft:n===0?10:20},children:[t.jsx(oe,{onClick:()=>N(e.id),style:{color:d===e.id?"#fff":"#bbb",alignContent:"center"},children:t.jsx("nobr",{children:e.name})}),d===e.id?t.jsx(de,{onClick:()=>N(e.id),style:{padding:0},children:Y}):t.jsx("div",{style:{width:24}})]})||t.jsx("div",{style:{display:"flex",marginLeft:n===0?10:20,marginRight:24},children:e.name})},n+1))})}),t.jsx(ge,{children:f.data.map((e,n)=>t.jsx(O,{index:n,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:f.columns.map((s,h)=>s.id!=="spacer"?t.jsx(A,{sx:{...J,textAlign:s.align,fontSize:B,padding:"8px 2px",border:0,color:"#eee"},component:"th",scope:"row",children:t.jsx("div",{style:{textAlign:s.align,marginLeft:te[s.align],marginRight:se[s.align],fontWeight:C&&n===f.data.length-1?700:"inherit"},children:P(s.id,e[s.id]?(e[s.displayField]||e[s.id]).toLocaleString():"")})},h+1):t.jsx(A,{style:{border:0}},n+1))},n))})]})})]})};export{je as D};
