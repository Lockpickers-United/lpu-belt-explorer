import{h as w,r as c,j as e,am as M,an as F,ao as P,ap as _,f as D,G as E,q as B,R as j,T as I,y as N,z as W,Z as S,H as g,I as y,aj as A,$,a0 as q,a1 as H,J as O,ak as z,al as U,a3 as G}from"./index-c337de7f.js";import{a as T}from"./InputLabel-14188f98.js";import{d as Y,B as J,a as K}from"./Sort-5b69086a.js";import{T as V,a as L,b as p,c as Z,d as Q,e as X}from"./TableRow-86be9ce8.js";import{L as ee,d as k,T as te,I as se}from"./Search-4fd04311.js";import{A as re}from"./Autocomplete-3fa18ca0.js";function ae(){const[a,t]=w(),s=a.get("sort"),o={border:0,padding:"4px 12px",backgroundColor:"#000"},l=c.useCallback(r=>()=>{r&&r!==s?a.set("sort",r):a.delete("sort"),t(a)},[a,t,s]);return e.jsx(V,{children:e.jsxs(L,{children:[e.jsx(p,{align:"center",style:o,children:"#"}),e.jsx(p,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),e.jsx(p,{align:"center",style:o,children:e.jsx(M,{color:s==="own"?"secondary":void 0,onClick:l("own"),style:{cursor:"pointer"}})}),e.jsx(p,{align:"center",style:o,children:e.jsx(F,{color:s==="picked"?"secondary":void 0,onClick:l("picked"),style:{cursor:"pointer"}})}),e.jsx(p,{align:"center",style:o,children:e.jsx(P,{color:s==="recorded"?"secondary":void 0,onClick:l("recorded"),style:{cursor:"pointer"}})}),e.jsx(p,{align:"center",style:o,children:e.jsx(_,{color:s==="wishlist"?"secondary":void 0,onClick:l("wishlist"),style:{cursor:"pointer"}})})]})})}function f({align:a="center",user:t,leader:s,value:o}){const{displayName:l,id:r}=s,d=(t==null?void 0:t.uid)===r,i=l?"#eee":"#bbb",u=d?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:i},n={color:i};return e.jsx(p,{align:a,sx:n,style:u,children:o})}function oe({index:a,leader:t,user:s,highlighted:o,scrollableRef:l}){const r=c.useRef(),[d,i]=c.useState(!1),u=o?{backgroundColor:"#333"}:{};return c.useEffect(()=>{o&&r&&!d&&setTimeout(()=>{i(!0),l.current.scrollTo({top:r.current.offsetTop-75,behavior:"smooth"})},0)},[o,l,d]),e.jsxs(L,{ref:r,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":o?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...u},children:[e.jsx(f,{leader:t,user:s,value:a+1}),e.jsx(f,{leader:t,user:s,value:t.displayName||"Anonymous",align:"left"}),e.jsx(f,{leader:t,user:s,value:t.own}),e.jsx(f,{leader:t,user:s,value:t.picked}),e.jsx(f,{leader:t,user:s,value:t.recorded}),e.jsx(f,{leader:t,user:s,value:t.wishlist})]},t.id)}function ne({data:a,loading:t}){const s=D(),{user:o}=c.useContext(E),l=c.useRef(),{highlightedUser:r,sort:d}=c.useMemo(()=>{const n=B.parse(s.search);return{highlightedUser:n.user,sort:le.includes(n.sort)?n.sort:void 0}},[s.search]),i=c.useMemo(()=>t?ce:a.data.sort((n,h)=>h[d]-n[d]),[d,t,a]),u=t?"####-##-## ##:##":Y(a.metadata.updatedDateTime).format("MM/DD/YY hh:mm");return e.jsxs(j.Fragment,{children:[t&&e.jsx(ee,{variant:"indeterminate",color:"secondary"}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(Z,{sx:{height:"78vh",backgroundColor:"#111"},id:"scrollable",ref:l,children:e.jsxs(Q,{stickyHeader:!0,children:[e.jsx(ae,{}),e.jsx(X,{children:i.map((n,h)=>{const m=!!r&&(r==="me"&&n.id===o.uid||r===n.displayName);return e.jsx(oe,{index:h,leader:n,user:o,scrollableRef:l,highlighted:m},n.id)})})]})}),e.jsxs(I,{variant:"caption",align:"right",component:"div",style:{width:"100%",marginTop:8},children:["Last updated: ",u," GMT"]})]})]})}const le=["own","picked","recorded","wishlist"],ce=[...Array(40)].map((a,t)=>({id:t,displayName:"........................",own:"---",picked:"---",recorded:"---",wishlist:"--"}));var v={},ie=W;Object.defineProperty(v,"__esModule",{value:!0});var R=v.default=void 0,de=ie(N()),C=e;R=v.default=(0,de.default)([(0,C.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,C.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function ue(){const a=S(),t=c.useCallback(()=>{a("/leaderboard?user=me")},[a]);return e.jsx(g,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:t,children:e.jsx(R,{})})})}function he({data:a}){const t={maxWidth:450},{isMobile:s}=T(),o=S(),l=c.useRef(),r=a.data.filter(x=>x.displayName).map(x=>x.displayName),d=c.useCallback((x,b)=>{b?r.includes(b)&&o(`/leaderboard?user=${b}`):o("/leaderboard")},[o,r]),[i,u]=c.useState(!1),n=c.useCallback(()=>{u(!0),setTimeout(()=>l.current.focus(),15)},[]),h=c.useCallback(()=>u(!1),[]),m=i&&s?{width:"auto",position:"fixed",left:60,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{};return e.jsxs(j.Fragment,{children:[!i&&s&&e.jsx(g,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:n,children:e.jsx(k,{})})}),(i||!s)&&e.jsx(re,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:{...t,...m},options:r,onChange:d,renderInput:x=>e.jsx(te,{...x,placeholder:"Search",variant:"standard",color:"secondary",inputRef:l,InputProps:{...x.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(k,{})})}})}),e.jsx(A,{invisible:!0,open:i&&s,onClick:h})]})}function xe(){const[a,t]=c.useState(null),s=!!a,o=c.useCallback(n=>t(n.currentTarget),[]),l=c.useCallback(()=>t(null),[]),[r,d]=w(),i=r.get("sort"),u=c.useCallback(n=>()=>{l(),n&&n!==i?r.set("sort",n):r.delete("sort"),d(r)},[r,d,i,l]);return e.jsxs(j.Fragment,{children:[e.jsx(g,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:o,children:e.jsx(J,{variant:"dot",color:"secondary",overlap:"circular",invisible:!i,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(K,{})})})}),e.jsx($,{anchorEl:a,open:s,onClose:l,children:pe.map(({label:n,value:h})=>e.jsx(q,{onClick:u(h),selected:i===h,children:n},n))})]})}const pe=[{label:"Default",value:void 0},{label:"Own",value:"own"},{label:"Picked",value:"picked"},{label:"Recorded",value:"recorded"},{label:"Wishlist",value:"wishlist"}];function ke(){const{isMobile:a}=T(),[t,s]=c.useState({data:[],metadata:{}}),[o,l]=c.useState(!0);c.useEffect(()=>{const d=async()=>{const u=await(await fetch(fe)).json();s(u),l(!1)};try{d()}catch(i){console.error("Error loading leaderboard data.",i),H("Error loading leaderboard data. Please reload the page.",{autoHideDuration:null,action:e.jsx(O,{color:"secondary",onClick:()=>window.location.reload(),children:"Refresh"})}),l(!1)}},[]);const r=e.jsxs(j.Fragment,{children:[e.jsx(he,{data:t}),e.jsx(xe,{}),e.jsx(ue,{}),!a&&e.jsx("div",{style:{flexGrow:1}})]});return e.jsxs(j.Fragment,{children:[e.jsx(z,{title:"Leaderboard",extras:r}),e.jsx(ne,{data:t,loading:o}),e.jsx(U,{}),e.jsx(G,{feature:"leaderboard"})]})}const fe="https://explore.lpubelts.com/leaderboard/leaderboardData.json";export{ke as default};
