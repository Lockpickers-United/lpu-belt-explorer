import{r as h,u as w,j as a,R as L,d as v}from"./index-CJYUHZGo.js";import{A as x}from"./AdminStatsTable-B6hxMnlx.js";import{a as k}from"./ReportsContext-CqrI4NhC.js";import{X as y}from"./nivo-bar-XSckRc9V.js";import{p as U,b as C}from"./adminChartDefaults-CBhS7ojG.js";import{y as j}from"./nivo-line-BHw9HQq8.js";const D=({cohort:t})=>{const{data:o,allDataLoaded:i}=h.useContext(k),{collectionsStatsCurrent:l}=o,S=h.useMemo(()=>i?{columns:[{name:"List Name",id:"list",align:"left"},{align:"center",id:"totalUsers",name:"Total Users"},{name:"List Users",align:"center",id:"userCount"},{id:"totalSaves",align:"center",name:"Total Saves"},{name:"% List Users",id:"percentListUsers",align:"center"},{id:"averageSaves",align:"center",name:"Average Items"}],data:W.map(c=>{const{userCount:p,totalSaves:u,averageSaves:g}=l[t].listStats[c.listName];return{totalUsers:l[t].totalProfiles,list:c.label,userCount:p,listUsers:p,totalSaves:u,percentListUsers:Math.round(100*p/l[t].listStats.allLists.userCount)+"%",averageSaves:Math.round(g)}})}:{},[i,t,l]),{width:n}=w(),s=n<=360,b=n<=395,d=n<=428,f=n<=560,m=n<=820,e=s?".8rem":b?".85rem":d?".9rem":".95rem";return a.jsx(L.Fragment,{children:a.jsx(x,{tableData:S,tableWidth:"100%",fontSize:e})})},W=[{listName:"allLists",label:"All Lists"},{listName:"own",label:"Own"},{listName:"picked",label:"Picked"},{listName:"recorded",label:"Recorded"},{listName:"recordedLocks",label:"Scorecard"},{listName:"wishlist",label:"Wishlist"},{listName:"safelocksOwn",label:"Safelocks Own"},{listName:"safelocksCracked",label:"Safelocks Cracked"},{listName:"safelocksWishlist",label:"Safelocks Wishlist"},{listName:"raffleWatchlist",label:"Raffle Watchlist"},{listName:"awards",label:"Awards"},{listName:"projects",label:"Projects"}],O=({cohort:t})=>{const{collectionSummary:o}=h.useContext(k),i=o(t).data.filter(s=>!["Raffle Watchlist","Awards","Projects"].includes(s.list)).map(s=>({id:s.list,label:s.list,count:s.averageSaves,value:s.averageSaves})),l=270,S={top:0,right:20,bottom:100,left:50},n=["#aeaeae","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac","#0364ac"];return a.jsx("div",{style:{height:l,width:"100%"},children:a.jsx(y,{data:i,margin:S,padding:.15,colors:s=>n[s.index%n.length],animate:!0,enableLabel:!0,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},axisBottom:{tickRotation:-45},enableGridY:!1,theme:U,isInteractive:!1})})},I=({cohort:t})=>{const{data:o}=h.useContext(k),{collectionStatsDaily:i}=o,l=i.dayData.map(u=>({x:u[t].date,y:u[t].listUsers||0})),n=[{id:"listUsers",data:t==="blackBeltOnly"?l.filter(u=>v(u.x)>v("2024-07-15")):l}],{width:s}=w(),b=s<=360,d=s<=395,f=s<=428,m=s<=560,e=s<=820,r=b||d?200:f?210:e?230:300,c=m?-45:0,p=m?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:45,left:50};return a.jsx("div",{style:{height:r},children:a.jsx(j,{theme:B,data:n,enableGridX:!1,enableGridY:!1,colors:["#007de2","#16325d"],lineWidth:3,margin:p,height:r,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.0f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b",tickSize:5,tickPadding:5,tickRotation:c,direction:"row",legendOffset:-12,tickValues:"every month"},legends:[{anchor:"bottom",itemTextColor:"#ddd",direction:"row",justify:!1,translateX:0,translateY:75,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},N={grid:{line:{stroke:"#333",strokeWidth:1}}},B={...U,...N},Y=({cohort:t})=>{const{data:o,collectionListLabels:i}=h.useContext(k),l=o.collectionsStatsCurrent[t].listSavesByBelt,n=["own","picked","wishlist","recordedLocks"].map(e=>({...l[e],list:i[e]})),{width:s}=w(),b=s<=560,d=270,f=b?1:2,m={top:0,right:20,bottom:30,left:50};return a.jsx("div",{style:{height:d},children:a.jsx(y,{data:n,keys:["White","Yellow","Orange","Green","Blue","Purple","Brown","Red","Black","Unranked"],indexBy:"list",groupMode:"grouped",margin:m,padding:.1,innerPadding:0,borderRadius:f,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},maxValue:"auto",theme:U,colors:C,animate:!0,enableGridY:!1,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,format:","},isInteractive:!0})})};function F({cohort:t}){const{data:o}=h.useContext(k),{collectionStatsDaily:i}=o,l=h.useMemo(()=>{const s=i.dayData.map(e=>e.date),d=v(s.reduce((e,r)=>r>e?r:e)).subtract(14,"day"),f=[{name:"Date",id:"date",align:"left"},{align:"center",id:"totalUsers",name:"Total Users"},{name:"List Users",id:"listUsers",align:"center"},{align:"center",id:"totalSaves",name:"Total Saves"},{name:"Owned Users",id:"ownUsers",align:"center"},{name:"Picked Users",id:"pickedUsers",align:"center"},{id:"scorecardUsers",align:"center",name:"Scorecard Users"},{id:"wishlistUsers",align:"center",name:"Wishlist Users"},{id:"newUsers",align:"center",name:"New Users"}],m=i.dayData.map(e=>{var r,c,p,u;return{date:e[t].date,totalUsers:e[t].totalProfiles,listUsers:e[t].listUsers,totalSaves:e[t].totalSaves,ownUsers:(r=e[t].listStats.find(g=>g.listName==="own"))==null?void 0:r.userCount,pickedUsers:(c=e[t].listStats.find(g=>g.listName==="picked"))==null?void 0:c.userCount,scorecardUsers:(p=e[t].listStats.find(g=>g.listName==="recordedLocks"))==null?void 0:p.userCount,wishlistUsers:(u=e[t].listStats.find(g=>g.listName==="wishlist"))==null?void 0:u.userCount,newUsers:e[t].newListUsers}});return{title:"",columns:f,data:m.filter(e=>v(e.date).isAfter(d))}},[t,i]);return a.jsx("div",{style:{width:"100%"},children:a.jsx(x,{tableData:l,tableWidth:"100%",fontSize:".83rem"})})}const G=({cohort:t})=>{const{data:o}=h.useContext(k),i=[{name:"#",id:"rank",align:"center"},{name:"Lock",id:"name",align:"left"},{name:"Saves",id:"saveCount",align:"center"}],l={title:"Own",columns:i,data:o.collectionsStatsCurrent[t].listStats.own.topItems},S={title:"Picked",columns:i,data:o.collectionsStatsCurrent[t].listStats.picked.topItems},n={title:"Wishlist",columns:i,data:o.collectionsStatsCurrent[t].listStats.wishlist.topItems},s={title:"Scorecard",columns:i,data:o.collectionsStatsCurrent[t].listStats.recordedLocks.topItems.slice(0,25)},{width:b}=w(),d=b<=560,e={...{width:"100%",padding:"0px",marginBottom:12,alignContent:"top",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...d?{}:{display:"flex"}},r="400px",c=".83rem";return a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:e,children:[a.jsx(x,{tableData:l,tableWidth:r,fontSize:c,wrap:!0}),a.jsx("div",{style:{width:"75px"},children:" "}),a.jsx(x,{tableData:S,tableWidth:r,fontSize:c,wrap:!0})]}),a.jsxs("div",{style:e,children:[a.jsx(x,{tableData:n,tableWidth:r,fontSize:c,wrap:!0}),a.jsx("div",{style:{width:"75px"},children:" "}),a.jsx(x,{tableData:s,tableWidth:r,fontSize:c,wrap:!0})]})]})};export{I as C,G as T,O as a,D as b,Y as c,F as d};
