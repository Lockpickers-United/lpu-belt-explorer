import{r as c,F as k,j as v}from"./index-C9FQgRYG.js";import{a as F,f as P}from"./filterEntriesAdvanced-1DzYbXcr.js";import{D as z}from"./DataContext-igU8EDIS.js";import{r as j}from"./index-TtCAOyTV.js";import{R as D}from"./RaffleContext-DbqdJpUd.js";function K({children:x,allEntries:r=[]}){const{summary:u}=c.useContext(D),{filters:y,advancedFilterGroups:l}=c.useContext(k),{search:i,id:N,tab:R,name:T,sort:o,image:g,preview:M,expandAll:m,...A}=y,f=.3,a=c.useCallback(s=>{const n=i&&s.find(t=>t.id===i);return n?[n]:i?F.go(j(i),s,{keys:I,threshold:-23e3}).map(t=>({...t.obj,score:t.score})).filter(t=>t.score>f):s},[i,f]),p=c.useMemo(()=>a(r),[r,a]),d=c.useMemo(()=>{if(!u||Object.keys(u).length===0||!r)return[];const s=P({advancedFilterGroups:l(),entries:r}).sort((t,e)=>t.sortPotNumber-e.sortPotNumber),n=a([...s]);return o?n.sort((t,e)=>o==="potName"?t.title.localeCompare(e.title):o==="contributedBy"?t.contributedBy[0].localeCompare(e.contributedBy[0])||t.title.localeCompare(e.title):o==="tickets"?e.totalTickets-t.totalTickets||t.title.localeCompare(e.title):o==="donors"?e.uniqueDonorCount-t.uniqueDonorCount||e.totalTickets-t.totalTickets||t.title.localeCompare(e.title):parseInt(t[o])-parseInt(e[o])||t.title.localeCompare(e.title)):n.sort((t,e)=>e.score-t.score||parseInt(t.sortPotNumber)-parseInt(e.sortPotNumber)||t.title.localeCompare(e.title))},[l,r,a,o,u]),C=c.useCallback(s=>r.find(n=>n.id===s),[r]),h=c.useMemo(()=>({allEntries:r,searchedEntries:p,visibleEntries:d,getPotFromId:C,expandAll:m}),[r,p,d,C,m]);return v.jsx(z.Provider,{value:h,children:x})}const I=["fuzzy"];export{K as R};
