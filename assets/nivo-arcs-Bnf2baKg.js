import{b as be,s as ve,d as X,t as _,Y as xe,K as V,c as le,u as de,e as ee,g as me,S as oe,L as z,F as ke,M as Ce,n as Le,N as Pe}from"./nivo-legends-B-meS6a9.js";import{j as q,r as S}from"./index-ksoWie7U.js";import{bP as ge,bQ as D,bR as w,c as B,bS as pe,bT as T,bN as Te,bU as U,bV as se,bW as he,bX as P,bY as Re,bZ as Oe,b_ as je}from"./isEqual-BvSDFxg0.js";function Ee(e){return e.innerRadius}function Ie(e){return e.outerRadius}function We(e){return e.startAngle}function Se(e){return e.endAngle}function we(e){return e&&e.padAngle}function Ye(e,t,n,r,s,l,i,a){var g=n-e,d=r-t,u=i-s,h=a-l,c=h*g-u*d;if(!(c*c<T))return c=(u*(t-l)-h*(e-s))/c,[e+c*g,t+c*d]}function $(e,t,n,r,s,l,i){var a=e-n,g=t-r,d=(i?l:-l)/U(a*a+g*g),u=d*g,h=-d*a,c=e+u,p=t+h,m=n+u,v=r+h,k=(c+m)/2,x=(p+v)/2,b=m-c,o=v-p,A=b*b+o*o,R=s-l,L=c*v-m*p,O=(o<0?-1:1)*U(Oe(0,R*R*A-L*L)),j=(L*o-b*O)/A,E=(-L*b-o*O)/A,y=(L*o+b*O)/A,I=(-L*b+o*O)/A,W=j-k,f=E-x,M=y-k,N=I-x;return W*W+f*f>M*M+N*N&&(j=y,E=I),{cx:j,cy:E,x01:-u,y01:-h,x11:j*(s/R-1),y11:E*(s/R-1)}}function qe(){var e=Ee,t=Ie,n=B(0),r=null,s=We,l=Se,i=we,a=null,g=be(d);function d(){var u,h,c=+e.apply(this,arguments),p=+t.apply(this,arguments),m=s.apply(this,arguments)-pe,v=l.apply(this,arguments)-pe,k=he(v-m),x=v>m;if(a||(a=u=g()),p<c&&(h=p,p=c,c=h),!(p>T))a.moveTo(0,0);else if(k>Te-T)a.moveTo(p*D(m),p*w(m)),a.arc(0,0,p,m,v,!x),c>T&&(a.moveTo(c*D(v),c*w(v)),a.arc(0,0,c,v,m,x));else{var b=m,o=v,A=m,R=v,L=k,O=k,j=i.apply(this,arguments)/2,E=j>T&&(r?+r.apply(this,arguments):U(c*c+p*p)),y=se(he(p-c)/2,+n.apply(this,arguments)),I=y,W=y,f,M;if(E>T){var N=Re(E/c*w(j)),F=Re(E/p*w(j));(L-=N*2)>T?(N*=x?1:-1,A+=N,R-=N):(L=0,A=R=(m+v)/2),(O-=F*2)>T?(F*=x?1:-1,b+=F,o-=F):(O=0,b=o=(m+v)/2)}var K=p*D(b),Q=p*w(b),G=c*D(R),H=c*w(R);if(y>T){var J=p*D(o),Z=p*w(o),te=c*D(A),ne=c*w(A),Y;if(k<ge)if(Y=Ye(K,Q,te,ne,J,Z,G,H)){var re=K-Y[0],ae=Q-Y[1],ie=J-Y[0],ue=Z-Y[1],ce=1/w(je((re*ie+ae*ue)/(U(re*re+ae*ae)*U(ie*ie+ue*ue)))/2),fe=U(Y[0]*Y[0]+Y[1]*Y[1]);I=se(y,(c-fe)/(ce-1)),W=se(y,(p-fe)/(ce+1))}else I=W=0}O>T?W>T?(f=$(te,ne,K,Q,p,W,x),M=$(J,Z,G,H,p,W,x),a.moveTo(f.cx+f.x01,f.cy+f.y01),W<y?a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,p,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),!x),a.arc(M.cx,M.cy,W,P(M.y11,M.x11),P(M.y01,M.x01),!x))):(a.moveTo(K,Q),a.arc(0,0,p,b,o,!x)):a.moveTo(K,Q),!(c>T)||!(L>T)?a.lineTo(G,H):I>T?(f=$(G,H,J,Z,c,-I,x),M=$(K,Q,te,ne,c,-I,x),a.lineTo(f.cx+f.x01,f.cy+f.y01),I<y?a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,c,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),x),a.arc(M.cx,M.cy,I,P(M.y11,M.x11),P(M.y01,M.x01),!x))):a.arc(0,0,c,R,A,x)}if(a.closePath(),u)return a=null,u+""||null}return d.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2-ge/2;return[D(h)*u,w(h)*u]},d.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:B(+u),d):e},d.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:B(+u),d):t},d.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:B(+u),d):n},d.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:B(+u),d):r},d.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:B(+u),d):s},d.endAngle=function(u){return arguments.length?(l=typeof u=="function"?u:B(+u),d):l},d.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:B(+u),d):i},d.context=function(u){return arguments.length?(a=u??null,d):a},d}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(null,arguments)}var Be={pointerEvents:"none"},Ne=function(e){var t=e.label,n=e.style,r=X();return q.jsx(ee.g,{transform:n.transform,opacity:n.progress,style:Be,children:q.jsx(me,{textAnchor:"middle",dominantBaseline:"central",style:C({},r.labels.text,{fill:n.textColor}),children:t})})},Ae=function(e){var t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t},De=function(e,t){return e.filter((function(n){return Math.abs(xe(n.arc.endAngle-n.arc.startAngle))>=t}))},Ke={startAngle:{enter:function(e){return C({},e,{endAngle:e.startAngle})},update:function(e){return e},leave:function(e){return C({},e,{startAngle:e.endAngle})}},middleAngle:{enter:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return C({},e,{startAngle:t,endAngle:t})},update:function(e){return e},leave:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return C({},e,{startAngle:t,endAngle:t})}},endAngle:{enter:function(e){return C({},e,{startAngle:e.endAngle})},update:function(e){return e},leave:function(e){return C({},e,{endAngle:e.startAngle})}},innerRadius:{enter:function(e){return C({},e,{outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return C({},e,{innerRadius:e.outerRadius})}},centerRadius:{enter:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return C({},e,{innerRadius:t,outerRadius:t})},update:function(e){return e},leave:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return C({},e,{innerRadius:t,outerRadius:t})}},outerRadius:{enter:function(e){return C({},e,{innerRadius:e.outerRadius})},update:function(e){return e},leave:function(e){return C({},e,{outerRadius:e.innerRadius})}},pushIn:{enter:function(e){return C({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return C({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})}},pushOut:{enter:function(e){return C({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})},update:function(e){return e},leave:function(e){return C({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})}}},ye=function(e,t){return S.useMemo((function(){var n=Ke[e];return{enter:function(r){return C({progress:0},n.enter(r.arc),t?t.enter(r):{})},update:function(r){return C({progress:1},n.update(r.arc),t?t.update(r):{})},leave:function(r){return C({progress:0},n.leave(r.arc),t?t.leave(r):{})}}}),[e,t])},Qe=function(e,t){var n=Ce(e)-Math.PI/2,r=e.innerRadius+(e.outerRadius-e.innerRadius)*t;return V(n,r)},Ue=function(e){return function(t,n,r,s){return z([t,n,r,s],(function(l,i,a,g){var d=Qe({startAngle:l,endAngle:i,innerRadius:a,outerRadius:g},e);return"translate("+d.x+","+d.y+")"}))}},Ve=function(e,t,n,r){t===void 0&&(t=.5),n===void 0&&(n="innerRadius");var s=le(),l=s.animate,i=s.config,a=ye(n,r);return{transition:de(e,{keys:function(g){return g.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:i,immediate:!l}),interpolate:Ue(t)}},it=function(e){var t=e.center,n=e.data,r=e.transitionMode,s=e.label,l=e.radiusOffset,i=e.skipAngle,a=e.skipRadius,g=e.textColor,d=e.component,u=d===void 0?Ne:d,h=ve(s),c=X(),p=_(g,c),m=S.useMemo((function(){return n.filter((function(o){var A=Math.abs(xe(o.arc.endAngle-o.arc.startAngle)),R=Math.abs(o.arc.outerRadius-o.arc.innerRadius);return A>=i&&R>=a}))}),[n,i,a]),v=Ve(m,l,r),k=v.transition,x=v.interpolate,b=u;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:k((function(o,A){return S.createElement(b,{key:A.id,datum:A,label:h(A),style:{progress:o.progress,transform:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius),textColor:p(A)}})}))})},Xe=function(e){var t=e.label,n=e.style,r=X();return q.jsxs(ee.g,{opacity:n.opacity,children:[q.jsx(ee.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),q.jsx(me,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:C({},r.labels.text,{fill:n.textColor}),children:t})]})},ze=function(e){var t=Ae(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2);return t<Math.PI/2||t>1.5*Math.PI?"start":"end"},Me=function(e,t,n,r){var s,l,i=Ae(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2),a=V(i,e.outerRadius+t),g=V(i,e.outerRadius+t+n);return i<Math.PI/2||i>1.5*Math.PI?(s="after",l={x:g.x+r,y:g.y}):(s="before",l={x:g.x-r,y:g.y}),{side:s,points:[a,g,l]}},Fe=ke().x((function(e){return e.x})).y((function(e){return e.y})),Ge=function(e,t,n,r,s,l,i){return z([e,t,n,r,s,l,i],(function(a,g,d,u,h,c,p){var m=Me({startAngle:a,endAngle:g,outerRadius:u},h,c,p).points;return Fe(m)}))},He=function(e,t,n,r){return z([e,t,n,r],(function(s,l,i,a){return ze({startAngle:s,endAngle:l})}))},Je=function(e,t,n,r,s,l,i,a){return z([e,t,n,r,s,l,i,a],(function(g,d,u,h,c,p,m,v){var k=Me({startAngle:g,endAngle:d,outerRadius:h},c,p,m),x=k.points,b=k.side,o=x[2];return b==="before"?o.x-=v:o.x+=v,"translate("+o.x+","+o.y+")"}))},Ze=function(e){var t=e.data,n=e.offset,r=n===void 0?0:n,s=e.diagonalLength,l=e.straightLength,i=e.skipAngle,a=i===void 0?0:i,g=e.textOffset,d=e.linkColor,u=e.textColor,h=le(),c=h.animate,p=h.config,m=X(),v=_(d,m),k=_(u,m),x=(function(o,A){return S.useMemo((function(){return De(o,A)}),[o,A])})(t,a),b=(function(o){var A=o.offset,R=o.diagonalLength,L=o.straightLength,O=o.textOffset,j=o.getLinkColor,E=o.getTextColor;return S.useMemo((function(){return{enter:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}},update:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:R,straightLength:L,textOffset:O,linkColor:j(y),textColor:E(y),opacity:1}},leave:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:A,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}}}}),[R,L,O,j,E,A])})({offset:r,diagonalLength:s,straightLength:l,textOffset:g,getLinkColor:v,getTextColor:k});return{transition:de(x,{keys:function(o){return o.id},initial:b.update,from:b.enter,enter:b.update,update:b.update,leave:b.leave,config:p,immediate:!c}),interpolateLink:Ge,interpolateTextAnchor:He,interpolateTextPosition:Je}},ut=function(e){var t=e.center,n=e.data,r=e.label,s=e.skipAngle,l=e.offset,i=e.diagonalLength,a=e.straightLength,g=e.strokeWidth,d=e.textOffset,u=e.textColor,h=e.linkColor,c=e.component,p=c===void 0?Xe:c,m=ve(r),v=Ze({data:n,skipAngle:s,offset:l,diagonalLength:i,straightLength:a,textOffset:d,linkColor:h,textColor:u}),k=v.transition,x=v.interpolateLink,b=v.interpolateTextAnchor,o=v.interpolateTextPosition,A=p;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:k((function(R,L){return S.createElement(A,{key:L.id,datum:L,label:m(L),style:C({},R,{thickness:g,path:x(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength),textAnchor:b(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius),textPosition:o(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength,R.textOffset)})})}))})},$e=function(e){var t=e.datum,n=e.style,r=e.onClick,s=e.onMouseEnter,l=e.onMouseMove,i=e.onMouseLeave,a=S.useCallback((function(h){return r==null?void 0:r(t,h)}),[r,t]),g=S.useCallback((function(h){return s==null?void 0:s(t,h)}),[s,t]),d=S.useCallback((function(h){return l==null?void 0:l(t,h)}),[l,t]),u=S.useCallback((function(h){return i==null?void 0:i(t,h)}),[i,t]);return q.jsx(ee.path,{d:n.path,opacity:n.opacity,fill:t.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?a:void 0,onMouseEnter:s?g:void 0,onMouseMove:l?d:void 0,onMouseLeave:i?u:void 0,"data-testid":"arc."+t.id})},_e=function(e,t,n,r,s){return z([e,t,n,r],(function(l,i,a,g){return s({startAngle:l,endAngle:i,innerRadius:Math.max(0,a),outerRadius:Math.max(0,g)})}))},et=function(e,t,n){t===void 0&&(t="innerRadius");var r=le(),s=r.animate,l=r.config,i=ye(t,n);return{transition:de(e,{keys:function(a){return a.id},initial:i.update,from:i.enter,enter:i.update,update:i.update,leave:i.leave,config:l,immediate:!s}),interpolate:_e}},ot=function(e){var t=e.center,n=e.data,r=e.arcGenerator,s=e.borderWidth,l=e.borderColor,i=e.onClick,a=e.onMouseEnter,g=e.onMouseMove,d=e.onMouseLeave,u=e.transitionMode,h=e.component,c=h===void 0?$e:h,p=X(),m=_(l,p),v=et(n,u,{enter:function(o){return{opacity:0,color:o.color,borderColor:m(o)}},update:function(o){return{opacity:1,color:o.color,borderColor:m(o)}},leave:function(o){return{opacity:0,color:o.color,borderColor:m(o)}}}),k=v.transition,x=v.interpolate,b=c;return q.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:k((function(o,A){return S.createElement(b,{key:A.id,datum:A,style:C({},o,{borderWidth:s,path:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius,r)}),onClick:i,onMouseEnter:a,onMouseMove:g,onMouseLeave:d})}))})},st=function(e,t,n,r,s,l){l===void 0&&(l=!0);var i=[],a=V(oe(r),n);i.push([a.x,a.y]);var g=V(oe(s),n);i.push([g.x,g.y]);for(var d=Math.round(Math.min(r,s));d<=Math.round(Math.max(r,s));d++)if(d%90==0){var u=V(oe(d),n);i.push([u.x,u.y])}i=i.map((function(k){var x=k[0],b=k[1];return[e+x,t+b]})),l&&i.push([e,t]);var h=i.map((function(k){return k[0]})),c=i.map((function(k){return k[1]})),p=Math.min.apply(Math,h),m=Math.max.apply(Math,h),v=Math.min.apply(Math,c);return{points:i,x:p,y:v,width:m-p,height:Math.max.apply(Math,c)-v}},tt=function(e,t,n,r,s,l){var i=Le(s,l,e,t);return i<n&&i>r},lt=function(e,t,n,r,s,l,i){if(tt(e,t,n,r,l,i)){var a=Pe(l,i,e,t);return s.find((function(g){var d=g.startAngle,u=g.endAngle;return a>=d&&a<u}))}},dt=function(e){var t=e===void 0?{}:e,n=t.cornerRadius,r=n===void 0?0:n,s=t.padAngle,l=s===void 0?0:s;return S.useMemo((function(){return qe().innerRadius((function(i){return i.innerRadius})).outerRadius((function(i){return i.outerRadius})).cornerRadius(r).padAngle(l)}),[r,l])};export{qe as T,ut as Y,lt as d,dt as f,it as q,st as s,ot as u};
