import{O as N,P as W,j as t,r as u,J as z,I as V,u as j,R as M,ar as E,A as F,$ as _,a2 as q,a3 as O,D as U,as as $,a0 as G,e as Y,N as J,h as K,T as Q}from"./index-0e5d852e.js";import{l as X}from"./filterFields-24a3011a.js";import{l as Z}from"./sortFields-b1bde6f9.js";import{F as tt,S as et}from"./SortButton-eeddc4fb.js";import{D as it}from"./LockDataProvider-afa35cd6.js";import{L as R,a as ot}from"./LockListContext-91d31ab6.js";import{S as rt}from"./SearchBox-d28a2d82.js";import{L as st}from"./LoadingDisplay-92cbbc54.js";import{u as at}from"./useData-64453704.js";import{N as nt}from"./NoProfileData-a872dd29.js";import{P as dt}from"./ProfileNotFound-dbbcaa23.js";import{C as lt,E as ct,a as pt}from"./ExportButton-2799a564.js";import{I as mt}from"./InlineFilterDisplay-605b381e.js";import{D as ht}from"./DataContext-6819dd3c.js";import"./index-8cbc5f7a.js";import{B as T}from"./nivo-bar.es-0fc64750.js";import{p as I}from"./chartDefaults-ca889cb2.js";import{P as xt}from"./ProfileHeader-ecc3f29f.js";import"./rankingRequestData-d3ef79e5.js";import"./FilterAlt-646ee22c.js";import"./Select-75cb90f7.js";import"./Box-5a6452d0.js";import"./Chip-1edc8d87.js";import"./Sort-8ec51cde.js";import"./collectionStatsById-8def94ca.js";import"./entryName-0b1de7e6.js";import"./Search-5899d69d.js";import"./TextField-a1ba118d.js";import"./LPU-c3fa7122.js";import"./LinearProgress-3a399759.js";import"./mycollection-0ec86312.js";import"./BeltStripe-467268b6.js";import"./EvidenceForm-def440b6.js";import"./Launch-f5e163c8.js";import"./PhotoCamera-c28a0d1c.js";import"./LockEntrySearchBox-6fde3d2f.js";import"./BeltStripeMini-d6232089.js";import"./Autocomplete-6b1cc45c.js";import"./index-ee72a1a9.js";import"./DialogContent-d458468a.js";import"./ListItem-ca57bd88.js";import"./Dialog-a0069463.js";import"./VideocamOutlined-7d380ec5.js";import"./FormGroup-19633ea1.js";import"./Checkbox-e85fa755.js";import"./LoadingDisplay-84a22a96.js";import"./CircularProgress-46031c21.js";import"./LoadingDisplaySmall-b3ab2d5d.js";import"./ExpandMore-900dfc2f.js";import"./FieldValue-5becb6b8.js";import"./BeltIcon-7f406651.js";import"./CopyLinkToEntryButton-881d0ea9.js";import"./Link-e8de616d.js";import"./CopyEntryTextButton-3558cf57.js";import"./ContentCopy-f53481c7.js";import"./LockImageGallery-8bcf44e0.js";import"./ImageGallery-cee8ef26.js";import"./ImageViewer-b6eb670d.js";import"./ImageListItem-41895f6a.js";import"./AccordionSummary-7f1940a9.js";import"./Collapse-2b699f9e.js";import"./index-ab16488a.js";import"./index-e9a54f4e.js";import"./AccordionActions-64430f32.js";import"./download-7dc4636b.js";import"./List-a3df9a75.js";import"./glossary-db95354d.js";import"./Link-6a77f6e4.js";import"./nivo-axes.es-b18e47ac.js";import"./nivo-legends.es-6d5df382.js";import"./CopyProfileLinkButton-6a697ef2.js";import"./ToggleButtonGroup-2319f83f.js";var P={},ut=W;Object.defineProperty(P,"__esModule",{value:!0});var H=P.default=void 0,gt=ut(N()),wt=t;H=P.default=(0,gt.default)((0,wt.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");function ft(){const{compact:i,setCompact:n,setExpanded:p}=u.useContext(R),d=u.useCallback(()=>{n(!i),p(null)},[i,n,p]);return t.jsx(z,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:t.jsx(V,{onClick:d,children:t.jsx(H,{color:i?"secondary":"inherit"})})})}function vt({lockCollection:i,userText:n,collectionBarHeight:p}){const d=i.own?i.own.length:0,g=i.picked?i.picked.length:0,s=i.recordedLocks?i.recordedLocks.length:0,a=i.wishlist?i.wishlist.length:0,e=d+g+s+a?{own:d,picked:g,recorded:s,wishlist:a}:{own:0,picked:0,recorded:0,wishlist:0},r={own:14,picked:11,recorded:11,wishlist:8},x={own:250,picked:280,recorded:260,wishlist:100},h={own:Math.min(r.own,e.own),picked:Math.min(r.picked,e.picked),recorded:Math.min(r.recorded,e.recorded),wishlist:Math.min(r.wishlist,e.wishlist)},o={own:e.own>r.own?0:r.own-h.own,picked:e.picked>r.picked?0:r.picked-h.picked,recorded:e.recorded>r.recorded?0:r.recorded-h.recorded,wishlist:e.wishlist>r.wishlist?0:r.wishlist-h.wishlist},c={own:2,picked:2,recorded:2,wishlist:2},A={own:Math.max(e.own-(h.own+o.own+c.own),0),picked:Math.max(e.picked-(h.picked+o.picked+c.picked),0),recorded:Math.max(e.recorded-(h.recorded+o.recorded+c.recorded),0),wishlist:Math.max(e.wishlist-(h.wishlist+o.wishlist+c.wishlist),0)},y={own:Math.min(x.own-e.own,x.own-r.own-c.own),picked:Math.min(x.picked-e.picked,x.picked-r.picked-c.picked),recorded:Math.min(x.recorded-e.recorded,x.recorded-r.recorded-c.recorded),wishlist:Math.min(x.wishlist-e.wishlist,x.wishlist-r.wishlist-c.wishlist)},k=["own","picked","recorded","wishlist"],S=k.map((w,f)=>({row:k[f],"Average A":h[w],"Average B":o[w],Average:c[w],USER:A[w],"Top 10":y[w]})),{width:B}=j(),C=B<=560,L=p,D=C?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},b=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],l=i?[{title:n,color:"#3c90c5",width:"14px"}]:[];l.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const v=({items:w})=>t.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[t.jsx("div",{style:{width:"100%"}}),w.map(f=>t.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[t.jsx("div",{style:{backgroundColor:f.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),t.jsx("div",{style:{textAlign:"left",width:f.width},children:f.title})]},f.title)),t.jsx("div",{style:{width:"100%"}})]});return t.jsxs(M.Fragment,{children:[t.jsx("div",{style:{height:L},children:t.jsx(T,{data:S,keys:["Average A","Average B","Average","USER","Top 10"],theme:I,indexBy:"row",margin:D,padding:.2,valueScale:{type:"linear"},colors:b,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),t.jsx(v,{items:l})]})}function jt({beltData:i}){const{width:n}=j(),p=n<=360,d=n<=560,g=175,s=d?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},a=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],m=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return t.jsxs("div",{style:{height:g,padding:"0px 8px 0px 8px",width:"100%"},children:[t.jsx(T,{data:i,margin:s,padding:.15,colors:e=>a[e.index%a.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:I,isInteractive:!1,enableLabel:!0,label:e=>e.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:e=>m[e.index%m.length]}),t.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function kt({profile:i,entries:n}){const{userId:p}=E(),{user:d}=u.useContext(F),g=p===(d==null?void 0:d.uid)?"You":"User",s=u.useMemo(()=>{const D=_.concat("Unranked"),b=n.map(({belt:l})=>l.includes("Black")?"Black":l).reduce((l,v)=>(l[v]||(l[v]=0),l[v]++,l),{});return D.map(l=>({id:l,label:l,count:b[l]||0,value:b[l]||0}))},[n]),{isMobile:a}=j(),m=a?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:e}=j(),r=e<=360,x=e<=395,h=e<=428,o=e<=560,y={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...o?{}:{display:"flex"}},k=o?"100%":"50%",S=o?"100%":"50%",B=r?200:o?210:180,C=o?160:170,L=r?150:170;return t.jsx(q,{style:m,sx:{paddingBottom:5},children:t.jsx(O,{style:{paddingTop:0,paddingLeft:8},children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:y,children:[t.jsx("div",{style:{width:k,verticalAlign:"top",height:B},children:t.jsx(vt,{lockCollection:i,userText:g,collectionBarHeight:C})}),t.jsx("div",{style:{width:S,height:L,marginTop:"0px"},children:t.jsx(jt,{beltData:s})})]})})})})}function bt({profile:i,owner:n}){const{compact:p}=u.useContext(R),[d,g]=u.useState(!1),{visibleEntries:s=[]}=u.useContext(ht),a=u.useDeferredValue(d);return t.jsx(M.Fragment,{children:t.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[t.jsx(xt,{profile:i,page:"collection",owner:n}),t.jsx(mt,{profile:i,collectionType:"locks"}),t.jsx(kt,{profile:i,entries:s}),p?t.jsx(lt,{entries:s}):s.map(m=>t.jsx(ct,{entry:m,expanded:m.id===a,onExpand:g},m.id))]})})}function Ve(){const{user:i}=u.useContext(F),{userId:n}=E(),{getProfile:p}=u.useContext(U),{isMobile:d}=j(),g=u.useCallback(async()=>{try{const o=await p(n);if(o){const c=o.displayName?o.displayName.toLowerCase().endsWith("s")?`${o.displayName}'`:`${o.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${c} Profile`}return o}catch(o){return console.error("Error loading profile.",o),null}},[p,n]),{data:s={},loading:a,error:m}=at({loadFn:g}),e=u.useMemo(()=>{if(a||!s)return[];const o=new Set($.locks.getCollected(s));return G.filter(c=>o.has(c.id))},[s,a]),r=t.jsxs(M.Fragment,{children:[t.jsx(rt,{label:"Collection"}),t.jsx(tt,{}),t.jsx(et,{sortValues:Z}),!d&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(ft,{})]}),x=a?"Loading...":"Profile",h=t.jsx("div",{style:{margin:"30px 0px"},children:t.jsx(pt,{text:!0})});return t.jsx(Y,{filterFields:X,children:t.jsx(it,{allEntries:e,profile:s,children:t.jsxs(ot,{children:[t.jsx(J,{title:x,extras:r}),a&&t.jsx(st,{}),!a&&s&&!m&&t.jsx(bt,{profile:s,owner:i&&i.uid===n}),!a&&s&&!m&&e.length===0&&t.jsx(nt,{}),!a&&(!s||m)&&t.jsx(dt,{}),t.jsx(K,{before:h}),t.jsx(Q,{feature:"profile"})]})})})}export{Ve as default};
