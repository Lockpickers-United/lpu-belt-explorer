import{u as S,j as t,d as D,R as L,r as W}from"./index-80de3ed1.js";import{L as C}from"./LoadingDisplay-47a1d19d.js";import{u as A}from"./useData-760b7197.js";import{u as M}from"./usePageTitle-8b0c45ed.js";import{s as P}from"./dataUrls-e672e57d.js";import{L as R}from"./LockViewsLine-12b3bcd4.js";import{A as j}from"./AdminStatsTable-30b944e7.js";import{P as H}from"./nivo-line.es-f90f207e.js";import{p as z}from"./adminChartDefaults-e02caa29.js";import{C as F}from"./ChoiceButtonGroup-1467787e.js";import{c as E,d as B,T as I,a as T,b as v,e as Y}from"./TableRow-b9779957.js";import"./LPU-c3fa7122.js";import"./LinearProgress-0ef8e41a.js";import"./useDocumentTitle-4a728d1c.js";import"./chartDefaults-9fc07b21.js";import"./nivo-legends.es-04f7239c.js";import"./index-5e053ec6.js";import"./ToggleButtonGroup-ed842d59.js";const G=({data:r})=>{const{firstVistsLastSevenDays:a}=r,{width:s}=S(),i=s<=360,p=s<=395,o=s<=428,m=s<=560,l=s<=820,c=i?".8rem":p?".85rem":o?".9rem":".95rem",h=400;return t.jsx(j,{tableData:a,tableWidth:h,fontSize:c})},O=({data:r})=>{const{pageTracking:a}=r,s=Object.keys(a.data[13]).sort((u,d)=>a.data[13][d]-a.data[13][u]).filter(u=>u!=="total"&&u!=="date");s.unshift("date"),s.push("total");const p={columns:s.reduce((u,d)=>{const f=a.columns.find(e=>e.id===d);return u.push(f),u},[]),data:a.data},{width:o}=S(),m=o<=360,l=o<=395,c=o<=428,h=o<=560,w=o<=820,g=m?".8rem":l?".85rem":c?".9rem":".95rem",y="100%";return t.jsx(j,{tableData:p,tableWidth:y,fontSize:g})},U=({lineData:r})=>{const a=[r.traffic28days.data],s=[],i=new Map,p=new Map,o=new Map;a.forEach(d=>{const f=[],e=[],n=[];for(let x=0;x<d.length;x++){const b=new Map;b.x=d[x].date,b.y=d[x].visitors,f.push(b);const k=new Map;k.x=d[x].date,k.y=d[x].visits,e.push(k);const V=new Map;V.x=d[x].date,V.y=d[x].lockViews,n.push(V)}i.id="Visitors",i.data=f,p.id="Visits",p.data=e,o.id="Lock Views",o.data=n,s.push(p),s.push(i),s.push(o)});const{width:m}=S(),l=m<=360,c=m<=395,h=m<=428,w=m<=560,g=m<=820,y=l||c?200:h?210:g?230:350,u=w?{top:10,right:20,bottom:50,left:50}:{top:10,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:y,width:"100%"},children:t.jsx(H,{theme:z,data:s,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:u,height:y,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.2f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#444",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},X=({fullData:r})=>{const a=r.traffic28days,s=28;function i(d){return D().subtract(s+1,"day").isBefore(D(d.date))}const p={columns:a.columns.filter(d=>d.id!=="weekend").filter(d=>d.id!=="visitors"),data:a.data.filter(i)},{width:o}=S(),m=o<=360,l=o<=395,c=o<=428,h=o<=560,w=o<=820,g=m?".8rem":l?".85rem":c||h||w?".9rem":".85rem",y=170,u=340;return t.jsx(j,{tableData:p,tableWidth:y,tableHeight:u,fontSize:g})};function $({data:r}){const{width:a}=S(),s=a<=560,o={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...s?{}:{display:"flex"}};return t.jsx(L.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:o,children:[t.jsx(U,{lineData:r}),t.jsx(X,{fullData:r})]})})})}const q=({data:r})=>{const a=r.popularCountries1,s=r.popularCountries2,{width:i}=S(),p=i<=560,l={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...p?{}:{display:"flex"}},c="400px",h=".95rem";return t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:l,children:[t.jsx(j,{tableData:a,tableWidth:c,fontSize:h,wrap:!0}),t.jsx("div",{style:{width:"75px"},children:"Â "}),t.jsx(j,{tableData:s,tableWidth:c,fontSize:h,wrap:!0})]})})};function J({data:r}){const{width:a}=S(),s=a<500,i=a<700,p=i?280:400,o=i?260:375,m=s?320:450,l={border:0,padding:"4px 8px 0px 0px",fontWeight:400},w={...{width:"100%",padding:"8px 16px",marginTop:16,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}},g=W.useMemo(()=>{const{popularCountries:f,popularEuropeanCountries:e,popularStates:n}=r.popularAreas;return[{label:"Worldwide",data:f,map:K},{label:"Europe",data:e,map:Q},{label:"US States",data:n,map:Z}]},[r]),[y,u]=W.useState(g[0]),d=W.useCallback(f=>u(f),[]);return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(F,{options:g,onChange:d}),t.jsxs("div",{style:w,children:[t.jsx("div",{style:{backgroundColor:"#000",border:"1px solid #666",padding:12,align:"center",margin:"10px 0px 0px 0px",width:200,height:p,marginLeft:"auto",marginRight:"auto"},children:t.jsx(E,{id:"areaList",sx:{height:o,backgroundColor:"#111",margin:"auto"},children:t.jsxs(B,{stickyHeader:!0,children:[t.jsx(I,{children:t.jsxs(T,{children:[t.jsx(v,{style:{padding:"4px 10px 4px 12px",fontWeight:700,textAlign:"right"},children:"#"}),t.jsx(v,{style:{padding:"4px 0px",fontWeight:700},children:"Area"})]})}),t.jsx(Y,{children:y.data.data.map((f,e)=>t.jsxs(T,{index:e,children:[t.jsx(v,{style:l,sx:{textAlign:"right",padding:"0px",width:34},children:e+1},e+1),t.jsx(v,{style:l,children:f.area},f.area)]},e))})]})})}),t.jsx("div",{style:{flexGrow:1,width:m},children:t.jsx("img",{id:"mapImage",alt:"map",src:y.map,width:m})})]})]})}const K="https://explore.lpubelts.com/maps/mapWorld.gif",Q="https://explore.lpubelts.com/maps/mapEurope.gif",Z="https://explore.lpubelts.com/maps/mapUSA.gif",_=({data:r})=>{const a=[360,375,384,393,412,414,428,430,1024,1440,1536,1920,2560,3440],s=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(x=>{const b=x+"";n.width===x&&(e[b]=e[b]?e[b]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),i=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(x=>{const b=x+"";n.width<=x&&(e[b]=e[b]?e[b]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),o=Object.keys(s).sort((e,n)=>e-n).filter(e=>e!=="total"&&e!=="359-").map(e=>({lockViews:s[e],width:e,percentViews:Math.floor(s[e]/s.total*100)+"%",cumulativeViews:Math.floor(i[e]/s.total*100)+"%"}));o.unshift({lockViews:s["359-"],width:"359-",percentViews:Math.floor(s["359-"]/s.total*100)+"%",cumulativeViews:Math.floor(i["359-"]/s.total*100)+"%"}),o.push({lockViews:s.total,width:"total",percentViews:"100%",cumulativeViews:"100%"});const m={columns:[...r.screenWidths.columns,{name:"Percent Views",align:"left",id:"percentViews"},{name:"Cumulative Views",align:"left",id:"cumulativeViews"}],data:o},{width:l}=S(),c=l<=360,h=l<=395,w=l<=428,g=l<=560,y=l<=820,u=c?".8rem":h?".85rem":w||g||y?".9rem":".85rem",d=375,f=650;return t.jsx("div",{children:t.jsx(j,{tableData:m,tableWidth:d,tableHeight:f,fontSize:u})})};function wt(){var g;M("Site Report");const{data:r,loading:a,error:s}=A({urls:N}),{siteFullNew:i}=r||{},{width:p}=S(),m=p<560?"8px 8px 32px 8px":"24px 24px 32px 24px",l={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},c={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},h=(g=i==null?void 0:i.firstVistsLastSevenDays)!=null&&g.countryCount?c:l,w=a?"--":"(updated: "+D(i==null?void 0:i.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${i==null?void 0:i.metadata.timezone})`;return a?t.jsx(C,{}):s?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:m,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!i.firstVistsLastSevenDays.countryCount&&t.jsxs(L.Fragment,{children:[t.jsx("div",{style:l,children:"First Visits (Last Seven Days)"}),t.jsx(G,{data:i,tableWidth:"50%"})]}),t.jsxs("div",{style:h,children:["Site Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.85rem"},children:w})]}),t.jsx($,{data:i}),t.jsx("div",{style:c,children:"Weekly Lock Views"}),t.jsx(R,{data:i}),t.jsx("div",{style:c,children:"Page Tracking"}),t.jsx(O,{data:i}),t.jsx("div",{style:c,children:"Popular Areas"}),t.jsx(J,{data:i}),!!i.popularCountries1&&t.jsxs(L.Fragment,{children:[t.jsx("div",{style:c,children:"Popular Countries"}),t.jsx(q,{data:i})]}),t.jsx("div",{style:c,children:"Lock Views by Screen Width"}),t.jsx(_,{data:i})]})}const N={siteFullNew:P};export{wt as default};
