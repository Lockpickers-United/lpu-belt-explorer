import{r as a,j as y}from"./index-c03c3f11.js";import{F as I,f as v,D as A}from"./filterFields-03c21c4d.js";import{r as x}from"./index-51394cb7.js";function k({children:d,allEntries:o}){const{filters:f}=a.useContext(I),{search:i,id:j,tab:N,name:P,sort:r,image:g,preview:h,single:F,...l}=f,u=a.useMemo(()=>{const c=Object.keys(l).map(e=>{const t=l[e];return Array.isArray(t)?t.map(n=>({key:e,value:n})):{key:e,value:t}}).flat(),s=o.filter(e=>c.every(({key:t,value:n})=>Array.isArray(e[t])?e[t].includes(n):e[t]===n)).sort((e,t)=>e.potNumber-t.potNumber),m=i?v.go(x(i),s,{keys:z,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):s;return r?m.sort((e,t)=>r==="potName"?e.title.localeCompare(t.title):r==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):r==="tickets"?parseInt(t.tickets)-parseInt(e.tickets)||e.title.localeCompare(t.title):r==="donors"?parseInt(t.donors)-parseInt(e.donors)||e.title.localeCompare(t.title):r==="dateAdded"?parseInt(t.dateAdded)-parseInt(e.dateAdded)||e.title.localeCompare(t.title):parseInt(e[r])-parseInt(t[r])||e.title.localeCompare(t.title)):m.sort((e,t)=>parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title))},[o,l,i,r]),p=a.useCallback(c=>o.find(s=>s.id===c),[o]),C=a.useMemo(()=>({allEntries:o,visibleEntries:u,getPotFromId:p}),[o,u,p]);return y.jsx(A.Provider,{value:C,children:d})}const z=["fuzzy"];export{k as R};
