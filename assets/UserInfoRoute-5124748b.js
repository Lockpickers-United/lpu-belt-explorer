import{r as h,A as Z,D as _,S as tt,u as st,ah as et,az as rt,j as t,R as dt,e as nt,d as it,N as ct,h as lt}from"./index-31104e8d.js";import{c as at}from"./dataUrls-46e31bfb.js";import{a as ot,b as ht}from"./ScorecardListContext-2747aacd.js";import{s as xt}from"./filterFields-32e74623.js";import{s as jt}from"./sortFields-b1bde6f9.js";import{S as mt,F as yt}from"./SortButton-49a695bb.js";import{L as ut}from"./LoadingDisplay-11400977.js";import{S as gt}from"./SearchBox-8edcb184.js";import{u as T}from"./useData-fa8086e9.js";import{L as kt,A as pt}from"./LocalizationProvider-7d7249ca.js";import"./DataContext-043af698.js";import"./index-8faba5ef.js";import"./rankingRequestData-d3ef79e5.js";import"./FilterAlt-13946ed6.js";import"./Select-b10db872.js";import"./Box-d4b39223.js";import"./Chip-e80b60be.js";import"./Sort-64dcde58.js";import"./LockListContext-42778496.js";import"./entryName-b36f9190.js";import"./CircularProgress-516da324.js";import"./Search-fa86c546.js";import"./TextField-d061792e.js";function Vt({mostPopular:$}){var F,N,U,I,R,W,E,O,z,q;const{user:n,userClaims:V}=h.useContext(Z),{getProfile:m,getPickerActivity:y}=h.useContext(_),{scoredActivity:u,bbCount:g,danPoints:k,eligibleDan:p,nextDanPoints:b,nextDanLocks:C,uniqueLocks:L,maxBelt:S}=h.useContext(tt),{isMobile:G}=st(),l=n==null?void 0:n.uid,K=h.useCallback(async()=>{try{const d=await m(l);if(d){const c=d.displayName&&!d.privacyAnonymous?d.displayName.toLowerCase().endsWith("s")?`${d.displayName}'`:`${d.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${c} Scorecard`}if((n==null?void 0:n.uid)!==l){const c=await y(l);return{profile:d,...et(c)}}else return{profile:d,scoredActivity:u,bbCount:g,danPoints:k,eligibleDan:p,nextDanPoints:b,nextDanLocks:C,uniqueLocks:L,maxBelt:S}}catch(d){return console.error("Error loading profile and activity.",d),null}},[m,l,n,y,u,g,k,p,b,C,L,S]),{data:r={},loading:i,error:x}=T({loadFn:K}),s=r?r.profile:{},M=r?r.scoredActivity:[],D=r?r.bbCount:0,v=r?r.danPoints:0,A=r?r.eligibleDan:0,w=r?r.nextDanPoints:0,B=r?r.nextDanLocks:0,P=r?r.uniqueLocks:0,f=r?r.scoredActivity.filter(d=>d.collectionDB==="awards").map(d=>rt[d.matchId]).filter(d=>d.awardType==="belt").sort((d,c)=>d.rank-c.rank):[],a=r?f[f.length-1]:{},o=T({url:at}),H=o.data?o.data.blackBeltOnly.listStats.recordedLocks.topItems:[],J=o.data?o.data.allUsers.listStats.recordedLocks.topItems:[],Q=window.location.hash.search(/locks=mostPopular/)<1&&!$?t.jsxs(dt.Fragment,{children:[t.jsx(gt,{label:"Scorecard",extraFilters:[{key:"tab",value:"search"}]}),t.jsx(mt,{sortValues:jt}),t.jsx(yt,{extraFilters:[{key:"tab",value:"search"}]}),!G&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]}):null,X=void 0,Y=i?"Loading...":"Profile";if(i||x)return null;const j={fontWeight:700,backgroundColor:"#333",padding:2,textAlign:"left",marginTop:10},e={fontWeight:700,paddingRight:10};return t.jsx(nt,{filterFields:xt,children:t.jsx(ot,{cardActivity:M,cardBBCount:D,cardDanPoints:v,cardEligibleDan:A,cardNextDanPoints:w,cardNextDanLocks:B,cardUniqueLocks:P,cardMaxBelt:a,popularLocks:J,popularLocksBB:H,children:t.jsx(ht,{children:t.jsxs(kt,{adapterLocale:it.locale(),dateAdapter:pt,children:[t.jsx(ct,{title:Y,extras:Q}),i&&t.jsx(ut,{}),!i&&r&&!x&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem"},children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{style:j,children:[t.jsx("th",{children:"Parameter"}),t.jsx("th",{children:"Value"})]})}),t.jsxs("tbody",{children:[t.jsx("tr",{style:{height:10}}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"display name"}),t.jsx("td",{children:s==null?void 0:s.displayName})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user id"}),t.jsx("td",{children:n.uid})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user claims"}),t.jsx("td",{children:V.join(", ")})]}),(s==null?void 0:s.admin)&&t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"profile.admin"}),t.jsx("td",{children:"true"})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:j,colSpan:2,children:"SCORECARD"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"blackBeltAwarded"}),t.jsx("td",{children:s!=null&&s.blackBeltAwardedAt?"true":""})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardMaxBelt"}),t.jsx("td",{children:a==null?void 0:a.name})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardBBCount"}),t.jsx("td",{children:D})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardDanPoints"}),t.jsx("td",{children:v})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardEligibleDan"}),t.jsx("td",{children:A})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanPoints"}),t.jsx("td",{children:w})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanLocks"}),t.jsx("td",{children:B})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardUniqueLocks"}),t.jsx("td",{children:P})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"projects"}),t.jsx("td",{children:(F=s==null?void 0:s.projects)==null?void 0:F.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"tabClaimed"}),t.jsx("td",{children:s==null?void 0:s.tabClaimed})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"redditUsername"}),t.jsx("td",{children:s==null?void 0:s.redditUsername})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"discordUsername"}),t.jsx("td",{children:s==null?void 0:s.discordUsername})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:j,colSpan:2,children:"LOCK COLLECTION"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"any"}),t.jsx("td",{children:(N=s==null?void 0:s.any)==null?void 0:N.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"own"}),t.jsx("td",{children:(U=s==null?void 0:s.own)==null?void 0:U.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"picked"}),t.jsx("td",{children:(I=s==null?void 0:s.picked)==null?void 0:I.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"recorded"}),t.jsx("td",{children:(R=s==null?void 0:s.recorded)==null?void 0:R.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"wishlist"}),t.jsx("td",{children:(W=s==null?void 0:s.wishlist)==null?void 0:W.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksAny"}),t.jsx("td",{children:(E=s==null?void 0:s.safelocksAny)==null?void 0:E.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksCracked"}),t.jsx("td",{children:(O=s==null?void 0:s.safelocksCracked)==null?void 0:O.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksOwn"}),t.jsx("td",{children:(z=s==null?void 0:s.safelocksOwn)==null?void 0:z.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksWishlist"}),t.jsx("td",{children:(q=s==null?void 0:s.safelocksWishlist)==null?void 0:q.length})]})]})]})}),!i&&(!r||x)&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem",textalign:"center"},children:"no user"}),t.jsx(lt,{before:X})]})})})})}export{Vt as default};
