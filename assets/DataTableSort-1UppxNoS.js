import{r as a,F as ae,u as le,j as t,ax as fe,L as pe,U as ge}from"./index-DtVjyG7o.js";import{A as he,a as me}from"./ArrowDropDown-BqHgcjg8.js";import{c as we,d as ye,T as je,a as D,b as A,e as ue}from"./TableRow-DLctSiAB.js";const Te=({tableData:d,tableWidth:C,tableHeight:L,linkFunction:G,linkColumnId:J,totalsRow:T,largeFontSize:k="0.95rem"})=>{var U;const{rows:K,columns:c,defaultSort:l="name",sortable:Q,wrap:W=!1}=d,{filters:X,addFilter:E}=a.useContext(ae),{sort:j}=X,[r,F]=a.useState(j||l),[u,H]=a.useState(!((U=d.columns.find(e=>e.id===l))!=null&&U.descending));a.useEffect(()=>{r!==j&&F(j)},[r,j]);const Y=W?{whiteSpace:"inherit"}:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},Z=a.useCallback(({rows:e,sort:n,defaultSort:s,ascending:m})=>{const b=(e||[]).slice(),R=b.find(i=>(i==null?void 0:i[n])!==void 0&&(i==null?void 0:i[n])!==null),ce=typeof(R==null?void 0:R[n])==="number",O=(i,f,p,w)=>{const v=i==null?void 0:i[p],y=f==null?void 0:f[p];if(w){const P=Number(v??0),q=Number(y??0);return P<q?-1:P>q?1:0}const S=(v??"").toString(),o=(y??"").toString();return S.localeCompare(o,void 0,{sensitivity:"base"})};return b.sort((i,f)=>{var S;const p=O(i,f,n,ce);if(p!==0)return m?p:-p;const w=b.find(o=>(o==null?void 0:o[s])!==void 0&&(o==null?void 0:o[s])!==null),v=typeof(w==null?void 0:w[s]),y=O(i,f,s,v==="number");return(S=c==null?void 0:c.find(o=>o.id===s))!=null&&S.descending?-y:y}),b},[c]),_=r||(c!=null&&c.find(e=>e.id===l)?l:"name"),x=Z({rows:K,sort:_,defaultSort:l,ascending:u}),N=x.filter(e=>e[r]&&![0,"0"].includes(e[r])),$=x.filter(e=>!N.includes(e)),z=r&&r!==l?[...N,...$]:x;T&&z.push(T);const g={columns:c,data:z};g.columns.filter(e=>(e==null?void 0:e.id)&&(e==null?void 0:e.align));const[B,V]=a.useState(!1);d.columns.map(e=>(e==null?void 0:e.id)==="dateString"&&!B?V(!0):null),d.columns=B?d.columns.filter((e=>e.id!=="date")):d.columns;const I=a.useCallback(e=>{var n;if(e!==r){F(e),E("sort",e,!0);const s=!((n=d.columns.find(m=>m.id===e))!=null&&n.descending);H(s)}else H(!u)},[E,u,r,d.columns]),ee=u?t.jsx(he,{}):t.jsx(me,{}),{width:h}=le(),te=h<=360,se=h<=395,ne=h<=428,ie=h<=560,re=h<=820,M=te?".8rem":se?".85rem":ne?".9rem":k,oe={left:14,center:0,right:0},de={left:0,center:0,right:20};return t.jsxs("div",{style:{width:C},children:[t.jsx("div",{style:{fontSize:"1.3rem",margin:"10px"},children:d.title}),t.jsx(we,{id:"statsTable",style:{padding:"0px 0px 0px 4px",width:C,marginLeft:"auto",marginRight:"auto",height:L},component:fe,elevation:2,children:t.jsxs(ye,{size:"small",stickyHeader:!!L,style:{width:C},children:[t.jsx(je,{children:t.jsx(D,{style:{backgroundColor:"#111"},children:g.columns.map((e,n)=>t.jsx(A,{sx:{alignContent:"center",justifyItems:e.align,fontSize:M,lineHeight:"1.1rem",padding:"6px 2px",color:"#fff"},component:"th",scope:"row",children:Q&&e.id!=="index"&&t.jsxs("div",{style:{display:"flex",marginLeft:n===0?10:20},children:[t.jsx(pe,{onClick:()=>I(e.id),style:{color:r===e.id?"#fff":"#bbb",alignContent:"center"},children:t.jsx("nobr",{children:e.name})}),r===e.id?t.jsx(ge,{onClick:()=>I(e.id),style:{padding:0},children:ee}):t.jsx("div",{style:{width:24}})]})||t.jsx("div",{style:{display:"flex",marginLeft:n===0?10:20,marginRight:24},children:e.name})},n+1))})}),t.jsx(ue,{children:g.data.map((e,n)=>t.jsx(D,{index:n,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:g.columns.map((s,m)=>s.id!=="spacer"?t.jsx(A,{sx:{...Y,textAlign:s.align,fontSize:M,padding:"8px 2px",border:0,color:"#eee"},component:"th",scope:"row",children:t.jsx("div",{style:{textAlign:s.align,marginLeft:oe[s.align],marginRight:de[s.align],fontWeight:T&&n===g.data.length-1?700:"inherit"},children:G(s.id,e[s.id]?(e[s.displayField]||e[s.id]).toLocaleString():"",e[J])})},m+1):t.jsx(A,{style:{border:0}},n+1))},n))})]})})]})};export{Te as D};
