import{r as t,A as R,Z as T,F as y,X as A,j as e,R as F,J as B,I as L,bw as E,U as b,M as w,Y as z,B as D,ab as I,ac as v,an as O}from"./index-fe79be23.js";import{F as W,C as M,d as H}from"./FilterAlt-f3ceaa62.js";import{B as S,d as V}from"./Sort-dd039a94.js";import{B as Y}from"./Box-ef821727.js";import{L as _}from"./LockListContext-03039c2a.js";function $({onFiltersChanged:c,extraFilters:d=[],text:s}){const{isLoggedIn:h}=t.useContext(R),{beta:m}=t.useContext(T),{filterCount:C,addFilters:r,filterFields:p}=t.useContext(y),[a,i]=t.useState(!1),u=t.useCallback(()=>i(!a),[a]);A("f",u);const x=t.useCallback(()=>i(!0),[]),l=t.useCallback(()=>i(!1),[]),g=t.useCallback((o,k)=>{r([{key:o,value:k},{key:"id",value:void 0},{key:"name",value:void 0},...d],!0),c&&c()},[r,c,d]),j=s?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"FILTER"}):e.jsx(H,{}),f=s?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"},n=s?"dot":null;return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(L,{color:"inherit",onClick:x,children:e.jsx(S,{variant:n,badgeContent:C,color:"secondary",overlap:"circular",anchorOrigin:f,children:j})})}),e.jsxs(E,{anchor:"right",open:a,onClose:l,children:[e.jsx(b,{variant:"dense",onClick:l,children:e.jsx(w,{variant:"h6",children:"Filters"})}),e.jsx(Y,{margin:1,children:e.jsx(z,{direction:"column",style:{minWidth:250},children:p.filter(o=>(!o.beta||m)&&(!o.userBased||h)).map((o,k)=>e.jsx(W,{...o,onFilter:g},k))})}),e.jsxs(b,{variant:"dense",children:[e.jsx(M,{forceText:!0,style:{marginRight:8}}),e.jsx(D,{variant:"outlined",color:"inherit",onClick:l,children:"Done"})]})]})]})}function q({sortValues:c,text:d}){const[s,h]=t.useState(null),m=!!s,C=t.useCallback(n=>h(n.currentTarget),[]),r=t.useCallback(()=>h(null),[]),{filters:p,addFilter:a}=t.useContext(y),{sort:i}=p,{compact:u,setCompact:x}=t.useContext(_),l=t.useCallback(n=>()=>{r(),x(n)},[r,x]),g=t.useCallback(n=>()=>{r(),setTimeout(()=>a("sort",n,!0),0)},[a,r]),j=d?e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,marginRight:10},children:"VIEW"}):e.jsx(V,{}),f=d?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"right"};return e.jsxs(F.Fragment,{children:[e.jsx(B,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(L,{color:"inherit",onClick:C,children:e.jsx(S,{variant:"dot",color:"secondary",overlap:"circular",invisible:!i,anchorOrigin:f,children:j})})}),e.jsxs(I,{anchorEl:s,open:m,onClose:r,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),c.map(({label:n,value:o})=>e.jsx(v,{onClick:g(o),selected:i===o,children:n},n)),e.jsx(O,{}),e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(v,{onClick:l(!1),selected:!u,children:"Normal"}),e.jsx(v,{onClick:l(!0),selected:u,children:"Compact"})]})]})}export{$ as F,q as S};
