import{r as h,A as V,D as G,S as K,u as M,ah as H,az as J,j as t,R as Q,e as X,d as Y,N as Z,h as _}from"./index-577068e1.js";import{c as tt}from"./dataUrls-46e31bfb.js";import{a as st,b as et}from"./ScorecardListContext-c177d103.js";import{s as rt}from"./filterFields-d7524117.js";import{s as dt}from"./sortFields-b1bde6f9.js";import{S as nt,F as it}from"./SortButton-91e25b21.js";import{L as lt}from"./LoadingDisplay-1f19eb03.js";import{S as ct}from"./SearchBox-8b21cc99.js";import{u as N}from"./useData-b5c6c3b2.js";import{L as at,A as ot}from"./LocalizationProvider-84bd3d82.js";import"./DataContext-0f3d5c6d.js";import"./index-d7344063.js";import"./rankingRequestData-d3ef79e5.js";import"./FilterAlt-a567d72f.js";import"./Select-7534469f.js";import"./Box-1de52f6e.js";import"./Chip-6ae3c400.js";import"./Sort-6b9ee4d6.js";import"./LockListContext-01d5d0da.js";import"./entryName-16d0d41c.js";import"./CircularProgress-8433650d.js";import"./Search-7d01ed3f.js";import"./TextField-97d85516.js";function It({mostPopular:U}){var F;const{user:n,userClaims:I}=h.useContext(V),{getProfile:m,getPickerActivity:y}=h.useContext(G),{scoredActivity:u,bbCount:p,danPoints:g,eligibleDan:k,nextDanPoints:f,nextDanLocks:b,uniqueLocks:C,maxBelt:L}=h.useContext(K),{isMobile:R}=M(),c=n==null?void 0:n.uid,W=h.useCallback(async()=>{try{const d=await m(c);if(d){const l=d.displayName&&!d.privacyAnonymous?d.displayName.toLowerCase().endsWith("s")?`${d.displayName}'`:`${d.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${l} Scorecard`}if((n==null?void 0:n.uid)!==c){const l=await y(c);return{profile:d,...H(l)}}else return{profile:d,scoredActivity:u,bbCount:p,danPoints:g,eligibleDan:k,nextDanPoints:f,nextDanLocks:b,uniqueLocks:C,maxBelt:L}}catch(d){return console.error("Error loading profile and activity.",d),null}},[m,c,n,y,u,p,g,k,f,b,C,L]),{data:r={},loading:i,error:x}=N({loadFn:W}),s=r?r.profile:{},E=r?r.scoredActivity:[],S=r?r.bbCount:0,D=r?r.danPoints:0,v=r?r.eligibleDan:0,A=r?r.nextDanPoints:0,w=r?r.nextDanLocks:0,B=r?r.uniqueLocks:0,P=r?r.scoredActivity.filter(d=>d.collectionDB==="awards").map(d=>J[d.matchId]).filter(d=>d.awardType==="belt").sort((d,l)=>d.rank-l.rank):[],a=r?P[P.length-1]:{},o=N({url:tt}),O=o.data?o.data.blackBeltOnly.listStats.recordedLocks.topItems:[],z=o.data?o.data.allUsers.listStats.recordedLocks.topItems:[],q=window.location.hash.search(/locks=mostPopular/)<1&&!U?t.jsxs(Q.Fragment,{children:[t.jsx(ct,{label:"Scorecard",extraFilters:[{key:"tab",value:"search"}]}),t.jsx(nt,{sortValues:dt}),t.jsx(it,{extraFilters:[{key:"tab",value:"search"}]}),!R&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]}):null,T=void 0,$=i?"Loading...":"Profile";if(i||x)return null;const j={fontWeight:700,backgroundColor:"#333",padding:2,textAlign:"left",marginTop:10},e={fontWeight:700,paddingRight:10};return t.jsx(X,{filterFields:rt,children:t.jsx(st,{cardActivity:E,cardBBCount:S,cardDanPoints:D,cardEligibleDan:v,cardNextDanPoints:A,cardNextDanLocks:w,cardUniqueLocks:B,cardMaxBelt:a,popularLocks:z,popularLocksBB:O,children:t.jsx(et,{children:t.jsxs(at,{adapterLocale:Y.locale(),dateAdapter:ot,children:[t.jsx(Z,{title:$,extras:q}),i&&t.jsx(lt,{}),!i&&r&&!x&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem"},children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{style:j,children:[t.jsx("th",{children:"Parameter"}),t.jsx("th",{children:"Value"})]})}),t.jsxs("tbody",{children:[t.jsx("tr",{style:{height:10}}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"display name"}),t.jsx("td",{children:s==null?void 0:s.displayName})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user id"}),t.jsx("td",{children:n.uid})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user claims"}),t.jsx("td",{children:I.join(", ")})]}),(s==null?void 0:s.admin)&&t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"profile.admin"}),t.jsx("td",{children:"true"})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:j,colSpan:2,children:"SCORECARD"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"blackBeltAwarded"}),t.jsx("td",{children:s!=null&&s.blackBeltAwardedAt?"true":""})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardMaxBelt"}),t.jsx("td",{children:a==null?void 0:a.name})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardBBCount"}),t.jsx("td",{children:S})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardDanPoints"}),t.jsx("td",{children:D})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardEligibleDan"}),t.jsx("td",{children:v})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanPoints"}),t.jsx("td",{children:A})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanLocks"}),t.jsx("td",{children:w})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardUniqueLocks"}),t.jsx("td",{children:B})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"projects"}),t.jsx("td",{children:(F=s==null?void 0:s.projects)==null?void 0:F.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"tabClaimed"}),t.jsx("td",{children:s==null?void 0:s.tabClaimed})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"redditUsername"}),t.jsx("td",{children:s==null?void 0:s.redditUsername})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"discordUsername"}),t.jsx("td",{children:s==null?void 0:s.discordUsername})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:j,colSpan:2,children:"LOCK COLLECTION"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"any"}),t.jsx("td",{children:s.any.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"own"}),t.jsx("td",{children:s.own.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"picked"}),t.jsx("td",{children:s.picked.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"recorded"}),t.jsx("td",{children:s.recorded.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"wishlist"}),t.jsx("td",{children:s.wishlist.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksAny"}),t.jsx("td",{children:s.safelocksAny.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksCracked"}),t.jsx("td",{children:s.safelocksCracked.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksOwn"}),t.jsx("td",{children:s.safelocksOwn.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksWishlist"}),t.jsx("td",{children:s.safelocksWishlist.length})]})]})]})}),!i&&(!r||x)&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem",textalign:"center"},children:"no user"}),t.jsx(_,{before:T})]})})})})}export{It as default};
