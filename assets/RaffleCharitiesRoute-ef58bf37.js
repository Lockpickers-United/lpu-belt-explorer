import{r as a,j as e,u as v,R as y,N as A,F as w,T}from"./index-54946f8a.js";import{F as k,f as N,D as F,a as W,r as B}from"./filterFields-412eea47.js";import{u as D}from"./usePageTitle-fc6b1e2c.js";import{r as H}from"./index-5162c72b.js";import{a as S}from"./RaffleContext-7a42f529.js";import{N as L}from"./ViewFilterButtons-e0cc304b.js";import{L as b}from"./Link-99bbb211.js";import{a as z,b as p,c as P,d as E,T as M,e as U}from"./TableRow-8be57780.js";import{R as I}from"./RaffleSearchBar-988a1324.js";import{R as G}from"./RaffleHiddenDialog-b00aadaa.js";import{R as K}from"./RaffleHeader-133ef16f.js";import{R as O,A as V}from"./AdminRoleButton-98f96b23.js";import"./useDocumentTitle-4bf9b6a7.js";import"./useData-bb00cdee.js";import"./dataUrls-824ba4d9.js";import"./LockListContext-ff5ec7f3.js";import"./entryName-0966e7d4.js";import"./Badge-80d008d5.js";import"./Chip-f439db66.js";import"./Select-422c3caf.js";import"./SearchBox-514588d5.js";import"./Box-a21435cf.js";import"./Search-cb159a6b.js";import"./TextField-50424180.js";import"./ToggleButtonGroup-6a2d8ca6.js";import"./Dialog-338b8d7f.js";function _({children:o}){const{filters:l}=a.useContext(k),{search:c,id:u,tab:m,name:g,sort:n,image:x,...s}=l,{allCharities:d}=a.useContext(S),f=a.useMemo(()=>{const R=Object.keys(s).map(r=>{const t=s[r];return Array.isArray(t)?t.map(i=>({key:r,value:i})):{key:r,value:t}}).flat(),C=d.filter(r=>R.every(({key:t,value:i})=>Array.isArray(r[t])?r[t].includes(i):r[t]===i)).sort((r,t)=>r.fuzzy.localeCompare(t.fuzzy)),j=c?N.go(H(c),C,{keys:$,threshold:-25e3}).map(r=>({...r.obj,score:r.score})):C;return n?j.sort((r,t)=>n==="potName"?r.title.localeCompare(t.title):n==="contributedBy"?r.contributedBy[0].localeCompare(t.contributedBy[0]):r.potNumber<t.potNumber):j},[d,s,c,n]),h=a.useMemo(()=>({allCharities:d,visibleEntries:f}),[d,f]);return e.jsx(F.Provider,{value:h,children:o})}const $=["fuzzy"];function q({charity:o}){const{isMobile:l}=v(),{raflState:c,raffleAdminRole:u}=a.useContext(S),m=["live","post"].includes(c)||u,g=a.useCallback(d=>{const f=window.open(d,"_blank","noopener,noreferrer");f&&(f.opener=null)},[]),n=o.url?e.jsx(b,{onClick:()=>g(o.url),style:{color:"#fff",fontWeight:500},children:o.name}):e.jsx("span",{style:{color:"#ddd"},children:o.name}),x=l?"0.95rem":"1.0rem",s=l?{fontSize:x,border:0,padding:"6px 10px"}:{fontSize:x,border:0,padding:"10px 16px"};return e.jsxs(z,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#191919"},"td, th":{}},children:[e.jsx(p,{align:"left",style:s,children:n}),m&&e.jsxs(y.Fragment,{children:[e.jsx(p,{align:"center",style:s,children:o.donations2024>0&&new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumSignificantDigits:3}).format(o.donations2024)}),e.jsx(p,{align:"center",style:s,children:o.donations>0&&new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumSignificantDigits:3}).format(o.donations)})]})]})}function J(){const{visibleEntries:o}=a.useContext(F),{raflState:l,raffleAdminRole:c}=a.useContext(S),u=["live","post"].includes(l)||c,{isMobile:m}=v(),g=a.useRef(),[n,x]=a.useState("name"),s=a.useCallback(t=>{t!==n&&x(t)},[x,n]),d=o.sort((t,i)=>{switch(n){case"2024":return i.donations2024-t.donations2024;case"2025":return i.donations-t.donations;case"name":return t.name.localeCompare(i.name);default:return t.name.localeCompare(i.name)}}),f={maxWidth:700,marginLeft:"auto",marginRight:"auto"},h=m?"0.9rem":"1.0rem",R=m?"10px 10px":"16px 16px",C=l==="live"?"Currently":"Contributions",j=m?"2024":"2024 Contributions",r=m?"2025":`2025 ${C}`;return e.jsxs(y.Fragment,{children:[e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(I,{label:"Approved Charities",sortValues:null}),o.length===0&&e.jsx(L,{label:"Charities"}),o.length>0&&e.jsx(P,{sx:{height:"100%",backgroundColor:"#111"},id:"scrollable",ref:g,children:e.jsxs(E,{stickyHeader:!0,style:f,children:[e.jsx(M,{children:e.jsxs(z,{children:[e.jsx(p,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",padding:R},children:e.jsx(b,{onClick:()=>s("name"),style:{color:n==="name"?"#fff":"#ccc"},children:"Charity Name"})},"Charity Name"),u&&e.jsxs(y.Fragment,{children:[e.jsx(p,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",textAlign:"center"},children:e.jsx(b,{onClick:()=>s("2024"),style:{color:n==="2024"?"#fff":"#ccc"},children:j})},"2024"),e.jsx(p,{style:{fontWeight:700,fontSize:h,lineHeight:"1.3rem",border:0,backgroundColor:"#222",textAlign:"center"},children:e.jsx(b,{onClick:()=>s("2025"),style:{color:n==="2025"?"#fff":"#ccc"},children:r})},"2025")]})]})}),e.jsx(U,{children:d.map((t,i)=>e.jsx(q,{charity:t},i))})]})})]}),e.jsx(G,{})]})}function Re(){D("RAFL Charities");const{isMobile:o}=v(),l=o?8:0,c={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:l,paddingRight:l},u=e.jsxs(y.Fragment,{children:[!o&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(O,{}),e.jsx(V,{})]});return e.jsx(W,{filterFields:B,children:e.jsx(_,{children:e.jsxs("div",{style:c,children:[e.jsx(A,{title:"RAFL Charities",extras:u}),e.jsx(K,{page:"charities"}),e.jsx(J,{}),e.jsx(w,{}),e.jsx(T,{feature:"raflCharities"})]})})})}export{Re as default};
