import{b as L,r as m,j as t,u as F,d as H,R as A,N as P,F as $,T as B}from"./index-4247c5fe.js";import{D as M,a as E,r as Y}from"./filterFields-20f1c795.js";import{R as G}from"./ReportButton-8f4c6b9b.js";import{R as I,A as V}from"./AdminRoleButton-0bd1d19f.js";import{R as _}from"./RaffleDataProvider-02632f1f.js";import{R as q}from"./RaffleHeader-f3fe388c.js";import{L as J}from"./LoadingDisplay-46f6c7b9.js";import{u as K}from"./useData-21decaa1.js";import{u as O}from"./usePageTitle-c7619d0d.js";import{s as Q,f as U}from"./dataUrls-6cc1b85c.js";import{A as W,R as X}from"./RaffleStatsHeader-42e485e9.js";import{L as Z}from"./Link-c1fcc832.js";import{R as tt}from"./RaffleHiddenDialog-70319ec1.js";import{R as et}from"./RaffleSubHead-6888dfab.js";import"./index-7398065e.js";import"./LPU-c3fa7122.js";import"./LinearProgress-7390ec8f.js";import"./useDocumentTitle-4119a5b8.js";import"./TableRow-f0ec7c5e.js";import"./Dialog-e36cbe21.js";const st=({data:f,tableWidth:r,nameLength:d})=>{const p=L(),{potViewsById:u}=f,{getPotFromId:o}=m.useContext(M),g=[{id:"title",align:"left",name:"Title"},{id:"donors",name:"Donors",align:"center"},{id:"tickets",name:"Tickets",align:"center"}],j=!0,[a,R]=m.useState("title"),[S,y]=m.useState(!0),l=u.data.map(n=>{var C;const e=o(n.id);if(!e)return null;let c=e!=null&&e.title?e.title.substring(0,d):`unknown (${n.id})`;return c=((C=e==null?void 0:e.title)==null?void 0:C.length)<d||!(e!=null&&e.title)?c:c+"...",{...n,...e,title:c}}).filter(n=>n).sort((n,e)=>{switch(a){case"title":return n[a].localeCompare(e[a]);case"donors":return parseInt(e[a])-parseInt(n[a])||n.title.localeCompare(e.title);case"tickets":return parseInt(e[a])-parseInt(n[a])||n.views-e.views;default:return parseInt(e[a])-parseInt(n[a])||n.title.localeCompare(e.title)}}),x=(S?l:l.reverse()||[]).map(n=>n.donors&&n.donors>0?{...n}:{...n,donors:0,tickets:0}),D={columns:g,data:x},b=m.useCallback((n,e)=>{const c=l.find(z=>z.title===e),C=c==null?void 0:c.title.replace(/[\s/]/g,"_").replace(/\W/g,"");return n==="title"?t.jsx(Z,{onClick:()=>p(`/rafl/?id=${c.id}&name=${C}`),style:{color:"#fff"},children:e}):e},[p,l]),{width:h}=F(),k=h<=360,N=h<=395,T=h<=428,s=h<=560,i=h<=820,v=k||N?".8rem":T?".9rem":".95rem";return t.jsx("div",{children:t.jsx(W,{tableData:D,tableWidth:r,fontSize:v,sortable:j,sort:a,setSort:R,ascending:S,setAscending:y,linkFunction:b})})},nt=({tableWidth:f,nameLength:r})=>{const{allCharities:d}=m.useContext(I),p=[{id:"displayName",align:"left",name:"Charity Name"},{id:"donors",name:"Donors",align:"center"},{id:"donations",name:"Raised",align:"center"}],u=!0,[o,g]=m.useState("name"),[j,a]=m.useState(!0),R=d.sort((s,i)=>{switch(o){case"name":return s.name.localeCompare(i.name);case"donors":return i[o]-s[o];case"donations":return i[o]-s[o];default:return s.name.localeCompare(i.name)}}),y=(j?R:R.reverse()).map(s=>{var v;let i=s!=null&&s.name?s==null?void 0:s.name.substring(0,r):"unknown";return i=((v=s==null?void 0:s.name)==null?void 0:v.length)<r?i:i+"...",s.donations&&s.donations>0?{...s,donations:`$${s.donations}`,displayName:i}:{...s,displayName:i}}),l={columns:p,data:y},w=m.useCallback((s,i)=>i,[]),{width:x}=F(),D=x<=360,b=x<=395,h=x<=428,k=x<=560,N=x<=820,T=D?".8rem":b?".85rem":h?".9rem":".95rem";return t.jsxs("div",{children:[t.jsx("div",{style:{justifyItems:"center",marginBottom:20},children:t.jsx("div",{style:{width:400}})}),t.jsx(W,{tableData:l,tableWidth:f,fontSize:T,sortable:u,sort:o,setSort:g,ascending:j,setAscending:a,linkFunction:w})]})};function at(){O("RAFL Report");const{data:f,loading:r,error:d}=K({urls:it}),{siteFullNew:p,raflResponseDetails:u}=f||{},{width:o,isMobile:g}=F(),j=r?"--":"(updated: "+H(u==null?void 0:u.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+")",a={margin:"26px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},R={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},S=g?"8px 8px 32px 8px":"24px 24px 32px 24px",y=o<=560?o-20:650,l=g?24:48;return r?t.jsx(J,{}):d?null:t.jsxs(A.Fragment,{children:[t.jsxs("div",{style:{minWidth:"320px",maxWidth:700,height:"100%",padding:S,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto"},children:[t.jsx(X,{}),t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#fff"},children:t.jsx("span",{style:{fontSize:"0.8rem",marginTop:0},children:j})}),t.jsx("div",{style:a,children:"Pots"}),t.jsx(st,{data:p,tableWidth:y,nameLength:l}),t.jsx("div",{style:R,children:"Charities"}),t.jsx(nt,{data:p,tableWidth:y,nameLength:l})]}),t.jsx(tt,{})]})}const it={siteFullNew:Q,raflResponseDetails:U};function bt(){const{isMobile:f}=F(),{allPots:r}=m.useContext(I),d=t.jsxs(A.Fragment,{children:[!f&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(G,{active:!1}),t.jsx(V,{})]});return t.jsx(E,{filterFields:Y,children:t.jsx(_,{allEntries:r,children:t.jsxs(A.Fragment,{children:[t.jsx(P,{title:"RAFL Stats",extras:d}),t.jsx(q,{page:"stats"}),t.jsx(et,{text:"Stats!"}),t.jsx(at,{}),t.jsx($,{}),t.jsx(B,{feature:"raflStats"})]})})})}export{bt as default};
