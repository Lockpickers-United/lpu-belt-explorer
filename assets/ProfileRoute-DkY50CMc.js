import{Y as J,Z as X,$ as K,a0 as Q,r as m,j as e,W as q,U as O,R as L,I as R,J as Z,K as ee,M as P,O as te,P as S,Q as A,B as ie,T as _,u as T,A as U,a7 as oe,aa as se,ab as re,a5 as ne,D as ae,aA as le,a8 as de,e as ce,N as pe,h as me}from"./index-CjL9jWUF.js";import{l as xe}from"./filterFields-D-hbgoOQ.js";import{l as he}from"./sortFields-ChCLUnX8.js";import{F as ue,S as fe}from"./SortButton-DEK6vvsO.js";import{D as ge}from"./LockDataProvider-DowQZRMl.js";import{L as $,a as je}from"./LockListContext-ClTelZfM.js";import{S as we}from"./SearchBox-DidAPc2p.js";import{L as ve}from"./LoadingDisplay-BPsHA2W3.js";import{u as ke}from"./useData-BuPvsSlh.js";import{N as be}from"./NoProfileData-BljndT3V.js";import{P as ye}from"./ProfileNotFound-C1xZKRmN.js";import{E as Le}from"./ExpandMore--guoHIp5.js";import{B as Ce}from"./BeltStripe-k7vGdgrO.js";import{C as Be}from"./EvidenceForm-n3M3ineL.js";import{D as Se,R as Me,O as Ee,C as De,a as Te,L as Fe,b as Ae,c as Ie}from"./Casino-CqBOMMMu.js";import{F as v}from"./FieldValue-DVybtSzC.js";import{B as Re}from"./BeltIcon-AqhrgeAx.js";import{F as H}from"./FilterChip-OhBtO3Mr.js";import{E as We,C as Pe,a as He}from"./ExportButton-Bz3Fs-aR.js";import{C as Ve}from"./CopyEntryTextButton-Cd-G7W_Q.js";import{L as ze}from"./LockImageGallery-BTwHk9cR.js";import{D as W}from"./DataContext-DKxe2L0l.js";import{A as Ne,a as qe,b as Oe}from"./AccordionSummary-CqgAqoib.js";import{M as V}from"./index-Ci34Qzjo.js";import{r as z}from"./index-63GJb2bE.js";import{A as _e}from"./AccordionActions-Bsno6pK_.js";import{I as Ue}from"./InlineFilterDisplay-Dj_44IBe.js";import"./index-1KrBDXzY.js";import"./entryName-DqYptSlE.js";import{X as G}from"./nivo-bar-bxt9VUAb.js";import{p as Y}from"./chartDefaults-pV7GKcxU.js";import{P as $e}from"./ProfileHeader-BFvPFiK6.js";import"./FilterAlt-BVpbrYvc.js";import"./HighlightOff-DUyK41I_.js";import"./Select-WbreADSN.js";import"./Box-DxuWrebd.js";import"./Chip-BymgkoVJ.js";import"./Sort-ChZUa80M.js";import"./collectionStatsById-DY1NVZ7h.js";import"./dataUrls-DkJe4Pqg.js";import"./filterEntriesAdvanced-B_LinbMH.js";import"./setDeep-J6HEwWhX.js";import"./Search-CjWGgrpu.js";import"./TextField-2NYbtFCc.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-D1cHo6Qy.js";import"./mycollection-Dqx3MeiB.js";import"./Launch-Bd6zKmbz.js";import"./PhotoCamera-C7w6fobc.js";import"./LockEntrySearchBox-BchM3xK5.js";import"./BeltStripeMini-BESJxg15.js";import"./Autocomplete-Ds5oMhbq.js";/* empty css                  */import"./pageData-BY6jrYM9.js";import"./index-Gysi8h4-.js";import"./sanitizeValues-BRgjSip6.js";import"./LocalizationProvider-qVt2O1tQ.js";import"./index-CAmVkP8Q.js";import"./DialogContent-CBK9_dnx.js";import"./ListItem-yvugv2si.js";import"./Dialog-BVc9JrAc.js";import"./VideocamOutlined-yQOpAqs4.js";import"./Checkbox-BpJ-P1Gt.js";import"./LoadingDisplay-3YoJrgBr.js";import"./CircularProgress-D76FUa8Z.js";import"./LoadingDisplaySmall-DXEd-K2w.js";import"./glossary-B-_vYIGQ.js";import"./Link-CnG3E9Po.js";import"./Cancel-Bw2yy4aq.js";import"./Collapse-B6OnQuEZ.js";import"./download-BREuvJY8.js";import"./List--z1f1Sac.js";import"./ContentCopy-CLW791eg.js";import"./ImageGallery-jzathZu1.js";import"./ImageViewer-pT0ezJy0.js";import"./ImageListItem-KbNaTXfB.js";import"./nivo-axes-HanXjGuc.js";import"./nivo-legends-ZOPGWhYz.js";import"./uniq-DwEtWcDC.js";import"./_baseClone-pl0aIRQ2.js";import"./CopyProfileLinkButton-DFTOR7ev.js";import"./ToggleButtonGroup-DfGlelVr.js";var D={},N;function Ge(){if(N)return D;N=1;var t=J();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var o=t(X()),n=K();return D.default=(0,o.default)((0,n.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),D}var Ye=Ge();const Je=Q(Ye);function Xe(){const{compact:t,setCompact:o,setExpanded:n}=m.useContext($),l=m.useCallback(()=>{o(!t),n(null)},[t,o,n]);return e.jsx(q,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:l,children:e.jsx(Je,{color:t?"secondary":"inherit"})})})}function Ke({entry:t,expanded:o,onExpand:n}){var r,x,M,C,b;const{expandAll:l}=m.useContext(W),{userId:h}=R(),[a,d]=m.useState(!1),u={maxWidth:700,marginLeft:"auto",marginRight:"auto"},i=m.useRef(null),s=[...new Set([...t.relatedIds||[],...Z(t.id)])].sort((c,p)=>ee(P[c].belt,P[p].belt)||c.localeCompare(p)),j=m.useCallback((c,p)=>{n&&n(p?t.id:!1)},[t,n]);m.useEffect(()=>{if(o&&i&&!a&&!l){const p=window.innerWidth<=600?70:74,{id:w}=te.parse(location.search),k=w===t.id;d(!0),setTimeout(()=>{window.scrollTo({left:0,top:i.current.offsetTop-p,behavior:k?"auto":"smooth"})},k?0:100)}else o||d(!1)},[o,t,a,l]);const f=m.useMemo(()=>{var c;return e.jsx(S,{direction:"column",spacing:0,sx:{flexWrap:"wrap"},children:(c=t.makeModels)==null?void 0:c.map(({make:p,model:w},k)=>e.jsx(A,{style:{fontWeight:500,fontSize:"1.07rem",lineHeight:1.25,marginBottom:"4px"},children:p&&p!==w?`${p} ${w}`:w},k))})},[t.makeModels]);return e.jsxs(Ne,{expanded:o,onChange:j,style:u,ref:i,children:[e.jsxs(qe,{expandIcon:e.jsx(Le,{}),children:[e.jsx(Ce,{value:t.belt}),e.jsxs("div",{style:{margin:"12px 0px 8px 8px",width:"55%",flexShrink:0,flexDirection:"column"},children:[e.jsx(v,{value:f,textStyle:t.belt==="Unranked"?{color:"#aaa",marginLeft:"0px"}:{marginLeft:"0px"},style:{marginBottom:"2px"}}),!!t.version&&e.jsx(v,{name:"Version",value:e.jsx(A,{style:{fontSize:"0.95rem",lineHeight:1.25},children:t.version}),textStyle:t.belt==="Unranked"?{color:"#aaa"}:{}})]}),e.jsx("div",{style:{margin:"8px 0px 0px 0px",width:"40%",flexShrink:0,flexDirection:"column"},children:((r=t.lockingMechanisms)==null?void 0:r.length)>0&&e.jsx(v,{value:e.jsx(S,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:(x=t.lockingMechanisms)==null?void 0:x.sort().map((c,p)=>e.jsx(H,{value:c,field:"lockingMechanisms"},p))})})})]}),o&&e.jsxs(L.Fragment,{children:[e.jsxs(Oe,{sx:{padding:"8px 16px 0px 16px"},children:[e.jsxs(S,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:[e.jsx(v,{style:{width:"50%",marginLeft:"0px"},value:e.jsxs(L.Fragment,{children:[e.jsxs(A,{style:{marginLeft:"0px",fontSize:"1rem",lineHeight:1.25,fontWeight:500},children:[t.belt,e.jsx(Se,{belt:t.belt})]}),e.jsx(Re,{value:t.belt,style:{marginBottom:-10}})]})}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx(Be,{id:t.id,makeModels:t.makeModels})})]}),!!t.notes&&e.jsx(S,{direction:"row",spacing:0,sx:{width:"100%",flexWrap:"wrap"},children:e.jsx(v,{name:"Comments",value:e.jsx(A,{component:"div",style:{marginTop:-16},children:e.jsx(V,{rehypePlugins:[[z,{target:"_blank"}]],children:t.notes})})})}),!!((M=t.features)!=null&&M.length)&&e.jsx(v,{name:"Features",value:e.jsx(S,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.features.map((c,p)=>e.jsx(H,{value:c,field:"features"},p))})}),(s==null?void 0:s.length)>1&&!h&&e.jsx(v,{name:"Other Versions",value:e.jsx(L.Fragment,{children:s.map(c=>e.jsx(Me,{id:c,onExpand:n,entryId:t.id},c))})}),!!t.description&&e.jsx("div",{style:{margin:8},children:e.jsx(V,{rehypePlugins:[[z,{target:"_blank",rel:["nofollow","noopener","noreferrer"]}]],children:t.description})}),e.jsx("div",{style:{margin:"12px 0px 20px 6px"},children:e.jsx(We,{entry:t})}),!!((C=t.media)!=null&&C.length)&&e.jsx(v,{value:e.jsx(ze,{entry:t})}),e.jsxs("div",{style:{display:"flex"},children:[!!((b=t.links)!=null&&b.length)&&e.jsx(v,{name:"Links",value:e.jsx(S,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:c,url:p},w)=>e.jsx(ie,{href:p,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:c},w))})}),e.jsx(v,{name:"For sale",style:{marginLeft:15},value:e.jsx(Ee,{entry:t,buttonType:"text"})})]})]}),e.jsx(_e,{disableSpacing:!0,children:e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsxs("div",{style:{flexGrow:1,justifyItems:"left"},children:[!l&&e.jsx(_,{feature:"lock",id:t.id}),e.jsx(De,{entry:t}),e.jsx(Te,{entry:t}),e.jsx(Fe,{entry:t})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Ve,{entry:t}),e.jsx(Pe,{entry:t})]})]})})]})]})}const Qe=L.memo(Ke,(t,o)=>t.entry.id===o.entry.id&&t.expanded===o.expanded&&t.onExpand===o.onExpand);function Ze({lockCollection:t,userText:o,collectionBarHeight:n}){const l=t.own?t.own.length:0,h=t.picked?t.picked.length:0,a=t.recordedLocks?t.recordedLocks.length:0,d=t.wishlist?t.wishlist.length:0,i=l+h+a+d?{own:l,picked:h,recorded:a,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},j={own:250,picked:280,recorded:260,wishlist:100},f={own:Math.min(s.own,i.own),picked:Math.min(s.picked,i.picked),recorded:Math.min(s.recorded,i.recorded),wishlist:Math.min(s.wishlist,i.wishlist)},r={own:i.own>s.own?0:s.own-f.own,picked:i.picked>s.picked?0:s.picked-f.picked,recorded:i.recorded>s.recorded?0:s.recorded-f.recorded,wishlist:i.wishlist>s.wishlist?0:s.wishlist-f.wishlist},x={own:2,picked:2,recorded:2,wishlist:2},M={own:Math.max(i.own-(f.own+r.own+x.own),0),picked:Math.max(i.picked-(f.picked+r.picked+x.picked),0),recorded:Math.max(i.recorded-(f.recorded+r.recorded+x.recorded),0),wishlist:Math.max(i.wishlist-(f.wishlist+r.wishlist+x.wishlist),0)},C={own:Math.min(j.own-i.own,j.own-s.own-x.own),picked:Math.min(j.picked-i.picked,j.picked-s.picked-x.picked),recorded:Math.min(j.recorded-i.recorded,j.recorded-s.recorded-x.recorded),wishlist:Math.min(j.wishlist-i.wishlist,j.wishlist-s.wishlist-x.wishlist)},b=["own","picked","recorded","wishlist"],c=b.map((y,B)=>({row:b[B],"Average A":f[y],"Average B":r[y],Average:x[y],USER:M[y],"Top 10":C[y]})),{width:p}=T(),w=p<=560,k=n,I=w?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},F=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],g=t?[{title:o,color:"#3c90c5",width:"14px"}]:[];g.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const E=({items:y})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),y.map(B=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:B.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:B.width},children:B.title})]},B.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(L.Fragment,{children:[e.jsx("div",{style:{height:k},children:e.jsx(G,{data:c,keys:["Average A","Average B","Average","USER","Top 10"],theme:Y,indexBy:"row",margin:I,padding:.2,valueScale:{type:"linear"},colors:F,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(E,{items:g})]})}function et({beltData:t}){const{width:o}=T(),n=o<=360,l=o<=560,h=175,a=l?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],u=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:h,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(G,{data:t,margin:a,padding:.15,colors:i=>d[i.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:Y,isInteractive:!1,enableLabel:!0,label:i=>i.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:i=>u[i.index%u.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function tt({profile:t,entries:o}){const{userId:n}=R(),{user:l}=m.useContext(U),h=n===(l==null?void 0:l.uid)?"You":"User",a=m.useMemo(()=>{const I=oe.concat("Unranked"),F=o.map(({belt:g})=>g.includes("Black")?"Black":g).reduce((g,E)=>(g[E]||(g[E]=0),g[E]++,g),{});return I.map(g=>({id:g,label:g,count:F[g]||0,value:F[g]||0}))},[o]),{isMobile:d}=T(),u=d?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:i}=T(),s=i<=360,j=i<=395,f=i<=428,r=i<=560,C={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...r?{}:{display:"flex"}},b=r?"100%":"50%",c=r?"100%":"50%",p=s?200:r?210:180,w=r?160:170,k=s?150:170;return e.jsx(se,{style:u,sx:{paddingBottom:5},children:e.jsx(re,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:C,children:[e.jsx("div",{style:{width:b,verticalAlign:"top",height:p},children:e.jsx(Ze,{lockCollection:t,userText:h,collectionBarHeight:w})}),e.jsx("div",{style:{width:c,height:k,marginTop:"0px"},children:e.jsx(et,{beltData:a})})]})})})})}function it({onSelect:t}){const{visibleEntries:o=[]}=m.useContext(W),n=m.useCallback(()=>{const l=Math.floor(Math.random()*o.length),h=o[l];t(h.id)},[o,t]);return ne("r",()=>n(),{preventDefault:!0}),e.jsx(q,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:n,children:e.jsx(Ae,{style:{color:"#999"}})})})}function ot({profile:t,owner:o}){const{compact:n}=m.useContext($),[l,h]=m.useState(!1),{visibleEntries:a=[]}=m.useContext(W),d=m.useDeferredValue(l);return e.jsx(L.Fragment,{children:e.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx($e,{profile:t,page:"collection",owner:o}),e.jsx(Ue,{profile:t,collectionType:"locks"}),e.jsx(tt,{profile:t,entries:a}),n?e.jsx(Ie,{entries:a}):a.map(u=>e.jsx(Qe,{entry:u,expanded:u.id===d,onExpand:h},u.id)),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(it,{onSelect:h})})]})})}function Fi(){const{user:t}=m.useContext(U),{userId:o}=R(),{getProfile:n}=m.useContext(ae),{isMobile:l}=T(),h=m.useCallback(async()=>{try{const r=await n(o);if(r){const x=r.displayName?r.displayName.toLowerCase().endsWith("s")?`${r.displayName}'`:`${r.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${x} Profile`}return r}catch(r){return console.error("Error loading profile.",r),null}},[n,o]),{data:a={},loading:d,error:u}=ke({loadFn:h}),i=m.useMemo(()=>{if(d||!a)return[];const r=new Set(le.locks.getCollected(a));return de.filter(x=>r.has(x.id))},[a,d]),s=e.jsxs(L.Fragment,{children:[e.jsx(we,{label:"Collection"}),e.jsx(ue,{}),e.jsx(fe,{sortValues:he}),!l&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(Xe,{})]}),j=d?"Loading...":"Profile",f=e.jsx("div",{style:{margin:"30px 0px"},children:e.jsx(He,{text:!0})});return e.jsx(ce,{filterFields:xe,children:e.jsx(ge,{allEntries:i,profile:a,children:e.jsxs(je,{children:[e.jsx(pe,{title:j,extras:s}),d&&e.jsx(ve,{}),!d&&a&&!u&&e.jsx(ot,{profile:a,owner:t&&t.uid===o}),!d&&a&&!u&&i.length===0&&e.jsx(be,{}),!d&&(!a||u)&&e.jsx(ye,{}),e.jsx(me,{before:f}),e.jsx(_,{feature:"profile"})]})})})}export{Fi as default};
