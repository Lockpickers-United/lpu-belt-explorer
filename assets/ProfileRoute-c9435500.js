import{j as t,C as p,a3 as f,c as m,b as j,r as s,ai as h,Q as g,R as x,U as C,V as E,W as P}from"./index-d8e968f9.js";import{L as v,D as y,I as F,C as D,E as L,m as R,k as T,h as b,T as k,i as B,j as I,l as N}from"./FilterButton-4322c079.js";import"./InputLabel-a6a0cab1.js";import"./ImageViewer-15bf157a.js";import"./LinearProgress-7c83dd70.js";import"./index-14e64ad2.js";import"./index-bf32019f.js";import"./Badge-0654f1e5.js";function w(){const e={marginTop:16,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(p,{style:e,children:[t.jsx(f,{title:"Profile Not Found!"}),t.jsx(m,{children:t.jsx(j,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function S({profile:e}){const{compact:n,expanded:i,setExpanded:l}=s.useContext(v),{visibleEntries:r=[]}=s.useContext(y),d=s.useDeferredValue(i);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(F,{profile:e}),n?t.jsx(D,{entries:r}):r.map(o=>t.jsx(L,{entry:o,expanded:o.id===d,onExpand:l},o.id))]})}function U(){const[e,n]=s.useState({}),{userId:i}=h(),{getProfile:l}=s.useContext(g),[r,d]=s.useState(!1);s.useEffect(()=>{(async()=>{try{const a=await l(i);n(a),d(!1)}catch(a){console.trace("Error loading profile",a),n({}),d(!0)}})()},[i,l]);const o=s.useMemo(()=>{const c=new Set(R.flatMap(({key:a})=>e[a]));return T.filter(a=>c.has(a.id))},[e]),u=t.jsxs(x.Fragment,{children:[t.jsx(b,{}),t.jsx(k,{})]});return t.jsx(x.Fragment,{children:t.jsx(B,{children:t.jsx(I,{allEntries:o,profile:e,children:t.jsxs(N,{children:[t.jsx(C,{title:`Profile for ${e.displayName||"Anonymous"}`,extras:u}),e&&!r&&t.jsx(S,{profile:e}),r&&t.jsx(w,{}),t.jsx(E,{}),t.jsx(P,{feature:"profile"})]})})})})}export{U as default};
