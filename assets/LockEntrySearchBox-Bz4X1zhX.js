import{u as R,r as i,ay as B,j as a,R as L,ac as w}from"./index-BM4DZBjA.js";import{I as A,S as C}from"./Search-C8t-F8zW.js";import{e as f}from"./entryName-57h0cK7v.js";import{B as F}from"./BeltStripeMini-oD6MA2O5.js";import{A as M}from"./Autocomplete-V9nbiPNc.js";import{T}from"./TextField-DwPjsRbb.js";function K({handleChangeLock:m,allEntries:n,disabled:d,reset:b=!1}){const k={maxWidth:700},{isMobile:h}=R(),x=i.useRef(),N=i.useMemo(()=>{let e={};return{allLocks:n==null?void 0:n.sort((o,s)=>{B(o.belt,s.belt)||f(o,"short").localeCompare(f(s,"short"))}).reduce((o,s)=>{const y=s.version?" - "+s.version:"";return s.makeModels.map(l=>{const p=l.make?l.make:l.model,u=l.make?` ${l.model}`:"",O=`${p}${u}${y}`;o.push({id:s.id,lockName:O,make:p,model:u})}),o},[]).filter(o=>o),lockNames:e}},[n]),{allLocks:r,lockNames:c}=N,j=r.filter((e,t)=>r.findIndex(o=>o.lockName===e.lockName)!==t),S=r==null?void 0:r.map(e=>(e.lockName=j.find(t=>t.lockName===e.lockName)?e.lockName+` (${n.find(t=>t.id===e.id).belt})`:e.lockName,e)).map(e=>(c[e.lockName]=`${e.make}${e.model}`,{label:e.lockName,id:e.id,belt:n.find(t=>t.id===e.id).belt})),I=i.useCallback((e,t)=>{m(t?{lockFullName:t.label,lockName:c[t.label],lockId:t.id}:{})},[c,m]),[$,g]=i.useState(!1),v=i.useCallback(()=>g(!1),[]);return a.jsxs(L.Fragment,{children:[a.jsx(M,{disabled:d,selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:k,options:S,onChange:I,renderInput:e=>a.jsx(T,{...e,placeholder:"Search Locks",variant:"standard",color:"info",inputRef:x,InputProps:{...e.InputProps,startAdornment:a.jsx(A,{position:"start",children:a.jsx(C,{})})}}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionLabel:e=>e.label,renderOption:(e,t)=>{const{key:o,...s}=e;return a.jsxs("div",{...s,style:{...e.style,height:34,padding:0,overflow:"elipsis",whiteSpace:"nowrap",color:t.belt==="Unranked"?"#aaa":"#fff",fontSize:"0.95rem"},children:[a.jsx(F,{value:t.belt,style:{marginRight:10}}),t.label]},o)}},b||d),a.jsx(w,{invisible:!0,open:$&&h,onClick:v})]})}export{K as L};
