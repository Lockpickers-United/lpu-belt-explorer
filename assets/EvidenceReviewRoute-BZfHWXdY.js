import{r as s,j as e,R as v,J as A,I as z,u as I,a0 as Y,a6 as F,ak as O,d as g,al as L,N as U,h as q}from"./index-SGUxfkCZ.js";import{u as J}from"./usePageTitle-CB3Jvf0y.js";import{L as G}from"./LeaderboardName-BI1xnNmo.js";import{C as H}from"./ChoiceButtonGroup-ksdRirYw.js";import{C as _}from"./Cached-BRgHMMdS.js";import{L as K}from"./LoadingDisplayWhite-DHUlDytO.js";import{E as Q}from"./ExpandMore-BZNloftF.js";import{A as V,a as X,b as Z}from"./AccordionSummary-C_Frvqr1.js";import{c as $,d as ee,T as te,a as w,b as a,e as re}from"./TableRow-DS-yxggq.js";import{L as D}from"./Link-B9O0UkTh.js";import{u as oe}from"./useData-DvdHtOWa.js";import{L as se}from"./LoadingDisplay-DD9MZAYF.js";import"./ToggleButtonGroup-B7teMqnd.js";import"./CircularProgress-LdsYeP5b.js";import"./Collapse-CDofKIdr.js";import"./Box-B_eyOA3I.js";function ne({refresh:n}){const[u,d]=s.useState(!1),[l,p]=s.useState(""),[c,y]=s.useState(!1),C=s.useCallback(async()=>{const i=window.location.protocol==="http:"?"http://explore.lpubelts.com:8080/export-evidence":"https://explore.lpubelts.com:8443/export-evidence";d(!0),await fetch(i,{cache:"no-store"}).then(async h=>(d(!1),await h.text())).then(async h=>{p(h),console.log(`export response
`,h),location.reload()}),await n()},[n]);return e.jsxs(v.Fragment,{children:[e.jsx("div",{style:{maxWidth:700,margin:"5px auto 5px auto",padding:2,fontWeight:700,fontSize:"1.2rem",display:"flex",justifyContent:"center"},children:u?e.jsx(K,{}):e.jsx(A,{title:"Refresh Evidence Data",arrow:!0,disableFocusListener:!0,children:e.jsx(z,{onClick:C,style:{marginRight:10},children:e.jsx(_,{})})})}),(l==null?void 0:l.status)==="Errors"&&e.jsxs(V,{expanded:c,onChange:()=>y(!c),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(X,{expandIcon:e.jsx(Q,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(Z,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(l,null,2)})})]})]})}function ie({data:n,updated:u}){const{isMobile:d}=I(),{admin:l}=s.useContext(Y),p=s.useMemo(()=>[{label:"Modified Picks"},{label:"Scorecard Projects"},{label:"All Projects"}],[]),[c,y]=s.useState(p[0]),C=s.useCallback(t=>y(t),[]);let i;switch(c.label){case"Scorecard Projects":i=n.projects.filter(t=>!t.tabName);break;case"All Projects":i=n.projects;break;case"Modified Picks":i=n.modifiers;break;default:i=n.modifiers.filter(t=>t.blackBelt)}const h=c.label.includes("Modified")?"Lock":"Project",R=c.label.includes("Modified")?"Belt":"Tier",[m,N]=F(),r=m.get("sort"),x=r&&r.includes("ev"),[b,k]=s.useState(!1),[f,S]=s.useState(!1),j=s.useCallback(t=>()=>{r&&t!==r?(m.set("sort",t),k(x?b:!1),S(x?!1:f)):r&&t===r?(k(x?b:!b),S(x?!f:f)):t==="date"?(m.set("sort",t),k(!0)):t==="evDate"?(m.set("sort",t),S(!0)):m.set("sort",t),N(m)},[x,f,b,m,N,r]),M=s.useMemo(()=>i&&r?i.sort((t,o)=>{if(r==="evName")return(t.displayName||"").localeCompare(o.displayName||"");if(r==="evLock")return t.evidenceName.localeCompare(o.evidenceName)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evBelt")return O(t.belt.replace(" Belt",""),o.belt.replace(" Belt",""))||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evModifier")return t.modifier.localeCompare(o.modifier)||(t.displayName||"").localeCompare(o.displayName||"");if(r==="evDate")return g(o.date).valueOf()-g(t.date).valueOf()}):i.sort((t,o)=>g(o.date).valueOf()-g(t.date).valueOf()),[r,i,f]),E=s.useMemo(()=>f?M.reverse():M,[M,f]),W=d?"auto":"170px",T=d?16:20,B=s.useCallback(t=>{const o=t.replace(" Belt","");return L[o]?L[o].color:t.includes("Dan")?"#769e49":"#b00"},[]),P=s.useCallback(t=>{const o=window.open(t,"_blank","noopener,noreferrer");o&&(o.opener=null)},[]);return e.jsx(v.Fragment,{children:e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:["Project & Pick Review",e.jsxs("div",{style:{fontWeight:400,fontSize:"0.9rem",width:"100%",textAlign:"center",margin:"0px 0px"},children:["Through ",g(u).format("MMM DD, YYYY")]})]}),e.jsx("div",{style:{marginBottom:20},children:e.jsx(H,{options:p,onChange:C})}),e.jsx($,{sx:{backgroundColor:"#111",maxWidth:800,margin:"auto"},children:e.jsxs(ee,{sx:{minWidth:360,align:"left"},children:[e.jsx(te,{children:e.jsxs(w,{children:[e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:W},children:e.jsx("span",{style:r==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evName"),children:"User"})}),e.jsxs(a,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:r==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evLock"),children:h}),e.jsxs("span",{style:r==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evBelt"),children:["Â (",R,")"]})]}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!x||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evModifier"),children:"Modifier"})}),e.jsx(a,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!x||r==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:j("evDate"),children:"Date"})})]})}),e.jsx(re,{children:E.map((t,o)=>e.jsxs(w,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(a,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:W},children:e.jsx(G,{leader:t,isCurrentUser:t.isCurrentUser,tab:"blackBelts",maxLength:T})})}),e.jsx(a,{align:"left",style:{backgroundColor:B(t.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(D,{onClick:()=>P(t.evidenceUrl),style:{color:"#fff"},children:t.evidenceName})})}),c.label==="Modified Picks"&&e.jsx(a,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5,marginRight:5},children:e.jsx(D,{onClick:()=>P(t.evidenceUrl),style:{color:"#fff"},children:t.modifier})})}),e.jsx(a,{align:"center",children:e.jsx("nobr",{children:g(t.date).format("MMM DD, YYYY")})})]},o))})]})}),l&&e.jsx(ne,{})]})})}function Se(){var p;J("All Projects");const{data:n,loading:u,error:d}=oe({url:ae}),l=e.jsx(v.Fragment,{});return e.jsxs(v.Fragment,{children:[e.jsx(U,{title:"All Projects",extras:l}),(u||d)&&e.jsx(se,{}),!u&&n&&e.jsx(ie,{data:n,updated:(p=n==null?void 0:n.metadata)==null?void 0:p.updatedDateTime}),e.jsx(q,{})]})}const ae="https://explore.lpubelts.com/data/allProjects.json";export{Se as default};
