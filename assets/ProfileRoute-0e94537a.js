import{K as N,M as W,j as e,r as x,G as z,I as V,u as j,R as D,ao as F,A as E,a3 as _,a4 as q,a0 as U,D as G,ap as O,a1 as Y,N as $,F as K,T as J}from"./index-4924184b.js";import{D as Q,a as X,l as Z}from"./filterFields-09bea8e4.js";import{S as ee,l as te}from"./SearchBox-ba1b792f.js";import{F as ie,S as oe}from"./SortButton-59e0ae15.js";import{D as se}from"./LockDataProvider-a0ebac9c.js";import{L as R,a as re}from"./LockListContext-34b133a3.js";import{L as ae}from"./LoadingDisplay-27e6b781.js";import{u as ne}from"./useData-96397294.js";import{N as de}from"./NoProfileData-9532cccb.js";import{P as le}from"./ProfileNotFound-d41cb669.js";import{C as ce,E as pe}from"./Entry-d8719ca0.js";import{I as me}from"./InlineFilterDisplay-3cbfa102.js";import{B as T}from"./nivo-bar.es-2641eac1.js";import{p as I}from"./chartDefaults-9fc07b21.js";import{P as he}from"./ProfileHeader-c87f1ed2.js";import"./Select-a46439a5.js";import"./Box-41e6311c.js";import"./Chip-43f5011e.js";import"./Search-98c586a2.js";import"./Badge-2317b911.js";import"./TextField-784e087d.js";import"./Sort-e8365fb4.js";import"./entryName-760b6307.js";import"./LPU-c3fa7122.js";import"./LinearProgress-711d180c.js";import"./mycollection-0ec86312.js";import"./BeltStripe-b51320dc.js";import"./BeltIcon-e5f56d35.js";import"./Launch-66cbe510.js";import"./PhotoCamera-84ab4470.js";import"./Autocomplete-a1b7a551.js";import"./index-21a661c8.js";import"./Dialog-26a2e986.js";import"./ListItem-bd2ef36b.js";import"./VideocamOutlined-2a8dda88.js";import"./FormGroup-1f0aa7bd.js";import"./FieldValue-0a844960.js";import"./LoadingDisplay-bc8de47a.js";import"./AccordionSummary-2c85c23e.js";import"./index-6f24ec28.js";import"./index-27bccb7a.js";import"./AccordionActions-32de4b55.js";import"./ImageViewer-8193538c.js";import"./Link-c5d110c5.js";import"./ContentCopy-e30bac7f.js";import"./nivo-legends.es-17c337c6.js";import"./CopyProfileLinkButton-8c4b0fc8.js";import"./ToggleButtonGroup-9667f93a.js";import"./Link-a11d42af.js";var P={},xe=W;Object.defineProperty(P,"__esModule",{value:!0});var H=P.default=void 0,ue=xe(N()),ge=e;H=P.default=(0,ue.default)((0,ge.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");function we(){const{compact:i,setCompact:n,setExpanded:p}=x.useContext(R),l=x.useCallback(()=>{n(!i),p(null)},[i,n,p]);return e.jsx(z,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:e.jsx(V,{onClick:l,children:e.jsx(H,{color:i?"secondary":"inherit"})})})}function fe({lockCollection:i,userText:n,collectionBarHeight:p}){const l=i.own?i.own.length:0,u=i.picked?i.picked.length:0,r=i.recordedLocks?i.recordedLocks.length:0,a=i.wishlist?i.wishlist.length:0,t=l+u+r+a?{own:l,picked:u,recorded:r,wishlist:a}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},h={own:250,picked:280,recorded:260,wishlist:100},o={own:Math.min(s.own,t.own),picked:Math.min(s.picked,t.picked),recorded:Math.min(s.recorded,t.recorded),wishlist:Math.min(s.wishlist,t.wishlist)},d={own:t.own>s.own?0:s.own-o.own,picked:t.picked>s.picked?0:s.picked-o.picked,recorded:t.recorded>s.recorded?0:s.recorded-o.recorded,wishlist:t.wishlist>s.wishlist?0:s.wishlist-o.wishlist},g={own:2,picked:2,recorded:2,wishlist:2},A={own:Math.max(t.own-(o.own+d.own+g.own),0),picked:Math.max(t.picked-(o.picked+d.picked+g.picked),0),recorded:Math.max(t.recorded-(o.recorded+d.recorded+g.recorded),0),wishlist:Math.max(t.wishlist-(o.wishlist+d.wishlist+g.wishlist),0)},y={own:Math.min(h.own-t.own,h.own-s.own-g.own),picked:Math.min(h.picked-t.picked,h.picked-s.picked-g.picked),recorded:Math.min(h.recorded-t.recorded,h.recorded-s.recorded-g.recorded),wishlist:Math.min(h.wishlist-t.wishlist,h.wishlist-s.wishlist-g.wishlist)},k=["own","picked","recorded","wishlist"],S=k.map((w,f)=>({row:k[f],"Average A":o[w],"Average B":d[w],Average:g[w],USER:A[w],"Top 10":y[w]})),{width:C}=j(),B=C<=560,L=p,M=B?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},b=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],c=i?[{title:n,color:"#3c90c5",width:"14px"}]:[];c.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const v=({items:w})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),w.map(f=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:f.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:f.width},children:f.title})]},f.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(D.Fragment,{children:[e.jsx("div",{style:{height:L},children:e.jsx(T,{data:S,keys:["Average A","Average B","Average","USER","Top 10"],theme:I,indexBy:"row",margin:M,padding:.2,valueScale:{type:"linear"},colors:b,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(v,{items:c})]})}function ve({beltData:i}){const{width:n}=j(),p=n<=360,l=n<=560,u=175,r=l?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},a=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],m=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:u,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(T,{data:i,margin:r,padding:.15,colors:t=>a[t.index%a.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:I,isInteractive:!1,enableLabel:!0,label:t=>t.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:t=>m[t.index%m.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function je({profile:i,entries:n}){const{userId:p}=F(),{user:l}=x.useContext(E),u=p===(l==null?void 0:l.uid)?"You":"User",r=x.useMemo(()=>{const M=U.concat("Unranked"),b=n.map(({belt:c})=>c.includes("Black")?"Black":c).reduce((c,v)=>(c[v]||(c[v]=0),c[v]++,c),{});return M.map(c=>({id:c,label:c,count:b[c]||0,value:b[c]||0}))},[n]),{isMobile:a}=j(),m=a?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:t}=j(),s=t<=360,h=t<=395,o=t<=428,d=t<=560,y={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...d?{}:{display:"flex"}},k=d?"100%":"50%",S=d?"100%":"50%",C=s?200:d?210:180,B=d?160:170,L=s?150:170;return e.jsx(_,{style:m,sx:{paddingBottom:5},children:e.jsx(q,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:y,children:[e.jsx("div",{style:{width:k,verticalAlign:"top",height:C},children:e.jsx(fe,{lockCollection:i,userText:u,collectionBarHeight:B})}),e.jsx("div",{style:{width:S,height:L,marginTop:"0px"},children:e.jsx(ve,{beltData:r})})]})})})})}function ke({profile:i,owner:n}){const{compact:p}=x.useContext(R),[l,u]=x.useState(!1),{visibleEntries:r=[]}=x.useContext(Q),a=x.useDeferredValue(l);return e.jsx(D.Fragment,{children:e.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(he,{profile:i,page:"collection",owner:n}),e.jsx(me,{profile:i,collectionType:"locks"}),e.jsx(je,{profile:i,entries:r}),p?e.jsx(ce,{entries:r}):r.map(m=>e.jsx(pe,{entry:m,expanded:m.id===a,onExpand:u},m.id))]})})}function wt(){const{user:i}=x.useContext(E),{userId:n}=F(),{getProfile:p}=x.useContext(G),{isMobile:l}=j(),u=x.useCallback(async()=>{try{const o=await p(n);if(o){const d=o.displayName?o.displayName.toLowerCase().endsWith("s")?`${o.displayName}'`:`${o.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${d} Profile`}return o}catch(o){return console.error("Error loading profile.",o),null}},[p,n]),{data:r={},loading:a,error:m}=ne({loadFn:u}),t=x.useMemo(()=>{if(a||!r)return[];const o=new Set(O.locks.getCollected(r));return Y.filter(d=>o.has(d.id))},[r,a]),s=e.jsxs(D.Fragment,{children:[e.jsx(ee,{label:"Collection"}),e.jsx(ie,{}),e.jsx(oe,{sortValues:te}),!l&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(we,{})]}),h=a?"Loading...":"Profile";return e.jsx(X,{filterFields:Z,children:e.jsx(se,{allEntries:t,profile:r,children:e.jsxs(re,{children:[e.jsx($,{title:h,extras:s}),a&&e.jsx(ae,{}),!a&&r&&!m&&e.jsx(ke,{profile:r,owner:i&&i.uid===n}),!a&&r&&!m&&t.length===0&&e.jsx(de,{}),!a&&(!r||m)&&e.jsx(le,{}),e.jsx(K,{}),e.jsx(J,{feature:"profile"})]})})})}export{wt as default};
