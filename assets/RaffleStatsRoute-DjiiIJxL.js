import{b as z,r as d,j as t,L as H,u as D,d as P,R as w,e as $,N as B,h as M,T as Y}from"./index-DGj5yssS.js";import{c as E}from"./filterFields-qLd20gXI.js";import{R as G}from"./ReportButton-BnkF6Mcc.js";import{R as I,A as O}from"./AdminRoleButton-BqNrF9tQ.js";import{R as V}from"./RaffleDataProvider-BaqQf0BX.js";import{R as _}from"./RaffleHeader-BCdjur7F.js";import{L as q}from"./LoadingDisplay-gFXJTLv9.js";import{u as J}from"./useData-CJQKLWEb.js";import{u as K}from"./usePageTitle-B5n799L2.js";import{o as Q,j as U,s as X}from"./dataUrls-DkJe4Pqg.js";import{A as W}from"./AdminStatsTableSort-C1p4-an3.js";import{D as Z}from"./DataContext-GGjZCg5t.js";import{R as tt,a as et}from"./RaffleYOYLines-B7_2ItK_.js";import{R as st}from"./RaffleHiddenDialog-DYs_DDDn.js";import{R as nt}from"./RaffleSubHead-C2rD99HU.js";import"./index-D1-yH2Xi.js";import"./setDeep-J6HEwWhX.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-DiVEtopt.js";import"./TableRow-B7KgGxkX.js";import"./nivo-line-CgKjvv5g.js";import"./nivo-legends-DXQYfQj_.js";import"./nivo-axes-QhWYt5a6.js";import"./uniq-D8VRA9Si.js";import"./line-BjLFF9NN.js";import"./adminChartDefaults-CBhS7ojG.js";import"./Dialog-CGXqwy-M.js";const at=({data:p,tableWidth:l,nameLength:f})=>{const g=z(),{potViewsById:o}=p,{getPotFromId:r}=d.useContext(Z),j=[{id:"title",align:"left",name:"Title"},{id:"donors",name:"Donors",align:"center"},{id:"tickets",name:"Tickets",align:"center"}],u=!0,[a,R]=d.useState("title"),[S,y]=d.useState(!0),c=o.data.map(n=>{var F;const e=r(n.id);if(!e)return null;let m=e!=null&&e.title?e.title.substring(0,f):`unknown (${n.id})`;return m=((F=e==null?void 0:e.title)==null?void 0:F.length)<f||!(e!=null&&e.title)?m:m+"...",{...n,...e,title:m}}).filter(n=>n).sort((n,e)=>{switch(a){case"title":return n[a].localeCompare(e[a]);case"donors":return parseInt(e[a])-parseInt(n[a])||n.title.localeCompare(e.title);case"tickets":return parseInt(e[a])-parseInt(n[a])||n.views-e.views;default:return parseInt(e[a])-parseInt(n[a])||n.title.localeCompare(e.title)}}),x=(S?c:c.reverse()||[]).map(n=>n.donors&&n.donors>0?{...n}:{...n,donors:0,tickets:0}),b={columns:j,data:x},k=d.useCallback((n,e)=>{const m=c.find(L=>L.title===e),F=m==null?void 0:m.title.replace(/[\s/]/g,"_").replace(/\W/g,"");return n==="title"?t.jsx(H,{onClick:()=>g(`/rafl/?id=${m.id}&name=${F}`),style:{color:"#fff"},children:e}):e},[g,c]),{width:h}=D(),N=h<=360,T=h<=395,A=h<=428,s=h<=560,i=h<=820,C=N||T?".8rem":A?".9rem":".95rem";return t.jsx("div",{children:t.jsx(W,{tableData:b,tableWidth:l,fontSize:C,sortable:u,sort:a,setSort:R,ascending:S,setAscending:y,linkFunction:k})})},it=({tableWidth:p,nameLength:l})=>{const{allCharities:f}=d.useContext(I),g=[{id:"displayName",align:"left",name:"Charity Name"},{id:"donors",name:"Donors",align:"center"},{id:"donations",name:"Raised",align:"center"}],o=!0,[r,j]=d.useState("name"),[u,a]=d.useState(!0),R=f.sort((s,i)=>{switch(r){case"name":return s.name.localeCompare(i.name);case"donors":return i[r]-s[r];case"donations":return i[r]-s[r];default:return s.name.localeCompare(i.name)}}),y=(u?R:R.reverse()).map(s=>{var C;let i=s!=null&&s.name?s==null?void 0:s.name.substring(0,l):"unknown";return i=((C=s==null?void 0:s.name)==null?void 0:C.length)<l?i:i+"...",s.donations&&s.donations>0?{...s,donations:`$${s.donations}`,displayName:i}:{...s,displayName:i}}),c={columns:g,data:y},v=d.useCallback((s,i)=>i,[]),{width:x}=D(),b=x<=360,k=x<=395,h=x<=428,N=x<=560,T=x<=820,A=b?".8rem":k?".85rem":h?".9rem":".95rem";return t.jsxs("div",{children:[t.jsx("div",{style:{justifyItems:"center",marginBottom:20},children:t.jsx("div",{style:{width:400}})}),t.jsx(W,{tableData:c,tableWidth:p,fontSize:A,sortable:o,sort:r,setSort:j,ascending:u,setAscending:a,linkFunction:v})]})};function ot(){K("RAFL Report");const{data:p,loading:l,error:f}=J({urls:rt}),{siteFullNew:g,raflResponseDetails:o,raflSiteStats2025:r}=p||{},{width:j,isMobile:u}=D(),a=l?"--":"(updated: "+P(o==null?void 0:o.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+")",R={margin:"26px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},S={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},y=u?"8px 8px 32px 8px":"24px 24px 32px 24px",c=j<=560?j-20:650,v=u?24:48;return l?t.jsx(q,{}):f?null:t.jsxs(w.Fragment,{children:[t.jsxs("div",{style:{minWidth:"320px",maxWidth:700,height:"100%",padding:y,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto"},children:[t.jsx(tt,{}),t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#fff"},children:t.jsx("span",{style:{fontSize:"0.8rem",marginTop:0},children:a})}),t.jsx(et,{data:o==null?void 0:o.detailedData}),t.jsx("div",{style:R,children:"Pots"}),t.jsx(at,{data:r,tableWidth:c,nameLength:v}),t.jsx("div",{style:S,children:"Charities"}),t.jsx(it,{data:g,tableWidth:c,nameLength:v})]}),t.jsx(st,{})]})}const rt={siteFullNew:X,raflResponseDetails:U,raflSiteStats2025:Q};function zt(){const{isMobile:p}=D(),{allPots:l}=d.useContext(I),f=t.jsxs(w.Fragment,{children:[!p&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(G,{active:!1}),t.jsx(O,{})]});return t.jsx($,{filterFields:E,children:t.jsx(V,{allEntries:l,children:t.jsxs(w.Fragment,{children:[t.jsx(B,{title:"RAFL Stats",extras:f}),t.jsx(_,{page:"stats"}),t.jsx(nt,{text:"Stats!"}),t.jsx(ot,{}),t.jsx(M,{}),t.jsx(Y,{feature:"raflStats"})]})})})}export{zt as default};
