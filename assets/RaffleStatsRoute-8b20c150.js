import{b as z,r as d,j as t,u as D,d as H,R as w,e as P,N as $,h as B,T as M}from"./index-c09e26fd.js";import{r as Y}from"./filterFields-d8b64f7c.js";import{R as E}from"./ReportButton-b595dec3.js";import{R as I,A as G}from"./AdminRoleButton-a8ce33ea.js";import{R as O}from"./RaffleDataProvider-bd50accf.js";import{R as V}from"./RaffleHeader-8fdbaf07.js";import{L as _}from"./LoadingDisplay-34f69cdd.js";import{u as q}from"./useData-38bf6d20.js";import{u as J}from"./usePageTitle-f50b6888.js";import{s as K,i as Q,m as U}from"./dataUrls-88e95518.js";import{A as W}from"./AdminStatsTableSort-053a2cb2.js";import{D as X}from"./DataContext-a7a63124.js";import{L as Z}from"./Link-c4fb3a2d.js";import{R as tt,a as et}from"./RaffleYOYLines-25e9bdf8.js";import{R as st}from"./RaffleHiddenDialog-cc151d66.js";import{R as nt}from"./RaffleSubHead-374fe77f.js";import"./rankingRequestData-d3ef79e5.js";import"./index-53fb6388.js";import"./setDeep-8470365e.js";import"./LPU-c3fa7122.js";import"./LinearProgress-d6facef2.js";import"./useDocumentTitle-910715cd.js";import"./TableRow-f99aad0e.js";import"./nivo-line.es-c8b0b4bf.js";import"./nivo-legends.es-9a06d38e.js";import"./_createSet-9da7b940.js";import"./index-a4924b09.js";import"./nivo-axes.es-32d13f50.js";import"./line-9dcb4b87.js";import"./path-a545ef0e.js";import"./adminChartDefaults-c1f0e13b.js";import"./Dialog-346a6e26.js";const it=({data:f,tableWidth:l,nameLength:p})=>{const g=z(),{potViewsById:r}=f,{getPotFromId:o}=d.useContext(X),j=[{id:"title",align:"left",name:"Title"},{id:"donors",name:"Donors",align:"center"},{id:"tickets",name:"Tickets",align:"center"}],u=!0,[i,R]=d.useState("title"),[S,y]=d.useState(!0),m=r.data.map(n=>{var F;const e=o(n.id);if(!e)return null;let c=e!=null&&e.title?e.title.substring(0,p):`unknown (${n.id})`;return c=((F=e==null?void 0:e.title)==null?void 0:F.length)<p||!(e!=null&&e.title)?c:c+"...",{...n,...e,title:c}}).filter(n=>n).sort((n,e)=>{switch(i){case"title":return n[i].localeCompare(e[i]);case"donors":return parseInt(e[i])-parseInt(n[i])||n.title.localeCompare(e.title);case"tickets":return parseInt(e[i])-parseInt(n[i])||n.views-e.views;default:return parseInt(e[i])-parseInt(n[i])||n.title.localeCompare(e.title)}}),x=(S?m:m.reverse()||[]).map(n=>n.donors&&n.donors>0?{...n}:{...n,donors:0,tickets:0}),b={columns:j,data:x},k=d.useCallback((n,e)=>{const c=m.find(L=>L.title===e),F=c==null?void 0:c.title.replace(/[\s/]/g,"_").replace(/\W/g,"");return n==="title"?t.jsx(Z,{onClick:()=>g(`/rafl/?id=${c.id}&name=${F}`),style:{color:"#fff"},children:e}):e},[g,m]),{width:h}=D(),N=h<=360,T=h<=395,A=h<=428,s=h<=560,a=h<=820,C=N||T?".8rem":A?".9rem":".95rem";return t.jsx("div",{children:t.jsx(W,{tableData:b,tableWidth:l,fontSize:C,sortable:u,sort:i,setSort:R,ascending:S,setAscending:y,linkFunction:k})})},at=({tableWidth:f,nameLength:l})=>{const{allCharities:p}=d.useContext(I),g=[{id:"displayName",align:"left",name:"Charity Name"},{id:"donors",name:"Donors",align:"center"},{id:"donations",name:"Raised",align:"center"}],r=!0,[o,j]=d.useState("name"),[u,i]=d.useState(!0),R=p.sort((s,a)=>{switch(o){case"name":return s.name.localeCompare(a.name);case"donors":return a[o]-s[o];case"donations":return a[o]-s[o];default:return s.name.localeCompare(a.name)}}),y=(u?R:R.reverse()).map(s=>{var C;let a=s!=null&&s.name?s==null?void 0:s.name.substring(0,l):"unknown";return a=((C=s==null?void 0:s.name)==null?void 0:C.length)<l?a:a+"...",s.donations&&s.donations>0?{...s,donations:`$${s.donations}`,displayName:a}:{...s,displayName:a}}),m={columns:g,data:y},v=d.useCallback((s,a)=>a,[]),{width:x}=D(),b=x<=360,k=x<=395,h=x<=428,N=x<=560,T=x<=820,A=b?".8rem":k?".85rem":h?".9rem":".95rem";return t.jsxs("div",{children:[t.jsx("div",{style:{justifyItems:"center",marginBottom:20},children:t.jsx("div",{style:{width:400}})}),t.jsx(W,{tableData:m,tableWidth:f,fontSize:A,sortable:r,sort:o,setSort:j,ascending:u,setAscending:i,linkFunction:v})]})};function rt(){J("RAFL Report");const{data:f,loading:l,error:p}=q({urls:ot}),{siteFullNew:g,raflResponseDetails:r,raflSiteStats2025:o}=f||{},{width:j,isMobile:u}=D(),i=l?"--":"(updated: "+H(r==null?void 0:r.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+")",R={margin:"26px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},S={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},y=u?"8px 8px 32px 8px":"24px 24px 32px 24px",m=j<=560?j-20:650,v=u?24:48;return l?t.jsx(_,{}):p?null:t.jsxs(w.Fragment,{children:[t.jsxs("div",{style:{minWidth:"320px",maxWidth:700,height:"100%",padding:y,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto"},children:[t.jsx(tt,{}),t.jsx("div",{style:{width:"100%",textAlign:"center",color:"#fff"},children:t.jsx("span",{style:{fontSize:"0.8rem",marginTop:0},children:i})}),t.jsx(et,{data:r==null?void 0:r.detailedData}),t.jsx("div",{style:R,children:"Pots"}),t.jsx(it,{data:o,tableWidth:m,nameLength:v}),t.jsx("div",{style:S,children:"Charities"}),t.jsx(at,{data:g,tableWidth:m,nameLength:v})]}),t.jsx(st,{})]})}const ot={siteFullNew:K,raflResponseDetails:Q,raflSiteStats2025:U};function Mt(){const{isMobile:f}=D(),{allPots:l}=d.useContext(I),p=t.jsxs(w.Fragment,{children:[!f&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(E,{active:!1}),t.jsx(G,{})]});return t.jsx(P,{filterFields:Y,children:t.jsx(O,{allEntries:l,children:t.jsxs(w.Fragment,{children:[t.jsx($,{title:"RAFL Stats",extras:p}),t.jsx(V,{page:"stats"}),t.jsx(nt,{text:"Stats!"}),t.jsx(rt,{}),t.jsx(B,{}),t.jsx(M,{feature:"raflStats"})]})})})}export{Mt as default};
