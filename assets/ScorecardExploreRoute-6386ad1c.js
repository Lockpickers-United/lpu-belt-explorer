import{r as i,F as M,au as O,j as e,u as X,R as T,b as de,$ as ue,J as N,I as H,ac as pe,aj as me,d as V,as as he,bN as fe,bO as xe,D as be,N as ke,e as ge,a0 as ye,h as je,T as Be}from"./index-d98bdbe2.js";import{L as Ce}from"./LoadingDisplay-8d359cd1.js";import{u as ve}from"./useData-54c53f6a.js";import{u as Se}from"./usePageTitle-259386f3.js";import{_ as Ae,d as De,a as we,l as Pe}from"./lockStats-b31b2958.js";import{b as Le,c as Ue,p as ze,a as Fe,s as Ie,d as Ee,k as Oe,m as Re}from"./dataUrls-fb4714fd.js";import{E as Me}from"./ErrorMessage-9d8a572a.js";import{b as R,a as Te}from"./chartDefaults-270235e0.js";import{L as z}from"./Link-3a7ecf21.js";import{D as Z,f as We}from"./DataContext-8a8b1b89.js";import{r as $}from"./index-e11f2431.js";import{e as G}from"./entryName-ee7a87b8.js";import{B as Ne}from"./BeltStripeMini-c0d61264.js";import{a as ee,b as F,c as _,d as q,T as He,e as Y}from"./TableRow-f9cc6022.js";import{V as Ve}from"./ViewFilterButtons-31e66038.js";import{b as $e}from"./sortFields-b1bde6f9.js";import{F as Ge,I as _e,S as qe}from"./Select-7f5e1758.js";import{C as Ye}from"./Collapse-4abecaf7.js";import{b as Je}from"./filterFields-1992cf68.js";import{c as Ke}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-dff41364.js";import"./useDocumentTitle-ee8fd281.js";import"./nivo-legends.es-76a6416d.js";import"./index-8181f985.js";import"./line-d03ba58b.js";import"./Sort-ff4ce773.js";import"./Chip-feca187f.js";import"./FilterAlt-29e92fee.js";import"./Box-51bfdf45.js";import"./LockListContext-41733531.js";import"./ToggleButtonGroup-09890007.js";import"./Cancel-e2a70eea.js";import"./rankingRequestData-d3ef79e5.js";const Qe={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},Xe={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},U={discord:Qe,reddit:Xe};function Ze({data:c}){const{scorecardStats:x,discordRoleCounts:d}=c,{userCounts:o}=x,{filters:m,addFilter:h,removeFilters:S}=i.useContext(M),w=U.reddit.Total-o.totalUsers,n=i.useMemo(()=>{const p={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:o.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:w}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},v={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:o.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:o.totalUsers-o.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},E={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:o.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:o.scorecardUsers-o.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},se={parent:"Scorecard Users",data:Object.keys(o.belts).sort((s,b)=>O(s,b)).map(s=>({id:s,label:s,value:o.belts[s]})),colors:R,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},oe={parent:"Imported Belts",data:Object.keys(o.dans).sort((s,b)=>parseInt(s)-parseInt(b)).map(s=>({id:J(s),label:J(s),value:o.dans[s]})),colors:K,description:"Dan Breakdown"},ae={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:U.discord.Total},{id:"Reddit",label:"Reddit",value:U.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},W=Object.keys(d).reduce((s,b)=>{const ce=b.replace(" Belt","").trim();return s[ce]=d[b],s},{}),le={parent:"Other LPU Pickers",data:Object.keys(W).filter(s=>!s.includes("Dan")).sort((s,b)=>O(s,b)).map(s=>{const b=s==="Black"?"Black Belt":s;return{id:b,label:b,value:W[s]}}),colors:R,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(z,{onClick:()=>f("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},ne={parent:"Discord",data:Object.keys(d).filter(s=>s.includes("Dan")).sort((s,b)=>parseInt(s)-parseInt(b)).map(s=>({id:s,label:s,value:d[s]})),colors:K,description:"Discord Dan Breakdown"},ie={parent:"Other LPU Pickers",data:Object.keys(U.reddit).filter(s=>s!=="Total").sort((s,b)=>O(s,b)).map(s=>{const b=s==="Black"?"Black Belts":s;return{id:b,label:b,value:U.reddit[s]}}),colors:R,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(z,{onClick:()=>f("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:p,"LPUbelts Users":v,"Scorecard Users":E,"Imported Belts":se,Black:oe,"Other LPU Pickers":ae,Discord:le,"Black Belt":ne,Reddit:ie}},[d,w,o]),y=m!=null&&m.dataset&&n[m==null?void 0:m.dataset]?m==null?void 0:m.dataset:"pickerData",[k,f]=i.useState(y),I=n[k].data,A=n[k].data.reduce((p,v)=>p+v.value,0),P=i.useCallback(p=>{n[p.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",h("dataset",p.id,!0),f(p.id)},200))},[h,n]),j=i.useCallback(()=>{n[n[k].parent].parent?h("dataset",n[k].parent,!0):S(["dataset"]),f(n[k].parent)},[h,n,k,S]),D=i.useCallback((p,v)=>{n[p.id]&&(v.currentTarget.style.cursor="pointer")},[n]),{width:B}=X(),L=B<=360,g=B<=395,l=B<=428,a=B<=560,u={top:30,right:0,bottom:30,left:0};let t=320;L?t=175:g?t=180:l?t=230:a&&(t=240);const r="1.0rem",C=a?5:4,te=a?10:8,re=a?0:8;return e.jsxs(T.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:n[k].description}),e.jsxs("div",{style:{height:t,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(Ae,{data:I,theme:Te,colors:n[k].colors,margin:u,startAngle:n[k].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:C,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:p=>p.label+": "+Math.round(p.value/A*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:re,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:te,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:p=>{P(p)},onMouseEnter:(p,v)=>{D(p,v)},tooltip:p=>{const v=(p.datum.arc.angleDeg>C,p.datum.label+": "),E=p.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:a?"none":"block"},children:e.jsxs("div",{children:[v,E]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:t/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:n[k].parent&&e.jsx(z,{onClick:j,style:{color:"#ccc",cursor:"pointer",fontSize:r},children:"back"})})]},"pickPie")]})}function J(c){const x=["st","nd","rd","th"];return c+""+x[Math.min(4,parseInt(c))-1]}const K=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function Q({entry:c,index:x,collapse:d=!1}){const o=de(),h=G(c).replace(/[\s/]/g,"_").replace(/\W/g,""),S=i.useCallback(n=>{const y=`/locks?tab=search&search=${n.id}&id=${n.id}&name=${h}`;o(y)},[o,h]),w=c.belt==="Unranked"?"#bbb":"#fff";return e.jsxs(ee,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[e.jsx(F,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:e.jsx(Ne,{value:c.belt})}),e.jsx(F,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:e.jsx(z,{onClick:()=>S(c),style:{color:w},children:G(c)})})}),e.jsx(F,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:c.currentPicks})]},x)}function et(){var l;const{visibleEntries:c=[]}=i.useContext(Z),{filters:x,addFilter:d}=i.useContext(M),{userBelt:o="All Belts",sort:m}=x,[h,S]=i.useState(m);i.useEffect(()=>{S(!!m)},[m]);const w=60;let n=((l=c.find(a=>a.displayRank===w))==null?void 0:l.currentPicks)||0;n=n>2?n:0;const y=i.useMemo(()=>c.filter(a=>a.currentPicks>=n),[c,n]),k=i.useMemo(()=>c.filter(a=>a.currentPicks<n),[c,n]),f=i.useMemo(()=>["All Belts",...ue],[]),I=i.useCallback(()=>{const a=f.findIndex(t=>t===o),u=a<f.length-1?a+1:0;d("userBelt",f[u],!0)},[d,f,o]),A=i.useCallback(()=>{const a=f.findIndex(t=>t===o),u=a>0?a-1:f.length-1;d("userBelt",f[u],!0)},[d,f,o]),[P,j]=i.useState(!1),D=i.useCallback(()=>j(!1),[]),B=i.useCallback(()=>j(!0),[]),L=i.useCallback(a=>{d("userBelt",a.target.value,!0),D()},[d,D]),g=i.useCallback(()=>{S(!h)},[h]);return e.jsxs(T.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(N,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(H,{onClick:A,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(De,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(Ge,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(_e,{style:{color:"#bbb"},children:"User Belt"}),e.jsx(qe,{id:"beltSelect",value:o||"All Belts",label:"Brand",open:P,onClose:D,onOpen:B,onChange:L,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:f.map((a,u)=>e.jsx(pe,{value:f[u],children:f[u]},u))})]})}),e.jsx(N,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(H,{onClick:I,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(we,{})})})]})}),e.jsx(Ve,{sortValues:$e,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(_,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(q,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(He,{children:e.jsxs(ee,{style:{padding:"0px",fontWeight:700},children:[e.jsx(F,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(F,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx(Y,{children:y.map((a,u)=>e.jsx(Q,{entry:a,index:u},u))})]})}),e.jsx(Ye,{in:!!h,timeout:"auto",unmountOnExit:!0,children:e.jsx(_,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(q,{style:{backgroundColor:"#1c1c1c"},children:e.jsx(Y,{children:k.map((a,u)=>e.jsx(Q,{entry:a,index:u},u))})})})})]})}),k.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(z,{onClick:g,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!h&&"Show More"||"Show Less"})})})]})}function tt({data:c}){const{width:x}=X(),o=x<560?"8px 8px 32px 8px":"24px 24px 32px 24px",m={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},h={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:o,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:h,children:"User Drilldown"}),e.jsx(Ze,{data:c}),e.jsx("div",{style:m,children:"Scorecard Locks"}),e.jsx(et,{data:c})]})}function rt({children:c,allEntries:x,scorecardEntries:d,profile:o}){const{filters:m}=i.useContext(M),{search:h,id:S,tab:w,name:n,sort:y,image:k,expandAll:f,dataset:I,...A}=m,{userBelt:P}=A,j=i.useCallback(g=>x.find(l=>l.id===g),[x]),D=i.useMemo(()=>Object.keys(d).map(g=>{var a,u,t;const l=j(g);return l?{...d[g],userBelt:Object.keys(d[g].scorecardPicks),currentPicks:d[g].scorecardPicks[P||"All Belts"],...l,makes:l.makeModels[0].make?l.makeModels.map(({make:r})=>r):l.makeModels[0].model,fuzzy:$(l.makeModels.map(({make:r,model:C})=>[r,C]).flat().filter(r=>r).concat([l.version,l.notes,l.belt]).join(",")),content:[(a=l.media)!=null&&a.some(r=>!r.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(u=l.media)!=null&&u.some(r=>r.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((t=l.links)==null?void 0:t.length)>0?"Has Links":"No Links",me[l.belt].danPoints>0?"Worth Dan Points":void 0,V(l.lastUpdated).isAfter(V().subtract(1,"days"))?"Updated Recently":void 0,l.belt.startsWith("Black")?"Is Black":void 0,l.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(r=>r),collection:he.locks.map.map(r=>o&&o[r.key]&&o[r.key].includes(l.id)?r.label:"Not "+r.label),collectionSaves:Ke[l.id]||0,simpleBelt:l.belt.replace(/\s\d/g,"")}:null}).filter(g=>g),[j,o,d,P]),B=i.useMemo(()=>{const g=Object.keys(A).map(t=>{const r=A[t];return Array.isArray(r)?r.map(C=>({key:t,value:C})):{key:t,value:r}}).flat(),l=D.filter(t=>g.every(({key:r,value:C})=>Array.isArray(t[r])?t[r].includes(C):t[r]===C)),a=h&&l.find(t=>t.id===h);let u=l;return a?u=[a]:h&&(u=We.go($(h),l,{keys:st,threshold:-25e3}).map(t=>({...t.obj,score:t.score}))),y?u.sort((t,r)=>{if(y==="beltAscending")return fe(t.belt,r.belt)||r.currentPicks-t.currentPicks||t.fuzzy.localeCompare(r.fuzzy);if(y==="beltDescending")return xe(t.belt,r.belt)||r.currentPicks-t.currentPicks||t.fuzzy.localeCompare(r.fuzzy);if(y==="alphaAscending")return t.fuzzy.localeCompare(r.fuzzy);if(y==="alphaDescending")return r.fuzzy.localeCompare(t.fuzzy)}):u.sort((t,r)=>r.currentPicks-t.currentPicks||t.fuzzy.localeCompare(r.fuzzy)).map((t,r)=>({...t,displayRank:r+1}))},[A,D,h,y]),L=i.useMemo(()=>({allEntries:x,visibleEntries:B,getEntryFromId:j,expandAll:f,profile:o}),[x,j,B,f,o]);return e.jsx(Z.Provider,{value:L,children:c})}const st=["fuzzy"];function Tt(){const{lockCollection:c}=i.useContext(be);Se("Explore Scorecard");const{data:x,loading:d,error:o,errorMessage:m}=ve({urls:ot});return e.jsxs(T.Fragment,{children:[e.jsx(ke,{title:"Explore Scorecard"}),o&&e.jsx(Me,{errorMessage:m}),d&&e.jsx(Ce,{}),!d&&!o&&!!x&&e.jsx(ge,{filterFields:Je,children:e.jsx(rt,{allEntries:ye,scorecardEntries:x.scorecardStats.lockCountsByUserBelt,profile:c,children:e.jsx(tt,{data:{...x,lockStats:Pe}})})}),e.jsx(je,{}),e.jsx(Be,{feature:"stats"})]})}const ot={brandDistribution:Le,collectionsStatsCurrent:Ue,popularAreas:ze,redditGrowth:Fe,siteFullNew:Ie,pickStatsData:Ee,scorecardStats:Oe,discordRoleCounts:Re};export{Tt as default};
