import{h as w,r as l,j as e,H as x,am as R,an as M,ao as P,ap as D,f as _,G as E,q as B,R as b,T as I,y as N,z as W,Z as S,I as y,aj as A,$ as O,a0 as $,a1 as q,J as H,ak as z,al as U,a3 as G}from"./index-1d85af2e.js";import{a as L}from"./InputLabel-8d2a18c9.js";import{d as Y,B as J,a as K}from"./Sort-c004c450.js";import{T as V,a as T,b as j,c as Z,d as Q,e as X}from"./TableRow-847ee51f.js";import{L as ee,d as v,T as te,I as re}from"./Search-fe7a980e.js";import{A as se}from"./Autocomplete-9fc1b42a.js";function oe(){const[s,t]=w(),r=s.get("sort"),n={border:0,padding:"4px 12px",backgroundColor:"#000"},i=l.useCallback(o=>()=>{o&&o!==r?s.set("sort",o):s.delete("sort"),t(s)},[s,t,r]);return e.jsx(V,{children:e.jsxs(T,{children:[e.jsx(j,{align:"center",style:n,children:e.jsx(x,{title:"Sort Default",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{style:{cursor:"pointer"},onClick:i(),children:"#"})})}),e.jsx(j,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),e.jsx(j,{align:"center",style:n,children:e.jsx(x,{title:"Sort by Own",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{color:r==="own"?"secondary":void 0,onClick:i("own"),style:{cursor:"pointer"}})})}),e.jsx(j,{align:"center",style:n,children:e.jsx(x,{title:"Sort by Picked",arrow:!0,disableFocusListener:!0,children:e.jsx(M,{color:r==="picked"?"secondary":void 0,onClick:i("picked"),style:{cursor:"pointer"}})})}),e.jsx(j,{align:"center",style:n,children:e.jsx(x,{title:"Sort by Recorded",arrow:!0,disableFocusListener:!0,children:e.jsx(P,{color:r==="recorded"?"secondary":void 0,onClick:i("recorded"),style:{cursor:"pointer"}})})}),e.jsx(j,{align:"center",style:n,children:e.jsx(x,{title:"Sort by Wishlist",arrow:!0,disableFocusListener:!0,children:e.jsx(D,{color:r==="wishlist"?"secondary":void 0,onClick:i("wishlist"),style:{cursor:"pointer"}})})})]})})}function f({align:s="center",user:t,leader:r,value:n}){const{displayName:i,id:o}=r,d=(t==null?void 0:t.uid)===o,c=i?"#eee":"#bbb",u=d?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:c},a={color:c};return e.jsx(j,{align:s,sx:a,style:u,children:n})}function ae({index:s,leader:t,user:r,highlighted:n,scrollableRef:i}){const o=l.useRef(),[d,c]=l.useState(!1),u=n?{backgroundColor:"#333"}:{};return l.useEffect(()=>{n&&o&&!d&&setTimeout(()=>{c(!0),i.current.scrollTo({top:o.current.offsetTop-75,behavior:"smooth"})},0)},[n,i,d]),e.jsxs(T,{ref:o,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":n?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...u},children:[e.jsx(f,{leader:t,user:r,value:s+1}),e.jsx(f,{leader:t,user:r,value:t.displayName||"Anonymous",align:"left"}),e.jsx(f,{leader:t,user:r,value:t.own}),e.jsx(f,{leader:t,user:r,value:t.picked}),e.jsx(f,{leader:t,user:r,value:t.recorded}),e.jsx(f,{leader:t,user:r,value:t.wishlist})]},t.id)}function ne({data:s,loading:t}){const r=_(),{user:n}=l.useContext(E),i=l.useRef(),{highlightedUser:o,sort:d}=l.useMemo(()=>{const a=B.parse(r.search);return{highlightedUser:a.user,sort:a.sort&&ie.includes(a.sort)?a.sort:void 0}},[r.search]),c=l.useMemo(()=>t?le:d?s.data.toSorted((a,h)=>h[d]-a[d]):s.data,[d,t,s]),u=t?"####-##-## ##:##":Y(s.metadata.updatedDateTime).format("MM/DD/YY hh:mm");return e.jsxs(b.Fragment,{children:[t&&e.jsx(ee,{variant:"indeterminate",color:"secondary"}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(Z,{sx:{height:"78vh",backgroundColor:"#111"},id:"scrollable",ref:i,children:e.jsxs(Q,{stickyHeader:!0,children:[e.jsx(oe,{}),e.jsx(X,{children:c.map((a,h)=>{const m=!!o&&(o==="me"&&a.id===n.uid||o===a.displayName);return e.jsx(ae,{index:h,leader:a,user:n,scrollableRef:i,highlighted:m},a.id)})})]})}),e.jsxs(I,{variant:"caption",align:"right",component:"div",style:{width:"100%",marginTop:8},children:["Last updated: ",u," GMT"]})]})]})}const ie=["own","picked","recorded","wishlist"],le=[...Array(40)].map((s,t)=>({id:t,displayName:"........................",own:"---",picked:"---",recorded:"---",wishlist:"--"}));var k={},ce=W;Object.defineProperty(k,"__esModule",{value:!0});var F=k.default=void 0,de=ce(N()),C=e;F=k.default=(0,de.default)([(0,C.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,C.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function ue(){const s=S(),t=l.useCallback(()=>{s("/leaderboard?user=me")},[s]);return e.jsx(x,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:t,children:e.jsx(F,{})})})}function he({data:s}){const t={maxWidth:450},{isMobile:r}=L(),n=S(),i=l.useRef(),o=s.data.filter(p=>p.displayName).map(p=>p.displayName),d=l.useCallback((p,g)=>{g?o.includes(g)&&n(`/leaderboard?user=${g}`):n("/leaderboard")},[n,o]),[c,u]=l.useState(!1),a=l.useCallback(()=>{u(!0),setTimeout(()=>i.current.focus(),15)},[]),h=l.useCallback(()=>u(!1),[]),m=c&&r?{width:"auto",position:"fixed",left:60,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{};return e.jsxs(b.Fragment,{children:[!c&&r&&e.jsx(x,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:a,children:e.jsx(v,{})})}),(c||!r)&&e.jsx(se,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:{...t,...m},options:o,onChange:d,renderInput:p=>e.jsx(te,{...p,placeholder:"Search",variant:"standard",color:"secondary",inputRef:i,InputProps:{...p.InputProps,startAdornment:e.jsx(re,{position:"start",children:e.jsx(v,{})})}})}),e.jsx(A,{invisible:!0,open:c&&r,onClick:h})]})}function xe(){const[s,t]=l.useState(null),r=!!s,n=l.useCallback(a=>t(a.currentTarget),[]),i=l.useCallback(()=>t(null),[]),[o,d]=w(),c=o.get("sort"),u=l.useCallback(a=>()=>{i(),a&&a!==c?o.set("sort",a):o.delete("sort"),d(o)},[o,d,c,i]);return e.jsxs(b.Fragment,{children:[e.jsx(x,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:n,children:e.jsx(J,{variant:"dot",color:"secondary",overlap:"circular",invisible:!c,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(K,{})})})}),e.jsx(O,{anchorEl:s,open:r,onClose:i,children:pe.map(({label:a,value:h})=>e.jsx($,{onClick:u(h),selected:c===h,children:a},a))})]})}const pe=[{label:"Default",value:void 0},{label:"Own",value:"own"},{label:"Picked",value:"picked"},{label:"Recorded",value:"recorded"},{label:"Wishlist",value:"wishlist"}];function ve(){const{isMobile:s}=L(),[t,r]=l.useState({data:[],metadata:{}}),[n,i]=l.useState(!0);l.useEffect(()=>{const d=async()=>{const u=await(await fetch(je)).json();r(u),i(!1)};try{d()}catch(c){console.error("Error loading leaderboard data.",c),q("Error loading leaderboard data. Please reload the page.",{autoHideDuration:null,action:e.jsx(H,{color:"secondary",onClick:()=>window.location.reload(),children:"Refresh"})}),i(!1)}},[]);const o=e.jsxs(b.Fragment,{children:[e.jsx(he,{data:t}),e.jsx(xe,{}),e.jsx(ue,{}),!s&&e.jsx("div",{style:{flexGrow:1}})]});return e.jsxs(b.Fragment,{children:[e.jsx(z,{title:"Leaderboard",extras:o}),e.jsx(ne,{data:t,loading:n}),e.jsx(U,{}),e.jsx(G,{feature:"leaderboard"})]})}const je="https://explore.lpubelts.com/leaderboard/leaderboardData.json";export{ve as default};
