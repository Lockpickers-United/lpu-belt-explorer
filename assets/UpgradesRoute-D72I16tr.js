import{R as f,b as v,r as a,O as b,j as t,a4 as E,at as k,U as F,F as I,aH as T,D as U,e as L,a9 as D,N as R,h as S,T as N}from"./index-DJ_kInpK.js";import{l as w}from"./filterFields-BVyN9IaA.js";import{u as B}from"./usePageTitle-Czq6RxEy.js";import{a as W}from"./LockListContext-Bkh5kosA.js";import{D as O}from"./LockDataProvider-CrCn33Cn.js";import"./filterEntriesAdvanced-CpXLBo_L.js";import{D as P}from"./DataContext-BrFGoWr7.js";import"./index-D3bFR9yJ.js";import{e as x}from"./entryName-GDwyNwJN.js";import{I as H}from"./IntroCopy-CWjJnEQ9.js";import{B as M}from"./BeltStripe-DODN3Ufx.js";import{O as $}from"./OpenInNew-ld-NH2HF.js";import{L as q}from"./ListItem-2PFOngaA.js";import"./collectionStatsById-DY1NVZ7h.js";import"./useData-CT9zjlhe.js";import"./dataUrls-1xDVM400.js";import"./setDeep-J6HEwWhX.js";import"./stringUtils-BsiQ3MZ5.js";import"./index-Bx-BFQft.js";import"./index-DdNNTxSj.js";import"./index-DjjL5iJx.js";function z({upgradeTree:r=[],baseId:s,expanded:l,onExpand:d}){const p=v(),n=a.useRef(null),[e,o]=a.useState(!1),{id:u}=b.parse(location.search),C=a.useCallback((i,m)=>{d&&d(m?s:!1)},[s,d]);a.useEffect(()=>{if(l&&n&&!e){const m=window.innerWidth<=600?70:74,h=u===s;o(!0),setTimeout(()=>{var j;window.scrollTo({left:0,top:((j=n==null?void 0:n.current)==null?void 0:j.offsetTop)-m,behavior:h?"auto":"smooth"})},h?0:100)}else l||o(!1)},[l,e,s,u]);const g=a.useCallback(i=>()=>{p(`/locks?id=${i.id}`)},[p]),c={maxWidth:700,marginLeft:"auto",marginRight:"auto"},y={color:"#eee",textDecoration:"none",cursor:"pointer","&:hover":{color:"#fff"}};return t.jsxs("div",{ref:n,onChange:C,children:[t.jsx("div",{style:{...c,borderTop:"1px solid #666",height:0}}),r.map(i=>t.jsx(f.Fragment,{children:t.jsxs(q,{style:{...c,minHeight:64,borderTop:"1px solid rgba(255, 255, 255, 0.12)",borderRight:"1px solid #666"},children:[t.jsx(M,{value:i.belt}),t.jsx(E,{primary:x(i),primaryTypographyProps:{fontWeight:500},secondary:i.version,style:{padding:"0px 0px 0px 10px"},sx:y,onClick:g(i)}),t.jsx(k,{style:{minWidth:20,marginLeft:16},children:t.jsx(F,{onClick:g(i),children:t.jsx($,{fontSize:"small",style:{color:"#eee"}})})})]})},i.id)),t.jsx("div",{style:{...c,borderTop:"1px solid #666",height:20}})]})}const _=f.memo(z,(r,s)=>r.baseId===s.baseId&&r.expanded===s.expanded&&r.onExpand===s.onExpand);function A(){const{allEntries:r=[]}=a.useContext(P),{filters:s}=a.useContext(I),[l,d]=a.useState(s.id),p=a.useCallback(e=>r.find(o=>o.id===e),[r]),n=T.map(e=>e.map(o=>p(o)).filter(o=>o)).filter(e=>e.length>0).sort((e,o)=>x(e[0]).localeCompare(x(o[0])));return t.jsx(f.Fragment,{children:t.jsxs("div",{style:{margin:8,padding:"20px 0px"},children:[t.jsx(H,{pageName:"upgrades"}),n.map((e,o)=>t.jsx(_,{upgradeTree:e,baseId:e[0].id,expanded:e[0].id===l,onExpand:d},o))]})})}function xt(){const{lockCollection:r}=a.useContext(U);return B("Upgrades"),t.jsx(L,{filterFields:w,children:t.jsx(O,{allEntries:D,profile:r,children:t.jsxs(W,{children:[t.jsx(R,{title:"Upgrades",extras:null}),t.jsx(A,{profile:r}),t.jsx(S,{extras:null}),t.jsx(N,{feature:"upgrades"})]})})})}export{xt as default};
