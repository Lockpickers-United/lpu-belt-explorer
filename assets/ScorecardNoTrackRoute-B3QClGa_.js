import{R as k,r as d,d as M,j as e,av as N,K as I,as as $,D as q,aj as W,e as z,aE as A,aF as U,aG as G}from"./index-SGUxfkCZ.js";import{u as Y}from"./useData-DvdHtOWa.js";import{e as _}from"./entryName-DqLFbWtk.js";import{D as v}from"./DataContext-CG8N2kpO.js";import"./index-DolXW4_-.js";import{a as D,b as c,c as K,d as J,T as O,e as Q}from"./TableRow-DS-yxggq.js";import{L as R}from"./Link-B9O0UkTh.js";import{N as V,S as X}from"./ScorecardExportButton-yxjH2dVh.js";import{L as Z}from"./LoadingDisplay-xuIdVJpb.js";import{P as ee}from"./ProfileNotFound-DFjIJKMK.js";import{a as te,b as oe}from"./ScorecardListContext-Gm57qSUv.js";import{s as ne}from"./filterFields-B7L5Y2y-.js";import"./mycollection-Dqx3MeiB.js";import"./Box-B_eyOA3I.js";import"./download-Bq0cxwn4.js";import"./List-s1SNimrE.js";import"./ContentCopy-BcjtugCk.js";import"./LPU-DltM2OBF.js";import"./LinearProgress-C71aN1u8.js";import"./rankingRequestData-Bq1W8yFj.js";function re({activity:o}){const{getEntryFromId:l,getProjectEntryFromId:p,getAwardEntryFromId:x}=d.useContext(v),f=l(o.matchId),u=p(o.matchId),j=x(o.matchId),t=f||u||j;let s=_(t);const m=o.points===1?"pt":"pts";let g=o.date?M(o.date).format("MM/DD/YY"):"(no date)";const b=o.link.substring(0,20),h=T=>{const w=window.open(T,"_blank","noopener,noreferrer");w&&(w.opener=null)},n="#fff",r="#333",i="0.9rem";return e.jsxs(k.Fragment,{children:[!o.awardType&&e.jsxs(D,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#eee"},"td, th":{}},children:[e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r,fontWeight:600},component:"th",scope:"row",children:s}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:t==null?void 0:t.version}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:e.jsx("nobr",{children:t==null?void 0:t.belt})}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:g}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:e.jsx(R,{onClick:()=>h(o.link),children:b})}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:o.evidenceModifier}),e.jsx(c,{sx:{textAlign:"left",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:n,color:r},component:"th",scope:"row",children:e.jsxs("nobr",{children:[e.jsxs("span",{style:{fontWeight:700},children:[o.points," "]}),e.jsx("span",{style:{color:"#666"},children:m})]})})]},o.id),o.awardType&&e.jsx(D,{children:e.jsx(c,{colSpan:7,sx:{textAlign:"center",fontSize:i,lineHeight:"1.1rem",padding:"8px",backgroundColor:"#bbb",color:r,fontWeight:600},component:"th",scope:"row",children:s})},o.id)]})}const se=k.memo(re);function ie({profile:o}){var h;const{userId:l}=N(),{visibleEntries:p=[]}=d.useContext(v),x=p.filter(n=>n.points>0||n.awardType),f=[{id:"lock",name:"lock",align:"left"},{id:"version",name:"version",align:"left"},{id:"belt",name:"belt",align:"left"},{id:"date",name:"date",align:"left"},{id:"link",name:"link",align:"left"},{id:"modifier",name:"modifier",align:"left"},{id:"points",name:"points",align:"left"}],{cardDanPoints:u,cardBBCount:j,cardEligibleDan:t}=d.useContext(v),s={1:"st",2:"nd",3:"rd"},m=s[[t]]?t+s[[t]]:t+"th",g=(h=o.displayName)==null?void 0:h.replace(/\s/g,"_"),b=d.useCallback(async()=>{const n=`@LPUBeltBot request ${m} Dan https://lpubelts.com/#/profile/${l}/scorecard/no-tracking?name=${g}`;await navigator.clipboard.writeText(n),I("Request copied to clipboard. Take it over to #belt-requests!")},[m,g,l]);return e.jsxs("div",{style:{maxWidth:900,padding:0,backgroundColor:"#eee",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsxs("div",{style:{display:"flex",padding:8},children:[e.jsx("div",{style:{fontSize:"1.5rem",lineHeight:"1rem",flexGrow:1,marginRight:0},children:o.displayName}),e.jsxs("div",{style:{marginRight:25},children:["Dan Points ",e.jsx("strong",{children:u})]}),e.jsxs("div",{style:{marginRight:25},children:["Black Belt Locks ",e.jsx("strong",{children:j})]}),e.jsxs("div",{children:["Eligible for Dan ",e.jsx("span",{style:{fontSize:"1.7rem",lineHeight:"1rem"},children:t})]})]}),e.jsx("div",{style:{width:"100%",textAlign:"right",padding:8,marginBottom:10},children:e.jsx(R,{onClick:b,style:{color:"#99c2e5",cursor:"pointer"},children:"Copy Request"})}),p.length===0&&e.jsx(V,{}),e.jsxs("div",{children:[e.jsx(K,{id:"statsTable",style:{padding:"0px 0px 0px 4px",width:"100%",marginLeft:"auto",marginRight:"auto"},component:$,elevation:2,children:e.jsxs(J,{size:"small",children:[e.jsx(O,{children:e.jsx(D,{children:f.map((n,r)=>e.jsx(c,{sx:{textAlign:n.align,fontSize:"1rem",lineHeight:"1.1rem",padding:"8px",backgroundColor:"#bbb",color:"#000"},component:"th",scope:"row",children:n.name},r+1))})}),e.jsx(Q,{children:x.map(n=>e.jsx(se,{activity:n},n.id))})]})}),e.jsx("br",{})]})]})}function Se(){const{userId:o}=N(),{getProfile:l,getPickerActivity:p}=d.useContext(q),[x,f]=d.useState(!1),u=d.useCallback(()=>{f(!x)},[x]),j=d.useCallback(async()=>{try{const a=await l(o);if(a){const y=a.displayName?a.displayName.toLowerCase().endsWith("s")?`${a.displayName}'`:`${a.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${y} Scorecard`}const C=await p(o);return{profile:a,...W(C)}}catch(a){return console.error("Error loading profile and activity.",a),null}},[o,l,p]),{data:t={},loading:s,error:m}=Y({loadFn:j}),g=t?t.profile:{},b=t?t.scoredActivity:[],h=t?t.bbCount:0,n=t?t.danPoints:0,r=t?t.eligibleDan:0,i=t?t.nextDanPoints:0,T=t?t.nextDanLocks:0;if(s||m)return null;const w=k.createContext({toggleColorMode:()=>{}});function B({children:a}){const C=A({palette:{mode:"dark",secondary:{main:"#2d49bc"}}}),y=A({palette:{mode:"light"}}),[P,L]=d.useState("light"),E=k.useMemo(()=>({toggleColorMode:()=>{L(H=>H==="light"?"dark":"light")}}),[]),S=k.useMemo(()=>P==="light"?y:C,[C,y,P]),F=ae(S);return e.jsx(w.Provider,{value:E,children:e.jsxs(U,{theme:S,children:[e.jsx(G,{enableColorScheme:!0}),e.jsx("style",{children:F}),a]})})}return e.jsx(z,{filterFields:ne,children:e.jsx(te,{cardActivity:b,cardBBCount:h,cardDanPoints:n,cardEligibleDan:r,cardNextDanPoints:i,cardNextDanLocks:T,popularLocks:[],children:e.jsx(oe,{children:e.jsxs(B,{children:[s&&e.jsx(Z,{}),!s&&t&&!m&&e.jsx(ie,{profile:g,adminAction:u}),!s&&(!t||m)&&e.jsx(ee,{}),e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:30},children:e.jsx(X,{})})]})})})})}const ae=o=>{const l=o.palette.text.icon;return`
            body {
                background-color: ${o.palette.background.default};
                margin: 0;
                padding: 0;
            }
            
            a {
                color: ${l};
            }
            
            pre{ 
                white-space: pre-wrap; 
                word-break: break-word;
            }
            
            :root {
              color-scheme: dark;
              overflow-y: scroll;
            }
        `};export{Se as default};
