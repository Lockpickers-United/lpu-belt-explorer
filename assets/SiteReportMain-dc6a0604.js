import{u as S,j as t,d as L,R as T,r as D}from"./index-b84104d9.js";import{L as A}from"./LoadingDisplay-d9afd165.js";import{u as M}from"./useData-6d0222aa.js";import{u as P}from"./usePageTitle-4b6b936d.js";import{s as R}from"./dataUrls-7caf328f.js";import{L as H}from"./LockViewsLine-81e7428c.js";import{A as j}from"./AdminStatsTable-401cafde.js";import{P as z}from"./nivo-line.es-2e1d8a4a.js";import{p as F}from"./adminChartDefaults-e02caa29.js";import{C as E}from"./ChoiceButtonGroup-e957a3b6.js";import{c as B,d as I,T as Y,a as C,b as v,e as G}from"./TableRow-d2632d9d.js";import"./LPU-c3fa7122.js";import"./LinearProgress-b0899089.js";import"./useDocumentTitle-50641549.js";import"./chartDefaults-9fc07b21.js";import"./nivo-legends.es-71913ef3.js";import"./index-5887b3b2.js";import"./ToggleButtonGroup-410cbfc5.js";const O=({data:r})=>{const{firstVistsLastSevenDays:a}=r,{width:s}=S(),i=s<=360,p=s<=395,o=s<=428,c=s<=560,l=s<=820,d=i?".8rem":p?".85rem":o?".9rem":".95rem",h=400;return t.jsx(j,{tableData:a,tableWidth:h,fontSize:d})},U=({data:r})=>{const{pageTracking:a}=r,s=Object.keys(a.data[13]).sort((u,m)=>a.data[13][m]-a.data[13][u]).filter(u=>u!=="total"&&u!=="date");s.unshift("date"),s.push("total");const p={columns:s.reduce((u,m)=>{const g=a.columns.find(e=>e.id===m);return u.push(g),u},[]),data:a.data},{width:o}=S(),c=o<=360,l=o<=395,d=o<=428,h=o<=560,y=o<=820,x=c?".8rem":l?".85rem":d?".9rem":".95rem",b="100%";return t.jsx(j,{tableData:p,tableWidth:b,fontSize:x})},X=({lineData:r})=>{const a=[r.traffic28days.data],s=[],i=new Map,p=new Map,o=new Map;a.forEach(m=>{const g=[],e=[],n=[];for(let w=0;w<m.length;w++){let f=m[w].date;f=f+" 23:59:59";const k=new Map;k.x=f,k.y=m[w].visitors,g.push(k);const V=new Map;V.x=f,V.y=m[w].visits,e.push(V);const W=new Map;W.x=f,W.y=m[w].lockViews,n.push(W)}i.id="Visitors",i.data=g,p.id="Visits",p.data=e,o.id="Lock Views",o.data=n,s.push(p),s.push(i),s.push(o)});const{width:c}=S(),l=c<=360,d=c<=395,h=c<=428,y=c<=560,x=c<=820,b=l||d?200:h?210:x?230:350,u=y?{top:10,right:20,bottom:50,left:50}:{top:25,right:20,bottom:70,left:50};return t.jsx("div",{style:{height:b,width:"100%"},children:t.jsx(z,{theme:F,data:s,enableGridX:!1,enableGridY:!0,colors:["#5265ed","#082fd1","#4fa720"],lineWidth:3,margin:u,height:b,curve:"natural",yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.0f",axisLeft:{tickValues:5,tickSize:5,tickPadding:5,tickRotation:0,format:","},xScale:{type:"time",format:"%Y-%m-%d %H:%M:%S"},xFormat:"time:%m/%d/%y",axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:-45,direction:"row",legendOffset:-12,tickValues:"every day"},legends:[{anchor:"bottom",itemTextColor:"#b4b4b4",direction:"row",justify:!1,translateX:0,translateY:70,itemsSpacing:0,itemWidth:100,itemHeight:20,symbolSize:13,symbolShape:"circle"}],enablePoints:!1,useMesh:!0,isInteractive:!0})})},$=({fullData:r})=>{const a=r.traffic28days,s=28;function i(m){return L().subtract(s+1,"day").isBefore(L(m.date))}const p={columns:a.columns.filter(m=>m.id!=="weekend").filter(m=>m.id!=="visitors"),data:a.data.filter(i)},{width:o}=S(),c=o<=360,l=o<=395,d=o<=428,h=o<=560,y=o<=820,x=c?".8rem":l?".85rem":d||h||y?".9rem":".85rem",b=170,u=340;return t.jsx(j,{tableData:p,tableWidth:b,tableHeight:u,fontSize:x})};function q({data:r}){const{width:a}=S(),s=a<=560,o={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...s?{}:{display:"flex"}};return t.jsx(T.Fragment,{children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:o,children:[t.jsx(X,{lineData:r}),t.jsx($,{fullData:r})]})})})}const J=({data:r})=>{const a=r.popularCountries1,s=r.popularCountries2,{width:i}=S(),p=i<=560,l={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",verticalAlign:"top",marginLeft:"auto",marginRight:"auto"},...p?{}:{display:"flex"}},d="400px",h=".95rem";return t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:l,children:[t.jsx(j,{tableData:a,tableWidth:d,fontSize:h,wrap:!0}),t.jsx("div",{style:{width:"75px"},children:"Â "}),t.jsx(j,{tableData:s,tableWidth:d,fontSize:h,wrap:!0})]})})};function K({data:r}){const{width:a}=S(),s=a<500,i=a<700,p=i?280:400,o=i?260:375,c=s?320:450,l={border:0,padding:"4px 8px 0px 0px",fontWeight:400},y={...{width:"100%",padding:"8px 16px",marginTop:16,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...i?{}:{display:"flex"}},x=D.useMemo(()=>{const{popularCountries:g,popularEuropeanCountries:e,popularStates:n}=r.popularAreas;return[{label:"Worldwide",data:g,map:Q},{label:"Europe",data:e,map:Z},{label:"US States",data:n,map:_}]},[r]),[b,u]=D.useState(x[0]),m=D.useCallback(g=>u(g),[]);return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(E,{options:x,onChange:m}),t.jsxs("div",{style:y,children:[t.jsx("div",{style:{backgroundColor:"#000",border:"1px solid #666",padding:12,align:"center",margin:"10px 0px 0px 0px",width:200,height:p,marginLeft:"auto",marginRight:"auto"},children:t.jsx(B,{id:"areaList",sx:{height:o,backgroundColor:"#111",margin:"auto"},children:t.jsxs(I,{stickyHeader:!0,children:[t.jsx(Y,{children:t.jsxs(C,{children:[t.jsx(v,{style:{padding:"4px 10px 4px 12px",fontWeight:700,textAlign:"right"},children:"#"}),t.jsx(v,{style:{padding:"4px 0px",fontWeight:700},children:"Area"})]})}),t.jsx(G,{children:b.data.data.map((g,e)=>t.jsxs(C,{index:e,children:[t.jsx(v,{style:l,sx:{textAlign:"right",padding:"0px",width:34},children:e+1},e+1),t.jsx(v,{style:l,children:g.area},g.area)]},e))})]})})}),t.jsx("div",{style:{flexGrow:1,width:c},children:t.jsx("img",{id:"mapImage",alt:"map",src:b.map,width:c})})]})]})}const Q="https://explore.lpubelts.com/maps/mapWorld.gif",Z="https://explore.lpubelts.com/maps/mapEurope.gif",_="https://explore.lpubelts.com/maps/mapUSA.gif",N=({data:r})=>{const a=[360,375,384,393,412,414,428,430,1024,1440,1536,1920,2560,3440],s=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(w=>{const f=w+"";n.width===w&&(e[f]=e[f]?e[f]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),i=r.screenWidths.data.reduce((e,n)=>(n.width<360&&(e["359-"]=e["359-"]?e["359-"]+n.lockViews:n.lockViews),a.map(w=>{const f=w+"";n.width<=w&&(e[f]=e[f]?e[f]+n.lockViews:n.lockViews)}),e.total=e.total?e.total+n.lockViews:n.lockViews,e),{}),o=Object.keys(s).sort((e,n)=>e-n).filter(e=>e!=="total"&&e!=="359-").map(e=>({lockViews:s[e],width:e,percentViews:Math.floor(s[e]/s.total*100)+"%",cumulativeViews:Math.floor(i[e]/s.total*100)+"%"}));o.unshift({lockViews:s["359-"],width:"359-",percentViews:Math.floor(s["359-"]/s.total*100)+"%",cumulativeViews:Math.floor(i["359-"]/s.total*100)+"%"}),o.push({lockViews:s.total,width:"total",percentViews:"100%",cumulativeViews:"100%"});const c={columns:[...r.screenWidths.columns,{name:"Percent Views",align:"left",id:"percentViews"},{name:"Cumulative Views",align:"left",id:"cumulativeViews"}],data:o},{width:l}=S(),d=l<=360,h=l<=395,y=l<=428,x=l<=560,b=l<=820,u=d?".8rem":h?".85rem":y||x||b?".9rem":".85rem",m=375,g=650;return t.jsx("div",{children:t.jsx(j,{tableData:c,tableWidth:m,tableHeight:g,fontSize:u})})};function yt(){var x;P("Site Report");const{data:r,loading:a,error:s}=M({urls:tt}),{siteFullNew:i}=r||{},{width:p}=S(),c=p<560?"8px 8px 32px 8px":"24px 24px 32px 24px",l={margin:"0px 0px 36px 0px",width:"100%",textAlign:"center",color:"#fff"},d={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff"},h=(x=i==null?void 0:i.firstVistsLastSevenDays)!=null&&x.countryCount?d:l,y=a?"--":"(updated: "+L(i==null?void 0:i.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${i==null?void 0:i.metadata.timezone})`;return a?t.jsx(A,{}):s?null:t.jsxs("div",{style:{minWidth:"320px",maxWidth:900,height:"100%",padding:c,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",lineHeight:.8},children:[!!i.firstVistsLastSevenDays.countryCount&&t.jsxs(T.Fragment,{children:[t.jsx("div",{style:l,children:"First Visits (Last Seven Days)"}),t.jsx(O,{data:i,tableWidth:"50%"})]}),t.jsxs("div",{style:h,children:["Site Summary",t.jsx("br",{}),t.jsx("span",{style:{fontSize:"0.85rem"},children:y})]}),t.jsx(q,{data:i}),t.jsx("div",{style:d,children:"Weekly Lock Views"}),t.jsx(H,{data:i}),t.jsx("div",{style:d,children:"Page Tracking"}),t.jsx(U,{data:i}),t.jsx("div",{style:d,children:"Popular Areas"}),t.jsx(K,{data:i}),!!i.popularCountries1&&t.jsxs(T.Fragment,{children:[t.jsx("div",{style:d,children:"Popular Countries"}),t.jsx(J,{data:i})]}),t.jsx("div",{style:d,children:"Lock Views by Screen Width"}),t.jsx(N,{data:i})]})}const tt={siteFullNew:R};export{yt as default};
