import{h as T,f as W,s as j,k as x,_ as b,r,m as R,n as O,j as t,o as Q,p as z,b as V,R as w,a9 as E,aa as B,al as K,u as F,G as N,I as G,W as q,ap as H,aq as M,a0 as U,a1 as X}from"./index-1de8e975.js";import{F as P}from"./filterFields-06561ae1.js";import{g as J,I as Y,l as Z}from"./ImageViewer-b19db5a6.js";import{C as S}from"./Chip-7f7ae289.js";import{L as $}from"./Link-7579243d.js";import{d as _}from"./Launch-6007da32.js";import{I as ee,a as te}from"./ImageListItem-b365f28d.js";import{F as ie}from"./FieldValue-4bd3fbf3.js";import{f as v,C as oe}from"./SearchBox-0d328ca1.js";import{F as ne,I as se,S as ae}from"./Select-e7df02f3.js";function re(i){return T("MuiImageListItemBar",i)}W("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const le=["actionIcon","actionPosition","className","subtitle","title","position"],ce=i=>{const{classes:e,position:o,actionIcon:c,actionPosition:L}=i,f={root:["root",`position${x(o)}`],titleWrap:["titleWrap",`titleWrap${x(o)}`,c&&`titleWrapActionPos${x(L)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${x(L)}`]};return z(f,re,e)},Le=j("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:o}=i;return[e.root,e[`position${x(o.position)}`]]}})(({theme:i,ownerState:e})=>b({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:i.typography.fontFamily},e.position==="bottom"&&{bottom:0},e.position==="top"&&{top:0},e.position==="below"&&{position:"relative",background:"transparent",alignItems:"normal"})),ge=j("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(i,e)=>{const{ownerState:o}=i;return[e.titleWrap,e[`titleWrap${x(o.position)}`],o.actionIcon&&e[`titleWrapActionPos${x(o.actionPosition)}`]]}})(({theme:i,ownerState:e})=>b({flexGrow:1,padding:"12px 16px",color:(i.vars||i).palette.common.white,overflow:"hidden"},e.position==="below"&&{padding:"6px 0 12px",color:"inherit"},e.actionIcon&&e.actionPosition==="left"&&{paddingLeft:0},e.actionIcon&&e.actionPosition==="right"&&{paddingRight:0})),fe=j("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(i,e)=>e.title})(({theme:i})=>({fontSize:i.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),me=j("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(i,e)=>e.subtitle})(({theme:i})=>({fontSize:i.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),pe=j("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(i,e)=>{const{ownerState:o}=i;return[e.actionIcon,e[`actionIconActionPos${x(o.actionPosition)}`]]}})(({ownerState:i})=>b({},i.actionPosition==="left"&&{order:-1})),de=r.forwardRef(function(e,o){const c=R({props:e,name:"MuiImageListItemBar"}),{actionIcon:L,actionPosition:f="right",className:p,subtitle:s,title:n,position:y="bottom"}=c,h=O(c,le),g=b({},c,{position:y,actionPosition:f}),d=ce(g);return t.jsxs(Le,b({ownerState:g,className:Q(d.root,p),ref:o},h,{children:[t.jsxs(ge,{ownerState:g,className:d.titleWrap,children:[t.jsx(fe,{className:d.title,children:n}),s?t.jsx(me,{className:d.subtitle,children:s}):null]}),L?t.jsx(pe,{ownerState:g,className:d.actionIcon,children:L}):null]}))}),ue=de;function Me({field:i,value:e,label:o=e,mode:c,...L}){const f=V(),[p,s]=r.useState(!1),{filters:n,addFilter:y}=r.useContext(P),h=r.useCallback(a=>{a.preventDefault(),a.stopPropagation(),s(!1)},[]),g=r.useCallback(a=>{var l;a.preventDefault(),a.stopPropagation(),s(!1),(l=n[i])!=null&&l.includes(e)||y(i,e),window.scrollTo({top:0,behavior:"smooth"})},[y,i,n,e]),d=r.useCallback(a=>{a.preventDefault(),a.stopPropagation(),s(a.target)},[]),A=r.useCallback(a=>{a.stopPropagation(),s(!1);const l=encodeURI(e);setTimeout(()=>f(`/glossary?term=${l}`),0)},[f,e]),u=r.useMemo(()=>!!J.find(a=>a.term.toLowerCase()===e.toLowerCase()),[e]);return t.jsxs(w.Fragment,{children:[(!c||c==="full")&&u&&t.jsxs(w.Fragment,{children:[t.jsx(S,{clickable:!0,variant:"outlined",label:o,style:{marginRight:4,marginBottom:4},onClick:d,...L}),!!p&&t.jsxs(E,{open:!!p,anchorEl:p,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:h,children:[t.jsxs(B,{disabled:!0,children:["Term: ",e]}),t.jsx(K,{}),t.jsx(B,{onClick:g,children:"Add Filter"}),t.jsx(B,{onClick:A,disabled:!u,children:"Go to Glossary"})]})]}),(c==="simple"||(!c||c==="full")&&!u)&&t.jsx(S,{clickable:!0,variant:"outlined",label:o,style:{marginRight:4,marginBottom:4},onClick:g,...L}),c==="text"&&t.jsx($,{style:{color:"#fff"},onClick:g,...L,children:o})]})}const ye="data:image/png;base64,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";function Se(i){const{columns:e,media:o,initiallyOpen:c,openIndex:L,onOpenImage:f,onCloseImage:p,onBackButton:s,shareParams:n}=i,{isMobile:y}=F(),[h,g]=r.useState(c),d=r.useCallback(l=>()=>window.open(l,"_blank","noopener,noreferrer"),[]),A=r.useCallback(l=>()=>{f(l),g(!0)},[f]),u=r.useCallback(()=>{p(),g(!1)},[p]);r.useEffect(()=>{const l=()=>{if(s){const I=s();return g(I)}return g(!1)};return addEventListener("hashchange",l),()=>removeEventListener("hashchange",l)});const a=e??(y?2:3);return t.jsxs(w.Fragment,{children:[h&&t.jsx(Y,{media:o,openIndex:L,onOpenImage:f,onClose:u,shareParams:n}),t.jsx(ee,{variant:"masonry",cols:a,sx:{marginTop:2},children:o.map(({title:l,subtitle:I,thumbnailUrl:k,fullUrl:m,subtitleUrl:D},C)=>t.jsxs(te,{style:{marginBottom:8},children:[t.jsx("img",{src:k,alt:l,style:{paddingBottom:I?60:48,cursor:"pointer"},onClick:A(C)}),(m==null?void 0:m.match(/youtube\.com/))&&t.jsx("img",{src:ye,alt:l,style:{alignItems:"center",position:"absolute",top:"calc(50% - 65px)",left:"calc(50% - 40px)",width:80,height:80,cursor:"pointer"},onClick:d(m)}),t.jsx(ue,{title:l,subtitle:I&&t.jsx("a",{href:D||Z[I],target:"_blank",rel:"noopener noreferrer",children:I}),actionIcon:m&&t.jsx(N,{title:"View Full Size",arrow:!0,disableFocusListener:!0,children:t.jsx(G,{href:m,style:{color:"rgba(255, 255, 255, 0.5)"},target:"_blank",rel:"noopener noreferrer",children:t.jsx(_,{})})})})]},C))})]})}function he(){const{filters:i,filterCount:e,removeFilter:o,filterFieldsByFieldName:c}=r.useContext(P),L=r.useCallback((s,n)=>()=>{o(s,n)},[o]),f=r.useMemo(()=>{const{search:s,id:n,tab:y,name:h,sort:g,image:d,...A}=i;return Object.keys(A).map(u=>{const a=i[u];return Array.isArray(a)?a.map(l=>({key:u,value:l})):{key:u,value:a}}).flat()},[i]),p=r.useCallback((s,n)=>s==="Belt"?n==="Unranked"?s:n.includes("Black")?n.replace(/(Black)\s(\d+)/,"$1 Belt $2"):n+" Belt":s==="UL Group"?"Group "+n:s==="Wheels"?`${n} Wheels`:v[n]?v[n]:n,[]);return e===0?null:t.jsx(ie,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(q,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:f.map(({key:s,value:n},y)=>{var h;return t.jsx(S,{label:`${p((h=c[s])==null?void 0:h.label,n)}`,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:L(s,n)},y)})})})}function Pe({profile:i={},collectionType:e}){const{userId:o}=H(),{filters:c,filterCount:L,addFilter:f}=r.useContext(P),[p,s]=w.useState(!1),n=M[e].labels,y=M[e].keyByLabel,h=M[e].getCollected(i)||[],{isMobile:g}=F(),d=g?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:A=o&&L===0?"Any":null}=c,u=n.includes(A)&&L<2;let a="";A&&(typeof A=="string"?a=A:a="Any");const l=r.useCallback(()=>s(!1),[]),I=r.useCallback(()=>s(!0),[]),k=r.useCallback(m=>{f("collection",m.target.value,!0)},[f]);return!L&&!o?null:t.jsx(U,{style:d,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs(X,{style:{paddingTop:0,paddingLeft:8},children:[u&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(ne,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(se,{id:"label",children:"Collection"}),t.jsx(ae,{name:"collection-selector",label:"Collection",open:p,onClose:l,onOpen:I,value:a,onChange:k,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:n.map((m,D)=>{var C;return t.jsxs(B,{value:m,children:[m," (",m==="Any"?h.length:((C=i[y[m]])==null?void 0:C.length)||0,")"]},D)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(oe,{})})]}),!u&&t.jsx(he,{})]})})}export{Me as F,Pe as I,Se as a};
