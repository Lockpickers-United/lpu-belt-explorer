import{a as f}from"./axios-439bb627.js";import{H as p}from"./index-459f73b6.js";const q=async({user:t,url:r,formData:e,json:o,snackBars:a,timeoutDuration:n=1e4})=>{const i=new AbortController,c=setTimeout(()=>{i.abort()},n),l=Math.floor(Math.random()*1e6),u=t?await t.getIdToken():null,d=o!==void 0&&e===void 0,m={...u&&{Authorization:`Bearer ${u}`},"Content-Type":d?"application/json":"multipart/form-data"},h=d?o:e;try{const s=await f.post(`${r}?${l}`,h,{headers:m,signal:i.signal});return clearTimeout(c),a&&p("Request successful",{variant:"success"}),s.data}catch(s){throw clearTimeout(c),console.error("Error during authentication or server request:",g(s)),a&&p("Error during authentication or server request",{variant:"error",autoHideDuration:3e3}),s}},g=t=>{var r,e,o;if((r=t.response)!=null&&r.data&&typeof t.response.data=="string"){const a=(e=t.message.match(/code (\d+)/))==null?void 0:e[1],n=(o=t.response.data.match(/<pre>([\s\S]*?)<\/pre>/))==null?void 0:o[1];return{response:{data:{status:a,message:n}}}}else return t};export{g as c,q as p};
