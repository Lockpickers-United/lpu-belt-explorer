import{r as l,F as W,au as M,j as e,u as se,R as N,b as he,$ as fe,J as G,I as _,ac as xe,aj as be,d as q,as as ge,bN as ke,bO as ye,D as Be,N as je,e as Ce,a0 as ve,h as Se,T as De}from"./index-e42e5575.js";import{L as we}from"./LoadingDisplay-0d36d709.js";import{u as Ae}from"./useData-b8e0d88f.js";import{u as Pe}from"./usePageTitle-1406fdcc.js";import{_ as Le,d as Ue,a as ze,l as Fe}from"./lockStats-2ad7d26c.js";import{E as Ie}from"./ErrorMessage-9ac90493.js";import{b as T,a as Ee}from"./chartDefaults-bfd54756.js";import{L as F}from"./Link-bccde59c.js";import{D as re,f as Oe}from"./DataContext-8f1563cd.js";import{r as Y}from"./index-bdbf75dc.js";import{e as J}from"./entryName-506f8283.js";import{B as Me}from"./BeltStripeMini-62323b97.js";import{a as oe,b as I,c as K,d as Q,T as Te,e as X}from"./TableRow-9efd0da5.js";import{V as Re}from"./ViewFilterButtons-96aeec3b.js";import{b as We}from"./sortFields-b1bde6f9.js";import{F as Ne,I as He,S as Ve}from"./Select-3488df05.js";import{C as $e}from"./Collapse-a6667c41.js";import{b as Ge}from"./filterFields-f0c85702.js";import{c as _e}from"./collectionStatsById-8def94ca.js";import{b as qe,c as Ye,p as Je,a as Ke,s as Qe,d as Xe,o as Ze,e as et,f as tt}from"./dataUrls-88e95518.js";import"./LPU-c3fa7122.js";import"./LinearProgress-5fee5b55.js";import"./useDocumentTitle-10cd5b85.js";import"./nivo-legends.es-1f8a392d.js";import"./index-603f43b4.js";import"./line-f50466b7.js";import"./Sort-0e12c875.js";import"./Chip-8fe59bed.js";import"./FilterAlt-cfc7ee07.js";import"./Box-dcfce51e.js";import"./LockListContext-b0a8f0f7.js";import"./ToggleButtonGroup-07060752.js";import"./Cancel-aea02285.js";import"./rankingRequestData-d3ef79e5.js";const st={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},rt={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},R={discord:st,reddit:rt};function ot({data:i}){const{scorecardStats:h,discordBeltCounts:c,redditBeltCounts:u}=i,{userCounts:n}=h,{filters:p,addFilter:y,removeFilters:v}=l.useContext(W),P=at(),f=p!=null&&p.dataset?p==null?void 0:p.dataset:"pickerData",[k,S]=l.useState(f),x=l.useCallback(d=>{y("dataset",d,!0),S(d)},[y]),j=R.reddit.Total-n.totalUsers,m=l.useMemo(()=>{const d={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:n.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:j}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},C={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:n.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:n.totalUsers-n.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},E={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:n.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:n.scorecardUsers-n.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},ie={parent:"Scorecard Users",data:Object.keys(n.belts).sort((r,b)=>M(r,b)).map(r=>({id:r,label:r,value:n.belts[r]})),colors:T,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},ce={parent:"Imported Belts",data:Object.keys(n.dans).sort((r,b)=>parseInt(r)-parseInt(b)).map(r=>({id:Z(r),label:Z(r),value:n.dans[r]})),colors:ee,description:"Dan Breakdown"},de={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:R.discord.Total},{id:"Reddit",label:"Reddit",value:R.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},V=Object.keys(c).reduce((r,b)=>{const O=b.replace(" Belt","").trim();return r[O]=c[b],r},{}),ue={parent:"Other LPU Pickers",data:Object.keys(V).filter(r=>!r.includes("Dan")).sort((r,b)=>M(r,b)).map(r=>{const b=r==="Black"?"Black Belt":r;return{id:b,label:b,value:V[r]}}),colors:T,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(F,{onClick:()=>x("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-15},pe={parent:"Discord",data:Object.keys(c).filter(r=>r.includes("Dan")).sort((r,b)=>parseInt(r)-parseInt(b)).map(r=>({id:r,label:r,value:c[r]})),colors:ee,description:"Discord Dan Breakdown"},$=Object.keys(u).reduce((r,b)=>{const O=b.replace(" Belt","").trim();return r[O]=u[b],r},{}),me={parent:"Other LPU Pickers",data:Object.keys($).filter(r=>!r.includes("Dan")).sort((r,b)=>M(r,b)).map(r=>({id:r,label:r,value:$[r]})),colors:T,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(F,{onClick:()=>x("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-25};return{pickerData:d,"LPUbelts Users":C,"Scorecard Users":E,"Imported Belts":ie,Black:ce,"Other LPU Pickers":de,Discord:ue,"Black Belt":pe,Reddit:me}},[c,x,j,u,n]),D=m[k].data,L=m[k].data.reduce((d,C)=>d+C.value,0),w=l.useCallback(d=>{m[d.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",x(d.id)},200))},[x,m]),z=l.useCallback(()=>{m[m[k].parent].parent?y("dataset",m[k].parent,!0):v(["dataset"]),S(m[k].parent)},[y,m,k,v]),g=l.useCallback((d,C)=>{m[d.id]&&(C.currentTarget.style.cursor="pointer")},[m]),{width:o}=se(),B=o<=360,a=o<=395,s=o<=428,t=o<=560,A={top:30,right:0,bottom:30,left:0};let U=320;B?U=175:a?U=190:s?U=230:t&&(U=240);const ae="1.0rem",H=t?5:4,le=t?10:8,ne=t?0:8;return e.jsxs(N.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:m[k].description}),e.jsxs("div",{style:{height:U,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(Le,{data:D,theme:Ee,colors:m[k].colors,margin:A,startAngle:m[k].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:H,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:d=>d.label+": "+Math.round(d.value/L*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:ne,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:le,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:d=>{w(d)},onMouseEnter:(d,C)=>{g(d,C)},tooltip:d=>{const C=(d.datum.arc.angleDeg>H,d.datum.label+": "),E=d.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:t||P?"none":"block"},children:e.jsxs("div",{children:[C,E]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:U/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:m[k].parent&&e.jsx(F,{onClick:z,style:{color:"#ccc",cursor:"pointer",fontSize:ae},children:"back"})})]},"pickPie")]})}function Z(i){const h=["st","nd","rd","th"];return i+""+h[Math.min(4,parseInt(i))-1]}const ee=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function at(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches}function te({entry:i,index:h,collapse:c=!1}){const u=he(),p=J(i).replace(/[\s/]/g,"_").replace(/\W/g,""),y=l.useCallback(P=>{const f=`/locks?tab=search&search=${P.id}&id=${P.id}&name=${p}`;u(f)},[u,p]),v=i.belt==="Unranked"?"#bbb":"#fff";return e.jsxs(oe,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[e.jsx(I,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:e.jsx(Me,{value:i.belt})}),e.jsx(I,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:e.jsx(F,{onClick:()=>y(i),style:{color:v},children:J(i)})})}),e.jsx(I,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:i.currentPicks})]},h)}function lt(){var B;const{visibleEntries:i=[]}=l.useContext(re),{filters:h,addFilter:c,removeFilters:u}=l.useContext(W),{userBelt:n="All Belts",sort:p}=h,[y,v]=l.useState(p);l.useEffect(()=>{v(!!p)},[p]);const P=60;let f=((B=i.find(a=>a.displayRank===P))==null?void 0:B.currentPicks)||0;f=f>2?f:0;const k=l.useMemo(()=>i.filter(a=>a.currentPicks>=f),[i,f]),S=l.useMemo(()=>i.filter(a=>a.currentPicks<f),[i,f]),x=l.useMemo(()=>["All Belts",...fe],[]),j=l.useCallback(()=>{const a=x.findIndex(t=>t===n),s=a<x.length-1?a+1:0;c("userBelt",x[s],!0)},[c,x,n]),m=l.useCallback(()=>{const a=x.findIndex(t=>t===n),s=a>0?a-1:x.length-1;c("userBelt",x[s],!0)},[c,x,n]),[D,L]=l.useState(!1),w=l.useCallback(()=>L(!1),[]),z=l.useCallback(()=>L(!0),[]),g=l.useCallback(a=>{a.target.value!=="All Belts"?c("userBelt",a.target.value,!0):u(["userBelt"]),w()},[c,w,u]),o=l.useCallback(()=>{v(!y)},[y]);return e.jsxs(N.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(G,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(_,{onClick:m,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(Ue,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(Ne,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(He,{style:{color:"#bbb"},children:"User Belt"}),e.jsx(Ve,{id:"beltSelect",value:n||"All Belts",label:"Brand",open:D,onClose:w,onOpen:z,onChange:g,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:x.map((a,s)=>e.jsx(xe,{value:x[s],children:x[s]},s))})]})}),e.jsx(G,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(_,{onClick:j,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ze,{})})})]})}),e.jsx(Re,{sortValues:We,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(K,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(Q,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(Te,{children:e.jsxs(oe,{style:{padding:"0px",fontWeight:700},children:[e.jsx(I,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(I,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx(X,{children:k.map((a,s)=>e.jsx(te,{entry:a,index:s},s))})]})}),e.jsx($e,{in:!!y,timeout:"auto",unmountOnExit:!0,children:e.jsx(K,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(Q,{style:{backgroundColor:"#1c1c1c"},children:e.jsx(X,{children:S.map((a,s)=>e.jsx(te,{entry:a,index:s},s))})})})})]})}),S.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(F,{onClick:o,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!y&&"Show More"||"Show Less"})})})]})}function nt({data:i}){const{width:h}=se(),u=h<560?"8px 8px 32px 8px":"24px 24px 32px 24px",n={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},p={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:u,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:p,children:"User Drilldown"}),e.jsx(ot,{data:i}),e.jsx("div",{style:n,children:"Scorecard Locks"}),e.jsx(lt,{data:i})]})}function it({children:i,allEntries:h,scorecardEntries:c,profile:u}){const{filters:n}=l.useContext(W),{search:p,id:y,tab:v,name:P,sort:f,image:k,expandAll:S,dataset:x,...j}=n,{userBelt:m}=j,D=l.useCallback(g=>h.find(o=>o.id===g),[h]),L=l.useMemo(()=>Object.keys(c).map(g=>{var B,a,s;const o=D(g);return o?{...c[g],userBelt:Object.keys(c[g].scorecardPicks),currentPicks:c[g].scorecardPicks[m||"All Belts"],...o,makes:o.makeModels[0].make?o.makeModels.map(({make:t})=>t):o.makeModels[0].model,fuzzy:Y(o.makeModels.map(({make:t,model:A})=>[t,A]).flat().filter(t=>t).concat([o.version,o.notes,o.belt]).join(",")),content:[(B=o.media)!=null&&B.some(t=>!t.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(a=o.media)!=null&&a.some(t=>t.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((s=o.links)==null?void 0:s.length)>0?"Has Links":"No Links",be[o.belt].danPoints>0?"Worth Dan Points":void 0,q(o.lastUpdated).isAfter(q().subtract(1,"days"))?"Updated Recently":void 0,o.belt.startsWith("Black")?"Is Black":void 0,o.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(t=>t),collection:ge.locks.map.map(t=>u&&u[t.key]&&u[t.key].includes(o.id)?t.label:"Not "+t.label),collectionSaves:_e[o.id]||0,simpleBelt:o.belt.replace(/\s\d/g,"")}:null}).filter(g=>g),[D,u,c,m]),w=l.useMemo(()=>{const g=Object.keys(j).map(s=>{const t=j[s];return Array.isArray(t)?t.map(A=>({key:s,value:A})):{key:s,value:t}}).flat(),o=L.filter(s=>g.every(({key:t,value:A})=>Array.isArray(s[t])?s[t].includes(A):s[t]===A)),B=p&&o.find(s=>s.id===p);let a=o;return B?a=[B]:p&&(a=Oe.go(Y(p),o,{keys:ct,threshold:-25e3}).map(s=>({...s.obj,score:s.score}))),f?a.sort((s,t)=>{if(f==="beltAscending")return ke(s.belt,t.belt)||t.currentPicks-s.currentPicks||s.fuzzy.localeCompare(t.fuzzy);if(f==="beltDescending")return ye(s.belt,t.belt)||t.currentPicks-s.currentPicks||s.fuzzy.localeCompare(t.fuzzy);if(f==="alphaAscending")return s.fuzzy.localeCompare(t.fuzzy);if(f==="alphaDescending")return t.fuzzy.localeCompare(s.fuzzy)}):a.sort((s,t)=>t.currentPicks-s.currentPicks||s.fuzzy.localeCompare(t.fuzzy)).map((s,t)=>({...s,displayRank:t+1}))},[j,L,p,f]),z=l.useMemo(()=>({allEntries:h,visibleEntries:w,getEntryFromId:D,expandAll:S,profile:u}),[h,D,w,S,u]);return e.jsx(re.Provider,{value:z,children:i})}const ct=["fuzzy"];function Gt(){const{lockCollection:i}=l.useContext(Be);Pe("Explore Scorecard");const{data:h,loading:c,error:u,errorMessage:n}=Ae({urls:dt});return e.jsxs(N.Fragment,{children:[e.jsx(je,{title:"Explore Scorecard"}),u&&e.jsx(Ie,{errorMessage:n}),c&&e.jsx(we,{}),!c&&!u&&!!h&&e.jsx(Ce,{filterFields:Ge,children:e.jsx(it,{allEntries:ve,scorecardEntries:h.scorecardStats.lockCountsByUserBelt,profile:i,children:e.jsx(nt,{data:{...h,lockStats:Fe}})})}),e.jsx(Se,{}),e.jsx(De,{feature:"stats"})]})}const dt={brandDistribution:qe,collectionsStatsCurrent:Ye,popularAreas:Je,redditGrowth:Ke,siteFullNew:Qe,pickStatsData:Xe,scorecardStats:Ze,discordBeltCounts:et,redditBeltCounts:tt};export{Gt as default};
