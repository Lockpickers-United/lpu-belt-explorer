import{r as c,F as h,j as z}from"./index-OScSG1m8.js";import{f as g,D as j}from"./DataContext-Ci3vJGAn.js";import{r as F}from"./index-BcpdaU_9.js";function K({children:v,allEntries:s}){const{filters:A}=c.useContext(h),{search:u,id:P,tab:k,name:B,sort:r,image:D,preview:R,single:M,expandAll:m,...p}=A,f=c.useMemo(()=>{const l=(e,t)=>{const o=String(t??""),n=o.startsWith("!"),a=n?o.slice(1):o;return{key:e,value:a,negative:n}},d=Object.keys(p).map(e=>{const t=p[e];return Array.isArray(t)?t.map(o=>l(e,o)):l(e,t)}).flat(),C=s.filter(e=>d.every(({key:t,value:o,negative:n})=>{const a=e[t];if(Array.isArray(a)){const i=a.includes(o);return n?!i:i}else{const i=a===o;return n?!i:i}})).sort((e,t)=>e.potNumber-t.potNumber),I=u?g.go(F(u),C,{keys:N,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):C;return r?I.sort((e,t)=>r==="potName"?e.title.localeCompare(t.title):r==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):r==="tickets"?parseInt(t.tickets)-parseInt(e.tickets)||e.title.localeCompare(t.title):r==="donors"?parseInt(t.donors)-parseInt(e.donors)||e.title.localeCompare(t.title):r==="dateAdded"?parseInt(t.dateAdded)-parseInt(e.dateAdded)||e.title.localeCompare(t.title):parseInt(e[r])-parseInt(t[r])||e.title.localeCompare(t.title)):I.sort((e,t)=>parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title))},[s,p,u,r]),y=c.useCallback(l=>s.find(d=>d.id===l),[s]),x=c.useMemo(()=>({allEntries:s,visibleEntries:f,getPotFromId:y,expandAll:m}),[s,f,y,m]);return z.jsx(j.Provider,{value:x,children:v})}const N=["fuzzy"];export{K as R};
