import{r as n,j as v}from"./index-4e350356.js";import{F as y,f as I,D as A}from"./filterFields-7d8b0d3c.js";import{r as x}from"./index-47644cea.js";function b({children:d,allEntries:o}){const{filters:f}=n.useContext(y),{search:l,id:g,tab:j,name:N,sort:r,image:P,preview:h,single:F,...a}=f,c=n.useMemo(()=>{const u=Object.keys(a).map(e=>{const t=a[e];return Array.isArray(t)?t.map(i=>({key:e,value:i})):{key:e,value:t}}).flat(),s=o.filter(e=>u.every(({key:t,value:i})=>Array.isArray(e[t])?e[t].includes(i):e[t]===i)).sort((e,t)=>e.potNumber-t.potNumber),m=l?I.go(x(l),s,{keys:z,threshold:-25e3}).map(e=>({...e.obj,score:e.score})):s;return r?m.sort((e,t)=>r==="potName"?e.title.localeCompare(t.title):r==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):r==="tickets"?parseInt(t.tickets)-parseInt(e.tickets)||e.title.localeCompare(t.title):r==="donors"?parseInt(t.donors)-parseInt(e.donors)||e.title.localeCompare(t.title):r==="dateAdded"?parseInt(t.dateAdded)-parseInt(e.dateAdded)||e.title.localeCompare(t.title):parseInt(e[r])-parseInt(t[r])||e.title.localeCompare(t.title)):m.sort((e,t)=>parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title))},[o,a,l,r]);console.log("visibleEntries",c);const p=n.useCallback(u=>o.find(s=>s.id===u),[o]),C=n.useMemo(()=>({allEntries:o,visibleEntries:c,getPotFromId:p}),[o,c,p]);return v.jsx(A.Provider,{value:C,children:d})}const z=["fuzzy"];export{b as R};
