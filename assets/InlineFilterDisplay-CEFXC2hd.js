import{b as $,r as n,F as B,j as t,R as k,ad as W,ae as b,ap as E,$ as I,O as G,P as A,Q as P,U as q,av as z,aw as D,u as U,a4 as V,a5 as N}from"./index-DW9E29xH.js";import{g as _}from"./glossary-v53ZYECr.js";import{C as R}from"./Chip-C-y745Pd.js";import{L as T}from"./Link-DEucGyNf.js";import{F as w}from"./FieldValue-BULx2D8R.js";import{f as L,C as J}from"./FilterAlt-iyA2xsCo.js";import{F as K,I as Q,S as H}from"./Select-CAB4PExz.js";function ue({field:l,value:r,label:u=r,mode:o,clickable:h=!0,...f}){const g=$(),[s,e]=n.useState(!1),{filters:x,addFilter:p}=n.useContext(B),C=n.useCallback(a=>{a.preventDefault(),a.stopPropagation(),e(!1)},[]),d=n.useCallback(a=>{var j;a.preventDefault(),a.stopPropagation(),e(!1),(j=x[l])!=null&&j.includes(r)||p(l,r),window.scrollTo({top:0,behavior:"smooth"})},[p,l,x,r]),m=n.useCallback(a=>{a.preventDefault(),a.stopPropagation(),e(a.target)},[]),i=n.useCallback(a=>{a.stopPropagation(),e(!1);const j=encodeURI(r);setTimeout(()=>g(`/glossary?term=${j}`),0)},[g,r]),c=n.useMemo(()=>!!_.find(a=>a.term.toLowerCase()===r.toLowerCase()),[r]);return t.jsxs(k.Fragment,{children:[(!o||o==="full")&&c&&t.jsxs(k.Fragment,{children:[t.jsx(R,{clickable:h,variant:"outlined",label:u,style:{marginRight:4,marginBottom:4},onClick:m,...f}),!!s&&t.jsxs(W,{open:!!s,anchorEl:s,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:C,children:[t.jsxs(b,{disabled:!0,children:["Term: ",r]}),t.jsx(E,{}),t.jsx(b,{onClick:d,children:"Add Filter"}),t.jsx(b,{onClick:i,disabled:!c,children:"Go to Glossary"})]})]}),(o==="simple"||(!o||o==="full")&&!c)&&t.jsx(R,{clickable:h,variant:"outlined",label:u,style:{marginRight:4,marginBottom:4},onClick:h?d:()=>{},...f}),o==="text"&&t.jsx(T,{style:{color:"#fff"},onClick:d,...f,children:u})]})}function X(){const{filters:l,filterCount:r,removeFilter:u,filterFieldsByFieldName:o}=n.useContext(B),h=n.useCallback((s,e)=>()=>{u(s,e)},[u]),f=n.useMemo(()=>{const{search:s,id:e,tab:x,name:p,sort:C,image:d,...m}=l;return Object.keys(m).map(i=>{const c=l[i];return Array.isArray(c)?c.map(a=>({key:i,value:a})):{key:i,value:c}}).flat()},[l]),g=n.useCallback((s,e)=>s==="Belt"?e==="Unranked"?s:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":s==="UL Group"?"Group "+e:s==="Wheels"?`${e} Wheels`:L[e]?L[e]:e,[]);return r===0?null:t.jsx(w,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(I,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:f.map(({key:s,value:e},x)=>{var p;return t.jsx(R,{label:`${g((p=o[s])==null?void 0:p.label,e)}`,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:h(s,e)},x)})})})}var y={},O;function Y(){if(O)return y;O=1;var l=G();Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var r=l(A()),u=P();return y.default=(0,r.default)((0,u.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),y}var Z=Y();const ee=q(Z);function te({filterKey:l,filterValue:r,label:u}){const{removeFilter:o,addFilter:h}=n.useContext(B),[f,g]=n.useState(!1),s=n.useCallback(()=>g(!1),[]),e=n.useCallback(d=>{d.stopPropagation(),g(d.currentTarget)},[]),x=n.useCallback((d,m)=>()=>{const i=String(m??""),c=i.startsWith("!")?i.slice(1):"!"+i;o(d,m),h(d,c),g(!1)},[h,o]),p=n.useCallback((d,m)=>()=>{o(d,m)},[o]),C=r.startsWith("!")?"Include Matches":"Exclude Matches";return t.jsxs(k.Fragment,{children:[t.jsx(R,{label:u.replace("!","NOT "),variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:e,deleteIcon:t.jsx(ee,{})}),!!f&&t.jsxs(W,{open:!!f,anchorEl:f,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:s,children:[t.jsx(b,{onClick:x(l,r),children:C}),t.jsx(b,{onClick:p(l,r),children:"Delete Filter"})]})]})}function se(){const{filters:l,filterCount:r,removeFilter:u,filterFieldsByFieldName:o}=n.useContext(B),h=n.useCallback((s,e)=>()=>{u(s,e)},[u]),f=n.useMemo(()=>{const{search:s,id:e,tab:x,name:p,sort:C,image:d,...m}=l;return Object.keys(m).map(i=>{const c=l[i];return Array.isArray(c)?c.map(a=>({key:i,value:a})):{key:i,value:c}}).flat()},[l]),g=n.useCallback((s,e)=>s==="Belt"?e==="Unranked"?s:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":s==="UL Group"?"Group "+e:s==="Wheels"?`${e} Wheels`:L[e]?L[e]:e,[]);return r===0?null:t.jsx(w,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(I,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:f.map(({key:s,value:e},x)=>{var p;return t.jsx(k.Fragment,{children:t.jsx(te,{filterKey:s,filterValue:e,label:`${g((p=o[s])==null?void 0:p.label,e)}`,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:h(s,e)})},x)})})})}function de({profile:l={},collectionType:r}){const{userId:u}=z(),{filters:o,filterCount:h,addFilter:f}=n.useContext(B),[g,s]=k.useState(!1),e=D[r].labels,x=D[r].keyByLabel,p=D[r].getCollected(l)||[],{isMobile:C}=U(),d=C?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:m=u&&h===0?"Any":null}=o,i=e.includes(m)&&h<2;let c="";m&&(typeof m=="string"?c=m:c="Any");const a=n.useCallback(()=>s(!1),[]),j=n.useCallback(()=>s(!0),[]),v=n.useCallback(F=>{f("collection",F.target.value,!0)},[f]);return!h&&!u?null:t.jsx(V,{style:d,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs(N,{style:{paddingTop:0,paddingLeft:8},children:[i&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(K,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(Q,{id:"label",children:"Collection"}),t.jsx(H,{name:"collection-selector",label:"Collection",open:g,onClose:a,onOpen:j,value:c,onChange:v,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:e.map((F,M)=>{var S;return t.jsxs(b,{value:F,children:[F," (",F==="Any"?p.length:((S=l[x[F]])==null?void 0:S.length)||0,")"]},M)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(J,{})})]}),!i&&r!=="safelocks"&&t.jsx(X,{}),!i&&r==="safelocks"&&t.jsx(se,{})]})})}export{ue as F,de as I};
