import{r as i,A as R,D as h,$ as _,u as j,j as e,K as y,J as F,B as I,I as B,bE as S,R as D,N as b,h as v,T as A}from"./index-0e5d852e.js";import{p as k,c as L}from"./postData-f4d38ed6.js";import{u as V}from"./useData-64453704.js";import{A as O}from"./AdminStatsTable-29a23fe6.js";import{d as C}from"./ContentCopy-f53481c7.js";import{T as U}from"./TextField-a1ba118d.js";import{u as w}from"./usePageTitle-b770e8cd.js";import"./axios-439bb627.js";import"./TableRow-9190d97b.js";import"./Select-75cb90f7.js";import"./useDocumentTitle-889c09f7.js";function P(){const{authLoaded:o}=i.useContext(R),{adminRole:a}=i.useContext(h),{user:r}=i.useContext(R),{getProfile:d}=i.useContext(h),s=r?r.uid:null,c=i.useCallback(async()=>{if(!s)return null;try{return await d(s)}catch(m){return console.error("Error loading profile.",m),null}},[d,s]),{data:u={},loading:n,error:p}=V({loadFn:c});return{authLoaded:o,adminRole:a,profile:u,user:r,loading:n,error:p}}function W({data:o}){const a=Object.keys(o).filter(t=>t.includes("Belt")).reduce((t,l)=>t+o[l],0),r=_.reduce((t,l)=>{const E=`${l} Belt`;return t.push({belt:l,reddit:o[E]}),t},[]);r.push({belt:"Total",reddit:a});const d={columns:[{name:"Belt",align:"left",id:"belt"},{name:"Reddit Count",align:"center",id:"reddit"}],data:r},{width:s}=j(),c=s<=360,u=s<=395,n=s<=428,p=s<=560,f=s<=820,m=c?".8rem":u?".85rem":n?".9rem":".95rem",x=300;return e.jsx(O,{tableData:d,tableWidth:x,fontSize:m})}function N({text:o,title:a="Text"}){const r=i.useCallback(async()=>{await navigator.clipboard.writeText(o),y(`${a} copied to clipboard.`)},[o,a]);return o?e.jsx(F,{title:`Copy ${a}`,arrow:!0,disableFocusListener:!0,children:o?e.jsx(I,{variant:"outlined",size:"small",onClick:r,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(C,{}),children:"Copy"}):e.jsx(B,{onClick:r,children:e.jsx(C,{})})}):null}const{VITE_DEV_FIRESTORE:$}={VITE_LOCAL_DATA:"false",VITE_DISCORD_CLIENT_ID:"1271550138929774725",VITE_DISCORD_CLIENT_SECRET:"CoecO8cx2SyhMq2k3WdWNp-lavxYkeS-",VITE_REDDIT_CLIENT_ID:"i_lvEF-IFPalom2BR_lVjg",VITE_REDDIT_CLIENT_SECRET:"09PAhQfve1tysFh3jQAtmFaG5pWG0A",VITE_DEV_FIRESTORE:"false",VITE_RAFL_VIEW_FORM_ID:"1FAIpQLSf_PQ6XXDYy0cTn_2MeDCwikTOYLRtncPKluFRK-QEYHX0qug",VITE_RAFL_STATE:"hidden",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},M=$==="true"?"https://explore.lpubelts.com:3443":"https://explore.lpubelts.com:8443",Q=()=>{const{user:o}=P(),[a,r]=i.useState(null),[d,s]=i.useState(!1),[c,u]=i.useState(void 0),[n,p]=i.useState(void 0),f=n&&n.data?Object.keys(n.data).filter(t=>t.includes("Belt")).reduce((t,l)=>t+`${l}	${n.data[l]}
`,""):"",m=t=>{r(t.target.files[0])},x=async()=>{if(!a){alert("Please select a file first!");return}const t=new FormData;t.append("file",a),s(!0);try{const l=`${M}/uploadRedditBelts`,E=!0,g=1e4;try{p(await k({user:o,url:l,formData:t,snackBars:E,timeoutDuration:g}))}catch(T){console.error("Error uploading file:",T),u(L(T))}finally{s(!1)}}catch{console.error("Error uploading file:",c)}finally{s(!1)}};return e.jsxs("div",{style:{maxWidth:700,padding:0,marginLeft:"auto",marginRight:"auto",marginTop:16,marginBottom:46,justifyItems:"center"},children:[e.jsx("h2",{children:"Upload Reddit Flair Data File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:16},children:[e.jsx(U,{type:"file",style:{marginRight:16},onChange:m}),e.jsx(I,{onClick:x,disabled:!a||d,color:"secondary",variant:"contained",size:"small",children:"Upload"})]}),n&&n.data&&e.jsxs("div",{style:{marginTop:36,justifyItems:"center"},children:[e.jsx(W,{data:n.data}),e.jsx("div",{style:{height:18}}),e.jsx(N,{text:f,title:"Reddit Counts"})]})]})},q=Q;function ae(){const{profile:o,user:a}=S();w("Upload Reddit Belt Data");const r=e.jsx(D.Fragment,{});return e.jsxs(D.Fragment,{children:[e.jsx(b,{title:"Upload Reddit Belt Data",extras:r}),e.jsx(q,{profile:o,user:a}),e.jsx(v,{}),e.jsx(A,{feature:"flickrInfo"})]})}export{ae as default};
