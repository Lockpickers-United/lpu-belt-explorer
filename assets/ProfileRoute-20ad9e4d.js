import{ai as y,r as u,X as D,u as E,j as e,T as U,I as z,aj as G,R as k,a0 as P,a2 as F,b as I,a3 as O,B as V,a1 as Y,J as q,N as J,K,O as X}from"./index-7145c006.js";import{B as _,D as W,j as Q,u as Z,L as $,I as ee,k as te,S as ie,f as se,d as oe,l as ne,g as re,h as ae,i as de}from"./sortFields-f6e44f8e.js";import{C as le,E as ce,b as he,T as xe,D as pe}from"./data-a2259f4a.js";import{u as me,L as ue}from"./useData-3d17501b.js";import{u as j}from"./useWindowSize-c49a9fec.js";import{C as ge}from"./CopyProfileLinkButton-5dde9032.js";import"./dayjs.min-a6681d5f.js";import{B as H}from"./nivo-bar.es-3dedd697.js";import{p as N}from"./chartDefaults-e88ecc0b.js";import"./ImageViewer-25e71e09.js";import"./Link-e785e3b2.js";import"./LinearProgress-90b5b0c3.js";import"./Search-5a80f092.js";import"./InputLabel-03792159.js";import"./Sort-af1e0384.js";import"./TextField-be30ded9.js";import"./index-dcf4623f.js";import"./index-70277b37.js";import"./LPU-c3fa7122.js";import"./nivo-legends.es-1500f492.js";function we(){const{userId:t}=y(),{user:r}=u.useContext(D),a=E(),l=u.useCallback(()=>{a("/profile/edit")},[a]);return t!==(r==null?void 0:r.uid)?null:e.jsx(U,{title:"Edit Profile",arrow:!0,disableFocusListener:!0,children:e.jsx(z,{onClick:l,children:e.jsx(G,{})})})}const fe="/assets/mycollection-8a0b4848.png";function je(){const{user:t}=u.useContext(D),{userId:r}=y(),a=E(),{isMobile:l}=j(),o=l?{marginTop:-32,maxWidth:700,marginLeft:8,marginRight:8,borderRadius:0}:{marginTop:-32,maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},n=r===(t==null?void 0:t.uid),d=n?e.jsxs(k.Fragment,{children:[e.jsxs("span",{children:["There are no locks in your collection.",e.jsx("br",{}),'Browse the site and use the "My Collection" button to track locks that you own, picked, recorded, or wish to buy.',e.jsx("br",{})]}),e.jsx("img",{alt:"My Collection",src:fe})]}):"There are no locks in this collection.",g=n?"Explore":"Go Home",i=u.useCallback(()=>{a("/locks")},[a]);return e.jsx(_,{alignContent:"center",children:e.jsxs(P,{style:o,children:[e.jsx(F,{children:e.jsx(I,{variant:"h6",align:"center",children:d})}),e.jsxs(O,{children:[e.jsx("div",{style:{width:"100%"}}),e.jsx(V,{variant:"outlined",color:"secondary",onClick:i,style:{whiteSpace:"nowrap"},children:g})]})]})})}function be(){const t={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return e.jsxs(P,{style:t,children:[e.jsx(Y,{title:"Profile Not Found!"}),e.jsx(F,{children:e.jsx(I,{variant:"h6",align:"center",children:"This profile was not found."})})]})}function ve({lockCollection:t,userText:r,collectionBarHeight:a}){const l=t.own?t.own.length:0,o=t.picked?t.picked.length:0,n=t.recorded?t.recorded.length:0,d=t.wishlist?t.wishlist.length:0,i=l+o+n+d?{own:l,picked:o,recorded:n,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},s={own:14,picked:11,recorded:11,wishlist:8},c={own:250,picked:280,recorded:260,wishlist:100},h={own:Math.min(s.own,i.own),picked:Math.min(s.picked,i.picked),recorded:Math.min(s.recorded,i.recorded),wishlist:Math.min(s.wishlist,i.wishlist)},w={own:i.own>s.own?0:s.own-h.own,picked:i.picked>s.picked?0:s.picked-h.picked,recorded:i.recorded>s.recorded?0:s.recorded-h.recorded,wishlist:i.wishlist>s.wishlist?0:s.wishlist-h.wishlist},x={own:2,picked:2,recorded:2,wishlist:2},R={own:Math.max(i.own-(h.own+w.own+x.own),0),picked:Math.max(i.picked-(h.picked+w.picked+x.picked),0),recorded:Math.max(i.recorded-(h.recorded+w.recorded+x.recorded),0),wishlist:Math.max(i.wishlist-(h.wishlist+w.wishlist+x.wishlist),0)},A={own:Math.min(c.own-i.own,c.own-s.own-x.own),picked:Math.min(c.picked-i.picked,c.picked-s.picked-x.picked),recorded:Math.min(c.recorded-i.recorded,c.recorded-s.recorded-x.recorded),wishlist:Math.min(c.wishlist-i.wishlist,c.wishlist-s.wishlist-x.wishlist)},v=["own","picked","recorded","wishlist"],C=v.map((p,f)=>({row:v[f],"Average A":h[p],"Average B":w[p],Average:x[p],USER:R[p],"Top 10":A[p]})),{width:B}=j(),S=B<=560,L=a,M=S?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},T=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],b=t?[{title:r,color:"#3c90c5",width:"14px"}]:[];b.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const m=({items:p})=>e.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[e.jsx("div",{style:{width:"100%"}}),p.map(f=>e.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[e.jsx("div",{style:{backgroundColor:f.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),e.jsx("div",{style:{textAlign:"left",width:f.width},children:f.title})]},f.title)),e.jsx("div",{style:{width:"100%"}})]});return e.jsxs(k.Fragment,{children:[e.jsx("div",{style:{height:L},children:e.jsx(H,{data:C,keys:["Average A","Average B","Average","USER","Top 10"],theme:N,indexBy:"row",margin:M,padding:.2,valueScale:{type:"linear"},colors:T,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),e.jsx(m,{items:b})]})}function ke({beltData:t}){const{width:r}=j(),a=r<=360,l=r<=560,o=a?190:l?200:175,n=l?{top:0,right:20,bottom:50,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],g=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return e.jsxs("div",{style:{height:o,padding:"0px 8px 0px 8px",width:"100%"},children:[e.jsx(H,{data:t,margin:n,padding:.15,colors:i=>d[i.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:N,isInteractive:!1,enableLabel:!0,label:i=>i.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:i=>g[i.index%g.length]}),e.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function ye({profile:t}){const{userId:r}=y(),{user:a}=u.useContext(D),l=t,o=r===(a==null?void 0:a.uid)?"You":"User",{getEntryFromId:n}=u.useContext(W),d=u.useMemo(()=>{const M=Q(t),T=Z.concat("Unranked"),b=M.map(m=>{const p=n(m).belt;return p.includes("Black")?"Black":p}).reduce((m,p)=>(m[p]||(m[p]=0),m[p]++,m),{});return T.map(m=>({id:m,label:m,count:b[m],value:b[m]}))},[n,t]),{isMobile:g}=j(),i=g?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:s}=j(),c=s<=360,h=s<=395,w=s<=428,x=s<=560,v={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...x?{}:{display:"flex"}},C=x?"100%":"50%",B=x?"100%":"50%",S=c?200:x?210:180,L=170;return e.jsx(P,{style:i,sx:{paddingBottom:5},children:e.jsx(F,{style:{paddingTop:0,paddingLeft:8},children:e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("div",{style:v,children:[e.jsx("div",{style:{width:C,verticalAlign:"top",height:S},children:e.jsx(ve,{lockCollection:l,userText:o,collectionBarHeight:170})}),e.jsx("div",{style:{width:B,height:L,marginTop:"0px"},children:e.jsx(ke,{beltData:d})})]})})})})}function Ce({profile:t}){const{compact:r,expanded:a,setExpanded:l}=u.useContext($),{visibleEntries:o=[]}=u.useContext(W),n=u.useDeferredValue(a);return e.jsxs("div",{style:{margin:8,paddingBottom:32},children:[e.jsx(ee,{profile:t}),e.jsx(ye,{profile:t}),r?e.jsx(le,{entries:o}):o.map(d=>e.jsx(ce,{entry:d,expanded:d.id===n,onExpand:l},d.id))]})}function Ye(){const{userId:t}=y(),{getProfile:r}=u.useContext(q),{isMobile:a}=j(),l=u.useCallback(async()=>{try{return await r(t)}catch(c){return console.error("Error loading profile.",c),null}},[r,t]),{data:o={},loading:n,error:d}=me({loadFn:l}),g=u.useMemo(()=>{if(n||!o)return[];const c=new Set(te.flatMap(({key:h})=>o[h]));return he.filter(h=>c.has(h.id))},[o,n]),i=e.jsxs(k.Fragment,{children:[e.jsx(ie,{label:"Collection"}),e.jsx(se,{}),e.jsx(oe,{sortValues:ne}),!a&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(xe,{}),e.jsx(we,{}),e.jsx(ge,{})]}),s=n?"Loading...":"Profile";return e.jsx(k.Fragment,{children:e.jsx(re,{filterFields:ae,children:e.jsx(pe,{allEntries:g,profile:o,children:e.jsxs(de,{children:[e.jsx(J,{title:s,extras:i}),n&&e.jsx(ue,{}),!n&&o&&!d&&e.jsx(Ce,{profile:o}),!n&&o&&!d&&g.length===0&&e.jsx(je,{}),!n&&(!o||d)&&e.jsx(be,{}),e.jsx(K,{}),e.jsx(X,{feature:"profile"})]})})})})}export{Ye as default};
