import{b as $,r as l,F as y,j as t,R as k,ad as O,ae as b,ap as E,$ as W,O as G,P as A,Q as P,U as q,av as z,aw as L,u as U,a4 as V,a5 as N}from"./index-DBhUTKDN.js";import{g as _}from"./glossary-v53ZYECr.js";import{C as B}from"./Chip-q6QGGLWN.js";import{L as T}from"./Link-Ds52YCoq.js";import{F as I}from"./FieldValue-C9G5cyVN.js";import{f as R,C as J}from"./FilterAlt-C7RWz5nT.js";import{F as K,I as Q,S as H}from"./Select-CX1FeCNu.js";function ue({field:a,value:n,label:c=n,mode:o,...d}){const m=$(),[h,s]=l.useState(!1),{filters:e,addFilter:g}=l.useContext(y),f=l.useCallback(r=>{r.preventDefault(),r.stopPropagation(),s(!1)},[]),C=l.useCallback(r=>{var x;r.preventDefault(),r.stopPropagation(),s(!1),(x=e[a])!=null&&x.includes(n)||g(a,n),window.scrollTo({top:0,behavior:"smooth"})},[g,a,e,n]),p=l.useCallback(r=>{r.preventDefault(),r.stopPropagation(),s(r.target)},[]),u=l.useCallback(r=>{r.stopPropagation(),s(!1);const x=encodeURI(n);setTimeout(()=>m(`/glossary?term=${x}`),0)},[m,n]),i=l.useMemo(()=>!!_.find(r=>r.term.toLowerCase()===n.toLowerCase()),[n]);return t.jsxs(k.Fragment,{children:[(!o||o==="full")&&i&&t.jsxs(k.Fragment,{children:[t.jsx(B,{clickable:!0,variant:"outlined",label:c,style:{marginRight:4,marginBottom:4},onClick:p,...d}),!!h&&t.jsxs(O,{open:!!h,anchorEl:h,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:f,children:[t.jsxs(b,{disabled:!0,children:["Term: ",n]}),t.jsx(E,{}),t.jsx(b,{onClick:C,children:"Add Filter"}),t.jsx(b,{onClick:u,disabled:!i,children:"Go to Glossary"})]})]}),(o==="simple"||(!o||o==="full")&&!i)&&t.jsx(B,{clickable:!0,variant:"outlined",label:c,style:{marginRight:4,marginBottom:4},onClick:C,...d}),o==="text"&&t.jsx(T,{style:{color:"#fff"},onClick:C,...d,children:c})]})}function X(){const{filters:a,filterCount:n,removeFilter:c,filterFieldsByFieldName:o}=l.useContext(y),d=l.useCallback((s,e)=>()=>{c(s,e)},[c]),m=l.useMemo(()=>{const{search:s,id:e,tab:g,name:f,sort:C,image:p,...u}=a;return Object.keys(u).map(i=>{const r=a[i];return Array.isArray(r)?r.map(x=>({key:i,value:x})):{key:i,value:r}}).flat()},[a]),h=l.useCallback((s,e)=>s==="Belt"?e==="Unranked"?s:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":s==="UL Group"?"Group "+e:s==="Wheels"?`${e} Wheels`:R[e]?R[e]:e,[]);return n===0?null:t.jsx(I,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(W,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:m.map(({key:s,value:e},g)=>{var f;return t.jsx(B,{label:`${h((f=o[s])==null?void 0:f.label,e)}`,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:d(s,e)},g)})})})}var F={},S;function Y(){if(S)return F;S=1;var a=G();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var n=a(A()),c=P();return F.default=(0,n.default)((0,c.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),F}var Z=Y();const ee=q(Z);function te({filterKey:a,filterValue:n,label:c}){const{removeFilter:o,addFilter:d}=l.useContext(y),[m,h]=l.useState(!1),s=l.useCallback(()=>h(!1),[]),e=l.useCallback(p=>{p.stopPropagation(),h(p.currentTarget)},[]),g=l.useCallback((p,u)=>()=>{const i=String(u??""),r=i.startsWith("!")?i.slice(1):"!"+i;o(p,u),d(p,r),h(!1)},[d,o]),f=l.useCallback((p,u)=>()=>{o(p,u)},[o]),C=n.startsWith("!")?"Include Matches":"Exclude Matches";return t.jsxs(k.Fragment,{children:[t.jsx(B,{label:c.replace("!","NOT "),variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:e,deleteIcon:t.jsx(ee,{})}),!!m&&t.jsxs(O,{open:!!m,anchorEl:m,anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:s,children:[t.jsx(b,{onClick:g(a,n),children:C}),t.jsx(b,{onClick:f(a,n),children:"Delete Filter"})]})]})}function se(){const{filters:a,filterCount:n,removeFilter:c,filterFieldsByFieldName:o}=l.useContext(y),d=l.useCallback((s,e)=>()=>{c(s,e)},[c]),m=l.useMemo(()=>{const{search:s,id:e,tab:g,name:f,sort:C,image:p,...u}=a;return Object.keys(u).map(i=>{const r=a[i];return Array.isArray(r)?r.map(x=>({key:i,value:x})):{key:i,value:r}}).flat()},[a]),h=l.useCallback((s,e)=>s==="Belt"?e==="Unranked"?s:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":s==="UL Group"?"Group "+e:s==="Wheels"?`${e} Wheels`:R[e]?R[e]:e,[]);return n===0?null:t.jsx(I,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(W,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:m.map(({key:s,value:e},g)=>{var f;return t.jsx(k.Fragment,{children:t.jsx(te,{filterKey:s,filterValue:e,label:`${h((f=o[s])==null?void 0:f.label,e)}`,variant:"outlined",style:{marginRight:4,marginBottom:4},onDelete:d(s,e)})},g)})})})}function de({profile:a={},collectionType:n}){const{userId:c}=z(),{filters:o,filterCount:d,addFilter:m}=l.useContext(y),[h,s]=k.useState(!1),e=L[n].labels,g=L[n].keyByLabel,f=L[n].getCollected(a)||[],{isMobile:C}=U(),p=C?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:u=c&&d===0?"Any":null}=o,i=e.includes(u)&&d<2;let r="";u&&(typeof u=="string"?r=u:r="Any");const x=l.useCallback(()=>s(!1),[]),w=l.useCallback(()=>s(!0),[]),v=l.useCallback(j=>{m("collection",j.target.value,!0)},[m]);return!d&&!c?null:t.jsx(V,{style:p,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs(N,{style:{paddingTop:0,paddingLeft:8},children:[i&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(K,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(Q,{id:"label",children:"Collection"}),t.jsx(H,{name:"collection-selector",label:"Collection",open:h,onClose:x,onOpen:w,value:r,onChange:v,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:e.map((j,M)=>{var D;return t.jsxs(b,{value:j,children:[j," (",j==="Any"?f.length:((D=a[g[j]])==null?void 0:D.length)||0,")"]},M)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(J,{})})]}),!i&&n!=="safelocks"&&t.jsx(X,{}),!i&&n==="safelocks"&&t.jsx(se,{})]})})}export{ue as F,de as I};
