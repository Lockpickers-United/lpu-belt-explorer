import{O as V,P as _,j as t,r as m,J as R,I as A,u as j,R as D,ar as F,A as T,$ as q,a2 as O,a3 as U,X as $,D as G,as as X,a0 as Y,e as J,N as K,h as Q,T as Z}from"./index-00438f78.js";import{l as tt}from"./filterFields-39d8f13a.js";import{l as et}from"./sortFields-b1bde6f9.js";import{F as it,S as ot}from"./SortButton-853a45fd.js";import{D as rt}from"./LockDataProvider-b74a120c.js";import{L as I,a as st}from"./LockListContext-88478614.js";import{S as at}from"./SearchBox-25709e84.js";import{L as nt}from"./LoadingDisplay-d1211097.js";import{u as dt}from"./useData-dec337f4.js";import{N as lt}from"./NoProfileData-09f56bdf.js";import{P as ct}from"./ProfileNotFound-f9a75723.js";import{d as pt,C as mt,E as ht,a as xt}from"./ExportButton-d0af5726.js";import{I as ut}from"./InlineFilterDisplay-d6f06a82.js";import{D as H}from"./DataContext-241805e5.js";import"./index-37b167f0.js";import"./dataUrls-46e31bfb.js";import{X as N}from"./nivo-bar-3bc9afb8.js";import{p as W}from"./chartDefaults-bfd54756.js";import{P as gt}from"./ProfileHeader-ed6f57e6.js";import"./rankingRequestData-d3ef79e5.js";import"./FilterAlt-719ce8d9.js";import"./Select-2485acd6.js";import"./Box-06367f8a.js";import"./Chip-4764e0dc.js";import"./Sort-613a7b31.js";import"./collectionStatsById-8def94ca.js";import"./entryName-aaed7a51.js";import"./Search-8da34676.js";import"./TextField-f7987e51.js";import"./LPU-c3fa7122.js";import"./LinearProgress-31b9d5e2.js";import"./mycollection-0ec86312.js";import"./BeltStripe-3ccfa001.js";import"./EvidenceForm-ecab35f5.js";import"./Launch-bc4cf378.js";import"./PhotoCamera-a7a5fd90.js";import"./LockEntrySearchBox-1c5a9944.js";import"./BeltStripeMini-991d819d.js";import"./Autocomplete-58b26faa.js";import"./LocalizationProvider-d7979515.js";import"./index-77944dbb.js";import"./DialogContent-07062ccf.js";import"./ListItem-f45fda9a.js";import"./Dialog-d2aab727.js";import"./VideocamOutlined-1f91e7ec.js";import"./FormGroup-0c59f3c1.js";import"./Checkbox-0c2d8f6d.js";import"./LoadingDisplay-049b058d.js";import"./CircularProgress-8b2f021f.js";import"./LoadingDisplaySmall-21975dfc.js";import"./ExpandMore-4ababae7.js";import"./FieldValue-a7b687d5.js";import"./BeltIcon-2664a76a.js";import"./CopyLinkToEntryButton-c408e9ad.js";import"./Link-65cee073.js";import"./CopyEntryTextButton-881fccf9.js";import"./ContentCopy-bd5eca7e.js";import"./LockImageGallery-74d48296.js";import"./ImageGallery-f9c8fa69.js";import"./ImageViewer-03f9e9d0.js";import"./ImageListItem-5e1a6ff9.js";import"./Link-bf448e41.js";import"./AccordionSummary-f82502ad.js";import"./Collapse-05fd1aca.js";import"./index-6a1f2945.js";import"./index-f2f78fde.js";import"./AccordionActions-eee49086.js";import"./download-2034be81.js";import"./List-a9fdd2d6.js";import"./glossary-4231c30e.js";import"./nivo-axes-67d3360f.js";import"./nivo-legends-5d7e75c1.js";import"./uniq-bce13266.js";import"./_baseClone-336cbb9a.js";import"./CopyProfileLinkButton-9813b8d6.js";import"./ToggleButtonGroup-49e4139d.js";var P={},ft=_;Object.defineProperty(P,"__esModule",{value:!0});var z=P.default=void 0,wt=ft(V()),vt=t;z=P.default=(0,wt.default)((0,vt.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");function jt(){const{compact:i,setCompact:s,setExpanded:l}=m.useContext(I),n=m.useCallback(()=>{s(!i),l(null)},[i,s,l]);return t.jsx(R,{title:"Toggle Compact View",arrow:!0,disableFocusListener:!0,children:t.jsx(A,{onClick:n,children:t.jsx(z,{color:i?"secondary":"inherit"})})})}function kt({lockCollection:i,userText:s,collectionBarHeight:l}){const n=i.own?i.own.length:0,h=i.picked?i.picked.length:0,a=i.recordedLocks?i.recordedLocks.length:0,d=i.wishlist?i.wishlist.length:0,e=n+h+a+d?{own:n,picked:h,recorded:a,wishlist:d}:{own:0,picked:0,recorded:0,wishlist:0},r={own:14,picked:11,recorded:11,wishlist:8},g={own:250,picked:280,recorded:260,wishlist:100},u={own:Math.min(r.own,e.own),picked:Math.min(r.picked,e.picked),recorded:Math.min(r.recorded,e.recorded),wishlist:Math.min(r.wishlist,e.wishlist)},o={own:e.own>r.own?0:r.own-u.own,picked:e.picked>r.picked?0:r.picked-u.picked,recorded:e.recorded>r.recorded?0:r.recorded-u.recorded,wishlist:e.wishlist>r.wishlist?0:r.wishlist-u.wishlist},p={own:2,picked:2,recorded:2,wishlist:2},E={own:Math.max(e.own-(u.own+o.own+p.own),0),picked:Math.max(e.picked-(u.picked+o.picked+p.picked),0),recorded:Math.max(e.recorded-(u.recorded+o.recorded+p.recorded),0),wishlist:Math.max(e.wishlist-(u.wishlist+o.wishlist+p.wishlist),0)},y={own:Math.min(g.own-e.own,g.own-r.own-p.own),picked:Math.min(g.picked-e.picked,g.picked-r.picked-p.picked),recorded:Math.min(g.recorded-e.recorded,g.recorded-r.recorded-p.recorded),wishlist:Math.min(g.wishlist-e.wishlist,g.wishlist-r.wishlist-p.wishlist)},k=["own","picked","recorded","wishlist"],C=k.map((f,w)=>({row:k[w],"Average A":u[f],"Average B":o[f],Average:p[f],USER:E[f],"Top 10":y[f]})),{width:S}=j(),L=S<=560,B=l,M=L?{top:10,right:20,bottom:50,left:55}:{top:10,right:20,bottom:50,left:55},b=["#3c90c5","#aaa","#000","#3c90c5","#aaa"],c=i?[{title:s,color:"#3c90c5",width:"14px"}]:[];c.push({title:"Average",color:"#000",width:"35px"},{title:"Top 10 Average",color:"#aaaaaa",width:"120px"});const v=({items:f})=>t.jsxs("div",{className:"chart-legend",style:{display:"flex",fontSize:".9rem",color:"#ddd",marginTop:13},children:[t.jsx("div",{style:{width:"100%"}}),f.map(w=>t.jsxs("div",{style:{display:"flex",padding:"0px 18px 24px 18px"},children:[t.jsx("div",{style:{backgroundColor:w.color,height:15,width:15,margin:"2px 6px 0px 0px",border:"1px solid #555"}}),t.jsx("div",{style:{textAlign:"left",width:w.width},children:w.title})]},w.title)),t.jsx("div",{style:{width:"100%"}})]});return t.jsxs(D.Fragment,{children:[t.jsx("div",{style:{height:B},children:t.jsx(N,{data:C,keys:["Average A","Average B","Average","USER","Top 10"],theme:W,indexBy:"row",margin:M,padding:.2,valueScale:{type:"linear"},colors:b,enableLabel:!1,axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,format:"00",legend:"Saves",legendPosition:"middle",legendOffset:-45,legendOpacity:.9},axisBottom:{tickRotation:-45},enableGridY:!1,isInteractive:!1,animate:!1})}),t.jsx(v,{items:c})]})}function bt({beltData:i}){const{width:s}=j(),l=s<=360,n=s<=560,h=175,a=n?{top:15,right:20,bottom:60,left:20}:{top:0,right:10,bottom:60,left:10},d=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#373737"],x=["#000","#000","#000","#000","#000","#000","#000","#000","#ddd","#ddd"];return t.jsxs("div",{style:{height:h,padding:"0px 8px 0px 8px",width:"100%"},children:[t.jsx(N,{data:i,margin:a,padding:.15,colors:e=>d[e.index%d.length],animate:!0,axisBottom:{tickRotation:-45},axisLeft:null,enableGridY:!1,theme:W,isInteractive:!1,enableLabel:!0,label:e=>e.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:e=>x[e.index%x.length]}),t.jsx("div",{className:"chart-legend",style:{fontSize:".9rem",color:"#ddd",textAlign:"center",width:"100%",marginTop:"3px"},children:"Belt Distribution"})]},"bar")}function yt({profile:i,entries:s}){const{userId:l}=F(),{user:n}=m.useContext(T),h=l===(n==null?void 0:n.uid)?"You":"User",a=m.useMemo(()=>{const M=q.concat("Unranked"),b=s.map(({belt:c})=>c.includes("Black")?"Black":c).reduce((c,v)=>(c[v]||(c[v]=0),c[v]++,c),{});return M.map(c=>({id:c,label:c,count:b[c]||0,value:b[c]||0}))},[s]),{isMobile:d}=j(),x=d?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{width:e}=j(),r=e<=360,g=e<=395,u=e<=428,o=e<=560,y={...{width:"100%",padding:"0px",marginBottom:12,alignItems:"center",marginLeft:"auto",marginRight:"auto"},...o?{}:{display:"flex"}},k=o?"100%":"50%",C=o?"100%":"50%",S=r?200:o?210:180,L=o?160:170,B=r?150:170;return t.jsx(O,{style:x,sx:{paddingBottom:5},children:t.jsx(U,{style:{paddingTop:0,paddingLeft:8},children:t.jsx("div",{style:{textAlign:"center"},children:t.jsxs("div",{style:y,children:[t.jsx("div",{style:{width:k,verticalAlign:"top",height:S},children:t.jsx(kt,{lockCollection:i,userText:h,collectionBarHeight:L})}),t.jsx("div",{style:{width:C,height:B,marginTop:"0px"},children:t.jsx(bt,{beltData:a})})]})})})})}function Ct({onSelect:i}){const{visibleEntries:s=[]}=m.useContext(H),l=m.useCallback(()=>{const n=Math.floor(Math.random()*s.length),h=s[n];i(h.id)},[s,i]);return $("r",()=>l(),{preventDefault:!0}),t.jsx(R,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:t.jsx(A,{onClick:l,children:t.jsx(pt,{style:{color:"#999"}})})})}function St({profile:i,owner:s}){const{compact:l}=m.useContext(I),[n,h]=m.useState(!1),{visibleEntries:a=[]}=m.useContext(H),d=m.useDeferredValue(n);return t.jsx(D.Fragment,{children:t.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16,justifyItems:"center"},children:[t.jsx(gt,{profile:i,page:"collection",owner:s}),t.jsx(ut,{profile:i,collectionType:"locks"}),t.jsx(yt,{profile:i,entries:a}),l?t.jsx(mt,{entries:a}):a.map(x=>t.jsx(ht,{entry:x,expanded:x.id===d,onExpand:h},x.id)),t.jsx(Ct,{onSelect:h})]})})}function Xe(){const{user:i}=m.useContext(T),{userId:s}=F(),{getProfile:l}=m.useContext(G),{isMobile:n}=j(),h=m.useCallback(async()=>{try{const o=await l(s);if(o){const p=o.displayName?o.displayName.toLowerCase().endsWith("s")?`${o.displayName}'`:`${o.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${p} Profile`}return o}catch(o){return console.error("Error loading profile.",o),null}},[l,s]),{data:a={},loading:d,error:x}=dt({loadFn:h}),e=m.useMemo(()=>{if(d||!a)return[];const o=new Set(X.locks.getCollected(a));return Y.filter(p=>o.has(p.id))},[a,d]),r=t.jsxs(D.Fragment,{children:[t.jsx(at,{label:"Collection"}),t.jsx(it,{}),t.jsx(ot,{sortValues:et}),!n&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),t.jsx(jt,{})]}),g=d?"Loading...":"Profile",u=t.jsx("div",{style:{margin:"30px 0px"},children:t.jsx(xt,{text:!0})});return t.jsx(J,{filterFields:tt,children:t.jsx(rt,{allEntries:e,profile:a,children:t.jsxs(st,{children:[t.jsx(K,{title:g,extras:r}),d&&t.jsx(nt,{}),!d&&a&&!x&&t.jsx(St,{profile:a,owner:i&&i.uid===s}),!d&&a&&!x&&e.length===0&&t.jsx(lt,{}),!d&&(!a||x)&&t.jsx(ct,{}),t.jsx(Q,{before:u}),t.jsx(Z,{feature:"profile"})]})})})}export{Xe as default};
