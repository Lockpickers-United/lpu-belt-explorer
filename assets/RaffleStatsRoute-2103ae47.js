import{b as G,r as O,j as a,u as P,bg as H,R as U,d as Y,N as q,F as K,T as J}from"./index-a89c4977.js";import{D as Q,a as X,r as Z}from"./filterFields-93ccd4d4.js";import{R as tt,A as et}from"./AdminRoleButton-f29b5d7a.js";import{R as nt}from"./RaffleDataProvider-4a2f0cf8.js";import{a as _}from"./RaffleContext-21c0cbb7.js";import{R as rt}from"./RaffleHeader-e00b9cd2.js";import{L as it}from"./LoadingDisplay-f8ea520d.js";import{u as at}from"./useData-5378f6a1.js";import{u as st}from"./usePageTitle-79dbb429.js";import{s as ot,i as lt}from"./dataUrls-d878baa3.js";import{A as W}from"./AdminStatsTableSort-94c7b40f.js";import{L as ut}from"./Link-8d133c4d.js";import{R as ct}from"./RaffleSubHead-9d8996bd.js";import{R as dt}from"./RaffleComingSoon-ca3c30b3.js";import"./index-dc278bd4.js";import"./LPU-c3fa7122.js";import"./LinearProgress-1d597dc8.js";import"./useDocumentTitle-06aa4919.js";import"./TableRow-637a9ea1.js";import"./Dialog-95a1459b.js";const ft=({data:e,tableWidth:t,nameLength:n})=>{const i=G(),{potViewsById:r}=e,{getPotFromId:s}=O.useContext(Q),d=[{id:"title",align:"left",name:"Title"},{id:"donors",name:"Donors",align:"center"},{id:"tickets",name:"Tickets",align:"center"}],u=!0,[o,f]=O.useState("title"),[m,y]=O.useState(!0),h=r.data.map(p=>{var A;const l=s(p.id);if(!l)return null;let V=l!=null&&l.title?l.title.substring(0,n):`unknown (${p.id})`;return V=((A=l==null?void 0:l.title)==null?void 0:A.length)<n||!(l!=null&&l.title)?V:V+"...",{...p,...l,title:V}}).filter(p=>p).sort((p,l)=>{switch(o){case"title":return p[o].localeCompare(l[o]);case"donors":return parseInt(l[o])-parseInt(p[o])||p.title.localeCompare(l.title);case"tickets":return parseInt(l[o])-parseInt(p[o])||p.views-l.views;default:return parseInt(l[o])-parseInt(p[o])||p.title.localeCompare(l.title)}}),g=(m?h:h.reverse()||[]).map(p=>p.donors&&p.donors>0?{...p}:{...p,donors:0,tickets:0}),b={columns:d,data:g},v=O.useCallback((p,l)=>{const V=h.find(B=>B.title===l),A=V==null?void 0:V.title.replace(/[\s/]/g,"_").replace(/\W/g,"");return p==="title"?a.jsx(ut,{onClick:()=>i(`/rafl/?id=${V.id}&name=${A}`),style:{color:"#fff"},children:l}):l},[i,h]),{width:R}=P(),j=R<=360,F=R<=395,E=R<=428,c=R<=560,x=R<=820,D=j||F?".8rem":E?".9rem":".95rem";return a.jsx("div",{children:a.jsx(W,{tableData:b,tableWidth:t,fontSize:D,sortable:u,sort:o,setSort:f,ascending:m,setAscending:y,linkFunction:v})})},mt=({tableWidth:e,nameLength:t})=>{const{allCharities:n}=O.useContext(_),i=[{id:"displayName",align:"left",name:"Charity Name"},{id:"donors",name:"Donors",align:"center"},{id:"donations",name:"Raised",align:"center"}],r=!0,[s,d]=O.useState("name"),[u,o]=O.useState(!0),f=n.sort((c,x)=>{switch(s){case"name":return c.name.localeCompare(x.name);case"donors":return x[s]-c[s];case"donations":return x[s]-c[s];default:return c.name.localeCompare(x.name)}}),y=(u?f:f.reverse()).map(c=>{var D;let x=c!=null&&c.name?c==null?void 0:c.name.substring(0,t):"unknown";return x=((D=c==null?void 0:c.name)==null?void 0:D.length)<t?x:x+"...",c.donations&&c.donations>0?{...c,donations:`$${c.donations}`,displayName:x}:{...c,displayName:x}}),h={columns:i,data:y},w=O.useCallback((c,x)=>x,[]),{width:g}=P(),b=g<=360,v=g<=395,R=g<=428,j=g<=560,F=g<=820,E=b?".8rem":v?".85rem":R?".9rem":".95rem";return a.jsxs("div",{children:[a.jsx("div",{style:{justifyItems:"center",marginBottom:20},children:a.jsx("div",{style:{width:400}})}),a.jsx(W,{tableData:h,tableWidth:e,fontSize:E,sortable:r,sort:s,setSort:d,ascending:u,setAscending:o,linkFunction:w})]})};var M={},T=function(){return T=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},T.apply(this,arguments)},pt=function(){function e(t,n,i){var r=this;this.endVal=n,this.options=i,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(s){r.startTime||(r.startTime=s);var d=s-r.startTime;r.remaining=r.duration-d,r.useEasing?r.countDown?r.frameVal=r.startVal-r.easingFn(d,0,r.startVal-r.endVal,r.duration):r.frameVal=r.easingFn(d,r.startVal,r.endVal-r.startVal,r.duration):r.frameVal=r.startVal+(r.endVal-r.startVal)*(d/r.duration);var u=r.countDown?r.frameVal<r.endVal:r.frameVal>r.endVal;r.frameVal=u?r.endVal:r.frameVal,r.frameVal=Number(r.frameVal.toFixed(r.options.decimalPlaces)),r.printValue(r.frameVal),d<r.duration?r.rAF=requestAnimationFrame(r.count):r.finalEndVal!==null?r.update(r.finalEndVal):r.options.onCompleteCallback&&r.options.onCompleteCallback()},this.formatNumber=function(s){var d,u,o,f,m=s<0?"-":"";d=Math.abs(s).toFixed(r.options.decimalPlaces);var y=(d+="").split(".");if(u=y[0],o=y.length>1?r.options.decimal+y[1]:"",r.options.useGrouping){f="";for(var h=3,w=0,g=0,b=u.length;g<b;++g)r.options.useIndianSeparators&&g===4&&(h=2,w=1),g!==0&&w%h==0&&(f=r.options.separator+f),w++,f=u[b-g-1]+f;u=f}return r.options.numerals&&r.options.numerals.length&&(u=u.replace(/[0-9]/g,function(v){return r.options.numerals[+v]}),o=o.replace(/[0-9]/g,function(v){return r.options.numerals[+v]})),m+r.options.prefix+u+o+r.options.suffix},this.easeOutExpo=function(s,d,u,o){return u*(1-Math.pow(2,-10*s/o))*1024/1023+d},this.options=T(T({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(n),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof t=="string"?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return r.handleScroll(r)}),window.onscroll=function(){window.onScrollFns.forEach(function(s){return s()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(t){if(t&&window&&!t.once){var n=window.innerHeight+window.scrollY,i=t.el.getBoundingClientRect(),r=i.top+window.pageYOffset,s=i.top+i.height+window.pageYOffset;s<n&&s>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>s||r>n)&&!t.paused&&t.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t;var n=t-this.startVal;if(Math.abs(n)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=t;var i=this.countDown?1:-1;this.endVal=t+i*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=t,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(t){var n;if(this.el){var i=this.formattingFn(t);!((n=this.options.plugin)===null||n===void 0)&&n.render?this.options.plugin.render(this.el,i):this.el.tagName==="INPUT"?this.el.value=i:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=i:this.el.innerHTML=i}},e.prototype.ensureNumber=function(t){return typeof t=="number"&&!isNaN(t)},e.prototype.validateValue=function(t){var n=Number(t);return this.ensureNumber(n)?n:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}();const ht=Object.freeze(Object.defineProperty({__proto__:null,CountUp:pt},Symbol.toStringTag,{value:"Module"})),gt=H(ht);Object.defineProperty(M,"__esModule",{value:!0});var S=O,yt=gt;function vt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,s,d,u=[],o=!0,f=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=s.call(n)).done)&&(u.push(i.value),u.length!==t);o=!0);}catch(m){f=!0,r=m}finally{try{if(!o&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(f)throw r}}return u}}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(i){St(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function xt(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bt(e){var t=xt(e,"string");return typeof t=="symbol"?t:String(t)}function St(e,t,n){return t=bt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N.apply(this,arguments)}function jt(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function L(e,t){if(e==null)return{};var n=jt(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Rt(e,t){return wt(e)||vt(e,t)||Vt(e,t)||Et()}function wt(e){if(Array.isArray(e))return e}function Vt(e,t){if(e){if(typeof e=="string")return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}}function k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect;function C(e){var t=S.useRef(e);return Ct(function(){t.current=e}),S.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.current.apply(void 0,i)},[])}var Ot=function(t,n){var i=n.decimal,r=n.decimals,s=n.duration,d=n.easingFn,u=n.end,o=n.formattingFn,f=n.numerals,m=n.prefix,y=n.separator,h=n.start,w=n.suffix,g=n.useEasing,b=n.useGrouping,v=n.useIndianSeparators,R=n.enableScrollSpy,j=n.scrollSpyDelay,F=n.scrollSpyOnce,E=n.plugin;return new yt.CountUp(t,u,{startVal:h,duration:s,decimal:i,decimalPlaces:r,easingFn:d,formattingFn:o,numerals:f,separator:y,prefix:m,suffix:w,plugin:E,useEasing:g,useIndianSeparators:v,useGrouping:b,enableScrollSpy:R,scrollSpyDelay:j,scrollSpyOnce:F})},Ft=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],Dt={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},$=function(t){var n=Object.fromEntries(Object.entries(t).filter(function(l){var V=Rt(l,2),A=V[1];return A!==void 0})),i=S.useMemo(function(){return I(I({},Dt),n)},[t]),r=i.ref,s=i.startOnMount,d=i.enableReinitialize,u=i.delay,o=i.onEnd,f=i.onStart,m=i.onPauseResume,y=i.onReset,h=i.onUpdate,w=L(i,Ft),g=S.useRef(),b=S.useRef(),v=S.useRef(!1),R=C(function(){return Ot(typeof r=="string"?r:r.current,w)}),j=C(function(l){var V=g.current;if(V&&!l)return V;var A=R();return g.current=A,A}),F=C(function(){var l=function(){return j(!0).start(function(){o==null||o({pauseResume:E,reset:c,start:D,update:x})})};u&&u>0?b.current=setTimeout(l,u*1e3):l(),f==null||f({pauseResume:E,reset:c,update:x})}),E=C(function(){j().pauseResume(),m==null||m({reset:c,start:D,update:x})}),c=C(function(){j().el&&(b.current&&clearTimeout(b.current),j().reset(),y==null||y({pauseResume:E,start:D,update:x}))}),x=C(function(l){j().update(l),h==null||h({pauseResume:E,reset:c,start:D})}),D=C(function(){c(),F()}),p=C(function(l){s&&(l&&c(),F())});return S.useEffect(function(){v.current?d&&p(!0):(v.current=!0,p())},[d,v,p,u,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),S.useEffect(function(){return function(){c()}},[c]),{start:D,pauseResume:E,reset:c,update:x,getCountUp:j}},At=["className","redraw","containerProps","children","style"],Pt=function(t){var n=t.className,i=t.redraw,r=t.containerProps,s=t.children,d=t.style,u=L(t,At),o=S.useRef(null),f=S.useRef(!1),m=$(I(I({},u),{},{ref:o,startOnMount:typeof s!="function"||t.delay===0,enableReinitialize:!1})),y=m.start,h=m.reset,w=m.update,g=m.pauseResume,b=m.getCountUp,v=C(function(){y()}),R=C(function(E){t.preserveValue||h(),w(E)}),j=C(function(){if(typeof t.children=="function"&&!(o.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}b()});S.useEffect(function(){j()},[j]),S.useEffect(function(){f.current&&R(t.end)},[t.end,R]);var F=i&&t;return S.useEffect(function(){i&&f.current&&v()},[v,i,F]),S.useEffect(function(){!i&&f.current&&v()},[v,i,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),S.useEffect(function(){f.current=!0},[]),typeof s=="function"?s({countUpRef:o,start:y,reset:h,update:w,pauseResume:g,getCountUp:b}):S.createElement("span",N({className:n,ref:o,style:d},r),typeof t.start<"u"?b().formattingFn(t.start):"")},Tt=M.default=Pt;M.useCountUp=$;function It(){const{raflResponseSummary:e,animateTotal:t}=O.useContext(_),n=e&&e.uniqueDonorCount||0,i=e&&e.totalDonations||0,r=e&&new Intl.NumberFormat().format(i),s=e&&Math.floor(i/n)||0,d=300,u=e&&e.platformDonations.Discord||0,o=e&&e.platformDonations.Reddit||0,f=e&&u+o,m=e&&u/f*d,y=e&&o/f*d,{isMobile:h,flexStyle:w}=P(),g=h?"10px 10px 16px 10px":"14px 20px 12px 20px",b=h?"center":"left",v={maxWidth:700,marginLeft:"auto",marginRight:"auto",marginTop:10,padding:"14px 0px 0px 0px",fontWeight:700,display:w},R={border:"1px solid #ccc",borderTopLeftRadius:10,borderBottomLeftRadius:10},j={border:"1px solid #ccc",borderTopRightRadius:10,borderBottomRightRadius:10};return a.jsxs(U.Fragment,{children:[a.jsxs("div",{style:{...v,border:"1px solid #aaa",borderRadius:8,marginBottom:20,padding:g,textAlign:b,justifyItems:"center"},children:[a.jsxs("div",{style:{flexGrow:1,marginTop:0,marginBottom:8},children:[a.jsxs("div",{style:{marginBottom:5},children:["Total Donations   ",i>1e3&&t?a.jsxs("span",{style:{fontSize:"1.8rem"},children:["$",a.jsx(Tt,{end:i,duration:1.5})]}):a.jsxs("span",{style:{fontSize:"1.8rem"},children:["$",r]})]}),a.jsxs("div",{children:[a.jsx("span",{style:{fontWeight:400,color:"#ddd"},children:"Donors"})," ",n,"    ",a.jsx("span",{style:{fontWeight:400,color:"#ddd"},children:"Average Donation"})," $",s]})]}),a.jsxs("div",{style:{width:d,textAlign:"center",marginTop:2},children:[!h&&a.jsx("span",{style:{fontWeight:700,fontSize:"1.1rem"},children:"Source"}),a.jsxs("div",{style:{display:"flex",textAlign:"left",fontSize:"0.95rem"},children:[a.jsx("div",{style:{flexGrow:1,paddingLeft:8},children:"Discord"}),a.jsx("div",{style:{paddingRight:8},children:"Reddit"})]}),a.jsxs("div",{style:{display:"flex"},children:[a.jsx("div",{style:{...R,width:m||0,backgroundColor:"#2d52b0",height:20}}),a.jsx("div",{style:{...j,width:y||0,backgroundColor:"#587ee6",height:20}})]})]})]}),a.jsx("div",{style:{height:8}})]})}function Ut(){st("RAFL Report");const{data:e,loading:t,error:n}=at({urls:Nt}),{siteFullNew:i}=e||{},{width:r,isMobile:s}=P(),d=t?"--":"(updated: "+Y(i==null?void 0:i.metadata.updatedDateTime).format("MM/DD/YY hh:mm")+` ${i==null?void 0:i.metadata.timezone})`,u={margin:"26px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},o={margin:"46px 0px 18px 0px",width:"100%",textAlign:"center",color:"#fff",fontSize:"1.3rem",fontWeight:700},f=s?"8px 8px 32px 8px":"24px 24px 32px 24px",m=r<=560?r-20:650,y=s?24:48;return t?a.jsx(it,{}):n?null:a.jsxs("div",{style:{minWidth:"320px",maxWidth:700,height:"100%",padding:f,backgroundColor:"#292929",marginLeft:"auto",marginRight:"auto"},children:[a.jsx(It,{}),a.jsx("div",{style:{width:"100%",textAlign:"center",color:"#fff"},children:a.jsx("span",{style:{fontSize:"0.8rem",marginTop:10},children:d})}),a.jsx("div",{style:u,children:"Pots"}),a.jsx(ft,{data:i,tableWidth:m,nameLength:y}),a.jsx("div",{style:o,children:"Charities"}),a.jsx(mt,{data:i,tableWidth:m,nameLength:y})]})}const Nt={siteFullNew:ot,raflResponseDetails:lt};function re(){const{isMobile:e}=P(),{allPots:t}=O.useContext(_),n=a.jsxs(U.Fragment,{children:[!e&&a.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),a.jsx(tt,{active:!0}),a.jsx(et,{})]});return a.jsx(X,{filterFields:Z,children:a.jsx(nt,{allEntries:t,children:a.jsxs(U.Fragment,{children:[a.jsx(q,{title:"RAFL Stats",extras:n}),a.jsx(rt,{page:"stats"}),a.jsx(ct,{text:"Stats!"}),a.jsx(Ut,{}),a.jsx(K,{}),a.jsx(J,{feature:"raflStats"}),a.jsx(dt,{})]})})})}export{re as default};
