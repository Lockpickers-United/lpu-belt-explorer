import{Z as $,$ as L,a0 as O,a1 as H,ad as J,r,F as X,u as Z,a6 as G,by as b,j as e,R as K,X as S,V as y,aj as N,T as Q}from"./index-Dr0OGwon.js";import{S as F,I as R}from"./Search-Bg9iyUBY.js";import{B as U}from"./Sort-iG8PSlnp.js";import{T as Y}from"./TextField-BtThBk5p.js";var l={},w;function ee(){if(w)return l;w=1;var i=$();Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var h=i(L()),n=O();return l.default=(0,h.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),l}var re=ee();const te=H(re);function ce({label:i,extraFilters:h=[],entryCount:n=0,keepOpen:g}){const[u]=J(),{addFilters:v,removeFilter:f,isFiltered:C}=r.useContext(X),[a,m]=r.useState(u.get("search")||""),{isMobile:c,width:I}=Z(),B=I<=500,s=r.useRef();G("s",()=>{var t;return(t=s==null?void 0:s.current)==null?void 0:t.focus()},{preventDefault:!0});const q=n>1?`Search ${n?n.toString()+" ":""}${i}`:"Search",E=r.useCallback(()=>{window.scrollTo({top:0}),m(""),f("search",""),s.current.focus()},[f]),W=r.useCallback(t=>{const{value:V}=t.target;m(V)},[]),[o]=b(a.replaceAll("	"," "),250);r.useEffect(()=>{o&&o!==u.get("search")?o?(window.scrollTo({top:0}),v([{key:"search",value:o},{key:"id",value:void 0},{key:"name",value:void 0},...h],!0)):(console.log("SearchBox: debounceText is empty"),v([{key:"search",value:o}],!0)):o||f("search","")},[o]);const[x]=b(a.replaceAll("	"," ").trim(),2e3),[j,T]=r.useState(null);r.useEffect(()=>{if(x){T(x);const t=setTimeout(()=>T(null),0);return()=>clearTimeout(t)}},[x]);const[d,p]=r.useState(!1),k=r.useCallback(()=>setTimeout(()=>p(!1),0),[]),z=r.useCallback(()=>p(!0),[]),A=r.useCallback(()=>{p(!0),setTimeout(()=>{s.current.focus(),s.current.select()},0)},[]);r.useEffect(()=>{const t=u.get("search");t!==a&&m(t||"")},[u]);const D=a?e.jsx(R,{position:"end",children:e.jsx(S,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:E,edge:"end",size:"small",children:e.jsx(te,{})})})}):null,P=c?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},_=d&&c?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},M=a?"secondary":"inherit";return e.jsxs(K.Fragment,{children:[!d&&c&&!g&&!C&&e.jsx(S,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{color:"inherit",onClick:A,children:e.jsx(U,{invisible:a.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(F,{})})})}),(d||!c||g||C)&&e.jsx(Y,{placeholder:B?i:q,InputProps:{inputProps:{ref:s},startAdornment:e.jsx(R,{position:"start",children:e.jsx(F,{color:M})}),endAdornment:D},variant:"standard",color:"secondary",onChange:W,onFocus:z,onBlur:k,value:a,style:{...P,..._},fullWidth:!0}),e.jsx(N,{invisible:!0,open:d&&c,onClick:k}),j&&e.jsx(Q,{feature:"search",search:j})]})}export{ce as S};
