import{r as a,j as o,af as j,a0 as h,K as k,ag as C,R as P,O as y,P as S,Q as F}from"./index-7e1d67e7.js";import{D as L,a as D,d as N}from"./BeltStripe-14931733.js";import{S as E,F as v,a as w,l as R}from"./sortFields-d5298c57.js";import{a as B}from"./LockListContext-627b5d75.js";import{L as x}from"./LoadingDisplay-01c2a520.js";import{u as T}from"./useData-c213904a.js";import{u as W}from"./useWindowSize-1a2cc6de.js";import{N as b}from"./NoProfileData-55d31f12.js";import{P as I}from"./ProfileNotFound-85c81f43.js";import{S as $,d as A,a as M}from"./safelocks-c7d7e25e.js";import{I as O}from"./InlineFilterDisplay-eedda604.js";import{P as V}from"./ProfileHeader-98087283.js";import"./Select-a6d1b98d.js";import"./LoadingDisplay-0d15acff.js";import"./Search-9777ac64.js";import"./Sort-9a46cedb.js";import"./TextField-d71a1bdb.js";import"./LPU-c3fa7122.js";import"./LinearProgress-0f5672b8.js";import"./index-856d45cc.js";import"./index-4ad3d76e.js";import"./ImageViewer-3a646ade.js";import"./Link-ffa81d6d.js";import"./Dialog-f9278ae4.js";import"./ContentCopy-b2ba52aa.js";import"./CopyProfileLinkButton-7309e5e6.js";import"./ToggleButtonGroup-2b6df074.js";function q({profile:n}){const[s,d]=a.useState(!1),{visibleEntries:i=[]}=a.useContext(L),m=a.useDeferredValue(s);return o.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#222",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[o.jsx(O,{profile:n,collectionType:"safelocks"}),i==null?void 0:i.map(l=>o.jsx($,{entry:l,expanded:l.id===m,onExpand:d},l.id))]})}function jo(){const{userId:n}=j(),{user:s}=a.useContext(h),{getProfile:d,lockCollection:i}=a.useContext(k),{isMobile:m}=W(),l=a.useCallback(async()=>{try{const t=(s==null?void 0:s.uid)!==n?await d(n):i;if(t){const f=t.displayName?t.displayName.toLowerCase().endsWith("s")?`${t.displayName}'`:`${t.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${f} Safe Locks`}return t}catch(t){return console.error("Error loading profile.",t),null}},[d,i,s,n]),{data:e={},loading:r,error:p}=T({loadFn:l}),c=a.useMemo(()=>{if(r||!e)return[];const t=new Set(C.safelocks.getCollected(e));return A.filter(f=>t.has(f.id))},[e,r]),u=o.jsxs(P.Fragment,{children:[o.jsx(E,{label:"Collection"}),o.jsx(v,{}),o.jsx(w,{sortValues:R}),!m&&o.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]}),g=r?"Loading...":"Safe Locks";return r||!e?o.jsx(x,{}):o.jsx(D,{filterFields:N,children:o.jsx(M,{allEntries:c,profile:e,children:o.jsx(B,{children:o.jsxs("div",{style:{maxWidth:700,padding:0,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[o.jsx(y,{title:g,extras:u}),o.jsx(V,{profile:e,page:"safelocks"}),r&&o.jsx(x,{}),!r&&e&&!p&&c.length>0&&o.jsx(q,{profile:e}),!r&&e&&!p&&c.length===0&&o.jsx(b,{collectionType:"safelocks"}),!r&&(!e||p)&&o.jsx(I,{}),o.jsx(S,{}),o.jsx(F,{feature:"profile"})]})})})})}export{jo as default};
