import{h as C,i as L,j as e,r as a,Q as d,e as u,C as p,a3 as f,T as P,I as R,c as x,b as m,a1 as E,R as c,U as S,V as T,W as k}from"./index-cce7cfb2.js";import{l as F}from"./LPU-c3fa7122.js";import{T as _}from"./TextField-4f281a1c.js";import{L as w}from"./LinearProgress-7a47a831.js";import"./InputLabel-1f62d904.js";var n={},I=L;Object.defineProperty(n,"__esModule",{value:!0});var h=n.default=void 0,D=I(C()),N=e;h=n.default=(0,D.default)((0,N.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");function q(){const{lockCollection:r,updateProfileVisibility:o}=a.useContext(d),[t,l]=a.useState("");a.useEffect(()=>{l(r.displayName)},[r.displayName]);const g=a.useCallback(i=>{const{value:b}=i.target;l(b)},[]),j=a.useCallback(i=>i.target.select(),[]),v=a.useCallback(()=>{try{t?o(!0,t):o(!1,""),u("Updated profile.")}catch(i){console.error("Error while updating profile",i),u("Error while updating profile.")}},[t,o]),s=!V.test(t),y=s?"Display name must only include A-Z, 0-9, _ and -.":(t==null?void 0:t.length)>0?`Your profile will be public, as ${t}.`:"Your profile will be private";return e.jsxs(p,{style:{maxWidth:350,marginLeft:"auto",marginRight:"auto",marginTop:16,marginButtom:16},children:[e.jsx(f,{title:"Edit Profile",action:e.jsx(P,{title:"Save",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:v,disabled:s,children:e.jsx(h,{color:s?void 0:"success"})})})}),e.jsxs(x,{children:[e.jsx(m,{children:"Set a display name if you wish your profile to be public. If you want your profile to be private, remove it."}),e.jsx("br",{}),e.jsx(_,{error:s,fullWidth:!0,variant:"outlined",color:"secondary",label:"Display Name",helperText:y,value:t||"",onChange:g,onFocus:j,inputProps:{maxLength:32}})]})]})}const V=/^[\sa-zA-Z0-9_-]{0,32}$/;function W(){const r={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return e.jsxs(p,{style:r,children:[e.jsx(f,{title:"Log In!"}),e.jsx(x,{children:e.jsx(m,{variant:"h6",align:"center",children:"You must be logged in to edit your profile."})})]})}function M(){const{authLoaded:r,isLoggedIn:o}=a.useContext(E),{dbLoaded:t}=a.useContext(d);return e.jsxs(c.Fragment,{children:[e.jsx(S,{title:"Edit Profile"}),(!r||!t)&&e.jsxs(c.Fragment,{children:[e.jsx(w,{variant:"indeterminate",color:"secondary"}),e.jsx("img",{alt:"Loading",src:F,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),r&&!o&&e.jsx(W,{}),o&&t&&e.jsx(q,{}),e.jsx(T,{}),e.jsx(k,{feature:"editprofile"})]})}export{M as default};
