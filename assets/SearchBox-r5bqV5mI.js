import{O as E,P as _,Q as A,U as M,a6 as O,r as t,F as J,u as L,Z as $,bs as H,j as e,R as Q,J as j,I as b,ac as U}from"./index-Cq_MFFUm.js";import{S,I as k}from"./Search-DBYakhT2.js";import{B as V}from"./Sort-CV82CZS5.js";import{T as Z}from"./TextField-DZe1uTVS.js";var l={},R;function G(){if(R)return l;R=1;var c=E();Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var h=c(_()),n=A();return l.default=(0,h.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),l}var K=G();const N=M(K);function re({label:c,extraFilters:h=[],entryCount:n=0,keepOpen:p}){const[u]=O(),{addFilters:m,removeFilter:x,isFiltered:g}=t.useContext(J),[o,f]=t.useState(u.get("search")||""),{isMobile:i,width:T}=L(),y=T<=500,r=t.useRef();$("s",()=>{var a;return(a=r==null?void 0:r.current)==null?void 0:a.focus()},{preventDefault:!0});const I=n>1?`Search ${n?n.toString()+" ":""}${c}`:"",w=t.useCallback(()=>{window.scrollTo({top:0}),f(""),x("search",""),r.current.focus()},[x]),F=t.useCallback(a=>{const{value:D}=a.target;f(D)},[]),s=H(o.replaceAll("	"," "),250);t.useEffect(()=>{s&&s!==u.get("search")?s?(window.scrollTo({top:0}),m([{key:"search",value:s},{key:"id",value:void 0},{key:"name",value:void 0},...h],!0)):(console.log("SearchBox: debounceText is empty"),m([{key:"search",value:s}],!0)):s||x("search","")},[s]);const[d,v]=t.useState(!1),C=t.useCallback(()=>setTimeout(()=>v(!1),0),[]),B=t.useCallback(()=>{v(!0),setTimeout(()=>{r.current.focus(),r.current.select()},0)},[]);t.useEffect(()=>{const a=u.get("search");a!==o&&f(a||"")},[u]);const q=o?e.jsx(k,{position:"end",children:e.jsx(j,{title:"Clear",arrow:!0,disableFocusListener:!0,children:e.jsx(b,{color:"inherit",onClick:w,edge:"end",size:"small",children:e.jsx(N,{})})})}):null,P=i?{maxWidth:450,marginTop:8,marginRight:8}:{maxWidth:450,marginTop:6,marginRight:8},W=d&&i?{width:"auto",position:"fixed",left:50,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{},z=o?"secondary":"inherit";return e.jsxs(Q.Fragment,{children:[!d&&i&&!p&&!g&&e.jsx(j,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(b,{color:"inherit",onClick:B,children:e.jsx(V,{invisible:o.length===0,variant:"dot",color:"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(S,{})})})}),(d||!i||p||g)&&e.jsx(Z,{placeholder:y?c:I,InputProps:{inputProps:{ref:r},startAdornment:e.jsx(k,{position:"start",children:e.jsx(S,{color:z})}),endAdornment:q},variant:"standard",color:"secondary",onChange:F,onBlur:C,value:o,style:{...P,...W},fullWidth:!0}),e.jsx(U,{invisible:!0,open:d&&i,onClick:C})]})}export{re as S};
