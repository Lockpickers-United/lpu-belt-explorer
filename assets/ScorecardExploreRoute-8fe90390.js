import{r as n,au as E,j as e,u as _,R as I,b as te,F as q,$ as re,J as M,I as O,ac as se,aj as oe,d as R,as as le,bN as ae,bO as ne,D as ie,N as ce,e as de,a0 as ue,h as pe,T as me}from"./index-82d5b6e2.js";import{L as he}from"./LoadingDisplay-aab1e5ce.js";import{u as fe}from"./useData-179bd4d6.js";import{u as xe}from"./usePageTitle-21855ae8.js";import{_ as be,d as ge,a as ke,l as ye}from"./lockStats-bf00d39d.js";import{b as je,c as Be,p as Ce,a as ve,s as Se,d as Ae,k as Pe}from"./dataUrls-29853cf3.js";import{E as we}from"./ErrorMessage-e6af6924.js";import{b as F,a as Le}from"./chartDefaults-270235e0.js";import{L as U}from"./Link-679fb827.js";import{D as Y,f as Ue}from"./DataContext-1784a458.js";import{r as T}from"./index-b8da9954.js";import{e as W}from"./entryName-96794703.js";import{B as ze}from"./BeltStripeMini-5faa026a.js";import{a as J,b as z,c as N,d as H,T as De,e as V}from"./TableRow-138ce58c.js";import{V as Ee}from"./ViewFilterButtons-caf48501.js";import{b as Fe}from"./sortFields-b1bde6f9.js";import{F as Ie,I as Me,S as Oe}from"./Select-b14df293.js";import{C as Re}from"./Collapse-ba6aacfc.js";import{b as Te}from"./filterFields-b1c2af41.js";import{c as We}from"./collectionStatsById-8def94ca.js";import"./LPU-c3fa7122.js";import"./LinearProgress-3742bf65.js";import"./useDocumentTitle-609de608.js";import"./nivo-legends.es-8d43add1.js";import"./index-a9882411.js";import"./line-30cca97a.js";import"./Sort-3022057e.js";import"./Chip-67f1010e.js";import"./FilterAlt-07ad6e85.js";import"./Box-34528025.js";import"./LockListContext-ed128604.js";import"./ToggleButtonGroup-03979a91.js";import"./Cancel-5a5886d7.js";import"./rankingRequestData-d3ef79e5.js";const Ne={White:340,Yellow:681,Orange:1182,Green:668,Blue:269,Purple:150,Brown:91,Red:74,Black:159,Total:3614},He={White:1232,Yellow:2166,Orange:2842,Green:1121,Blue:328,Purple:147,Brown:88,Red:62,Black:134,Total:8120},A={discord:Ne,reddit:He};function Ve({data:i}){const{scorecardStats:m}=i,{userCounts:s}=m,d=A.reddit.Total-s.totalUsers,u=n.useMemo(()=>{const t={data:[{id:"LPUbelts Users",label:"LPUbelts Users",value:s.totalUsers},{id:"Other LPU Pickers",label:"Other LPU Pickers (approx)",value:d}],colors:["#37bd17","#17561b"],description:"Click chart for details",startAngle:-65},f={parent:"pickerData",data:[{id:"Scorecard Users",label:"Scorecard Users",value:s.scorecardUsers},{id:"Other LPUbelts Users",label:"Other LPUbelts Users",value:s.totalUsers-s.scorecardUsers}],colors:["#d2bc18","#444"],description:"LPUbelts Scorecard Usage",startAngle:-35},D={parent:"LPUbelts Users",data:[{id:"Imported Belts",label:"Imported Belts",value:s.beltedUsers},{id:"Other Scorecard Users",label:"Other Scorecard Users",value:s.scorecardUsers-s.beltedUsers}],colors:["#189ad2","#444"],description:"Scorecard Belt Imports",startAngle:-120},K={parent:"Scorecard Users",data:Object.keys(s.belts).sort((a,g)=>E(a,g)).map(a=>({id:a,label:a,value:s.belts[a]})),colors:F,description:"Imported Belt Breakdown (click Black for Dan breakdown)",startAngle:-10},Q={parent:"Imported Belts",data:Object.keys(s.dans).sort((a,g)=>parseInt(a)-parseInt(g)).map(a=>({id:$(a),label:$(a),value:s.dans[a]})),colors:$e,description:"Dan Breakdown"},X={parent:"pickerData",data:[{id:"Discord",label:"Discord",value:A.discord.Total},{id:"Reddit",label:"Reddit",value:A.reddit.Total}],colors:["#a981ec","#7833e3"],description:"Platforms users overlap, numbers shown for relative size"},Z={parent:"Other LPU Pickers",data:Object.keys(A.reddit).filter(a=>a!=="Total").sort((a,g)=>E(a,g)).map(a=>{const g=a==="Black"?"Black Belt":a;return{id:g,label:g,value:A.reddit[a]}}),colors:F,description:e.jsxs("span",{children:["Reddit Belt Breakdown | ",e.jsx(U,{onClick:()=>B("Discord"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Discord"})]}),startAngle:-10},ee={parent:"Other LPU Pickers",data:Object.keys(A.discord).filter(a=>a!=="Total").sort((a,g)=>E(a,g)).map(a=>{const g=a==="Black"?"Black Belt":a;return{id:g,label:g,value:A.discord[a]}}),colors:F,description:e.jsxs("span",{children:["Discord Belt Breakdown | ",e.jsx(U,{onClick:()=>B("Reddit"),style:{color:"#189dea",textDecoration:"none",cursor:"pointer"},children:"Reddit"})]}),startAngle:-10};return{pickerData:t,"LPUbelts Users":f,"Scorecard Users":D,"Imported Belts":K,Black:Q,"Other LPU Pickers":X,Reddit:Z,Discord:ee}},[d,s]),[c,B]=n.useState("pickerData"),P=u[c].data,x=u[c].data.reduce((t,f)=>t+f.value,0),k=n.useCallback(t=>{u[t.id]&&(document.getElementById("chartDescription").style.opacity="0.2",setTimeout(()=>{document.getElementById("chartDescription").style.opacity="1",B(t.id)},200))},[u]),w=n.useCallback(()=>{B(u[c].parent)},[u,c]),h=n.useCallback((t,f)=>{u[t.id]&&(f.currentTarget.style.cursor="pointer")},[u]),{width:y}=_(),v=y<=360,C=y<=395,S=y<=428,b=y<=560,L={top:30,right:0,bottom:30,left:0};let p=320;v?p=175:C?p=180:S?p=230:b&&(p=240);const o="1.0rem",j=b?5:4,l=b?10:8,r=b?0:8;return e.jsxs(I.Fragment,{children:[e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,width:"100%",textAlign:"center",marginBottom:4,opacity:1,transitionProperty:"opacity, left, top, height",transitionDuration:"0.1s, 0.1s"},id:"chartDescription",children:u[c].description}),e.jsxs("div",{style:{height:p,margin:"0px 8px 0px 8px",width:"100%",position:"relative"},children:[e.jsx("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:e.jsx(be,{data:P,theme:Le,colors:u[c].colors,margin:L,startAngle:u[c].startAngle||-40,endAngle:360,innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:0,arcLinkLabelsSkipAngle:j,arcLinkLabelsTextColor:"#ccc",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLinkLabel:t=>t.label+": "+Math.round(t.value/x*100)+"%",arcLinkLabelsDiagonalLength:14,arcLinkLabelsStraightLength:r,enableArcLabels:!1,arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:l,arcLabelsTextColor:"#111",isInteractive:!0,transitionMode:"startAngle",motionConfig:"slow",sortByValue:!1,onClick:t=>{k(t)},onMouseEnter:(t,f)=>{h(t,f)},tooltip:t=>{const f=(t.datum.arc.angleDeg>j,t.datum.label+": "),D=t.datum.value;return e.jsx("div",{style:{fontSize:"0.8rem",background:"#555",padding:"3px 4px",color:"#ddd",borderRadius:"5px",display:b?"none":"block"},children:e.jsxs("div",{children:[f,D]})})}})}),e.jsx("div",{style:{width:"100%",position:"absolute",top:p/2-14,left:0,display:"flex",justifyContent:"center",fontSize:"1.1rem"},children:u[c].parent&&e.jsx(U,{onClick:w,style:{color:"#ccc",cursor:"pointer",fontSize:o},children:"back"})})]},"pickPie")]})}function $(i){const m=["st","nd","rd","th"];return i+""+m[Math.min(4,parseInt(i))-1]}const $e=["#222222","#2E2E2E","#3A3A3A","#464646","#525252","#5E5E5E","#6A6A6A","#767676","#828282","#8E8E8E","#9A9A9A","#A6A6A6","#B2B2B2","#BEBEBE","#CACACA","#D6D6D6","#E2E2E2","#EFEFEF","#FAFAFA","#FFFFFF"];function G({entry:i,index:m,collapse:s=!1}){const d=te(),c=W(i).replace(/[\s/]/g,"_").replace(/\W/g,""),B=n.useCallback(x=>{const k=`/locks?tab=search&search=${x.id}&id=${x.id}&name=${c}`;d(k)},[d,c]),P=i.belt==="Unranked"?"#bbb":"#fff";return e.jsxs(J,{sx:{"&:nth-of-type(odd) td, &:nth-of-type(odd) th":{backgroundColor:"#000"},"td, th":{padding:0,border:0}},style:{display:"table-row"},children:[e.jsx(z,{align:"left",style:{borderBottom:"1px solid #000",width:4,marginLeft:5,height:40,paddingBottom:1},children:e.jsx(ze,{value:i.belt})}),e.jsx(z,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:10,fontSize:"0.9rem"},children:e.jsx(U,{onClick:()=>B(i),style:{color:P},children:W(i)})})}),e.jsx(z,{align:"center",style:{fontWeight:500,fontSize:"0.9rem",paddingRight:5},children:i.currentPicks})]},m)}function Ge(){var j;const{visibleEntries:i=[]}=n.useContext(Y),{filters:m,addFilter:s}=n.useContext(q),{userBelt:d="All Belts",sort:u}=m,[c,B]=n.useState(u);n.useEffect(()=>{B(!!u)},[u]);const P=60;let x=((j=i.find(l=>l.displayRank===P))==null?void 0:j.currentPicks)||0;x=x>2?x:0;const k=n.useMemo(()=>i.filter(l=>l.currentPicks>=x),[i,x]),w=n.useMemo(()=>i.filter(l=>l.currentPicks<x),[i,x]),h=n.useMemo(()=>["All Belts",...re],[]),y=n.useCallback(()=>{const l=h.findIndex(t=>t===d),r=l<h.length-1?l+1:0;s("userBelt",h[r],!0)},[s,h,d]),v=n.useCallback(()=>{const l=h.findIndex(t=>t===d),r=l>0?l-1:h.length-1;s("userBelt",h[r],!0)},[s,h,d]),[C,S]=n.useState(!1),b=n.useCallback(()=>S(!1),[]),L=n.useCallback(()=>S(!0),[]),p=n.useCallback(l=>{s("userBelt",l.target.value,!0),b()},[s,b]),o=n.useCallback(()=>{B(!c)},[c]);return e.jsxs(I.Fragment,{children:[e.jsx("div",{style:{marginBottom:10,display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{padding:"0px",width:220,display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(M,{title:"Previous Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:v,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ge,{})})}),e.jsx("div",{style:{padding:"0px",display:"flex",justifyContent:"center",flexGrow:1,alignItems:"center"},children:e.jsxs(Ie,{id:"beltPulldown",size:"small",variant:"outlined",style:{marginBottom:0,width:140},children:[e.jsx(Me,{style:{color:"#bbb"},children:"User Belt"}),e.jsx(Oe,{id:"beltSelect",value:d||"All Belts",label:"Brand",open:C,onClose:b,onOpen:L,onChange:p,style:{fontWeight:700,color:"#eee",fontSize:"1.1rem"},children:h.map((l,r)=>e.jsx(se,{value:h[r],children:h[r]},r))})]})}),e.jsx(M,{title:"Next Belt",arrow:!0,disableFocusListener:!0,children:e.jsx(O,{onClick:y,style:{backgroundColor:"#bbb",color:"#000",height:24,width:24},children:e.jsx(ke,{})})})]})}),e.jsx(Ee,{sortValues:Fe,extraFilters:[{key:"tab",value:"search"}],compactMode:!1,resetAll:!0,expandAll:!1,style:{marginBottom:10}}),e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600},children:[e.jsx(N,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsxs(H,{style:{backgroundColor:"#1c1c1c"},children:[e.jsx(De,{children:e.jsxs(J,{style:{padding:"0px",fontWeight:700},children:[e.jsx(z,{colSpan:"2",style:{padding:1,fontWeight:700,fontSize:"1.05rem"},children:"Lock"}),e.jsx(z,{style:{padding:1,fontWeight:700,fontSize:"1.05rem",paddingRight:5},children:"Picks"})]})}),e.jsx(V,{children:k.map((l,r)=>e.jsx(G,{entry:l,index:r},r))})]})}),e.jsx(Re,{in:!!c,timeout:"auto",unmountOnExit:!0,children:e.jsx(N,{sx:{backgroundColor:"#111",width:"100%"},children:e.jsx(H,{style:{backgroundColor:"#1c1c1c"},children:e.jsx(V,{children:w.map((l,r)=>e.jsx(G,{entry:l,index:r},r))})})})})]})}),w.length>0&&e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("div",{style:{border:"4px solid #1c1c1c",width:"100%",maxWidth:600,textAlign:"center"},children:e.jsx(U,{onClick:o,style:{color:"#fff",fontSize:"1.0rem",cursor:"pointer"},children:!c&&"Show More"||"Show Less"})})})]})}function _e({data:i}){const{width:m}=_(),d=m<560?"8px 8px 32px 8px":"24px 24px 32px 24px",u={margin:"46px 0px 26px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"},c={margin:"0px 0px 14px 0px",width:"100%",backgroundColor:"#000",textAlign:"center"};return e.jsxs("div",{style:{minWidth:"320px",maxWidth:720,height:"100%",padding:d,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",fontSize:"1.5rem",fontWeight:600},children:[e.jsx("div",{style:c,children:"User Drilldown"}),e.jsx(Ve,{data:i}),e.jsx("div",{style:u,children:"Scorecard Locks"}),e.jsx(Ge,{data:i})]})}function qe({children:i,allEntries:m,scorecardEntries:s,profile:d}){const{filters:u}=n.useContext(q),{search:c,id:B,tab:P,name:x,sort:k,image:w,expandAll:h,...y}=u,{userBelt:v}=y,C=n.useCallback(p=>m.find(o=>o.id===p),[m]),S=n.useMemo(()=>Object.keys(s).map(p=>{var j,l,r;const o=C(p);return o?{...s[p],userBelt:Object.keys(s[p].scorecardPicks),currentPicks:s[p].scorecardPicks[v||"All Belts"],...o,makes:o.makeModels[0].make?o.makeModels.map(({make:t})=>t):o.makeModels[0].model,fuzzy:T(o.makeModels.map(({make:t,model:f})=>[t,f]).flat().filter(t=>t).concat([o.version,o.notes,o.belt]).join(",")),content:[(j=o.media)!=null&&j.some(t=>!t.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",(l=o.media)!=null&&l.some(t=>t.fullUrl.match(/youtube\.com/))?"Has Video":"No Video",((r=o.links)==null?void 0:r.length)>0?"Has Links":"No Links",oe[o.belt].danPoints>0?"Worth Dan Points":void 0,R(o.lastUpdated).isAfter(R().subtract(1,"days"))?"Updated Recently":void 0,o.belt.startsWith("Black")?"Is Black":void 0,o.belt!=="Unranked"?"Is Ranked":void 0].flat().filter(t=>t),collection:le.locks.map.map(t=>d&&d[t.key]&&d[t.key].includes(o.id)?t.label:"Not "+t.label),collectionSaves:We[o.id]||0,simpleBelt:o.belt.replace(/\s\d/g,"")}:null}).filter(p=>p),[C,d,s,v]),b=n.useMemo(()=>{const p=Object.keys(y).map(r=>{const t=y[r];return Array.isArray(t)?t.map(f=>({key:r,value:f})):{key:r,value:t}}).flat(),o=S.filter(r=>p.every(({key:t,value:f})=>Array.isArray(r[t])?r[t].includes(f):r[t]===f)),j=c&&o.find(r=>r.id===c);let l=o;return j?l=[j]:c&&(l=Ue.go(T(c),o,{keys:Ye,threshold:-25e3}).map(r=>({...r.obj,score:r.score}))),k?l.sort((r,t)=>{if(k==="beltAscending")return ae(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(k==="beltDescending")return ne(r.belt,t.belt)||t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy);if(k==="alphaAscending")return r.fuzzy.localeCompare(t.fuzzy);if(k==="alphaDescending")return t.fuzzy.localeCompare(r.fuzzy)}):l.sort((r,t)=>t.currentPicks-r.currentPicks||r.fuzzy.localeCompare(t.fuzzy)).map((r,t)=>({...r,displayRank:t+1}))},[y,S,c,k]),L=n.useMemo(()=>({allEntries:m,visibleEntries:b,getEntryFromId:C,expandAll:h,profile:d}),[m,C,b,h,d]);return e.jsx(Y.Provider,{value:L,children:i})}const Ye=["fuzzy"];function Ut(){const{lockCollection:i}=n.useContext(ie);xe("Explore Scorecard");const{data:m,loading:s,error:d,errorMessage:u}=fe({urls:Je});return e.jsxs(I.Fragment,{children:[e.jsx(ce,{title:"Explore Scorecard"}),d&&e.jsx(we,{errorMessage:u}),s&&e.jsx(he,{}),!s&&!d&&!!m&&e.jsx(de,{filterFields:Te,children:e.jsx(qe,{allEntries:ue,scorecardEntries:m.scorecardStats.lockCountsByUserBelt,profile:i,children:e.jsx(_e,{data:{...m,lockStats:ye}})})}),e.jsx(pe,{}),e.jsx(me,{feature:"stats"})]})}const Je={brandDistribution:je,collectionsStatsCurrent:Be,popularAreas:Ce,redditGrowth:ve,siteFullNew:Se,pickStatsData:Ae,scorecardStats:Pe};export{Ut as default};
