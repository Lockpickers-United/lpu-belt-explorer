import{r as n,F as h,j as k}from"./index-D01eBc1l.js";import{a as F,f as P}from"./filterEntriesAdvanced-CfXGqGHf.js";import{D as g}from"./DataContext-CPyFLrjf.js";import{r as z}from"./index-CK0MffGD.js";import{R as j}from"./RaffleContext-CNnOV64i.js";function O({children:x,allEntries:o=[]}){const{summary:a}=n.useContext(j),{filters:v,advancedFilterGroups:m}=n.useContext(h),{search:s,id:I,tab:N,name:R,sort:i,image:T,preview:M,single:A,expandAll:f,...B}=v,p=.3,l=n.useCallback(r=>{const c=s&&r.find(e=>e.id===s);return c?[c]:s?F.go(z(s),r,{keys:D,threshold:-23e3}).map(e=>({...e.obj,score:e.score})).filter(e=>e.score>p):r},[s,p]),d=n.useMemo(()=>l(o),[o,l]),u=n.useMemo(()=>{if(!a||Object.keys(a).length===0||!o)return[];const r=P({advancedFilterGroups:m(),entries:o}).sort((e,t)=>e.sortPotNumber-t.sortPotNumber||e.title.localeCompare(t.title)),c=s?l([...r]):[...r];return i?r.sort((e,t)=>i==="potName"?e.title.localeCompare(t.title):i==="contributedBy"?e.contributedBy[0].localeCompare(t.contributedBy[0])||e.title.localeCompare(t.title):i==="tickets"?t.totalTickets-e.totalTickets||e.title.localeCompare(t.title):i==="donors"?t.uniqueDonorCount-e.uniqueDonorCount||t.totalTickets-e.totalTickets||e.title.localeCompare(t.title):parseInt(e[i])-parseInt(t[i])||e.title.localeCompare(t.title)):s?c.sort((e,t)=>t.score-e.score||parseInt(e.sortPotNumber)-parseInt(t.sortPotNumber)||e.title.localeCompare(t.title)):r},[m,o,s,l,i,a]);console.log("visibleEntries",u);const C=n.useCallback(r=>o.find(c=>c.id===r),[o]),y=n.useMemo(()=>({allEntries:o,searchedEntries:d,visibleEntries:u,getPotFromId:C,expandAll:f}),[o,d,u,C,f]);return k.jsx(g.Provider,{value:y,children:x})}const D=["fuzzy"];export{O as R};
