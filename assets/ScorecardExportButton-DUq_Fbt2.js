import{r as t,K as m,d as M,j as e,R as T,J as u,B as y,I as F,ad as g,ae as c,ao as d,Y as p}from"./index-D6MTDNWa.js";import{d as f,F as C,C as z}from"./download-DZIE3rj_.js";import{L as B}from"./List-OLac2lnO.js";import{e as E}from"./entryName-DTwmir1E.js";import{C as J}from"./ContentCopy-DAx49m5h.js";import{D as $}from"./DataContext-B8tAxZlA.js";import"./index-BuKlRDGE.js";function Y({text:h}){const[k,b]=t.useState(null),I=!!k,v=t.useCallback(r=>b(r.currentTarget),[]),n=t.useCallback(()=>b(null),[]),{visibleEntries:i=[]}=t.useContext($),S=t.useCallback(()=>{const r=JSON.stringify(i);n(),f("scorecardData.json",r),m("Current Scorecard entries downloaded as scorecardData.json")},[n,i]),w=t.useCallback(()=>{const x=i.map(o=>({id:o.id,make:o.makeModels.map(l=>l.make).join(","),model:o.makeModels.map(l=>l.model).join(","),version:o.version,belt:o.belt,name:E(o),versionText:o.version?" ("+o.version+")":""})).map(o=>"* "+o.name+o.versionText).join(`
`);n(),navigator.clipboard.writeText(x),m("Current scorecard entries copied to clipboard.")},[n,i]),D=t.useCallback(()=>{const r=["id","name","version","belt","modifier","points","date","link"],x=i.map(s=>({id:s.matchId,make:s.makeModels.map(a=>a.make).join(","),model:s.makeModels.map(a=>a.model).join(","),version:s.version,belt:s.belt,link:s.link,modifier:s.evidenceModifier,points:s.points,date:s.date?M(s.date).format("L"):"",name:E(s)})),o=r.join(","),l=x.map(s=>r.map(a=>s[a]).map(a=>{const j=`${a??""}`.replace(/"/g,'""');return/(\s|,|")/.test(j)?`"${j}"`:j}).join(",")).join(`
`),L=`${o}
${l}`;n(),f("scorecardData.csv",L),m("Current Scorecard entries downloaded as scorecardData.csv")},[n,i]);return e.jsxs(T.Fragment,{children:[h?e.jsx(u,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(y,{variant:"outlined",size:"small",onClick:v,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(C,{}),children:"Export"})}):e.jsx(u,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{onClick:v,children:e.jsx(C,{})})}),e.jsxs(g,{anchorEl:k,open:I,onClose:n,children:[!h&&e.jsxs(c,{disabled:!0,children:[e.jsx(d,{children:e.jsx(C,{fontSize:"small"})}),e.jsx(p,{children:"Export"})]}),e.jsxs(c,{onClick:w,children:[e.jsx(d,{children:e.jsx(J,{fontSize:"small"})}),e.jsx(p,{children:"Copy to clipboard"})]}),e.jsxs(c,{onClick:D,children:[e.jsx(d,{children:e.jsx(B,{fontSize:"small"})}),e.jsx(p,{children:"CSV"})]}),e.jsxs(c,{onClick:S,children:[e.jsx(d,{children:e.jsx(z,{fontSize:"small"})}),e.jsx(p,{children:"JSON"})]})]})]})}export{Y as E};
