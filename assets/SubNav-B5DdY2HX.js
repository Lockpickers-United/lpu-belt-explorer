import{r as c,F as k,d as n,j as m,ae as M,b as R,u as A}from"./index-B9NgfWfg.js";import{f as F,D as B}from"./DataContext-aIMeDLvq.js";import{r as O}from"./index-pr2TZd0f.js";import{b as I}from"./filterFields-BhQtoN-h.js";import{F as D,I as P,S as U}from"./Select-Cbop-1GF.js";import{T,a as W}from"./ToggleButtonGroup-528ceKdP.js";function Q({children:p,allEntries:o,profile:f}){const{filters:i}=c.useContext(k),{search:d,id:v,tab:g,name:a,sort:l,image:j,expandAll:q,...C}=i,h=c.useMemo(()=>o.map(s=>{var u,y;return{...s,originalEntry:s,makes:s.makeModels[0].make?s.makeModels.map(({make:r})=>r):s.makeModels[0].model,requestCount:(u=s.requestedBy)==null?void 0:u.length,danPoints:0,fuzzy:O(s.makeModels.map(({make:r,model:e})=>[r,e]).flat().filter(r=>r).concat([s.version,s.notes,s.belt]).join(",")),content:[(y=s.media)!=null&&y.some(r=>!r.fullUrl.match(/youtube\.com/))?"Has Images":"No Images",n(s.dateRequested).isAfter(n().subtract(1,"days"))?"Requested Recently":void 0].flat().filter(r=>r)}}),[o]),z=c.useMemo(()=>{const s=Object.keys(C).map(e=>{const t=C[e];return Array.isArray(t)?t.map(S=>({key:e,value:S})):{key:e,value:t}}).flat(),u=h.filter(e=>s.every(({key:t,value:S})=>Array.isArray(e[t])?e[t].includes(S):e[t]===S)),y=d&&u.find(e=>e.id===d);let r=u;return y?r=[y]:d&&(r=F.go(O(d),u,{keys:N,threshold:-25e3}).map(e=>({...e.obj,score:e.score}))),l?r.sort((e,t)=>l==="alphaAscending"?e.fuzzy.localeCompare(t.fuzzy):l==="alphaDescending"?t.fuzzy.localeCompare(e.fuzzy):l==="requestStatus"?I(e.requestStatus,t.requestStatus)||e.fuzzy.localeCompare(t.fuzzy):l==="requestCount"?t.requestCount-e.requestCount||e.fuzzy.localeCompare(t.fuzzy):l==="recentlyUpdated"?Math.floor(n(t.lastUpdated).valueOf()/3600)-Math.floor(n(e.lastUpdated).valueOf()/3600)||e.fuzzy.localeCompare(t.fuzzy):l==="dateRequested"?n(t.dateRequested).valueOf()-n(e.dateRequested).valueOf()||e.fuzzy.localeCompare(t.fuzzy):n(t.dateRequested).valueOf()-n(e.dateRequested).valueOf()||e.fuzzy.localeCompare(t.fuzzy)):r.sort((e,t)=>n(t.dateRequested).valueOf()-n(e.dateRequested).valueOf()||e.fuzzy.localeCompare(t.fuzzy))},[C,h,d,l]),x=c.useCallback(s=>o.find(u=>u.id===s),[o]),b=c.useMemo(()=>({allEntries:o,visibleEntries:z,getEntryFromId:x,expandAll:q,profile:f}),[o,z,x,q,f]);return m.jsx(B.Provider,{value:b,children:p})}const N=["fuzzy"];function X({form:p,name:o,optionsList:f,label:i=null,variant:d="outlined",size:v="small",width:g=350,changeHandler:a,multiple:l=!1,defaultValue:j,placeholder:q="Please Choose"}){const[C,h]=c.useState(!1),z=c.useCallback(()=>h(!1),[]),x=c.useCallback(()=>h(!0),[]),b=c.useCallback(s=>{a(s),!l&&z()},[a,z,l]);return m.jsxs(D,{id:`${o}FormControl`,size:v,color:"info",variant:d,style:{marginBottom:0,width:g||"auto"},children:[i&&m.jsx(P,{style:{color:"#bbb"},children:i}),m.jsx(U,{id:`${o}Select`,value:p[o]||j,multiple:l,name:o,label:i,open:C,onClose:z,onOpen:x,onChange:b,placeholder:q,style:{fontWeight:400,color:"#eee",fontSize:"1.1rem"},children:f.map((s,u)=>m.jsx(M,{value:f[u],children:f[u]},u))})]})}function Y({options:p,defaultValue:o,onNavChange:f=()=>{}}){const i=R(),d=c.useCallback(a=>{f(),i(a==null?void 0:a.page)},[f,i]),{isMobile:v}=A(),g=v?{fontSize:"0.95rem",lineHeight:"1.1rem"}:{fontSize:"1.0rem",fontWeight:500};return m.jsx(T,{variant:"outlined",children:p.map(a=>m.jsx(W,{onClick:()=>d(a),style:{color:o===a.label?"#eee":"#aaa",backgroundColor:o===a.label?"#292929":"#111",padding:"6px 12px",borderColor:"#000",borderRadius:0,...g},value:a.label,children:a.label},a.label))})}export{Q as D,Y as S,X as a};
