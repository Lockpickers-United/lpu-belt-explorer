import{r as t,F as L,j as e,J as B,B as F,D as N,a0 as O,u as S,R as D,ad as P,ae as w,ap as W,A as U,Z as Y,al as A,bs as Z,W as $,$ as q}from"./index-B8E85zL1.js";import{L as Q}from"./Link-C9DlZa-g.js";import{B as I,S as X}from"./Sort-DZf1ghIk.js";import{F as _,a as ee,C as te}from"./FilterAlt-Douv3ULa.js";import{L as oe}from"./LockListContext-DqAjKOdi.js";import{T as se,a as R}from"./ToggleButtonGroup-DiulI7Kd.js";import{B as M}from"./Box-CO7BM-hB.js";import{C as le}from"./Cancel-CPXmXIvQ.js";function ne({text:x}){const{filters:m,addFilter:b,removeFilter:i}=t.useContext(L),{expandAll:a}=m,p=t.useCallback(()=>{!a||a==="false"?b("expandAll","Expand All",!0):i("expandAll","Expand All")},[a,b,i]),n=a?"Collapse All":"Expand All";return x?e.jsx("div",{children:e.jsx(B,{title:n,arrow:!0,disableFocusListener:!0,children:e.jsx(Q,{onClick:()=>p(),style:{color:"#fff",textDecoration:"none",cursor:"pointer"},size:"small",children:e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:n.toUpperCase()})})})}):e.jsx("div",{children:e.jsx(B,{title:n,arrow:!0,disableFocusListener:!0,children:e.jsx(F,{onClick:()=>p(),style:{color:"#aaa"},size:"small",children:n})})})}function re({sortValues:x,compactMode:m,expandAll:b}){const[i,a]=t.useState(null),p=!!i,n=t.useCallback(l=>a(l.currentTarget),[]),C=t.useCallback(()=>a(null),[]),{filters:g,addFilter:u}=t.useContext(L),{sort:h}=g,{adminRole:k}=t.useContext(N),{compact:s,setCompact:o}=t.useContext(O),r=t.useCallback(l=>()=>{C(),o(l)},[C,o]),f=t.useCallback(l=>()=>{C(),setTimeout(()=>u("sort",l,!0),0)},[u,C]),c={vertical:"top",horizontal:"right"},{width:j}=S(),v=j<=500;return e.jsxs(D.Fragment,{children:[e.jsx(B,{title:"View Options",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:n,style:{color:"#ddd"},children:e.jsx(I,{variant:"dot",color:"secondary",invisible:!h,anchorOrigin:c,children:v?e.jsx(X,{}):"VIEW"})})}),e.jsxs(P,{anchorEl:i,open:p,onClose:C,children:[e.jsx("div",{style:{marginLeft:5,padding:5,fontWeight:700},children:"SORT BY"}),x.map(({label:l,value:y})=>e.jsx(w,{onClick:f(y),selected:h===y,children:l},l)),m&&e.jsxs("div",{children:[e.jsx(W,{}),e.jsx("div",{style:{marginLeft:5,marginTop:5,padding:5,fontWeight:700},children:"MODE"}),e.jsx(w,{onClick:r(!1),selected:!s,children:"Normal"}),e.jsx(w,{onClick:r(!0),selected:s,children:"Compact"})]}),k&&b&&e.jsxs("div",{children:[e.jsx(W,{}),e.jsx(ne,{text:!0})]})]})]})}function ie({onFiltersChanged:x}){const{isLoggedIn:m}=t.useContext(U),{beta:b}=t.useContext(O),{filters:i,filterCount:a,addFilters:p,addFilter:n,filterFields:C,removeFilters:g}=t.useContext(L),{tab:u}=t.useContext(oe),{belt:h}=i,k=/\/locks/.test(location.hash),s=t.useMemo(()=>u||h||"White",[h,u]),o=t.useMemo(()=>s!=="search"?"belt":"all",[s]),[r,f]=t.useState(s);s!==r&&s!=="search"?f(s):o==="belt"&&s==="search"&&f("search");const[c,j]=t.useState(!1),v=t.useCallback(()=>j(!c),[c]);Y("f",v);const l=t.useCallback(d=>()=>{d==="all"?n("tab","search",!0):d==="belt"&&(g(["belt"]),n("tab",r,!0))},[n,r,g]),y=t.useCallback((d,E)=>{p([{key:d,value:E},{key:"id",value:void 0},{key:"name",value:void 0}],!0),x&&x()},[p,x]),z=t.useCallback(()=>j(!0),[]),T=t.useCallback(()=>j(!1),[]),{color:V,lineColor:H="#999"}=A[r]?A[r]:{color:"#inherit"},G=o==="belt"?1:.7,{width:J}=S(),K=J<=500;return e.jsxs(D.Fragment,{children:[e.jsx(B,{title:"Filter",arrow:!0,disableFocusListener:!0,children:e.jsx(F,{color:"inherit",onClick:z,style:{color:"#ddd"},children:e.jsx(I,{variant:"dot",badgeContent:a,color:"secondary",anchorOrigin:{vertical:"top",horizontal:"right"},children:K?e.jsx(_,{}):"FILTER"})})}),c&&e.jsxs(Z,{anchor:"right",open:c,onClose:T,children:[e.jsx($,{variant:"dense",onClick:T,style:{padding:"8px 0px 0px 8px"},children:e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:700},children:"Filters"})}),A[r]&&k&&e.jsx("div",{style:{marginLeft:8,marginBottom:8},children:e.jsxs(se,{variant:"outlined",children:[e.jsxs(R,{onClick:l("belt"),style:{color:o==="belt"?"#eee":"#777",backgroundColor:o==="belt"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"belt",disabled:o==="belt",children:[e.jsx("div",{style:{backgroundColor:V,height:16,width:16,borderColor:H,borderRadius:8,border:"1px solid",marginRight:8,opacity:G}}),r," BELT"]},"belt"),e.jsx(R,{onClick:l("all"),style:{color:o==="all"?"#eee":"#777",backgroundColor:o==="all"?"inherit":"#111",padding:"6px 12px",borderColor:"#666"},value:"all",disabled:o==="all",children:"ALL LOCKS"},"all")]})}),e.jsx(M,{margin:1,children:e.jsx(q,{direction:"column",style:{minWidth:250},children:C.filter(d=>(!d.beta||b)&&(!d.userBased||m)).filter(d=>!(o==="belt"&&u!=="search"&&d.label==="Belt")).map((d,E)=>e.jsx(ee,{tab:u,...d,onFilter:y},E))})}),e.jsxs("div",{style:{padding:8},children:[e.jsx(te,{forceText:!0}),e.jsx(F,{variant:"outlined",color:"inherit",onClick:T,children:"Done"})]})]})]})}function be({sortValues:x,extraFilters:m=[],compactMode:b,resetAll:i=!1,expandAll:a=!1,style:p}){const{filters:n,filterCount:C,setFilters:g,isFiltered:u}=t.useContext(L),{tab:h,sort:k,search:s}=n,o=k||C>0||u&&i,r=t.useCallback(()=>{g(i?{tab:h}:{tab:h,search:s})},[i,s,g,h]),{width:f}=S(),c=f<=500,j=c?3:0,v=c?2:0,l=c?40:60;return e.jsxs(M,{style:{display:"flex",paddingTop:j,marginBottom:v,marginLeft:0,justifyContent:"center",...p},sx:{".MuiBadge-anchorOriginTopRightRectangular":{marginTop:"5px"},".MuiButton-root":{minWidth:l}},children:[e.jsx(re,{sortValues:x,compactMode:b,expandAll:a}),e.jsx(ie,{extraFilters:m}),o&&e.jsx(F,{color:"inherit",style:{color:"#bbb"},onClick:r,children:c?e.jsx(le,{}):"RESET"})]})}export{ne as E,be as V};
