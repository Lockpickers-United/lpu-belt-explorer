import{r as l,F as v,j as t,P as N,I as V,R as E,aA as k,u as M,aa as T,ab as $,L as P,ak as U}from"./index-W2o1Ozhs.js";import{F as K}from"./FieldValue-CzP4ywC1.js";import{f as A,C as q}from"./FilterAlt-DzK0UsCI.js";import{C as H}from"./Chip-CmOJVPag.js";import{D as J}from"./DataContext-DliGom25.js";import{F as Q,I as X,S as Y}from"./Select-BO6H7qBu.js";function Z(){const{filters:r,filterCount:i,removeFilter:h,filterFieldsByFieldName:f}=l.useContext(v),C=l.useCallback((n,e)=>()=>{h(n,e)},[h]),c=l.useMemo(()=>{const{search:n,id:e,tab:d,name:p,sort:u,image:s,...b}=r;return Object.keys(b).map(m=>{const o=r[m];return Array.isArray(o)?o.map(y=>({key:m,value:y})):{key:m,value:o}}).flat()},[r]),x=l.useCallback((n,e)=>n==="Belt"?e==="Unranked"?e:e.includes("Black")?e.replace(/(Black)\s(\d+)/,"$1 Belt $2"):e+" Belt":n==="UL Group"?"Group "+e:n==="Wheels"?`${e} Wheels`:A[e]?A[e]:e,[]);return i===0?null:t.jsx(K,{name:"Current Filters",style:{marginBottom:0},value:t.jsx(N,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:c.map(({key:n,value:e},d)=>{var s;const p=e.startsWith("!")?"#642c2c":"inherit",u=x((s=f[n])==null?void 0:s.label,e).replace("!","NOT ").replace("||"," OR ").replace("@@"," AND ");return t.jsx(H,{label:u,variant:"outlined",style:{marginRight:4,marginBottom:4,backgroundColor:p},onDelete:C(n,e)},d)})})})}function se({profile:r={},collectionType:i,advancedEnabled:h}){var L,S,B;const{userId:f}=V(),{filters:C,filterCount:c,addFilter:x,setShowAdvancedSearch:n,showAdvancedSearch:e}=l.useContext(v),{beltEntries:d=[]}=l.useContext(J),[p,u]=E.useState(!1),s=((L=k[i])==null?void 0:L.labels)||[],b=((S=k[i])==null?void 0:S.keyByLabel)||[],m=((B=k[i])==null?void 0:B.getCollected(r))||[],{isMobile:o}=M(),y=o?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:g=f&&c===0?"Any":null}=C,F=s.includes(g)&&c<2;let j="";g&&(typeof g=="string"?j=g:j="Any");const R=l.useCallback(()=>u(!1),[]),D=l.useCallback(()=>u(!0),[]),I=l.useCallback(a=>{x("collection",a.target.value,!0)},[x]),w=l.useCallback(()=>{n(!e)},[n,e]);if(!c&&!f)return null;const z=o?8:16,O={color:"#ddd",textDecoration:"underline",cursor:"pointer","&:hover":{color:"#fff",fontSize:"0.9rem"}};return t.jsx(T,{style:y,sx:{paddingBottom:0,paddingTop:2},children:t.jsxs($,{style:{paddingTop:0,paddingLeft:z},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[t.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:"Current Filters"}),d.length>1&&t.jsxs("div",{style:{fontWeight:400,fontSize:"1.0rem",marginLeft:8},children:["(",d.length," Locks)"]}),h&&t.jsx("div",{style:{flexGrow:1,textAlign:"right",fontSize:"0.9rem"},children:t.jsx(P,{onClick:w,sx:O,children:"Advanced"})})]}),F&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs(Q,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[t.jsx(X,{id:"label",children:"Collection"}),t.jsx(Y,{name:"collection-selector",label:"Collection",open:p,onClose:R,onOpen:D,value:j,onChange:I,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:s.map((a,G)=>{var W;return t.jsxs(U,{value:a,children:[a," (",a==="Any"?m.length:((W=r[b[a]])==null?void 0:W.length)||0,")"]},G)})})]}),t.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:t.jsx(q,{})})]}),!F&&t.jsx(Z,{})]})})}export{se as I};
