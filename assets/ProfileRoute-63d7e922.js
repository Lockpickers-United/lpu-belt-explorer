import{ai as p,r as e,a1 as h,Q as f,e as C,j as t,T as L,I as y,C as P,a3 as E,c as k,b,R as d,U as v,V as F,W as T}from"./index-70d3dcb3.js";import{L as D,D as I,I as R,C as w,E as B,m as S,k as N,h as M,T as q,i as V,j as W,l as A}from"./FilterButton-3b9d2f93.js";import{d as H}from"./ImageViewer-8f3ff191.js";import{l as O}from"./LPU-c3fa7122.js";import{L as Q}from"./LinearProgress-153fb9b1.js";import"./useWindowSize-c6664921.js";import"./InputLabel-82a8d2bf.js";import"./Chip-4514b7d3.js";import"./index-893b19c8.js";import"./index-4618b754.js";import"./Badge-af574bc0.js";function U(){const{userId:s}=p(),{user:a}=e.useContext(h),{lockCollection:r}=e.useContext(f),i=e.useCallback(async()=>{const o=`https://lpubelts.com/#/profile/${a.uid}`;await navigator.clipboard.writeText(o),C("Link to entry copied to clipboard.")},[a==null?void 0:a.uid]);return!a||s!==a.uid||!(r!=null&&r.displayName)?null:t.jsx(L,{title:"Copy My Profile Link",arrow:!0,disableFocusListener:!0,children:t.jsx(y,{onClick:i,children:t.jsx(H,{})})})}function _(){const s={marginTop:16,maxWidth:350,marginLeft:"auto",marginRight:"auto",borderRadius:0};return t.jsxs(P,{style:s,children:[t.jsx(E,{title:"Profile Not Found!"}),t.jsx(k,{children:t.jsx(b,{variant:"h6",align:"center",children:"This profile was not found, or is not public."})})]})}function $({profile:s}){const{compact:a,expanded:r,setExpanded:i}=e.useContext(D),{visibleEntries:o=[]}=e.useContext(I),c=e.useDeferredValue(r);return t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(R,{profile:s}),a?t.jsx(w,{entries:o}):o.map(l=>t.jsx(B,{entry:l,expanded:l.id===c,onExpand:i},l.id))]})}function ot(){const[s,a]=e.useState({}),{userId:r}=p(),{getProfile:i}=e.useContext(f),[o,c]=e.useState(!0),[l,u]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const n=await i(r);a(n),u(!1)}catch(n){console.trace("Error loading profile",n),a({}),u(!0)}finally{c(!1)}})()},[r,i]);const m=e.useMemo(()=>{const x=new Set(S.flatMap(({key:n})=>s[n]));return N.filter(n=>x.has(n.id))},[s]),j=t.jsxs(d.Fragment,{children:[t.jsx(M,{}),t.jsx(q,{}),t.jsx(U,{})]}),g=o?"Loading...":"Profile";return t.jsx(d.Fragment,{children:t.jsx(V,{children:t.jsx(W,{allEntries:m,profile:s,children:t.jsxs(A,{children:[t.jsx(v,{title:g,extras:j}),o&&t.jsxs(d.Fragment,{children:[t.jsx(Q,{variant:"indeterminate",color:"secondary"}),t.jsx("img",{alt:"Loading",src:O,style:{marginLeft:"auto",marginRight:"auto",display:"block"}})]}),!o&&s&&!l&&t.jsx($,{profile:s}),!o&&l&&t.jsx(_,{}),t.jsx(F,{}),t.jsx(T,{feature:"profile"})]})})})})}export{ot as default};
