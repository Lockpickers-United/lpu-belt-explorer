import{r as i,F as J,j as e,P as N,I as ye,R as S,aA as K,u as T,ab as be,ac as we,L as Z,a8 as $,X as V,W as F,U as I,ad as U,Y as le,Z as ce,$ as de,a0 as pe,A as ke,D as me,ba as Se,bb as Re,B as xe,T as ue,b as Le,d as Fe,ak as Be,at as G,a4 as q,a5 as Ie,e as We,N as Ae,h as Te}from"./index-DVSFr6OD.js";import{c as Pe}from"./filterFields-BuUFPiNz.js";import{u as Ee}from"./usePageTitle-BDU_duyy.js";import{R as ze}from"./RaffleDataProvider-DGaMAPCy.js";import{D as Y}from"./DataContext-ks8A5s2j.js";import{F as L}from"./FieldValue-Bv0lSxrq.js";import{f as ee,C as De}from"./FilterAlt-BKLbljJ2.js";import{C as Me}from"./Search-Dfn_e4WH.js";import{F as Oe,I as Ne,S as $e}from"./Select-B2ePLM0t.js";import{N as Ve}from"./NoEntriesCard-D8UZ-9fV.js";import{E as he}from"./ExpandMore-DC9CzRbr.js";import{L as _e}from"./Link-DTo8UbOV.js";import{F as H}from"./FilterChip-CatDcZD1.js";import{I as Ge}from"./ImageGallery-Y3tvw7pn.js";import{C as fe}from"./ContentCopy-De7BgMkB.js";import{R as W,A as qe}from"./AdminRoleButton-B88sEehX.js";import{L as He}from"./LoadingDisplaySmall-C-s246xI.js";import{A as ge,a as je,b as ve}from"./AccordionSummary-BEu0dZwk.js";import{C as Je}from"./Collapse-iK27Pk2f.js";import{M as te}from"./index-BswsOFSS.js";import{r as ne}from"./index-5oFVU1V0.js";import{A as Ue}from"./AccordionActions-nAzLmeS4.js";import{R as Ye}from"./RaffleSearchBar-DjHjobkp.js";import{r as Ke}from"./sortFields-ChCLUnX8.js";import{d as ie,F as X,C as Xe}from"./download-DSPBwsSd.js";import{L as Ze}from"./List-BqJRmaZA.js";import{E as Qe}from"./ViewFilterButtons-DLBxVQl0.js";import{R as et}from"./RaffleHeader-BUUwB_dh.js";import{C as tt}from"./Cached-CusOo2a_.js";import{L as nt}from"./LoadingDisplayWhite-CSUg0qup.js";import{n as it}from"./dataUrls-DkJe4Pqg.js";import{R as st}from"./ReportButton-CZFDCGkC.js";import"./index-DV9PfA0w.js";import"./filterEntries-BBFZIbGW.js";import"./entryName-qIufVPsq.js";import"./HighlightOff-C1xeJEgN.js";import"./Box-B2w4cE7H.js";import"./useFormControl-DTv-C_uL.js";import"./LockListContext-D8PRu7TE.js";import"./glossary-B-_vYIGQ.js";import"./ImageViewer-BuWlFt8i.js";import"./Launch-ChuF9xf9.js";import"./Dialog-DpfsxcsE.js";import"./LinearProgress-CAJ9i2uh.js";import"./DialogContent-HOzHP9U0.js";import"./ImageListItem-BgQT0T9Z.js";import"./useData-CR5OB6H1.js";import"./setDeep-J6HEwWhX.js";import"./CircularProgress-oLZiTwzA.js";import"./SearchBox-BgxgRyJM.js";import"./Sort-ByqPOImF.js";import"./TextField-CGjTFXh-.js";import"./ToggleButtonGroup-BiQAEkh9.js";import"./filterEntriesAdvanced-B_LinbMH.js";import"./AddCircle-BnQQwvyZ.js";import"./Cancel-C_chbIwS.js";function ot(){const{filters:t,filterCount:n,removeFilter:s,filterFieldsByFieldName:a}=i.useContext(J),r=i.useCallback((c,o)=>()=>{s(c,o)},[s]),l=i.useMemo(()=>{const{search:c,id:o,tab:u,name:C,sort:x,image:p,...v}=t;return Object.keys(v).map(d=>{const h=t[d];return Array.isArray(h)?h.map(j=>({key:d,value:j})):{key:d,value:h}}).flat()},[t]),m=i.useCallback((c,o)=>c==="Belt"?o==="Unranked"?o:o.includes("Black")?o.replace(/(Black)\s(\d+)/,"$1 Belt $2"):o+" Belt":c==="UL Group"?"Group "+o:c==="Wheels"?`${o} Wheels`:ee[o]?ee[o]:o,[]);return n===0?null:e.jsx(L,{name:"Current Filters",style:{marginBottom:0},value:e.jsx(N,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},style:{marginRight:-24},children:l.map(({key:c,value:o},u)=>{var p;const C=o.startsWith("!")?"#642c2c":"inherit",x=m((p=a[c])==null?void 0:p.label,o).replace("!","NOT ").replace("||"," OR ").replace("@@"," AND ");return e.jsx(Me,{label:x,variant:"outlined",style:{marginRight:4,marginBottom:4,backgroundColor:C},onDelete:r(c,o)},u)})})})}function rt({profile:t={},collectionType:n,advancedEnabled:s}){var z,D,w;const{userId:a}=ye(),{filters:r,filterCount:l,addFilter:m,setShowAdvancedSearch:c,showAdvancedSearch:o}=i.useContext(J),{beltEntries:u=[]}=i.useContext(Y),[C,x]=S.useState(!1),p=((z=K[n])==null?void 0:z.labels)||[],v=((D=K[n])==null?void 0:D.keyByLabel)||[],d=((w=K[n])==null?void 0:w.getCollected(t))||[],{isMobile:h}=T(),j=h?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},{collection:f=a&&l===0?"Any":null}=r,y=p.includes(f)&&l<2;let k="";f&&(typeof f=="string"?k=f:k="Any");const b=i.useCallback(()=>x(!1),[]),P=i.useCallback(()=>x(!0),[]),B=i.useCallback(g=>{m("collection",g.target.value,!0)},[m]),E=i.useCallback(()=>{c(!o)},[c,o]);if(!l&&!a)return null;const A=h?8:16,_={color:"#ddd",textDecoration:"underline",cursor:"pointer","&:hover":{color:"#fff",fontSize:"0.9rem"}};return e.jsx(be,{style:j,sx:{paddingBottom:0,paddingTop:2},children:e.jsxs(we,{style:{paddingTop:0,paddingLeft:A},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem"},children:"Current Filters"}),u.length>1&&e.jsxs("div",{style:{fontWeight:400,fontSize:"1.0rem",marginLeft:8},children:["(",u.length," Locks)"]}),s&&e.jsx("div",{style:{flexGrow:1,textAlign:"right",fontSize:"0.9rem"},children:e.jsx(Z,{onClick:E,sx:_,children:"Advanced"})})]}),y&&e.jsxs("div",{style:{display:"flex"},children:[e.jsxs(Oe,{fullWidth:!0,size:"small",color:"secondary",sx:{marginLeft:"8px",minWidth:80,maxWidth:300},children:[e.jsx(Ne,{id:"label",children:"Collection"}),e.jsx($e,{name:"collection-selector",label:"Collection",open:C,onClose:b,onOpen:P,value:k,onChange:B,style:{backgroundColor:"#222",fontSize:"1.1rem",fontWeight:500},color:"secondary",children:p.map((g,R)=>{var Q;return e.jsxs($,{value:g,children:[g," (",g==="Any"?d.length:((Q=t[v[g]])==null?void 0:Q.length)||0,")"]},R)})})]}),e.jsx("div",{style:{flexGrow:1,marginTop:2,marginLeft:15},children:e.jsx(De,{})})]}),!y&&e.jsx(ot,{})]})})}function at({entry:t}){const n=i.useCallback(async s=>{s.preventDefault(),s.stopPropagation();const r=t.title.replace(/[\s/]/g,"_").replace(/\W/g,""),l=`https://share.lpubelts.com/?id=${t.id}&name=${r}`;await navigator.clipboard.writeText(l),V("Link to RAFL pot copied to clipboard.")},[t]);return e.jsx(F,{title:"Copy Link to Pot",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:n,style:{height:36,width:36},children:e.jsx(_e,{})})})}function lt({entry:t}){const[n,s]=U(),a=n.get("image"),r=i.useCallback(u=>{n.set("image",u+1),s(n)},[n,s]),l=i.useCallback(()=>{n.delete("image"),s(n)},[n,s]),m=i.useCallback(()=>se(a,t),[t,a]),c=i.useMemo(()=>a?+a-1:-1,[a]),o=se(c,t);return e.jsx(Ge,{media:t.media,openIndex:c,initiallyOpen:o,onOpenImage:r,onCloseImage:l,onBackButton:m,shareParams:{id:t.id,name:n.get("name")},columns:2})}const se=(t,n)=>/\d+/.test(t)&&!!n.media[t];function ct({entry:t}){const n=i.useCallback(async()=>{const s=t.title;await navigator.clipboard.writeText(s),V("Pot name copied to clipboard.")},[t]);return e.jsx(F,{title:"Copy RAFL pot name",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:n,children:e.jsx(fe,{})})})}function dt({entry:t}){const{raflState:n,raffleAdminRole:s}=i.useContext(W),a=["live","post"].includes(n)||s,{isMobile:r,flexStyle:l}=T();let m=t.displayName?t.displayName:t.title;const c=t.winnerCount&&!t.winner?` (${t.winnerCount} winners)`:"";m=m+c;const o=t.winner?15:0,u=Array.isArray(t.winner)?t.winner.join(", "):void 0,C=t.winner.length>1?"s":"",x=r?"left":"right",p=r?28:30,v=r?"1.1rem":"1.3rem",d="1rem",h=0,j=r?"1.3rem":"1.4rem",f=r?"1.6rem":"1.8rem",y=r?"1.2rem":"1.3rem";return e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",marginBottom:o},children:[a&&e.jsx("div",{style:{borderRadius:"50%",backgroundColor:"#fff",color:"#000",height:p,width:p,minWidth:p,marginTop:0,marginBottom:4,marginRight:12,display:"flex"},children:e.jsx("div",{style:{margin:"auto",paddingTop:0,paddingLeft:h,paddingRight:1,fontWeight:700,fontSize:v,lineHeight:d},children:t.potNumber})}),e.jsxs("div",{style:{display:l,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",fontWeight:500,fontSize:j,lineHeight:f,marginTop:r?0:-3,flexGrow:1},children:m}),t.winner.length>0&&e.jsx("div",{style:{display:"flex",fontSize:y,lineHeight:f,marginTop:r?8:-3,marginRight:10,fontWeight:600,textAlign:x},children:e.jsxs("span",{children:[e.jsxs("span",{style:{fontWeight:400},children:["Winner",C]}),": ",u]})})]})]})}var M={},oe;function pt(){if(oe)return M;oe=1;var t=le();Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var n=t(ce()),s=de();return M.default=(0,n.default)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),M}var mt=pt();const re=pe(mt);function xt({id:t}){const{isLoggedIn:n}=i.useContext(ke),{lockCollection:s,addToLockCollection:a,removeFromLockCollection:r}=i.useContext(me),[l,m]=i.useState(()=>{}),c=!!l,{isMobile:o}=T(),[u,C]=i.useState(null),x="raffleWatchlist",p=i.useCallback(()=>!!s[x]&&s[x].includes(t),[t,s]),v=p()?"Remove from Watchlist":"Add to Watchlist",d=i.useCallback((b,P)=>async(B,E)=>{B.preventDefault(),B.stopPropagation(),C(b),E||!P?await a(b,t):await r(b,t),C(null)},[t,a,r]),h=i.useCallback(b=>{b.preventDefault(),b.stopPropagation(),m(b.currentTarget)},[]),j=i.useCallback(b=>{b.preventDefault(),b.stopPropagation(),m(null)},[]),f=36,k={marginTop:-2,marginRight:o?4:8,width:f,minWidth:f,height:f};return e.jsxs("div",{style:k,children:[n&&e.jsx("div",{style:{display:"flex",justifyItems:"left"},children:e.jsx(S.Fragment,{children:u===x?e.jsx("div",{style:{marginTop:1},children:e.jsx(He,{})}):e.jsx(F,{title:v,arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:d(x,p()),style:{color:p()?"#13e113":"#999",...k},children:e.jsx(re,{})},x)})},x)}),!n&&e.jsxs(S.Fragment,{children:[e.jsx(F,{title:v,arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:h,style:{color:p()?"#13e113":"#999",...k},children:e.jsx(re,{})},x)}),e.jsx(Se,{open:c,anchorEl:l,onClose:j,anchorOrigin:{vertical:"top",horizontal:"left"},children:e.jsx("div",{style:{display:"flex",padding:30,width:300,placeItems:"center"},onClick:j,children:e.jsxs("div",{children:[e.jsx("strong",{children:"Log in to keep a RAFL Watchlist!"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(Re,{})]})})})]})]})}function ut({entry:t,expanded:n,onExpand:s,single:a}){var _,z,D;const{raflState:r,raffleAdminRole:l}=i.useContext(W),{expandAll:m}=i.useContext(Y),c=["live","post"].includes(r)||l,{filters:o}=i.useContext(J),u=!!o.shippingType||!!o.splitShipping,[C,x]=i.useState(!1),p={maxWidth:700,marginLeft:"auto",marginRight:"auto"},v=i.useRef(null),d=a==="2",h=t.tickets?new Intl.NumberFormat().format(t.tickets):"---";i.useEffect(()=>{if(n&&v&&!C&&!m){const g=window.innerWidth<=600?70:74;x(!0),setTimeout(()=>{window.scrollTo({left:0,top:v.current.offsetTop-g,behavior:n?"auto":"smooth"})},n?0:100)}else n||x(!1)},[n,t,C,m]);const j=i.useCallback((w,g)=>{s&&s(g?t.id:!1)},[t.id,s]),{isMobile:f,flexStyle:y}=T(),k=f?"12px 0px 8px 0px":"12px 0px 8px 8px",b=f?"12px 0px 12px 0px":"12px 0px 12px 8px",P=f?"0px 0px 18px 0px":"0px 0px 18px 8px",B=f?"1rem":"1.1rem",E=f?"0.95rem":"1.0rem",A=t.winner.length>0&&!n?.6:1;return e.jsxs(ge,{expanded:n,onChange:j,style:p,ref:v,children:[e.jsx(je,{expandIcon:d?null:e.jsx(he,{}),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexGrow:1},children:[e.jsxs("div",{style:{display:"block",marginBottom:0,flexGrow:1},children:[e.jsx("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:e.jsx("div",{style:{margin:k,display:"flex",flexGrow:1},children:e.jsx(dt,{entry:t})})}),e.jsxs("div",{style:{margin:P,display:"flex"},children:[e.jsx("div",{style:{flexGrow:1,opacity:A},children:e.jsxs("div",{style:{marginRight:8,color:"#bbb",fontSize:"1.0rem"},children:["Contributed by Â ",t.contributedBy.map((w,g)=>{const R=g<t.contributedBy.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(H,{value:w,field:"contributedBy",mode:"text"}),R]},g)})]})}),c&&e.jsx(Je,{in:!!t.donors,children:e.jsxs("div",{style:{marginRight:15,fontSize:B,textAlign:"right",display:y,opacity:A},children:[e.jsx("div",{children:e.jsxs("nobr",{children:["Donors: ",e.jsx("strong",{children:t.donors||"--"})]})}),e.jsx("div",{style:{marginLeft:8},children:e.jsxs("nobr",{children:["Tickets: ",e.jsx("strong",{children:h})]})})]})})]}),!d&&u&&e.jsxs("div",{style:{display:"flex",marginTop:6,opacity:A},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(L,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((w,g)=>{const R=g<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(H,{value:w,field:"country",mode:"text"}),R]},g)})})}),e.jsx(L,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),e.jsx("div",{style:{margin:b,fontSize:B,opacity:A},children:e.jsx(te,{rehypePlugins:[[ne,{target:"_blank"}]],children:t.description})})]}),c&&e.jsx(xt,{id:t.id})]})}),n&&e.jsxs(S.Fragment,{children:[e.jsxs(ve,{sx:{padding:"0px 16px 0px 16px"},children:[e.jsx("div",{style:{display:y},children:e.jsx(N,{direction:"row",alignItems:"flex-start",style:{},children:!!((_=t.tags)!=null&&_.length)&&!d&&e.jsx(L,{name:"Tags",value:e.jsx(N,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:t.tags.map((w,g)=>e.jsx(H,{value:w,field:"tags",mode:"simple"},g))}),headerStyle:{marginBottom:4}})})}),!d&&!u&&e.jsxs("div",{style:{display:"flex",marginTop:6},children:[e.jsx("div",{style:{marginRight:10},children:e.jsx(L,{name:"Country",headerStyle:{marginBottom:4},value:t.country.map((w,g)=>{const R=g<t.country.length-1?", ":"";return e.jsxs("span",{children:[e.jsx(H,{value:w,field:"country",mode:"text"}),R]},g)})})}),e.jsx(L,{name:"Shipping Info",headerStyle:{marginBottom:4},value:t.shippingInfo})]}),t.potContents&&e.jsx(N,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap",marginTop:"4px"},children:e.jsx(L,{name:"Contents",textStyle:{fontSize:E},value:e.jsx(te,{rehypePlugins:[[ne,{target:"_blank"}]],children:t.potContents})})}),!!((z=t.media)!=null&&z.length)&&e.jsx(L,{value:e.jsx(lt,{entry:t})}),!!((D=t.links)!=null&&D.length)&&e.jsx(L,{name:"Links",value:e.jsx(N,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:t.links.map(({title:w,url:g},R)=>e.jsx(xe,{href:g,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:w},R))})}),!m&&e.jsx(ue,{feature:"raflPot",id:t.id})]}),!d&&e.jsxs(Ue,{disableSpacing:!0,children:[e.jsx(ct,{entry:t}),c&&e.jsx(at,{entry:t})]})]})]})}const Ce=S.memo(ut,(t,n)=>{const s=Object.keys(t.entry),a=Object.keys(n.entry);if(s.length!==a.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==a[r]||t.entry[s[r]]!==n.entry[a[r]])return!1;return t.expanded===n.expanded&&t.onExpand===n.onExpand});function ht(){const{raflState:t}=i.useContext(W),n=Le(),{isMobile:s}=T(),a=s?{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:8}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",padding:12},r=!1;return e.jsxs(S.Fragment,{children:[t==="preview"&&e.jsx("div",{style:{...a,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. In the meantime, here's a preview of the pots that folks are developing. Please note that ",e.jsx("strong",{children:"all pots and contents are subject to change"})," until the raffle begins in January."]})}),t==="setup"&&e.jsx("div",{style:{...a,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL is coming soon!"}),"We will start accepting entries on January 1st. See you then!"]})}),t==="live"&&e.jsx("div",{style:{...a,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,marginTop:1,marginBottom:7},children:"RAFL is on!"}),e.jsxs("div",{style:{fontSize:"1rem",marginTop:1,marginBottom:15},children:["Welcome to the ",e.jsx("strong",{children:"2025 Lockpicking Charity Raffle"}),". You donate to your favorite charity and every dollar donated earns a ticket you can put towards any of the fantastic pots the community has donated this year. To read the full details (and enter to win) ",e.jsx(Z,{onClick:()=>n("/rafl/enter"),style:{color:"#fff",textDecorationColor:"#fff",fontWeight:700,cursor:"pointer"},children:"click here."})]}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:"Entries will be accepted through January 31, and the primary prize drawing will happen via livestream at 11 a.m. PDT on Saturday, February 1."})]})}),t==="post"&&r,t==="post"&&!r&&e.jsx("div",{style:{...a,backgroundColor:"#333",minHeight:72},children:e.jsxs("div",{style:{padding:"4px 4px 10px 4px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:500,marginTop:1,marginBottom:7},children:"RAFL 2025 has ended."}),"Check out the winners below, see you next year!"]})})]})}function ft({text:t}){const[n,s]=i.useState(null),a=!!n,r=i.useCallback(p=>s(p.currentTarget),[]),l=i.useCallback(()=>s(null),[]),m=Fe().format("YYYY-MM-DD"),{raffleAdminRole:c}=i.useContext(W),{visibleEntries:o=[]}=i.useContext(Y),u=i.useCallback(()=>{const p=JSON.stringify(o);l(),ie(`rafflePots${m}.json`,p),V("Current RAFL entries downloaded as rafflePots.json")},[m,l,o]),C=i.useCallback(()=>{const v=o.map(d=>({id:d.id,potNumber:d.potNumber,title:d.title,contributedBy:d.contributedBy,donors:d.donors,tickets:d.tickets,winner:d.winner})).map(d=>{const h=d.winner?`[Winner: ${d.winner}]`:"";return`* Pot #${d.potNumber} - ${d.title} ${h}`}).join(`
`);l(),navigator.clipboard.writeText(v).then(()=>{V("Current scorecard entries copied to clipboard.")})},[l,o]),x=i.useCallback(()=>{const p=o.map(j=>({potNumber:j.potNumber,title:j.title,contributedBy:j.contributedBy,donors:j.donors,tickets:j.tickets,winner:j.winner})),v=Object.keys(p[0]).join(","),d=p.map(j=>Object.keys(p[0]).map(f=>j[f]).map(f=>{const y=`${f??""}`.replace(/"/g,'""');return/(\s|,|")/.test(y)?`"${y}"`:y}).join(",")).join(`
`),h=`${v}
${d}`;l(),ie("scorecardData.csv",h),V("Current Scorecard entries downloaded as scorecardData.csv")},[l,o]);return e.jsxs("div",{children:[t?e.jsx(F,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(xe,{variant:"outlined",size:"small",onClick:r,style:{color:"#ddd",borderColor:"#aaa"},startIcon:e.jsx(X,{}),children:"Export"})}):e.jsx(F,{title:"Export",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:r,children:e.jsx(X,{})})}),e.jsxs(Be,{anchorEl:n,open:a,onClose:l,children:[!t&&e.jsxs($,{disabled:!0,children:[e.jsx(G,{children:e.jsx(X,{fontSize:"small"})}),e.jsx(q,{children:"Export"})]}),e.jsxs($,{onClick:C,children:[e.jsx(G,{children:e.jsx(fe,{fontSize:"small"})}),e.jsx(q,{children:"Copy to clipboard"})]}),e.jsxs($,{onClick:x,children:[e.jsx(G,{children:e.jsx(Ze,{fontSize:"small"})}),e.jsx(q,{children:"CSV"})]}),c&&e.jsxs($,{onClick:u,children:[e.jsx(G,{children:e.jsx(Xe,{fontSize:"small"})}),e.jsx(q,{children:"JSON"})]})]})]})}function gt({profile:t}){const{filters:n}=i.useContext(J),[s,a]=i.useState(n.id),{visibleEntries:r,expandAll:l}=i.useContext(Y),m=i.useDeferredValue(s),c=i.useCallback(o=>{a(o)},[]);return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsx(ht,{}),e.jsx(Ye,{label:"Raffle Pots",sortValues:Ke}),e.jsx(rt,{profile:t,collectionType:"raffle"}),e.jsx("div",{style:{marginLeft:"auto",marginRight:"auto",justifyItems:"center",marginTop:4,marginBottom:4},children:e.jsx(Qe,{})}),r.length===0&&e.jsx(Ve,{label:"Rafl Pots"}),r.map(o=>e.jsx(Ce,{entry:o,onExpand:c,expanded:o.id===m||!!l},o.id)),e.jsx("div",{style:{marginLeft:"auto",marginRight:"auto",justifyItems:"center",marginTop:30},children:e.jsx(ft,{text:!0})})]})}function jt({refresh:t}){const[n,s]=i.useState(!1),[a,r]=i.useState(""),[l,m]=i.useState(!1),{preview:c,setPreview:o}=i.useContext(W),[u,C]=U(),x=u.has("preview"),p=i.useCallback(async()=>{const d=`${it}/refresh-preview`;s(!0),await fetch(d,{cache:"no-store"}).then(async h=>(s(!1),await h.json())).then(async h=>{r(h),console.log(`preview response
`,JSON.stringify(h,null,2))}),await t()},[t]),v=i.useCallback(()=>{x?(u.delete("preview"),C(u),o(!1)):o(!c)},[c,x,u,o,C]);return e.jsxs(S.Fragment,{children:[e.jsxs("div",{style:{maxWidth:700,margin:"20px auto 10px auto",padding:2,fontWeight:700,fontSize:"1.2rem",backgroundColor:"#8830d3",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{flexGrow:1,marginLeft:20},children:e.jsx(Z,{onClick:()=>v(),style:{color:"#fff",textDecorationColor:"#bbb"},children:"PREVIEW MODE"})}),n?e.jsx(nt,{}):e.jsx(F,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:p,style:{marginRight:10},children:e.jsx(tt,{})})})]}),(a==null?void 0:a.status)==="Errors"&&e.jsxs(ge,{expanded:l,onChange:()=>m(!l),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(je,{expandIcon:e.jsx(he,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(ve,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(a,null,2)})})]})]})}var O={},ae;function vt(){if(ae)return O;ae=1;var t=le();Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var n=t(ce()),s=de();return O.default=(0,n.default)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),O}var Ct=vt();const yt=pe(Ct);function bt(){const{raffleAdminRole:t,preview:n,setPreview:s}=i.useContext(W),[a,r]=U(),l=a.has("preview"),m=n||l,c=i.useCallback(()=>{l?(a.delete("preview"),r(a),s(!1)):s(!n)},[n,l,a,s,r]);Ie("p",()=>c(),{preventDefault:!0});const o=m?"#983de6":"#fff";return t?e.jsx(F,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(I,{onClick:c,style:{height:48,width:48},children:e.jsx(yt,{style:{color:o}})})}):null}function Rn(){Ee("RAFL Prizes");const{preview:t,allPots:n,raflState:s,refresh:a}=i.useContext(W),{lockCollection:r}=i.useContext(me),{isMobile:l}=T(),[m]=U(),c=m.get("single"),o=m.get("id"),u=m.has("preview"),C=t||u,x=n,p=x.find(k=>k.id===o),v=!!c&&p,d=e.jsx(S.Fragment,{children:e.jsxs(S.Fragment,{children:[!l&&e.jsx("div",{style:{flexGrow:1,minWidth:"10px"}}),e.jsx(bt,{}),e.jsx(st,{}),e.jsx(qe,{})]})}),h=void 0,j=l?8:0,f={maxWidth:700,marginLeft:"auto",marginRight:"auto",paddingLeft:j,paddingRight:j};let y=s==="post"?"RAFL 2025 has ended":["live","setup"].includes(s)||!l?"RAFL 2025!":"Announcing RAFL 2025!";return e.jsx(We,{filterFields:Pe,children:e.jsx(ze,{allEntries:x,profile:r,children:e.jsxs("div",{style:f,children:[v&&e.jsx(Ce,{entry:p,expanded:!0,single:c}),!v&&e.jsxs(S.Fragment,{children:[e.jsx(Ae,{title:y,extras:d,extrasTwo:h}),e.jsx(et,{page:"pots"}),C&&e.jsx(jt,{refresh:a}),e.jsx(gt,{profile:r}),e.jsx(Te,{})]}),e.jsx(ue,{feature:"rafl"})]})})})}export{Rn as default};
