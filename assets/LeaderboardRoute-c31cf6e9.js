import{j as e,am as R,an as _,ao as F,ap as M,r as n,f as D,G as E,q as I,R as f,T as N,y as W,z as A,Z as v,H as C,I as k,aj as B,a1 as H,J as P,ak as q,al as $,a3 as z}from"./index-08b98a47.js";import{a as T}from"./InputLabel-91753627.js";import{d as O}from"./dayjs.min-27345561.js";import{T as G,a as w,b as x,c as U,d as Y,e as J}from"./TableRow-bd821423.js";import{L as K,d as g,T as Z,I as Q}from"./Search-7c4f706c.js";import{A as V}from"./Autocomplete-5351c3bf.js";function X(){const a={border:0,padding:"4px 12px",backgroundColor:"#000"};return e.jsx(G,{children:e.jsxs(w,{children:[e.jsx(x,{align:"center",style:a,children:"#"}),e.jsx(x,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),e.jsx(x,{align:"center",style:a,children:e.jsx(R,{})}),e.jsx(x,{align:"center",style:a,children:e.jsx(_,{})}),e.jsx(x,{align:"center",style:a,children:e.jsx(F,{})}),e.jsx(x,{align:"center",style:a,children:e.jsx(M,{})})]})})}function p({align:a="center",user:t,leader:s,value:r}){const{displayName:c,id:o}=s,l=(t==null?void 0:t.uid)===o,i=c?"#eee":"#bbb",d=l?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:i},h={color:i};return e.jsx(x,{align:a,sx:h,style:d,children:r})}function ee({index:a,leader:t,user:s,highlighted:r,scrollableRef:c}){const o=n.useRef(),[l,i]=n.useState(!1),d=r?{backgroundColor:"#333"}:{};return n.useEffect(()=>{r&&o&&!l&&setTimeout(()=>{i(!0),c.current.scrollTo({top:o.current.offsetTop-75,behavior:"smooth"})},0)},[r,c,l]),e.jsxs(w,{ref:o,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":r?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...d},children:[e.jsx(p,{leader:t,user:s,value:a+1}),e.jsx(p,{leader:t,user:s,value:t.displayName||"Anonymous",align:"left"}),e.jsx(p,{leader:t,user:s,value:t.own}),e.jsx(p,{leader:t,user:s,value:t.picked}),e.jsx(p,{leader:t,user:s,value:t.recorded}),e.jsx(p,{leader:t,user:s,value:t.wishlist})]},t.id)}function te({data:a,loading:t}){const s=D(),{user:r}=n.useContext(E),c=n.useRef(),{user:o}=n.useMemo(()=>I.parse(s.search),[s.search]),l=t?"####-##-## ##:##":O(a.metadata.updatedDateTime).format("MM/DD/YY hh:mm"),i=t?ae:a.data;return e.jsxs(f.Fragment,{children:[t&&e.jsx(K,{variant:"indeterminate",color:"secondary"}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx(U,{sx:{height:"78vh",backgroundColor:"#111"},id:"scrollable",ref:c,children:e.jsxs(Y,{stickyHeader:!0,children:[e.jsx(X,{}),e.jsx(J,{children:i.map((d,h)=>{const j=!!o&&(o==="me"&&d.id===r.uid||o===d.displayName);return e.jsx(ee,{index:h,leader:d,user:r,scrollableRef:c,highlighted:j},d.id)})})]})}),e.jsxs(N,{variant:"caption",align:"right",component:"div",style:{width:"100%",marginTop:8},children:["Last updated: ",l," GMT"]})]})]})}const ae=[...Array(40)].map((a,t)=>({id:t,displayName:"........................",own:"---",picked:"---",recorded:"---",wishlist:"--"}));var b={},se=A;Object.defineProperty(b,"__esModule",{value:!0});var L=b.default=void 0,re=se(W()),y=e;L=b.default=(0,re.default)([(0,y.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,y.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function oe(){const a=v(),t=n.useCallback(()=>{a("/leaderboard?user=me")},[a]);return e.jsx(C,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:t,children:e.jsx(L,{})})})}function ne({data:a}){const t={maxWidth:450},{isMobile:s}=T(),r=v(),c=n.useRef(),o=a.data.filter(u=>u.displayName).map(u=>u.displayName),l=n.useCallback((u,m)=>{m?o.includes(m)&&r(`/leaderboard?user=${m}`):r("/leaderboard")},[r,o]),[i,d]=n.useState(!1),h=n.useCallback(()=>{d(!0),setTimeout(()=>c.current.focus(),15)},[]),j=n.useCallback(()=>d(!1),[]),S=i&&s?{width:"auto",position:"fixed",left:60,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{};return e.jsxs(f.Fragment,{children:[!i&&s&&e.jsx(C,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(k,{color:"inherit",onClick:h,children:e.jsx(g,{})})}),(i||!s)&&e.jsx(V,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:{...t,...S},options:o,onChange:l,renderInput:u=>e.jsx(Z,{...u,placeholder:"Search",variant:"standard",color:"secondary",inputRef:c,InputProps:{...u.InputProps,startAdornment:e.jsx(Q,{position:"start",children:e.jsx(g,{})})}})}),e.jsx(B,{invisible:!0,open:i&&s,onClick:j})]})}function he(){const{isMobile:a}=T(),[t,s]=n.useState({data:[],metadata:{}}),[r,c]=n.useState(!0);n.useEffect(()=>{const l=async()=>{const d=await(await fetch(ie)).json();s(d),c(!1)};try{l()}catch(i){console.error("Error loading leaderboard data.",i),H("Error loading leaderboard data. Please reload the page.",{autoHideDuration:null,action:e.jsx(P,{color:"secondary",onClick:()=>window.location.reload(),children:"Refresh"})}),c(!1)}},[]);const o=e.jsxs(f.Fragment,{children:[e.jsx(ne,{data:t}),e.jsx(oe,{}),!a&&e.jsx("div",{style:{flexGrow:1}})]});return e.jsxs(f.Fragment,{children:[e.jsx(q,{title:"Leaderboard",extras:o}),e.jsx(te,{data:t,loading:r}),e.jsx($,{}),e.jsx(z,{feature:"leaderboard"})]})}const ie="https://explore.lpubelts.com/leaderboard/leaderboardData.json";export{he as default};
