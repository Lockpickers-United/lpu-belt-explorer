import{i as Ie,k as Fe,r as o,m as Be,_ as xe,n as L,o as G,j as t,s as Z,p as jt,q as Ee,t as Ct,v as lr,w as yt,x as St,y as wt,z as kt,C as Se,E as De,G as nr,H as sr,R as P,F as ie,I as ir,J as ar,K as cr,M as ot,O as It,u as Le,P as me,Q as se,B as we,T as Ft,b as Bt,U as _,V as lt,W as H,X as dr,Y as Te,Z as Re,$ as Me,a0 as Ae,a1 as Ve,a2 as Et,a3 as ur,a4 as fr,a5 as ke,A as hr,a6 as Lt,a7 as pr,a8 as mr,a9 as xr,aa as br,h as vr,ab as nt,D as Tt,N as gr,e as jr,ac as Cr}from"./index-BZ2FR03I.js";import{l as yr}from"./filterFields-D-0n_v1n.js";import{u as Sr}from"./usePageTitle-Cb9ivM_F.js";import{L as ze,a as wr}from"./LockListContext-BA4hDcIV.js";import{D as kr}from"./LockDataProvider-BCVgFUek.js";import{D as Ir,R as Fr,O as Br,C as Er,a as Lr,L as Tr,b as Rr,c as Mr}from"./Casino-B9AVGmsF.js";import{E as Rt}from"./ExpandMore-DGTO_ZkF.js";import{B as Mt}from"./BeltStripe-B0Yovfyn.js";import{C as Ar}from"./EvidenceForm-BBzVvoep.js";import{F as re}from"./FieldValue-BXzsBnH-.js";import{B as At}from"./BeltIcon-BDFZ_wpF.js";import{F as zr}from"./FilterChip-wGSSr08v.js";import{E as Wr,C as Nr,a as Pr}from"./ExportButton-D8SawVfN.js";import{C as Or}from"./CopyEntryTextButton-ToVhDQpK.js";import{L as Dr}from"./LockImageGallery-BekY-IY4.js";import{D as le}from"./DataContext-C-Ebyc8E.js";import{A as zt,a as Wt,b as Nt}from"./AccordionSummary-CgBbdvjE.js";import{B as _r}from"./Box-Bz3uck1n.js";import{M as He}from"./index-CZ1bHzwj.js";import{r as qe}from"./index-DfUNipiy.js";import{A as Pt}from"./AccordionActions-Cm50oYaf.js";import{L as Hr}from"./Link-BOgC0k1_.js";import{b as qr,r as Vr,a as $r,p as Ur,c as Gr,g as Kr,o as Xr,y as Yr,w as Zr}from"./black-DJ8N08SG.js";import{r as Jr}from"./index-B3_g0nDO.js";import"./index-AWBlh5E-.js";import{N as Qr}from"./NoEntriesCard-DiOP4zvs.js";import{T as Ot,C as Dt,l as eo,A as to,a as ro}from"./ImageViewer-DB7uQmLC.js";import{D as _t}from"./Dialog-BjjgA_Ej.js";import{D as Ht,a as oo}from"./DialogContent-v2H6iBEr.js";import{L as lo}from"./ListItem-Bi_SiD2Z.js";import{L as no}from"./Launch-DOzuFDxj.js";import{L as so}from"./LinearProgress-CEEkX6mV.js";import{A as st,F as io,R as ao,V as co}from"./ViewFilterButtons-35aXozLM.js";import{C as uo}from"./ChoiceButtonGroup-CtX-m-vx.js";import{T as fo,a as ho}from"./ToggleButtonGroup-CKEV5XcA.js";import{C as qt}from"./Collapse-DaXFqvV_.js";import{F as po,I as mo,S as xo}from"./Select-CS0ktKX9.js";import{S as bo}from"./SearchBox-5veEmSli.js";import{l as vo}from"./sortFields-ChCLUnX8.js";import"./entryName-D4u134zs.js";import"./collectionStatsById-DY1NVZ7h.js";import"./useData-DkMMrl0C.js";import"./dataUrls-DkJe4Pqg.js";import"./filterEntries-BBFZIbGW.js";import"./HighlightOff-Jt_R3Q1k.js";import"./sanitizeValues-mdqYLgfO.js";import"./Checkbox-BLbr5WhY.js";import"./PhotoCamera-BmleEkMM.js";import"./LockEntrySearchBox-DSPnRYty.js";import"./Search-EL6HHzBX.js";import"./BeltStripeMini-CkUZqv-1.js";import"./Autocomplete-BtPpAsrp.js";import"./Chip-DzhITyXv.js";import"./TextField-TnAdqIvl.js";/* empty css                  */import"./pageData-BY6jrYM9.js";import"./LocalizationProvider-CAdwcvyI.js";import"./index-DYZJZMmK.js";import"./VideocamOutlined-DalDqPoX.js";import"./LoadingDisplay-7dRFdNXb.js";import"./CircularProgress-BtWg7Zbd.js";import"./LoadingDisplaySmall-CprFJ_O4.js";import"./glossary-v53ZYECr.js";import"./Cancel-C4J30ru4.js";import"./download-C0htzjiZ.js";import"./List-DWsLPV5a.js";import"./ContentCopy-1hSdu5eC.js";import"./ImageGallery-5VjwoLDO.js";import"./ImageListItem-B-A5CZ6y.js";import"./Sort-BIodm5J8.js";import"./FilterAlt-DTRiM21E.js";import"./setDeep-J6HEwWhX.js";import"./AddCircle-CybAHVe8.js";let ne;function Vt(){if(ne)return ne;const e=document.createElement("div"),r=document.createElement("div");return r.style.width="10px",r.style.height="1px",e.appendChild(r),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),ne="reverse",e.scrollLeft>0?ne="default":(e.scrollLeft=1,e.scrollLeft===0&&(ne="negative")),document.body.removeChild(e),ne}function go(e,r){const l=e.scrollLeft;if(r!=="rtl")return l;switch(Vt()){case"negative":return e.scrollWidth-e.clientWidth+l;case"reverse":return e.scrollWidth-e.clientWidth-l;default:return l}}function jo(e){return Fe("MuiTab",e)}const oe=Ie("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Co=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],yo=e=>{const{classes:r,textColor:l,fullWidth:n,wrapped:i,icon:s,label:d,selected:h,disabled:x}=e,g={root:["root",s&&d&&"labelIcon",`textColor${jt(l)}`,n&&"fullWidth",i&&"wrapped",h&&"selected",x&&"disabled"],iconWrapper:["iconWrapper"]};return Ee(g,jo,r)},So=Z(Ct,{name:"MuiTab",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.root,l.label&&l.icon&&r.labelIcon,r[`textColor${jt(l.textColor)}`],l.fullWidth&&r.fullWidth,l.wrapped&&r.wrapped]}})(({theme:e,ownerState:r})=>L({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},r.label&&{flexDirection:r.iconPosition==="top"||r.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},r.icon&&r.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${oe.iconWrapper}`]:L({},r.iconPosition==="top"&&{marginBottom:6},r.iconPosition==="bottom"&&{marginTop:6},r.iconPosition==="start"&&{marginRight:e.spacing(1)},r.iconPosition==="end"&&{marginLeft:e.spacing(1)})},r.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${oe.selected}`]:{opacity:1},[`&.${oe.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},r.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${oe.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${oe.disabled}`]:{color:(e.vars||e).palette.text.disabled}},r.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${oe.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${oe.disabled}`]:{color:(e.vars||e).palette.text.disabled}},r.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},r.wrapped&&{fontSize:e.typography.pxToRem(12)})),it=o.forwardRef(function(r,l){const n=Be({props:r,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:d=!1,fullWidth:h,icon:x,iconPosition:g="top",indicator:m,label:v,onChange:S,onClick:j,onFocus:c,selected:p,selectionFollowsFocus:f,textColor:I="inherit",value:T,wrapped:q=!1}=n,W=xe(n,Co),M=L({},n,{disabled:s,disableFocusRipple:d,selected:p,icon:!!x,iconPosition:g,label:!!v,fullWidth:h,textColor:I,wrapped:q}),F=yo(M),b=x&&v&&o.isValidElement(x)?o.cloneElement(x,{className:G(F.iconWrapper,x.props.className)}):x,C=k=>{!p&&S&&S(k,T),j&&j(k)},B=k=>{f&&!p&&S&&S(k,T),c&&c(k)};return t.jsxs(So,L({focusRipple:!d,className:G(F.root,i),ref:l,role:"tab","aria-selected":p,disabled:s,onClick:C,onFocus:B,ownerState:M,tabIndex:p?0:-1},W,{children:[g==="top"||g==="start"?t.jsxs(o.Fragment,{children:[b,v]}):t.jsxs(o.Fragment,{children:[v,b]}),m]}))});function wo(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function ko(e,r,l,n={},i=()=>{}){const{ease:s=wo,duration:d=300}=n;let h=null;const x=r[e];let g=!1;const m=()=>{g=!0},v=S=>{if(g){i(new Error("Animation cancelled"));return}h===null&&(h=S);const j=Math.min(1,(S-h)/d);if(r[e]=s(j)*(l-x)+x,j>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(v)};return x===l?(i(new Error("Element already at target position")),m):(requestAnimationFrame(v),m)}const Io=["onChange"],Fo={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Bo(e){const{onChange:r}=e,l=xe(e,Io),n=o.useRef(),i=o.useRef(null),s=()=>{n.current=i.current.offsetHeight-i.current.clientHeight};return lr(()=>{const d=yt(()=>{const x=n.current;s(),x!==n.current&&r(n.current)}),h=St(i.current);return h.addEventListener("resize",d),()=>{d.clear(),h.removeEventListener("resize",d)}},[r]),o.useEffect(()=>{s(),r(n.current)},[r]),t.jsx("div",L({style:Fo,ref:i},l))}const Eo=wt(t.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Lo=wt(t.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function To(e){return Fe("MuiTabScrollButton",e)}const Ro=Ie("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Mo=["className","slots","slotProps","direction","orientation","disabled"],Ao=e=>{const{classes:r,orientation:l,disabled:n}=e;return Ee({root:["root",l,n&&"disabled"]},To,r)},zo=Z(Ct,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.root,l.orientation&&r[l.orientation]]}})(({ownerState:e})=>L({width:40,flexShrink:0,opacity:.8,[`&.${Ro.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Wo=o.forwardRef(function(r,l){var n,i;const s=Be({props:r,name:"MuiTabScrollButton"}),{className:d,slots:h={},slotProps:x={},direction:g}=s,m=xe(s,Mo),S=kt().direction==="rtl",j=L({isRtl:S},s),c=Ao(j),p=(n=h.StartScrollButtonIcon)!=null?n:Eo,f=(i=h.EndScrollButtonIcon)!=null?i:Lo,I=Se({elementType:p,externalSlotProps:x.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:j}),T=Se({elementType:f,externalSlotProps:x.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:j});return t.jsx(zo,L({component:"div",className:G(c.root,d),ref:l,role:null,ownerState:j,tabIndex:null},m,{children:g==="left"?t.jsx(p,L({},I)):t.jsx(f,L({},T))}))});function No(e){return Fe("MuiTabs",e)}const _e=Ie("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Po=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],at=(e,r)=>e===r?e.firstChild:r&&r.nextElementSibling?r.nextElementSibling:e.firstChild,ct=(e,r)=>e===r?e.lastChild:r&&r.previousElementSibling?r.previousElementSibling:e.lastChild,ye=(e,r,l)=>{let n=!1,i=l(e,r);for(;i;){if(i===e.firstChild){if(n)return;n=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=l(e,i);else{i.focus();return}}},Oo=e=>{const{vertical:r,fixed:l,hideScrollbar:n,scrollableX:i,scrollableY:s,centered:d,scrollButtonsHideMobile:h,classes:x}=e;return Ee({root:["root",r&&"vertical"],scroller:["scroller",l&&"fixed",n&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",r&&"flexContainerVertical",d&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",h&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]},No,x)},Do=Z("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[{[`& .${_e.scrollButtons}`]:r.scrollButtons},{[`& .${_e.scrollButtons}`]:l.scrollButtonsHideMobile&&r.scrollButtonsHideMobile},r.root,l.vertical&&r.vertical]}})(({ownerState:e,theme:r})=>L({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${_e.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}})),_o=Z("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.scroller,l.fixed&&r.fixed,l.hideScrollbar&&r.hideScrollbar,l.scrollableX&&r.scrollableX,l.scrollableY&&r.scrollableY]}})(({ownerState:e})=>L({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Ho=Z("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.flexContainer,l.vertical&&r.flexContainerVertical,l.centered&&r.centered]}})(({ownerState:e})=>L({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),qo=Z("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,r)=>r.indicator})(({ownerState:e,theme:r})=>L({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(r.vars||r).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(r.vars||r).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),Vo=Z(Bo)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),dt={},$o=o.forwardRef(function(r,l){const n=Be({props:r,name:"MuiTabs"}),i=kt(),s=i.direction==="rtl",{"aria-label":d,"aria-labelledby":h,action:x,centered:g=!1,children:m,className:v,component:S="div",allowScrollButtonsMobile:j=!1,indicatorColor:c="primary",onChange:p,orientation:f="horizontal",ScrollButtonComponent:I=Wo,scrollButtons:T="auto",selectionFollowsFocus:q,slots:W={},slotProps:M={},TabIndicatorProps:F={},TabScrollButtonProps:b={},textColor:C="primary",value:B,variant:k="standard",visibleScrollbar:K=!1}=n,be=xe(n,Po),O=k==="scrollable",E=f==="vertical",J=E?"scrollTop":"scrollLeft",ve=E?"top":"left",ge=E?"bottom":"right",We=E?"clientHeight":"clientWidth",ae=E?"height":"width",Q=L({},n,{component:S,allowScrollButtonsMobile:j,indicatorColor:c,orientation:f,vertical:E,scrollButtons:T,textColor:C,variant:k,visibleScrollbar:K,fixed:!O,hideScrollbar:O&&!K,scrollableX:O&&!E,scrollableY:O&&E,centered:g&&!O,scrollButtonsHideMobile:!j}),X=Oo(Q),$t=Se({elementType:W.StartScrollButtonIcon,externalSlotProps:M.startScrollButtonIcon,ownerState:Q}),Ut=Se({elementType:W.EndScrollButtonIcon,externalSlotProps:M.endScrollButtonIcon,ownerState:Q}),[$e,Gt]=o.useState(!1),[ee,Ue]=o.useState(dt),[Ge,Kt]=o.useState(!1),[Ke,Xt]=o.useState(!1),[Xe,Yt]=o.useState(!1),[Ye,Zt]=o.useState({overflow:"hidden",scrollbarWidth:0}),Ze=new Map,$=o.useRef(null),te=o.useRef(null),Je=()=>{const a=$.current;let u;if(a){const y=a.getBoundingClientRect();u={clientWidth:a.clientWidth,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,scrollLeftNormalized:go(a,i.direction),scrollWidth:a.scrollWidth,top:y.top,bottom:y.bottom,left:y.left,right:y.right}}let w;if(a&&B!==!1){const y=te.current.children;if(y.length>0){const R=y[Ze.get(B)];w=R?R.getBoundingClientRect():null}}return{tabsMeta:u,tabMeta:w}},ce=De(()=>{const{tabsMeta:a,tabMeta:u}=Je();let w=0,y;if(E)y="top",u&&a&&(w=u.top-a.top+a.scrollTop);else if(y=s?"right":"left",u&&a){const A=s?a.scrollLeftNormalized+a.clientWidth-a.scrollWidth:a.scrollLeft;w=(s?-1:1)*(u[y]-a[y]+A)}const R={[y]:w,[ae]:u?u[ae]:0};if(isNaN(ee[y])||isNaN(ee[ae]))Ue(R);else{const A=Math.abs(ee[y]-R[y]),V=Math.abs(ee[ae]-R[ae]);(A>=1||V>=1)&&Ue(R)}}),Ne=(a,{animation:u=!0}={})=>{u?ko(J,$.current,a,{duration:i.transitions.duration.standard}):$.current[J]=a},Qe=a=>{let u=$.current[J];E?u+=a:(u+=a*(s?-1:1),u*=s&&Vt()==="reverse"?-1:1),Ne(u)},et=()=>{const a=$.current[We];let u=0;const w=Array.from(te.current.children);for(let y=0;y<w.length;y+=1){const R=w[y];if(u+R[We]>a){y===0&&(u=a);break}u+=R[We]}return u},Jt=()=>{Qe(-1*et())},Qt=()=>{Qe(et())},er=o.useCallback(a=>{Zt({overflow:null,scrollbarWidth:a})},[]),tr=()=>{const a={};a.scrollbarSizeListener=O?t.jsx(Vo,{onChange:er,className:G(X.scrollableX,X.hideScrollbar)}):null;const w=O&&(T==="auto"&&(Ge||Ke)||T===!0);return a.scrollButtonStart=w?t.jsx(I,L({slots:{StartScrollButtonIcon:W.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:$t},orientation:f,direction:s?"right":"left",onClick:Jt,disabled:!Ge},b,{className:G(X.scrollButtons,b.className)})):null,a.scrollButtonEnd=w?t.jsx(I,L({slots:{EndScrollButtonIcon:W.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Ut},orientation:f,direction:s?"left":"right",onClick:Qt,disabled:!Ke},b,{className:G(X.scrollButtons,b.className)})):null,a},tt=De(a=>{const{tabsMeta:u,tabMeta:w}=Je();if(!(!w||!u)){if(w[ve]<u[ve]){const y=u[J]+(w[ve]-u[ve]);Ne(y,{animation:a})}else if(w[ge]>u[ge]){const y=u[J]+(w[ge]-u[ge]);Ne(y,{animation:a})}}}),je=De(()=>{O&&T!==!1&&Yt(!Xe)});o.useEffect(()=>{const a=yt(()=>{$.current&&ce()});let u;const w=A=>{A.forEach(V=>{V.removedNodes.forEach(de=>{var Y;(Y=u)==null||Y.unobserve(de)}),V.addedNodes.forEach(de=>{var Y;(Y=u)==null||Y.observe(de)})}),a(),je()},y=St($.current);y.addEventListener("resize",a);let R;return typeof ResizeObserver<"u"&&(u=new ResizeObserver(a),Array.from(te.current.children).forEach(A=>{u.observe(A)})),typeof MutationObserver<"u"&&(R=new MutationObserver(w),R.observe(te.current,{childList:!0})),()=>{var A,V;a.clear(),y.removeEventListener("resize",a),(A=R)==null||A.disconnect(),(V=u)==null||V.disconnect()}},[ce,je]),o.useEffect(()=>{const a=Array.from(te.current.children),u=a.length;if(typeof IntersectionObserver<"u"&&u>0&&O&&T!==!1){const w=a[0],y=a[u-1],R={root:$.current,threshold:.99},A=Oe=>{Kt(!Oe[0].isIntersecting)},V=new IntersectionObserver(A,R);V.observe(w);const de=Oe=>{Xt(!Oe[0].isIntersecting)},Y=new IntersectionObserver(de,R);return Y.observe(y),()=>{V.disconnect(),Y.disconnect()}}},[O,T,Xe,m==null?void 0:m.length]),o.useEffect(()=>{Gt(!0)},[]),o.useEffect(()=>{ce()}),o.useEffect(()=>{tt(dt!==ee)},[tt,ee]),o.useImperativeHandle(x,()=>({updateIndicator:ce,updateScrollButtons:je}),[ce,je]);const rt=t.jsx(qo,L({},F,{className:G(X.indicator,F.className),ownerState:Q,style:L({},ee,F.style)}));let Ce=0;const rr=o.Children.map(m,a=>{if(!o.isValidElement(a))return null;const u=a.props.value===void 0?Ce:a.props.value;Ze.set(u,Ce);const w=u===B;return Ce+=1,o.cloneElement(a,L({fullWidth:k==="fullWidth",indicator:w&&!$e&&rt,selected:w,selectionFollowsFocus:q,onChange:p,textColor:C,value:u},Ce===1&&B===!1&&!a.props.tabIndex?{tabIndex:0}:{}))}),or=a=>{const u=te.current,w=nr(u).activeElement;if(w.getAttribute("role")!=="tab")return;let R=f==="horizontal"?"ArrowLeft":"ArrowUp",A=f==="horizontal"?"ArrowRight":"ArrowDown";switch(f==="horizontal"&&s&&(R="ArrowRight",A="ArrowLeft"),a.key){case R:a.preventDefault(),ye(u,w,ct);break;case A:a.preventDefault(),ye(u,w,at);break;case"Home":a.preventDefault(),ye(u,null,at);break;case"End":a.preventDefault(),ye(u,null,ct);break}},Pe=tr();return t.jsxs(Do,L({className:G(X.root,v),ownerState:Q,ref:l,as:S},be,{children:[Pe.scrollButtonStart,Pe.scrollbarSizeListener,t.jsxs(_o,{className:X.scroller,ownerState:Q,style:{overflow:Ye.overflow,[E?`margin${s?"Left":"Right"}`:"marginBottom"]:K?void 0:-Ye.scrollbarWidth},ref:$,children:[t.jsx(Ho,{"aria-label":d,"aria-labelledby":h,"aria-orientation":f==="vertical"?"vertical":null,className:X.flexContainer,ownerState:Q,onKeyDown:or,ref:te,role:"tablist",children:rr}),$e&&rt]}),Pe.scrollButtonEnd]}))});function Uo(e){return Fe("MuiListItemAvatar",e)}Ie("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Go=["className"],Ko=e=>{const{alignItems:r,classes:l}=e;return Ee({root:["root",r==="flex-start"&&"alignItemsFlexStart"]},Uo,l)},Xo=Z("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.root,l.alignItems==="flex-start"&&r.alignItemsFlexStart]}})(({ownerState:e})=>L({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),Yo=o.forwardRef(function(r,l){const n=Be({props:r,name:"MuiListItemAvatar"}),{className:i}=n,s=xe(n,Go),d=o.useContext(sr),h=L({},n,{alignItems:d.alignItems}),x=Ko(h);return t.jsx(Xo,L({className:G(x.root,i),ownerState:h,ref:l},s))});function Zo({entry:e,expanded:r,onExpand:l}){var T,q,W,M,F;const{expandAll:n}=o.useContext(le),{addAdvancedFilterGroup:i}=o.useContext(ie),{userId:s}=ir(),[d,h]=o.useState(!1),x={maxWidth:700,marginLeft:"auto",marginRight:"auto"},g=o.useRef(null),m=[...new Set([...e.relatedIds||[],...ar(e.id)])].sort((b,C)=>cr(ot[b].belt,ot[C].belt)||b.localeCompare(C)),v=o.useCallback((b,C)=>{l&&l(C?e.id:!1)},[e,l]),S=o.useCallback((b,C,B)=>{b.preventDefault(),b.stopPropagation(),i({fieldName:C,valueToAdd:B,operator:"AND"}),setTimeout(()=>{const k=document.getElementById("advanced-filters");k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),k.focus())},100)},[i]);o.useEffect(()=>{if(r&&g&&!d&&!n){const C=window.innerWidth<=600?70:74,{id:B}=It.parse(location.search),k=B===e.id;h(!0),setTimeout(()=>{window.scrollTo({left:0,top:g.current.offsetTop-C,behavior:k?"auto":"smooth"})},k?0:100)}else r||h(!1)},[r,e,d,n]);const j=o.useMemo(()=>{var b;return t.jsx("div",{style:{fontWeight:500,fontSize:"1.07rem",lineHeight:1.5,marginBottom:"4px"},children:(b=e.makeModels)==null?void 0:b.map(({make:C,model:B},k)=>t.jsxs("span",{children:[C&&C!==B?`${C} ${B}`:B,t.jsx("br",{})]},k))})},[e.makeModels]),c=e.belt==="Unranked"?"#aaa":"#fff",p=e.belt==="Unranked"?"#aaa":"#ccc",{isMobile:f}=Le(),I=f?"55%":"60%";return t.jsxs(zt,{expanded:r,onChange:v,style:x,ref:g,children:[t.jsxs(Wt,{expandIcon:t.jsx(Rt,{}),children:[t.jsx(Mt,{value:e.belt}),t.jsxs("div",{style:{margin:"6px 0px 8px 12px",width:I,flexShrink:0,flexDirection:"column"},children:[t.jsx("div",{style:{color:c},children:j}),!!e.version&&t.jsx("div",{style:{marginTop:5},children:t.jsx("div",{style:{color:p,fontSize:"0.95rem",lineHeight:1.25,marginTop:2,marginLeft:8},children:e.version})})]}),((T=e.lockingMechanisms)==null?void 0:T.length)>0&&t.jsx("div",{style:{margin:"8px 0px 0px 0px",width:"40%",flexShrink:0,flexDirection:"row"},children:(q=e.lockingMechanisms)==null?void 0:q.map((b,C)=>t.jsx(_r,{style:{display:"inline-block",color:"#fff",fontSize:"0.85rem",border:"1px solid #666",borderRadius:16,padding:"2px 10px",cursor:"pointer",marginRight:4,marginBottom:4},sx:{"&:hover":{backgroundColor:"#333"}},onClick:B=>S(B,"lockingMechanisms",b),children:String(b)},C))})]}),r&&t.jsxs(P.Fragment,{children:[t.jsxs(Nt,{sx:{padding:"8px 16px 0px 16px"},children:[t.jsxs(me,{direction:"row",spacing:1,sx:{width:"100%",flexWrap:"wrap"},children:[t.jsx(re,{style:{width:"50%",marginLeft:"0px"},value:t.jsxs(P.Fragment,{children:[t.jsxs(se,{style:{marginLeft:"0px",fontSize:"1rem",lineHeight:1.25,fontWeight:500},children:[e.belt,t.jsx(Ir,{belt:e.belt})]}),t.jsx(At,{value:e.belt,style:{marginBottom:-10}})]})}),t.jsx("div",{style:{marginLeft:"auto"},children:t.jsx(Ar,{id:e.id,makeModels:e.makeModels})})]}),!!e.notes&&t.jsx(me,{direction:"row",spacing:0,sx:{width:"100%",flexWrap:"wrap"},children:t.jsx(re,{name:"Comments",value:t.jsx(se,{component:"div",style:{marginTop:-16},children:t.jsx(He,{rehypePlugins:[[qe,{target:"_blank"}]],children:e.notes})})})}),!!((W=e.features)!=null&&W.length)&&t.jsx(re,{name:"Features",value:t.jsx(me,{direction:"row",spacing:0,sx:{flexWrap:"wrap"},children:e.features.map((b,C)=>t.jsx(zr,{value:b,field:"features"},C))})}),(m==null?void 0:m.length)>1&&!s&&t.jsx(re,{name:"Other Versions",value:t.jsx(P.Fragment,{children:m.map(b=>t.jsx(Fr,{id:b,onExpand:l,entryId:e.id},b))})}),!!e.description&&t.jsx("div",{style:{margin:8},children:t.jsx(He,{rehypePlugins:[[qe,{target:"_blank",rel:["nofollow","noopener","noreferrer"]}]],children:e.description})}),t.jsx("div",{style:{margin:"12px 0px 20px 6px"},children:t.jsx(Wr,{entry:e})}),!!((M=e.media)!=null&&M.length)&&t.jsx(re,{value:t.jsx(Dr,{entry:e})}),t.jsxs("div",{style:{display:"flex"},children:[!!((F=e.links)!=null&&F.length)&&t.jsx(re,{name:"Links",value:t.jsx(me,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:e.links.map(({title:b,url:C},B)=>t.jsx(we,{href:C,target:"_blank",rel:"noopener noreferrer",color:"secondary",variant:"outlined",sx:{textTransform:"none"},style:{margin:4},children:b},B))})}),t.jsx(re,{name:"For sale",style:{marginLeft:15},value:t.jsx(Br,{entry:e,buttonType:"text"})})]})]}),t.jsx(Pt,{disableSpacing:!0,children:t.jsxs("div",{style:{display:"flex",width:"100%"},children:[t.jsxs("div",{style:{flexGrow:1,justifyItems:"left"},children:[!n&&t.jsx(Ft,{feature:"lock",id:e.id}),t.jsx(Er,{entry:e}),t.jsx(Lr,{entry:e}),t.jsx(Tr,{entry:e})]}),t.jsxs("div",{style:{display:"flex"},children:[t.jsx(Or,{entry:e}),t.jsx(Nr,{entry:e})]})]})})]})]})}const Jo=P.memo(Zo,(e,r)=>e.entry.id===r.entry.id&&e.expanded===r.expanded&&e.onExpand===r.onExpand);function Qo({icon:e,active:r}){const l=Bt(),n=o.useCallback(s=>()=>{l(s),window.scrollTo({top:0})},[l]),i=e?t.jsx(_,{color:"inherit",onClick:n("/info"),children:t.jsx(lt,{})}):t.jsx(we,{color:"inherit",onClick:n("/info"),children:"Read more..."});return r?t.jsx(lt,{color:"secondary"}):t.jsx(P.Fragment,{children:t.jsx(H,{title:"Information",arrow:!0,disableFocusListener:!0,children:i})})}function el(){const e=o.useCallback(async()=>{const r=new URL(window.location.href);await navigator.clipboard.writeText(r.href),dr("Link to belt requirements copied to clipboard.")},[]);return t.jsx(H,{title:"Copy Link to Requirements",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{onClick:e,children:t.jsx(Hr,{})})})}const tl={White:Zr,Yellow:Yr,Orange:Xr,Green:Kr,Blue:Gr,Purple:Ur,Brown:$r,Red:Vr,Black:qr};function rl({belt:e}){const{expanded:r,setExpanded:l}=o.useContext(ze),n=o.useCallback((d,h)=>{l(h?"beltreqs":!1),window.scrollTo({top:0,behavior:"smooth"})},[l]),i={maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},s=tl[e];return s?t.jsxs(zt,{expanded:r==="beltreqs",onChange:n,style:i,children:[t.jsxs(Wt,{expandIcon:t.jsx(Rt,{}),children:[t.jsx(Mt,{value:e}),t.jsxs(se,{variant:"h6",style:{margin:"0px 0px 0px 12px"},children:[e," Belt Requirements"]})]}),t.jsx(Nt,{style:{margin:"0px 0px 0px 12px"},children:t.jsx(He,{remarkPlugins:[Jr],rehypePlugins:[[qe,{target:"_blank",rel:["nofollow","noopener","noreferrer"]}]],children:s})}),t.jsxs(Pt,{children:[t.jsx(el,{}),t.jsx(Qo,{})]})]}):null}var ue={},ut;function ol(){if(ut)return ue;ut=1;var e=Te();Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=void 0;var r=e(Re()),l=Me();return ue.default=(0,r.default)((0,l.jsx)("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-1 2H5v-2h2zm0-3H5V8h2zm9 7H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3 3h-2v-2h2zm0-3h-2V8h2z"}),"Keyboard"),ue}var ll=ol();const nl=Ae(ll);function sl(){const[e,r]=o.useState(!1),l=o.useCallback(()=>r(!0),[]),n=o.useCallback(()=>r(!1),[]);return t.jsxs(P.Fragment,{children:[t.jsx(H,{title:"Hotkeys",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{color:"inherit",onClick:l,children:t.jsx(nl,{})})}),t.jsxs(_t,{open:e,onClose:n,TransitionComponent:Ot,scroll:"body",children:[t.jsx(Ve,{sx:{position:"relative"},children:t.jsxs(Et,{children:[t.jsx(_,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:t.jsx(Dt,{})}),t.jsx(se,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Hotkey Info"})]})}),t.jsx(Ht,{children:t.jsx(ur,{children:il.map(({key:i,text:s})=>t.jsx(P.Fragment,{children:t.jsxs(lo,{children:[t.jsx(Yo,{children:i}),t.jsx(fr,{children:s})]})},i))})})]})]})}const il=[{key:"S",text:"Select (S)earch text box."},{key:"F",text:"Open/Close (F)ilter drawer."},{key:"1 - 9",text:"Select belt tab, 1=white, 2=yellow, etc."},{key:"R",text:"(R)andom Lock"}];function al({onSelect:e}){const{visibleEntries:r}=o.useContext(le),l=Bt(),n=o.useCallback(()=>{const i=Math.floor(Math.random()*r.length),s=r[i];l(`/locks?id=${s.id}`),e(s.id)},[r,l,e]);return ke("r",()=>n(),{preventDefault:!0}),t.jsx(H,{title:"Random Lock",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{onClick:n,children:t.jsx(Rr,{})})})}var fe={},ft;function cl(){if(ft)return fe;ft=1;var e=Te();Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var r=e(Re()),l=Me();return fe.default=(0,r.default)((0,l.jsx)("path",{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3"}),"FindInPage"),fe}var dl=cl();const ul=Ae(dl);var N={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},ht=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],pt=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],mt=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],z=typeof window<"u"&&typeof window.document<"u"?window.document:{},D="fullscreenEnabled"in z&&Object.keys(N)||ht[0]in z&&ht||pt[0]in z&&pt||mt[0]in z&&mt||[],U={requestFullscreen:function(e){return e[D[N.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[D[N.requestFullscreen]]},get exitFullscreen(){return z[D[N.exitFullscreen]].bind(z)},get fullscreenPseudoClass(){return":"+D[N.fullscreen]},addEventListener:function(e,r,l){return z.addEventListener(D[N[e]],r,l)},removeEventListener:function(e,r,l){return z.removeEventListener(D[N[e]],r,l)},get fullscreenEnabled(){return!!z[D[N.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return z[D[N.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return z[("on"+D[N.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return z[("on"+D[N.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return z[("on"+D[N.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return z[("on"+D[N.fullscreenerror]).toLowerCase()]=e}};function fl(){var e=o.useState(!1),r=e[0],l=e[1],n=o.useRef(null);o.useEffect(function(){var d=function(){l(U.fullscreenElement===n.current)};return U.addEventListener("fullscreenchange",d),function(){return U.removeEventListener("fullscreenchange",d)}},[]);var i=o.useCallback(function(){if(U.fullscreenElement)return U.exitFullscreen().then(function(){return U.requestFullscreen(n.current)});if(n.current)return U.requestFullscreen(n.current)},[]),s=o.useCallback(function(){return U.fullscreenElement===n.current?U.exitFullscreen():Promise.resolve()},[]);return o.useMemo(function(){return{active:r,enter:i,exit:s,node:n}},[r,i,s])}var hl=function(r){var l=r.handle,n=r.onChange,i=r.children,s=r.className,d=[];return s&&d.push(s),d.push("fullscreen"),l.active&&d.push("fullscreen-enabled"),o.useEffect(function(){n&&n(l.active,l)},[l.active]),P.createElement("div",{className:d.join(" "),ref:l.node,style:l.active?{height:"100%",width:"100%"}:void 0},i)},he={},xt;function pl(){if(xt)return he;xt=1;var e=Te();Object.defineProperty(he,"__esModule",{value:!0}),he.default=void 0;var r=e(Re()),l=Me();return he.default=(0,r.default)((0,l.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),he}var ml=pl();const xl=Ae(ml);function bl({onClose:e}){const r=fl(),{visibleEntries:l}=o.useContext(le),n=o.useMemo(()=>l.filter(E=>E.media).flatMap(E=>E.media.map(J=>({entry:E,...J}))),[l]),[i,s]=o.useState(!1),[d,h]=o.useState(!0),[x,g]=o.useState(!0),[m,v]=o.useState(0),{setTab:S,setExpanded:j}=o.useContext(ze),c=o.useCallback(()=>{const E=Math.floor(Math.random()*n.length);return n[E]},[n]),[p,f]=o.useState([c()]),{entry:I}=p[m],{fullSizeUrl:T,thumbnailUrl:q,fullUrl:W,title:M,subtitle:F,subtitleUrl:b}=p[m],C=o.useCallback(()=>{g(!1),s(!0)},[]),B=o.useCallback(()=>{h(!1),setTimeout(()=>e(),200)},[e]),k=o.useCallback(()=>{s(!1),setTimeout(()=>{const E=p.length>4?p.slice(1,5):[...p];E.push(c()),f(E),v(E.length-1)},1e3)},[p,c]),K=o.useCallback(()=>{m>0&&(v(m-1),g(!0))},[m]),be=o.useCallback(()=>{m===p.length-1?k():(v(m+1),g(!0))},[m,p,k]),O=o.useCallback(()=>{S(I.belt.replace(/\s\d/g,"")),j(I.id),B()},[I,B,j,S]);return ke("left",K,{preventDefault:!0}),ke("right",be,{preventDefault:!0}),o.useEffect(()=>{const E=setInterval(k,1e4);return()=>clearInterval(E)},[p,m,k]),t.jsxs(_t,{open:d,onClose:B,TransitionComponent:Ot,fullScreen:!0,children:[t.jsx(Ve,{sx:{position:"relative"},children:t.jsxs(Et,{children:[t.jsx(_,{edge:"start",color:"inherit",onClick:B,"aria-label":"close",children:t.jsx(Dt,{})}),t.jsxs(me,{direction:"column",sx:{marginLeft:2,width:"100%"},children:[t.jsx(se,{variant:"subtitle1",component:"div",children:M}),t.jsx(se,{variant:"subtitle2",component:"div",style:{color:"#777"},children:t.jsx("a",{href:b||eo[F],target:"_blank",rel:"noopener noreferrer",children:F})})]}),t.jsx(H,{title:"View Full Size",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{href:W,style:{color:"rgba(255, 255, 255, 0.5)"},target:"_blank",rel:"noopener noreferrer",children:t.jsx(no,{})})})]})}),x&&t.jsx(so,{color:"secondary"}),t.jsx(Ht,{style:{padding:0,height:"100%",width:"100%"},children:t.jsx(hl,{handle:r,children:t.jsx("div",{style:{display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",overflow:"hidden",backgroundColor:r.active?"black":null},children:t.jsx("img",{draggable:!1,style:{maxWidth:"100vw",maxHeight:r.active?"100vh":"calc(100vh - 128px)",backgroundSize:50,transformOrigin:"center center",...i?bt.visible:bt.hidden},onLoad:C,title:M,src:T||q,alt:M})})})}),t.jsxs(oo,{sx:{maxHeight:64,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:[t.jsx(H,{title:"Previous Image",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(_,{color:"inherit",onClick:K,"aria-label":"previousImage",disabled:m===0,children:t.jsx(to,{})})})}),t.jsx(H,{title:"Go To Lock",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(_,{color:"inherit",onClick:O,"aria-label":"goToLock",children:t.jsx(ul,{})})})}),t.jsx(H,{title:"Full Screen",arrow:!0,disableFocusListener:!0,children:t.jsx("span",{children:t.jsx(_,{color:"inherit",onClick:r.enter,"aria-label":"fullScreen",children:t.jsx(xl,{})})})}),t.jsx(H,{title:"Next Image",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{color:"inherit",onClick:be,"aria-label":"nextImage",children:t.jsx(ro,{})})})]})]})}const bt={visible:{visibility:"visible",opacity:1,transition:"opacity 1s linear"},hidden:{visibility:"hidden",opacity:0,transition:"visibility 0s 1s, opacity 1s linear"}};var pe={},vt;function vl(){if(vt)return pe;vt=1;var e=Te();Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var r=e(Re()),l=Me();return pe.default=(0,r.default)((0,l.jsx)("path",{d:"M10 8v8l5-4zm9-5H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14z"}),"Slideshow"),pe}var gl=vl();const jl=Ae(gl);function Cl(){const[e,r]=o.useState(!1),l=o.useCallback(()=>r(!0),[]),n=o.useCallback(()=>r(!1),[]);return t.jsxs(P.Fragment,{children:[t.jsx(H,{title:"Slideshow",arrow:!0,disableFocusListener:!0,children:t.jsx(_,{color:"inherit",onClick:l,children:t.jsx(jl,{})})}),e&&t.jsx(bl,{open:e,onClose:n})]})}function yl({group:e={},onChange:r}){const{fieldName:l="",matchType:n="Is",operator:i="OR",values:s=[],groupIndex:d=0}=e,{filterFields:h}=o.useContext(ie),x=h.find(c=>c.fieldName===l)||{},g=o.useMemo(()=>[{label:"OR",value:"OR"},{label:"AND",value:"AND"}],[]),m=o.useCallback(()=>{const c=[...s,""];r&&r({values:c})},[r,s]),v=o.useCallback(c=>{const p=(c==null?void 0:c.value)||(c==null?void 0:c.label)||"OR";r&&r({operator:p})},[r]),S=o.useCallback((c,p)=>{const f=s.map((I,T)=>T===c?p:I);r&&r({values:f})},[r,s]),j=o.useCallback(c=>{const p=s.filter((f,I)=>I!==c);r&&r({values:p})},[r,s]);return t.jsxs("div",{children:[s.length>0&&s.map((c,p)=>t.jsxs("div",{style:{display:"block",width:250},children:[t.jsx(st,{...x,active:!0,group:e,groupIndex:d,matchType:n,operator:i,valueIndex:p,currentValue:c,groupValues:s,onFilter:f=>S(p,f),onRemove:()=>j(p),handleAddValue:m,size:"small"},p),p===0&&s.length>1&&t.jsx(uo,{options:g,defaultValue:i,onChange:v,small:!0,rounded:!0,style:{margin:"0px 0 13px 0"}})]},p)),s.length===0&&t.jsx(st,{...x,active:!0,group:e,groupIndex:d,matchType:n,operator:i,currentValue:"",onFilter:c=>r&&r({values:[c]}),onRemove:()=>r&&r({values:[]}),handleAddValue:m,size:"small"},0)]})}function Sl({options:e,onChange:r,defaultValue:l,rounded:n,small:i=!1,style:s={}}){const[d,h]=o.useState(l||e[0].value),x=o.useCallback(v=>()=>{const S=e.find(j=>j.value===v);h(v),r&&r(S)},[r,e]),g=i?{padding:"1px 10px"}:{padding:"6px 12px"},m=n?null:{borderRadius:0};return t.jsx(fo,{variant:"outlined",style:{...s,borderRadius:n?4:0},children:e.map(v=>t.jsx(ho,{onClick:x(v.value),style:{color:d===v.value?"#eee":"#777",backgroundColor:d===v.value?v.backgroundColor||"#292929":"#111",borderColor:"#000",...g,...m},value:String(d),children:v.label},v.value))})}function wl({group:e={},onChange:r}){const{isLoggedIn:l}=o.useContext(hr),{beta:n}=o.useContext(Lt),{filterFields:i,advancedFilterGroups:s}=o.useContext(ie),{fieldName:d="",matchType:h="Is"}=e,[x,g]=o.useState(d),m=o.useMemo(()=>i.filter(f=>(!f.beta||n)&&(!f.userBased||l)).filter(f=>!s().some(I=>I.fieldName===f.fieldName&&f.fieldName!==d)),[s,n,d,i,l]),v=o.useCallback(f=>{const I=f.target.value;g(I),r&&r({fieldName:I,values:[]}),setTimeout(()=>document.activeElement.blur())},[r]),S=o.useMemo(()=>[{label:"Is",value:"Is"},{label:"Not",value:"Is Not",backgroundColor:"#733030"}],[]),j=o.useCallback(f=>{const I=(f==null?void 0:f.value)||(f==null?void 0:f.label)||"Is";r&&r({matchType:I})},[r]),[c,p]=o.useState(!1);return o.useEffect(()=>{p(!0)},[]),t.jsx(qt,{in:c||d.length>0,unmountOnExit:!0,children:t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",margin:"0px 0 12px 0",alignItems:"flex-start"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginTop:0},children:[t.jsxs(po,{style:{width:200,marginRight:0,marginTop:8},size:"small",children:[t.jsx(mo,{color:"info",children:"Filter"}),t.jsx(xo,{value:x,label:"Filter",onChange:v,color:"info",name:"fieldName",children:m.map((f,I)=>t.jsx(pr,{value:f.fieldName,children:f.label},I))})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx(Sl,{options:S,defaultValue:h,onChange:j,small:!1,rounded:!0,style:{height:40,margin:"8px 12px 8px 12px",borderRadius:4}}),t.jsx("br",{})]})]}),t.jsx("div",{style:{display:"flex",alignItems:"flex-start",marginTop:8},children:t.jsx(yl,{group:e,onChange:r})})]})})}function kl(){const{advancedFilterGroups:e,setAdvancedFilterGroups:r,showAdvancedSearch:l,setShowAdvancedSearch:n,filterCount:i,removeFilters:s,clearFilters:d}=o.useContext(ie),{visibleBeltEntries:h=[]}=o.useContext(le),x=mr(),g=It.parse(x.search);o.useEffect(()=>{g.preview==="advanced"&&(n(!0),s(["preview"]))},[s,g.preview,n]);const m=o.useCallback(()=>{const F=[...e(),{_id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fieldName:"",matchType:"Is",operator:"OR",values:[]}];r(F)},[e,r]),v=o.useCallback(()=>{d()},[d]),S=o.useCallback((F,b)=>{const B=e().map((k,K)=>K===F?{...k,...b}:k);r(B)},[e,r]),j=o.useCallback(F=>{let C=e().filter((B,k)=>k!==F);C.length===0&&(C=[{_id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fieldName:"",matchType:"Is",operator:"OR",values:[]}]),r(C)},[e,r]);o.useEffect(()=>{e().length===0&&r([{_id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,fieldName:"",matchType:"Is",operator:"OR",values:[]}]),i>0&&n(!0)},[e,i,r,n]);const{isMobile:c}=Le(),p=c?{maxWidth:700,borderRadius:0}:{maxWidth:700,marginLeft:"auto",marginRight:"auto",borderRadius:0},f=c?8:16,I=c?2:0,[T,q]=o.useState(!1);o.useEffect(()=>{if(l||i>0){const F=setTimeout(()=>{q(!0)},0);return()=>clearTimeout(F)}else q(!1)},[l,i]);const[W,M]=o.useState(!1);return o.useEffect(()=>{if(l||i>0)M(!0);else{const F=setTimeout(()=>{M(!1)},300);return()=>clearTimeout(F)}},[l,i]),t.jsx(qt,{in:T,unmountOnExit:!0,children:W&&t.jsx(xr,{style:{...p,paddingBottom:0,paddingTop:16},id:"advanced-filters",children:t.jsxs(br,{style:{paddingTop:0,paddingLeft:f,paddingRight:f,alignItems:"top"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"top",marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"top"},children:[t.jsxs("div",{style:{display:"flex",marginRight:36,marginBottom:0,alignItems:"center"},children:[t.jsx("div",{style:{fontWeight:700,fontSize:"1.3rem"},children:"Advanced Filters"}),t.jsxs("div",{style:{fontWeight:400,fontSize:"1.0rem",marginLeft:8},children:["(",(h==null?void 0:h.length)||0," Lock",(h==null?void 0:h.length)!==1&&"s",")"]})]}),t.jsx(io,{style:{margin:"16px 0px 0px 0px"}})]}),t.jsx("div",{style:{flexGrow:1,textAlign:"right",alignItems:"top",marginTop:I},children:t.jsx(ao,{alwaysShow:!0})})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e().map((F,b)=>t.jsx(wl,{group:{...F,groupIndex:b,groupId:F._id},groupIndex:b,onChange:C=>S(b,C),onRemove:()=>j(b)},F._id||b))}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:2},children:[t.jsx(we,{onClick:v,variant:"contained",size:"small",style:{backgroundColor:"#444",marginRight:16},children:"Clear"}),t.jsx(we,{onClick:m,variant:"contained",color:"info",size:"small",children:"Add Filter"})]})]})})})}function Il({advancedEnabled:e=!1}){const{tab:r}=o.useContext(ze),{compact:l}=o.useContext(Lt),{visibleEntries:n=[],expandAll:i}=o.useContext(le),{filters:s,filterCount:d,isSearch:h}=o.useContext(ie),[x,g]=o.useState(s.id),m=o.useMemo(()=>r==="search"?n:n.filter(j=>j.simpleBelt===r),[r,n]),v=t.jsx("div",{style:{margin:"30px 0px"},children:t.jsx(Pr,{text:!0,entries:m,advancedEnabled:e})}),S=t.jsxs(P.Fragment,{children:[t.jsx("br",{}),t.jsx(sl,{})," • ",t.jsx(al,{onSelect:g})," • ",t.jsx(Cl,{})]});return t.jsxs(P.Fragment,{children:[t.jsxs("div",{style:{margin:8,paddingBottom:32},children:[t.jsx(kl,{}),r!=="search"&&!h&&d===0&&m.length!==0&&t.jsx(rl,{belt:r}),m.length===0&&t.jsx(Qr,{label:"Locks",isSearch:h}),l?t.jsx(Mr,{entries:m}):m.map(j=>t.jsx(Jo,{entry:j,expanded:j.id===x||!!i,onExpand:g},j.id))]}),t.jsx(vr,{extras:S,before:v})]})}const Fl=e=>t.jsx("div",{style:{position:"relative",minWidth:32,height:32},children:t.jsx("div",{style:{display:"inline-block",minWidth:32,height:32,position:"absolute",top:0,left:0,paddingTop:2},children:t.jsxs("svg",{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 32 32",children:[t.jsx("rect",{fill:e.fill,x:"2",y:"6.2",width:"28",height:"19.1",rx:"2",ry:"2"}),t.jsxs("g",{children:[t.jsx("path",{fill:"#2A2A2A",d:"M8.4,17.4l-.6,2.2h-2l2.5-8.9h2.5l2.5,8.9h-2l-.6-2.2h-2.3ZM10.4,15.9l-.5-1.9c-.1-.5-.3-1.3-.4-1.8h0c-.1.5-.3,1.3-.4,1.8l-.5,1.9h1.8Z"}),t.jsx("path",{fill:"#2A2A2A",d:"M14.9,10.7h1.9v7.3h3.2v1.6h-5.1v-8.9Z"}),t.jsx("path",{fill:"#2A2A2A",d:"M21.7,10.7h1.9v7.3h3.2v1.6h-5.1v-8.9Z"})]})]})})});function Bl(){const{tab:e,setTab:r}=o.useContext(ze),{addFilter:l,removeFilters:n}=o.useContext(ie),{visibleEntries:i=[]}=o.useContext(le),s=i.reduce((c,p)=>{const f=p.belt.replace(/ \d/,"");return c[f]=c[f]?c[f]+1:1,c},{}),d=Math.floor(window.innerWidth/10),{width:h}=Le(),x=h<=500,g=x?"block":"flex",m=x?{minWidth:d,maxWidth:d,opacity:1}:{minWidth:50,maxWidth:50,opacity:1};ke("1,2,3,4,5,6,7,8,9",({key:c})=>{r(nt[c-1])});const v=o.useCallback((c,p)=>r(p),[r]),S=o.useCallback(c=>()=>{e===c?l("tab",e,!0):n(["belt"])},[l,n,e]),j=e==="search"?"#eee":"#aaa";return t.jsx(Ve,{position:"relative",style:{boxShadow:"none"},children:t.jsx("div",{style:{display:g,justifyContent:"center"},children:t.jsx("div",{children:t.jsxs($o,{value:e,onChange:v,indicatorColor:"secondary",variant:x?"fullWidth":"standard",centered:!x,textColor:"inherit",children:[nt.map(c=>t.jsx(gt,{value:c,children:p=>t.jsx(H,{title:`${c} Belt`,arrow:!0,disableFocusListener:!0,children:t.jsx(it,{...p,icon:t.jsx(At,{value:c,style:{paddingTop:2,opacity:s[c]?1:.2}}),sx:m,onClick:S(c)})})},c)),t.jsx(gt,{value:"search",children:c=>t.jsx(H,{title:"All Matching Locks",arrow:!0,disableFocusListener:!0,children:t.jsx(it,{...c,icon:t.jsx(Fl,{fill:j}),sx:m})})})]})})})})}function gt({children:e,...r}){return e(r)}function El(){const{isMobile:e}=Le(),{lockCollection:r}=o.useContext(Tt),{visibleBeltEntries:l=[]}=o.useContext(le),n=t.jsxs(P.Fragment,{children:[t.jsx(bo,{label:"Locks",extraFilters:[{key:"tab",value:"search"}],keepOpen:!1,entryCount:l.length}),t.jsx(co,{sortValues:vo,advancedEnabled:!0,extraFilters:[{key:"tab",value:"search"}],compactMode:!0,resetAll:!0,expandAll:!0}),!e&&t.jsx("div",{style:{flexGrow:1,minWidth:"10px"}})]});return t.jsxs(P.Fragment,{children:[t.jsx(gr,{title:"Locks",extras:n}),t.jsx(Bl,{}),t.jsx(Il,{profile:r,advancedEnabled:!0}),t.jsx(Ft,{feature:"locks"})]})}function Yn(){const{lockCollection:e}=o.useContext(Tt);return Sr("Locks"),t.jsx(jr,{filterFields:yr,children:t.jsx(kr,{allEntries:Cr,profile:e,children:t.jsx(wr,{children:t.jsx(El,{})})})})}export{Yn as default};
