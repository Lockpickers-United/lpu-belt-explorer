import{aU as ge,aV as H,aW as S,c as q,aX as pe,aY as T,aJ as ke,aZ as U,a_ as oe,a$ as he,b0 as P,b1 as ve,b2 as Ce,b3 as be,B as Re,z as X,H as _,Y as xe,D as V,S as le,s as de,n as ee,A as Ae,o as se,y as $,b4 as Le,aN as Pe,b5 as Te}from"./nivo-legends-C6zI4mSn.js";import{j as B,r as w}from"./index-DPWqEAft.js";import{w as Oe,F as je}from"./line-DzNrTmgZ.js";function Ee(e){return e.innerRadius}function Ie(e){return e.outerRadius}function We(e){return e.startAngle}function we(e){return e.endAngle}function Se(e){return e&&e.padAngle}function Ye(e,t,n,r,s,l,i,a){var g=n-e,d=r-t,u=i-s,h=a-l,c=h*g-u*d;if(!(c*c<T))return c=(u*(t-l)-h*(e-s))/c,[e+c*g,t+c*d]}function Z(e,t,n,r,s,l,i){var a=e-n,g=t-r,d=(i?l:-l)/U(a*a+g*g),u=d*g,h=-d*a,c=e+u,p=t+h,A=n+u,R=r+h,C=(c+A)/2,x=(p+R)/2,k=A-c,o=R-p,m=k*k+o*o,v=s-l,L=c*R-A*p,O=(o<0?-1:1)*U(Ce(0,v*v*m-L*L)),j=(L*o-k*O)/m,E=(-L*k-o*O)/m,y=(L*o+k*O)/m,I=(-L*k+o*O)/m,W=j-C,f=E-x,M=y-C,D=I-x;return W*W+f*f>M*M+D*D&&(j=y,E=I),{cx:j,cy:E,x01:-u,y01:-h,x11:j*(s/v-1),y11:E*(s/v-1)}}function Be(){var e=Ee,t=Ie,n=q(0),r=null,s=We,l=we,i=Se,a=null,g=Oe(d);function d(){var u,h,c=+e.apply(this,arguments),p=+t.apply(this,arguments),A=s.apply(this,arguments)-pe,R=l.apply(this,arguments)-pe,C=he(R-A),x=R>A;if(a||(a=u=g()),p<c&&(h=p,p=c,c=h),!(p>T))a.moveTo(0,0);else if(C>ke-T)a.moveTo(p*H(A),p*S(A)),a.arc(0,0,p,A,R,!x),c>T&&(a.moveTo(c*H(R),c*S(R)),a.arc(0,0,c,R,A,x));else{var k=A,o=R,m=A,v=R,L=C,O=C,j=i.apply(this,arguments)/2,E=j>T&&(r?+r.apply(this,arguments):U(c*c+p*p)),y=oe(he(p-c)/2,+n.apply(this,arguments)),I=y,W=y,f,M;if(E>T){var D=ve(E/c*S(j)),z=ve(E/p*S(j));(L-=D*2)>T?(D*=x?1:-1,m+=D,v-=D):(L=0,m=v=(A+R)/2),(O-=z*2)>T?(z*=x?1:-1,k+=z,o-=z):(O=0,k=o=(A+R)/2)}var J=p*H(k),N=p*S(k),F=c*H(v),G=c*S(v);if(y>T){var K=p*H(o),Q=p*S(o),te=c*H(m),ne=c*S(m),Y;if(C<ge)if(Y=Ye(J,N,te,ne,K,Q,F,G)){var re=J-Y[0],ae=N-Y[1],ie=K-Y[0],ue=Q-Y[1],ce=1/S(be((re*ie+ae*ue)/(U(re*re+ae*ae)*U(ie*ie+ue*ue)))/2),fe=U(Y[0]*Y[0]+Y[1]*Y[1]);I=oe(y,(c-fe)/(ce-1)),W=oe(y,(p-fe)/(ce+1))}else I=W=0}O>T?W>T?(f=Z(te,ne,J,N,p,W,x),M=Z(K,Q,F,G,p,W,x),a.moveTo(f.cx+f.x01,f.cy+f.y01),W<y?a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,W,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,p,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),!x),a.arc(M.cx,M.cy,W,P(M.y11,M.x11),P(M.y01,M.x01),!x))):(a.moveTo(J,N),a.arc(0,0,p,k,o,!x)):a.moveTo(J,N),!(c>T)||!(L>T)?a.lineTo(F,G):I>T?(f=Z(F,G,K,Q,c,-I,x),M=Z(J,N,te,ne,c,-I,x),a.lineTo(f.cx+f.x01,f.cy+f.y01),I<y?a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(M.y01,M.x01),!x):(a.arc(f.cx,f.cy,I,P(f.y01,f.x01),P(f.y11,f.x11),!x),a.arc(0,0,c,P(f.cy+f.y11,f.cx+f.x11),P(M.cy+M.y11,M.cx+M.x11),x),a.arc(M.cx,M.cy,I,P(M.y11,M.x11),P(M.y01,M.x01),!x))):a.arc(0,0,c,v,m,x)}if(a.closePath(),u)return a=null,u+""||null}return d.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2-ge/2;return[H(h)*u,S(h)*u]},d.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:q(+u),d):e},d.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:q(+u),d):t},d.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:q(+u),d):n},d.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:q(+u),d):r},d.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:q(+u),d):s},d.endAngle=function(u){return arguments.length?(l=typeof u=="function"?u:q(+u),d):l},d.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:q(+u),d):i},d.context=function(u){return arguments.length?(a=u??null,d):a},d}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(null,arguments)}var qe={pointerEvents:"none"},De=function(e){var t=e.label,n=e.style,r=X();return B.jsx(ee.g,{transform:n.transform,opacity:n.progress,style:qe,children:B.jsx(Ae,{textAnchor:"middle",dominantBaseline:"central",style:b({},r.labels.text,{fill:n.textColor}),children:t})})},me=function(e){var t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t},He=function(e,t){return e.filter(function(n){return Math.abs(xe(n.arc.endAngle-n.arc.startAngle))>=t})},Je={startAngle:{enter:function(e){return b({},e,{endAngle:e.startAngle})},update:function(e){return e},leave:function(e){return b({},e,{startAngle:e.endAngle})}},middleAngle:{enter:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return b({},e,{startAngle:t,endAngle:t})},update:function(e){return e},leave:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return b({},e,{startAngle:t,endAngle:t})}},endAngle:{enter:function(e){return b({},e,{startAngle:e.endAngle})},update:function(e){return e},leave:function(e){return b({},e,{endAngle:e.startAngle})}},innerRadius:{enter:function(e){return b({},e,{outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.outerRadius})}},centerRadius:{enter:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return b({},e,{innerRadius:t,outerRadius:t})},update:function(e){return e},leave:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return b({},e,{innerRadius:t,outerRadius:t})}},outerRadius:{enter:function(e){return b({},e,{innerRadius:e.outerRadius})},update:function(e){return e},leave:function(e){return b({},e,{outerRadius:e.innerRadius})}},pushIn:{enter:function(e){return b({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})}},pushOut:{enter:function(e){return b({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})},update:function(e){return e},leave:function(e){return b({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})}}},ye=function(e,t){return w.useMemo(function(){var n=Je[e];return{enter:function(r){return b({progress:0},n.enter(r.arc),t?t.enter(r):{})},update:function(r){return b({progress:1},n.update(r.arc),t?t.update(r):{})},leave:function(r){return b({progress:0},n.leave(r.arc),t?t.leave(r):{})}}},[e,t])},Ne=function(e,t){var n=Le(e)-Math.PI/2,r=e.innerRadius+(e.outerRadius-e.innerRadius)*t;return V(n,r)},Ue=function(e){return function(t,n,r,s){return $([t,n,r,s],function(l,i,a,g){var d=Ne({startAngle:l,endAngle:i,innerRadius:a,outerRadius:g},e);return"translate("+d.x+","+d.y+")"})}},Ve=function(e,t,n,r){t===void 0&&(t=.5),n===void 0&&(n="innerRadius");var s=le(),l=s.animate,i=s.config,a=ye(n,r);return{transition:de(e,{keys:function(g){return g.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:i,immediate:!l}),interpolate:Ue(t)}},it=function(e){var t=e.center,n=e.data,r=e.transitionMode,s=e.label,l=e.radiusOffset,i=e.skipAngle,a=e.skipRadius,g=e.textColor,d=e.component,u=d===void 0?De:d,h=Re(s),c=X(),p=_(g,c),A=w.useMemo(function(){return n.filter(function(o){var m=Math.abs(xe(o.arc.endAngle-o.arc.startAngle)),v=Math.abs(o.arc.outerRadius-o.arc.innerRadius);return m>=i&&v>=a})},[n,i,a]),R=Ve(A,l,r),C=R.transition,x=R.interpolate,k=u;return B.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(o,m){return w.createElement(k,{key:m.id,datum:m,label:h(m),style:{progress:o.progress,transform:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius),textColor:p(m)}})})})},Xe=function(e){var t=e.label,n=e.style,r=X();return B.jsxs(ee.g,{opacity:n.opacity,children:[B.jsx(ee.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),B.jsx(Ae,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:b({},r.labels.text,{fill:n.textColor}),children:t})]})},$e=function(e){var t=me(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2);return t<Math.PI/2||t>1.5*Math.PI?"start":"end"},Me=function(e,t,n,r){var s,l,i=me(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2),a=V(i,e.outerRadius+t),g=V(i,e.outerRadius+t+n);return i<Math.PI/2||i>1.5*Math.PI?(s="after",l={x:g.x+r,y:g.y}):(s="before",l={x:g.x-r,y:g.y}),{side:s,points:[a,g,l]}},ze=je().x(function(e){return e.x}).y(function(e){return e.y}),Fe=function(e,t,n,r,s,l,i){return $([e,t,n,r,s,l,i],function(a,g,d,u,h,c,p){var A=Me({startAngle:a,endAngle:g,outerRadius:u},h,c,p).points;return ze(A)})},Ge=function(e,t,n,r){return $([e,t,n,r],function(s,l,i,a){return $e({startAngle:s,endAngle:l})})},Ke=function(e,t,n,r,s,l,i,a){return $([e,t,n,r,s,l,i,a],function(g,d,u,h,c,p,A,R){var C=Me({startAngle:g,endAngle:d,outerRadius:h},c,p,A),x=C.points,k=C.side,o=x[2];return k==="before"?o.x-=R:o.x+=R,"translate("+o.x+","+o.y+")"})},Qe=function(e){var t=e.data,n=e.offset,r=n===void 0?0:n,s=e.diagonalLength,l=e.straightLength,i=e.skipAngle,a=i===void 0?0:i,g=e.textOffset,d=e.linkColor,u=e.textColor,h=le(),c=h.animate,p=h.config,A=X(),R=_(d,A),C=_(u,A),x=function(o,m){return w.useMemo(function(){return He(o,m)},[o,m])}(t,a),k=function(o){var m=o.offset,v=o.diagonalLength,L=o.straightLength,O=o.textOffset,j=o.getLinkColor,E=o.getTextColor;return w.useMemo(function(){return{enter:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:m,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}},update:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:m,diagonalLength:v,straightLength:L,textOffset:O,linkColor:j(y),textColor:E(y),opacity:1}},leave:function(y){return{startAngle:y.arc.startAngle,endAngle:y.arc.endAngle,innerRadius:y.arc.innerRadius,outerRadius:y.arc.outerRadius,offset:m,diagonalLength:0,straightLength:0,textOffset:O,linkColor:j(y),textColor:E(y),opacity:0}}}},[v,L,O,j,E,m])}({offset:r,diagonalLength:s,straightLength:l,textOffset:g,getLinkColor:R,getTextColor:C});return{transition:de(x,{keys:function(o){return o.id},initial:k.update,from:k.enter,enter:k.update,update:k.update,leave:k.leave,config:p,immediate:!c}),interpolateLink:Fe,interpolateTextAnchor:Ge,interpolateTextPosition:Ke}},ut=function(e){var t=e.center,n=e.data,r=e.label,s=e.skipAngle,l=e.offset,i=e.diagonalLength,a=e.straightLength,g=e.strokeWidth,d=e.textOffset,u=e.textColor,h=e.linkColor,c=e.component,p=c===void 0?Xe:c,A=Re(r),R=Qe({data:n,skipAngle:s,offset:l,diagonalLength:i,straightLength:a,textOffset:d,linkColor:h,textColor:u}),C=R.transition,x=R.interpolateLink,k=R.interpolateTextAnchor,o=R.interpolateTextPosition,m=p;return B.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(v,L){return w.createElement(m,{key:L.id,datum:L,label:A(L),style:b({},v,{thickness:g,path:x(v.startAngle,v.endAngle,v.innerRadius,v.outerRadius,v.offset,v.diagonalLength,v.straightLength),textAnchor:k(v.startAngle,v.endAngle,v.innerRadius,v.outerRadius),textPosition:o(v.startAngle,v.endAngle,v.innerRadius,v.outerRadius,v.offset,v.diagonalLength,v.straightLength,v.textOffset)})})})})},Ze=function(e){var t=e.datum,n=e.style,r=e.onClick,s=e.onMouseEnter,l=e.onMouseMove,i=e.onMouseLeave,a=w.useCallback(function(h){return r==null?void 0:r(t,h)},[r,t]),g=w.useCallback(function(h){return s==null?void 0:s(t,h)},[s,t]),d=w.useCallback(function(h){return l==null?void 0:l(t,h)},[l,t]),u=w.useCallback(function(h){return i==null?void 0:i(t,h)},[i,t]);return B.jsx(ee.path,{d:n.path,opacity:n.opacity,fill:t.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?a:void 0,onMouseEnter:s?g:void 0,onMouseMove:l?d:void 0,onMouseLeave:i?u:void 0,"data-testid":"arc."+t.id})},_e=function(e,t,n,r,s){return $([e,t,n,r],function(l,i,a,g){return s({startAngle:l,endAngle:i,innerRadius:Math.max(0,a),outerRadius:Math.max(0,g)})})},et=function(e,t,n){t===void 0&&(t="innerRadius");var r=le(),s=r.animate,l=r.config,i=ye(t,n);return{transition:de(e,{keys:function(a){return a.id},initial:i.update,from:i.enter,enter:i.update,update:i.update,leave:i.leave,config:l,immediate:!s}),interpolate:_e}},ot=function(e){var t=e.center,n=e.data,r=e.arcGenerator,s=e.borderWidth,l=e.borderColor,i=e.onClick,a=e.onMouseEnter,g=e.onMouseMove,d=e.onMouseLeave,u=e.transitionMode,h=e.component,c=h===void 0?Ze:h,p=X(),A=_(l,p),R=et(n,u,{enter:function(o){return{opacity:0,color:o.color,borderColor:A(o)}},update:function(o){return{opacity:1,color:o.color,borderColor:A(o)}},leave:function(o){return{opacity:0,color:o.color,borderColor:A(o)}}}),C=R.transition,x=R.interpolate,k=c;return B.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:C(function(o,m){return w.createElement(k,{key:m.id,datum:m,style:b({},o,{borderWidth:s,path:x(o.startAngle,o.endAngle,o.innerRadius,o.outerRadius,r)}),onClick:i,onMouseEnter:a,onMouseMove:g,onMouseLeave:d})})})},st=function(e,t,n,r,s,l){l===void 0&&(l=!0);var i=[],a=V(se(r),n);i.push([a.x,a.y]);var g=V(se(s),n);i.push([g.x,g.y]);for(var d=Math.round(Math.min(r,s));d<=Math.round(Math.max(r,s));d++)if(d%90==0){var u=V(se(d),n);i.push([u.x,u.y])}i=i.map(function(C){var x=C[0],k=C[1];return[e+x,t+k]}),l&&i.push([e,t]);var h=i.map(function(C){return C[0]}),c=i.map(function(C){return C[1]}),p=Math.min.apply(Math,h),A=Math.max.apply(Math,h),R=Math.min.apply(Math,c);return{points:i,x:p,y:R,width:A-p,height:Math.max.apply(Math,c)-R}},tt=function(e,t,n,r,s,l){var i=Pe(s,l,e,t);return i<n&&i>r},lt=function(e,t,n,r,s,l,i){if(tt(e,t,n,r,l,i)){var a=Te(l,i,e,t);return s.find(function(g){var d=g.startAngle,u=g.endAngle;return a>=d&&a<u})}},dt=function(e){var t=e===void 0?{}:e,n=t.cornerRadius,r=n===void 0?0:n,s=t.padAngle,l=s===void 0?0:s;return w.useMemo(function(){return Be().innerRadius(function(i){return i.innerRadius}).outerRadius(function(i){return i.outerRadius}).cornerRadius(r).padAngle(l)},[r,l])};export{Be as T,ut as Y,lt as d,dt as f,it as q,st as s,ot as u};
