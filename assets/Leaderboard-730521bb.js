import{O as H,P as $,j as e,a4 as _,r as n,a5 as ce,a6 as K,a7 as de,a8 as Me,J as R,d as j,a9 as Ae,A as U,u as P,R as A,I as oe,aa as Ne,ab as We,ac as ye,b as ve,ad as ke,W as Pe,ae as De,af as Ce,D as Te,ag as Q,B as ue,ah as pe,ai as xe,aj as he,N as Oe}from"./index-c42d854f.js";import{d as Ie}from"./VideocamOutlined-36110dd7.js";import{T as X,a as I,b as v,c as Z,d as ee,e as te}from"./TableRow-44cc7aba.js";import{L as se}from"./LeaderboardName-01122ee4.js";import{d as me,I as _e}from"./Search-110293b2.js";import{A as ze}from"./Autocomplete-f1aa16f8.js";import{T as Re}from"./TextField-0aad1431.js";import{B as Ee,d as Fe}from"./Sort-4aef7517.js";import{p as He}from"./chartDefaults-270235e0.js";import{B as $e}from"./nivo-bar.es-fc58ec39.js";import{F as Ue,I as qe,S as Ge}from"./Select-942fa8ca.js";import{u as Se}from"./useData-90b198e4.js";import{c as Ve,l as Ye,r as Ke}from"./dataUrls-fb4714fd.js";import{e as Je}from"./entryName-866f5848.js";import{L as Qe}from"./ListItem-7570df0c.js";import{A as Xe,a as Ze,b as et}from"./AccordionSummary-d466faf9.js";import{L as tt}from"./LoadingDisplay-457095eb.js";import{L as st}from"./Link-8c8b8639.js";import{E as rt}from"./ErrorMessage-602493a5.js";import{T as ot,a as F}from"./ToggleButtonGroup-5795fc25.js";import"./Chip-a8452597.js";import"./nivo-axes.es-e353ed4e.js";import"./nivo-legends.es-1cd2da26.js";import"./index-b4cfb9aa.js";import"./Collapse-9b7feb7c.js";import"./LPU-c3fa7122.js";import"./LinearProgress-2eab4f07.js";var ne={},nt=$;Object.defineProperty(ne,"__esModule",{value:!0});var Le=ne.default=void 0,lt=nt(H()),at=e;Le=ne.default=(0,lt.default)((0,at.jsx)("path",{d:"m20.5 10 .5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4zm-7 4h-4l1-4h4z"}),"Numbers");var le={},it=$;Object.defineProperty(le,"__esModule",{value:!0});var we=le.default=void 0,ct=it(H()),dt=e;we=le.default=(0,ct.default)((0,dt.jsx)("path",{d:"M16.53 11.06 15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14z"}),"EventAvailable");function ut({columns:t}){const[s,d]=_(),l=s.get("sort"),a={border:0,padding:"4px 12px",backgroundColor:"#000"},c=n.useCallback(i=>()=>{i&&i!==l?s.set("sort",i):s.delete("sort"),d(s)},[s,d,l]),g={own:e.jsx(ce,{color:l==="own"?"secondary":void 0,onClick:c("own"),style:{cursor:"pointer"}}),picked:e.jsx(K,{color:l==="picked"?"secondary":void 0,onClick:c("picked"),style:{cursor:"pointer"}}),wishlist:e.jsx(de,{color:l==="wishlist"?"secondary":void 0,onClick:c("wishlist"),style:{cursor:"pointer"}}),recordedLocks:e.jsx(Ie,{color:l==="recordedLocks"?"secondary":void 0,onClick:c("recordedLocks"),style:{cursor:"pointer"}}),safelocksOwn:e.jsx(ce,{color:l==="safelocksOwn"?"secondary":void 0,onClick:c("safelocksOwn"),style:{cursor:"pointer"}}),safelocksCracked:e.jsx(K,{color:l==="safelocksCracked"?"secondary":void 0,onClick:c("safelocksCracked"),style:{cursor:"pointer"}}),safelocksWishlist:e.jsx(de,{color:l==="safelocksWishlist"?"secondary":void 0,onClick:c("safelocksWishlist"),style:{cursor:"pointer"}}),danLevel:e.jsx(Me,{color:l==="danLevel"?"secondary":void 0,onClick:c("danLevel"),style:{cursor:"pointer"}}),danPoints:e.jsx(Le,{color:l==="danPoints"?"secondary":void 0,onClick:c("danPoints"),style:{cursor:"pointer"}}),blackBeltCount:e.jsx(K,{color:l==="blackBeltCount"?"secondary":void 0,onClick:c("blackBeltCount"),style:{cursor:"pointer"}}),blackBeltAwardedAt:e.jsx(we,{color:l==="blackBeltAwardedAt"?"secondary":void 0,onClick:c("blackBeltAwardedAt"),style:{cursor:"pointer"}})};return e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(v,{align:"center",style:a,children:e.jsx(R,{title:"Sort Default",arrow:!0,disableFocusListener:!0,children:e.jsx("span",{style:{cursor:"pointer"},onClick:c(void 0),children:"#"})})}),e.jsx(v,{style:{fontWeight:700,fontSize:"1.2rem",border:0,padding:"4px 16px 4px 0px",backgroundColor:"#000"},children:"Name"},"Display Name"),t.map((i,o)=>e.jsx(v,{align:"center",style:a,children:e.jsx(R,{title:i.tooltip,arrow:!0,disableFocusListener:!0,children:g[i.field]})},o))]})})}function J({align:t="center",isCurrentUser:s,value:d}){const l=s?{fontWeight:600,color:"#4db013"}:{fontWeight:500,color:"#fff"},a=d!==0?d:"";return e.jsx(v,{align:t,style:l,children:a})}j.extend(Ae);function pt({index:t,leader:s,highlighted:d,scrollableRef:l,columns:a,tab:c}){const g=n.useRef(),{user:i}=n.useContext(U),[o,u]=n.useState(!1),b=(i==null?void 0:i.uid)===s.id,k=d?{backgroundColor:"#333"}:{};return n.useEffect(()=>{d&&g&&!o&&setTimeout(()=>{u(!0),l.current.scrollTo({top:g.current.offsetTop-75,behavior:"smooth"})},0)},[d,l,o]),e.jsxs(I,{ref:g,sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":d?{}:{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0},...k},children:[e.jsx(J,{isCurrentUser:b,value:t+1}),e.jsx(J,{isCurrentUser:b,value:e.jsx(se,{isCurrentUser:b,leader:s,tab:c}),align:"left"}),a.map((h,p)=>{const f=h.field==="blackBeltAwardedAt"?s[h.field]>0?j.utc(s[h.field]*1e3).format("MM/DD/YY"):"-":s[h.field];return e.jsx(J,{isCurrentUser:b,value:f},p)})]},s.id)}function xt({data:t}){const{isMobile:s}=P(),d=n.useRef(),[l,a]=_(),c=n.useMemo(()=>t?t.filter(p=>p.displayName&&p.displayName!=="anonymous"&&p.displayName!=="no display name").map(p=>p.displayName):[],[t]),g=n.useCallback((p,f)=>{f?c.includes(f)&&l.set("user",f):l.delete("user"),a(l)},[c,l,a]),[i,o]=n.useState(!1),u=n.useCallback(()=>{o(!0),setTimeout(()=>d.current.focus(),15)},[]),b=n.useCallback(()=>o(!1),[]),k={maxWidth:450,margin:8},h=i&&s?{width:"auto",position:"fixed",left:60,right:0,paddingRight:16,maxWidth:"unset",zIndex:9999999,backgroundColor:"#272727"}:{};return e.jsxs(A.Fragment,{children:[!i&&s&&e.jsx(R,{title:"Search",arrow:!0,disableFocusListener:!0,children:e.jsx(oe,{color:"inherit",onClick:u,children:e.jsx(me,{})})}),(i||!s)&&e.jsx(ze,{selectOnFocus:!0,clearOnEscape:!0,handleHomeEndKeys:!0,fullWidth:!0,style:{...k,...h},options:c,onChange:g,renderInput:p=>e.jsx(Re,{...p,placeholder:"Search Leaderboard",variant:"standard",color:"secondary",inputRef:d,InputProps:{...p.InputProps,startAdornment:e.jsx(_e,{position:"start",children:e.jsx(me,{})})}})}),e.jsx(Ne,{invisible:!0,open:i&&s,onClick:b})]})}function ht(){const[t,s]=n.useState(null),d=!!t,l=n.useCallback(u=>s(u.currentTarget),[]),a=n.useCallback(()=>s(null),[]),[c,g]=_(),i=c.get("sort"),o=n.useCallback(u=>()=>{a(),u&&u!==i?c.set("sort",u):c.delete("sort"),g(c)},[c,g,i,a]);return e.jsxs(A.Fragment,{children:[e.jsx(R,{title:"Sort",arrow:!0,disableFocusListener:!0,children:e.jsx(oe,{color:"inherit",onClick:l,children:e.jsx(Ee,{variant:"dot",color:"secondary",overlap:"circular",invisible:!i,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Fe,{})})})}),e.jsx(We,{anchorEl:t,open:d,onClose:a,children:mt.map(({label:u,value:b})=>e.jsx(ye,{onClick:o(b),selected:i===b,children:u},u))})]})}const mt=[{label:"Default",value:void 0},{label:"Own",value:"own"},{label:"Picked",value:"picked"},{label:"Wishlist",value:"wishlist"},{label:"Scorecard",value:"recordedLocks"}];var ae={},ft=$;Object.defineProperty(ae,"__esModule",{value:!0});var Be=ae.default=void 0,gt=ft(H()),fe=e;Be=ae.default=(0,gt.default)([(0,fe.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,fe.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch");function bt({tab:t}){const s=ve(),{isLoggedIn:d,user:l}=n.useContext(U),a=n.useCallback(()=>{s(`/leaderboard/${t}?user=me`)},[s,t]);return!d||l!=null&&l.privacyNoLeaderboard?null:e.jsx(R,{title:"Find Me",arrow:!0,disableFocusListener:!0,children:e.jsx(oe,{color:"inherit",onClick:a,children:e.jsx(Be,{})})})}function ge({userData:t,max:s}){if(!t)return null;const d=ke.reduce((u,b)=>{const k=t.beltCounts[b]?t.beltCounts[b]:0;return u.push({id:b,label:b,count:k,value:k}),u},[]),{isMobile:l}=P(),a=l?160:210,c=l?-90:-45,g=l?{top:0,right:0,bottom:60,left:0}:{top:0,right:0,bottom:60,left:15},i=["#d5d5d5","#d8d801","#ed7d01","#389700","#0090de","#634b9f","#9d5918","#ba0303","#000","#000","#000","#000","#000","#3e3e3e","#a5a93c","#a5a93c","#a5a93c","#a5a93c","#a5a93c","#a5a93c"],o=["#000","#000","#000","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#ddd","#aaa","#000","#000","#000","#000","#000","#000"];return e.jsx("div",{style:{height:a,padding:"0px 8px 0px 8px",width:"100%",flexGrow:2,backgroundColor:"inherit"},children:e.jsx($e,{data:d,maxValue:s,margin:g,padding:.15,colors:u=>i[u.index%i.length],animate:!0,axisBottom:{tickRotation:c},axisLeft:null,enableGridY:!1,theme:He,isInteractive:!1,enableLabel:!0,label:u=>u.data.count,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:u=>o[u.index%o.length]})},"bar")}function be({userData:t}){if(!t)return null;const{isMobile:s}=P(),d=s?"1.3rem":"1.8rem",l=s?"0.83rem":"1rem",a=s?"BB Locks":"Eligible Black Belt Locks",c=s?"10px 4px 18px 0px":"10px 12px 18px 0px";return e.jsx("div",{style:{placeItems:"right"},children:e.jsxs("div",{style:{textAlign:"right",padding:c,backgroundColor:"inherit",fontSize:l},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:e.jsxs("nobr",{children:["Eligible for Dan ",e.jsx("span",{style:{fontSize:d,lineHeight:"1rem"},children:t.danLevel})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Dan Points ",e.jsx("strong",{children:t.danPoints})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:[a," ",e.jsx("strong",{children:t.blackBeltCount})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Unique Locks ",e.jsx("strong",{children:t.uniqueLocks})]})}),e.jsx("div",{style:{marginBottom:5},children:e.jsxs("nobr",{children:["Masters Projects ",e.jsx("strong",{children:t.projects})]})})]})})}function je({blackBeltData:t,fighter:s,label:d,param:l,opponent:a}){const[c,g]=_(),[i,o]=n.useState(!1),u=n.useCallback(()=>o(!1),[]),b=n.useCallback(()=>o(!0),[]),k=n.useCallback(f=>{c.set(l,f.target.value.id),g(c),u()},[u,l,c,g]),{isMobile:h}=P(),p=h?150:220;return e.jsxs(Ue,{style:{marginBottom:10,minWidth:p,textAlign:"left"},size:"small",children:[e.jsx(qe,{color:"info",children:d}),e.jsx(Ge,{value:s,name:"fighter",label:d,open:i,onClose:u,onOpen:b,onChange:k,style:{fontWeight:400,color:"#eee"},color:"info",children:t.filter(f=>f.id!==a).map((f,B)=>e.jsx(ye,{value:f,children:f.displayName},B))})]})}var ie={},jt=$;Object.defineProperty(ie,"__esModule",{value:!0});var re=ie.default=void 0,yt=jt(H()),vt=e;re=ie.default=(0,yt.default)((0,vt.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox");function kt({entry:t,data:s}){var o,u;const d=s&&((o=s[0])==null?void 0:o.find(b=>t.id===b.matchId)),l=d?"#1d801d":"#000",a=s&&((u=s[1])==null?void 0:u.find(b=>t.id===b.matchId)),c=a?"#4d4dc1":"#000",g=d&&a?"#111":d?"#032703":a?"#0f0f37":"#000",i=!d&&!a?"#777":"#fff";return e.jsxs("div",{style:{display:"flex",backgroundColor:g,borderTop:"2px solid #111"},children:[e.jsx("div",{style:{width:40,display:"flex",alignItems:"center"},children:d&&e.jsx(re,{style:{color:l,marginLeft:10}})}),e.jsx(Qe,{style:{minHeight:56,color:i,padding:3},children:e.jsx(Pe,{primary:Je(t),primaryTypographyProps:{fontWeight:500,textAlign:"center",fontSize:"1.03rem"},secondary:t.version,secondaryTypographyProps:{color:"#999",textAlign:"center"},style:{padding:"0px 0px 0px 10px"}})},t.id),e.jsx("div",{style:{width:40,display:"flex",alignItems:"center"},children:a&&e.jsx(re,{style:{color:c,marginRight:10}})})]})}function Ct({data:t}){const s=Se({url:Ve}),d=n.useMemo(()=>s.data?s.data.blackBeltOnly.listStats.recordedLocks.topItems:[],[s]),l=n.useMemo(()=>d.map(a=>({...De(a.id),lockName:a.name,popularityRank:a.rank,userCount:a.saveCount})),[d]).slice(0,100);return e.jsx(A.Fragment,{children:l.map(a=>e.jsx(kt,{entry:a,data:t},a.id))})}function St({blackBeltData:t,compare:s,setCompare:d}){const l=Ce(),[a,c]=_(),{getPickerActivity:g}=n.useContext(Te),{bb1:i,bb2:o,title:u}=n.useMemo(()=>{const y=Q.parse(l.search);return{bb1:y.bb1?y.bb1:void 0,bb2:y.bb2?y.bb2:void 0,title:y.title?y.title:void 0}},[l.search]),[b,k]=n.useState([]);n.useEffect(()=>{async function y(){const O=i?await g(i):[],G=pe(O).scoredActivity.filter(z=>z.matchId&&!z.exceptionType),V=o?await g(o):[],Y=pe(V).scoredActivity.filter(z=>z.matchId&&!z.exceptionType);k([G,Y])}y().then()},[i,o,g]);const h=n.useMemo(()=>t.find(y=>y.id===i)||"",[i,t]),p=n.useMemo(()=>t.find(y=>y.id===o)||"",[o,t]),[f,B]=n.useState(!!i||!!o||s);n.useEffect(()=>{d(!!i||!!o||f)},[i,o,f,d]);const L=n.useCallback(()=>{B(!f)},[f]),S=n.useCallback(()=>{a.delete("bb1"),a.delete("bb2"),a.delete("title"),c(a),B(!f)},[a,c,f]),M=h!=null&&h.displayName?h.displayName.replace(/[\s/]/g,"_").replace(/\W/g,""):"Unknown",w=p!=null&&p.displayName?p.displayName.replace(/[\s/]/g,"_").replace(/\W/g,""):"Unknown",W=i||o?M+"-vs-"+w:null;(i||o)&&u!==W&&setTimeout(()=>c({bb1:i,bb2:o,title:W}),250);const N=ke.reduce((y,O)=>{const G=h&&h.beltCounts[O]?h.beltCounts[O]:0,V=p&&p.beltCounts[O]?p.beltCounts[O]:0,Y=Math.max(G,V);return y=Math.max(y,Y),y},0),D=f?"#222":"#000",r=(h==null?void 0:h.danPoints)>(p==null?void 0:p.danPoints)?"#333":"#222",m=(p==null?void 0:p.danPoints)>(h==null?void 0:h.danPoints)?"#333":"#222",{isMobile:T}=P(),q=T?"block":"flex",E=T?"flex":"block",x=T?"100%":"50%",C=T?0:10;return e.jsxs(A.Fragment,{children:[e.jsxs(Xe,{expanded:f,disableGutters:!0,style:{marginBottom:20,backgroundColor:D},children:[e.jsx(Ze,{style:{placeItems:"center",textAlign:"center",width:"100%",backgroundColor:D},children:e.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[!f&&e.jsx(ue,{onClick:L,variant:"outlined",color:"info",size:"small",children:"Compare Mode!"}),f&&e.jsx(A.Fragment,{children:e.jsx(ue,{onClick:S,variant:"outlined",color:"info",size:"small",style:{marginLeft:10},children:"Close Compare"})})]})}),e.jsx(et,{style:{backgroundColor:"#111",padding:"16px 0px 0px 0px"},children:e.jsxs("div",{style:{backgroundColor:"#111",padding:0},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"50%",padding:0,margin:4,textAlign:"center"},children:e.jsx(je,{blackBeltData:t,fighter:h,label:"Fighter #1",param:"bb1",opponent:o})}),e.jsx("div",{style:{width:"50%",padding:0,margin:4,textAlign:"center"},children:e.jsx(je,{blackBeltData:t,fighter:p,label:"Fighter #2",param:"bb2",opponent:i})})]}),e.jsxs("div",{style:{display:q},children:[e.jsxs("div",{style:{width:x,backgroundColor:r,padding:8,margin:4},children:[e.jsx("div",{style:{width:"100%",fontSize:"1.4rem",fontWeight:700,marginLeft:C},children:h==null?void 0:h.displayName}),e.jsxs("div",{style:{display:E},children:[e.jsx(be,{userData:h}),e.jsx(ge,{userData:h,max:N})]})]}),e.jsxs("div",{style:{width:x,backgroundColor:m,padding:8,margin:4},children:[e.jsx("div",{style:{width:"100%",fontSize:"1.4rem",fontWeight:700,marginLeft:C},children:p==null?void 0:p.displayName}),e.jsxs("div",{style:{display:E},children:[e.jsx(be,{userData:p}),e.jsx(ge,{userData:p,max:N})]})]})]})]})})]}),s&&e.jsx("div",{style:{textAlign:"center",width:"100%",fontWeight:700,fontSize:"1.1rem",marginBottom:8},children:"MOST POPULAR LOCKS"}),e.jsxs("div",{style:{display:"flex",width:"100%",fontWeight:700,fontSize:"1.1rem",marginBottom:8},children:[e.jsx("div",{style:{flexGrow:1,color:"#1d801d"},children:M!=="Unknown"&&e.jsx("span",{children:M})}),e.jsx("div",{style:{textAlign:"right",color:"#4e4ed0"},children:w!=="Unknown"&&e.jsx("span",{children:w})})]}),s&&e.jsx(Ct,{data:b})]})}function Lt({data:t}){const{user:s}=n.useContext(U),{isMobile:d}=P(),l=n.useMemo(()=>t?t.awards.filter(r=>r.displayName).filter(r=>j().diff(r.date,"day")<=14).map(r=>{const m=(s==null?void 0:s.uid)===r.userId;return{...r,isCurrentUser:m}}).sort((r,m)=>j(m.date).valueOf()-j(r.date).valueOf()).slice(0,50):[],[t,s==null?void 0:s.uid]),a=n.useMemo(()=>t?t.evidence.filter(r=>r.displayName).filter(r=>j().diff(r.date,"day")<=14).map(r=>{const m=(s==null?void 0:s.uid)===r.userId;return{...r,isCurrentUser:m}}).sort((r,m)=>j(m.date).valueOf()-j(r.date).valueOf()).slice(0,900):[],[t,s==null?void 0:s.uid]),c=j(t==null?void 0:t.metadata.updatedDateTime).format("MM/DD/YY HH:mm"),[g,i]=_(),o=g.get("sort"),u=o&&o.includes("ev"),[b,k]=n.useState(!1),[h,p]=n.useState(!1),f=n.useCallback(r=>()=>{o&&r!==o?(g.set("sort",r),k(u?b:!1),p(u?!1:h)):o&&r===o?(k(u?b:!b),p(u?!h:h)):r==="date"?(g.set("sort",r),k(!0)):r==="evDate"?(g.set("sort",r),p(!0)):g.set("sort",r),i(g)},[u,h,b,g,i,o]),B=n.useMemo(()=>o?l.sort((r,m)=>{if(o==="name")return r.displayName.localeCompare(m.displayName);if(o==="belt")return xe(r.awardName.replace(" Belt",""),m.awardName.replace(" Belt",""))||r.displayName.localeCompare(m.displayName);if(o==="date")return j(m.date).valueOf()-j(r.date).valueOf()}):l.sort((r,m)=>j(m.date).valueOf()-j(r.date).valueOf()),[l,o,b]),L=n.useMemo(()=>b?B.reverse():B,[B,b]),S=n.useMemo(()=>o?a.sort((r,m)=>{if(o==="evName")return r.displayName.localeCompare(m.displayName);if(o==="evLock")return r.evidenceName.localeCompare(m.evidenceName)||r.displayName.localeCompare(m.displayName);if(o==="evBelt")return xe(r.belt.replace(" Belt",""),m.belt.replace(" Belt",""))||r.displayName.localeCompare(m.displayName);if(o==="evDate")return j(m.date).valueOf()-j(r.date).valueOf()}):a.sort((r,m)=>j(m.date).valueOf()-j(r.date).valueOf()),[a,o,h]),M=n.useMemo(()=>h?S.reverse():S,[S,h]),w=d?"auto":"170px",W=d?16:20,N=n.useCallback(r=>{const m=r.replace(" Belt","");return he[m]?he[m].color:r.includes("Dan")?"#769e49":"#b00"},[]),D=n.useCallback(r=>{const m=window.open(r,"_blank","noopener,noreferrer");m&&(m.opener=null)},[]);return e.jsxs(A.Fragment,{children:[e.jsxs("div",{style:{justifyItems:"center"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:"Recent Belts & Dans"}),e.jsx(Z,{sx:{backgroundColor:"#111",maxWidth:500},children:e.jsxs(ee,{sx:{minWidth:360,align:"left"},children:[e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(v,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222"},children:e.jsx("span",{style:o==="name"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("name"),children:"User"})}),e.jsx(v,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222",width:w},children:e.jsx("div",{style:o==="belt"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("belt"),children:"Belt"})}),e.jsx(v,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!o||u||o==="date"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("date"),children:"Date"})})]})}),e.jsx(te,{children:L.map((r,m)=>e.jsxs(I,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(v,{align:"left",style:{padding:"0px 0px 0px 16px",width:w},children:e.jsx("span",{style:{fontWeight:500},children:e.jsx(se,{leader:r,isCurrentUser:r.isCurrentUser,tab:"blackBelts",maxLength:W})})}),e.jsx(v,{align:"left",style:{backgroundColor:N(r.awardName),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(v,{align:"left",style:{alignItems:"center"},children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:r.awardName})}),e.jsx(v,{align:"center",style:{fontWeight:500},children:j(r.date).format("MMM DD")})]},m))})]})})]}),e.jsxs("div",{style:{justifyItems:"center",marginTop:40},children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.2rem",width:"100%",textAlign:"center",margin:"20px 0px"},children:"Recent Picks and Projects"}),e.jsx(Z,{sx:{backgroundColor:"#111",maxWidth:650},children:e.jsxs(ee,{sx:{minWidth:360,align:"left"},children:[e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(v,{align:"left",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"4px 0px 4px 16px",backgroundColor:"#222",width:w},children:e.jsx("span",{style:o==="evName"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evName"),children:"User"})}),e.jsxs(v,{align:"left",colSpan:2,style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:"0px 0px 0px 4px",backgroundColor:"#222"},children:[e.jsx("span",{style:o==="evLock"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evLock"),children:"Lock"}),e.jsx("span",{style:o==="evBelt"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evBelt"),children:" (Belt)"})]}),e.jsx(v,{align:"center",style:{fontWeight:700,fontSize:"1.0rem",border:0,padding:0,backgroundColor:"#222"},children:e.jsx("span",{style:!u||o==="evDate"?{}:{cursor:"pointer",color:"#ccc"},onClick:f("evDate"),children:"Date"})})]})}),e.jsx(te,{children:M.map((r,m)=>e.jsxs(I,{sx:{"&:nth-of-type(even) td, &:nth-of-type(even) th":{backgroundColor:"#000"},"td, th":{padding:"6px 2px",border:0}},children:[e.jsx(v,{align:"left",style:{padding:"0px 0px 0px 16px"},children:e.jsx("span",{style:{fontWeight:500,width:w},children:e.jsx(se,{leader:r,isCurrentUser:r.isCurrentUser,tab:"blackBelts",maxLength:W})})}),e.jsx(v,{align:"left",style:{backgroundColor:N(r.belt),borderBottom:"1px solid #333",width:4,marginLeft:5}}),e.jsx(v,{align:"left",children:e.jsx("div",{style:{fontWeight:500,marginLeft:5},children:e.jsx(st,{onClick:()=>D(r.evidenceUrl),style:{color:"#fff"},children:r.evidenceName})})}),e.jsx(v,{align:"center",children:e.jsx("nobr",{children:j(r.date).format("MMM DD")})})]},m))})]})}),e.jsxs("div",{style:{width:"100%",marginTop:12,fontSize:"0.8rem",textAlign:"center"},children:["Last update: ",c," GMT"]})]})]})}function ts({tab:t}){const{data:s,loading:d,error:l,errorMessage:a}=Se({urls:wt}),c=Ce(),{user:g}=n.useContext(U),i=n.useRef(),{isMobile:o}=P(),u=ve(),{bb1:b,bb2:k,compareMode:h}=n.useMemo(()=>{const x=Q.parse(c.search);return{bb1:x.bb1?x.bb1:void 0,bb2:x.bb2?x.bb2:void 0,compareMode:!!x.compare}},[c.search]),[p,f]=n.useState(!!b||!!k||h),{highlightedUser:B,sort:L}=n.useMemo(()=>{const x=Q.parse(c.search);return{highlightedUser:x.user,sort:x.sort&&Bt.includes(x.sort)?x.sort:void 0}},[c.search]),S=n.useMemo(()=>({locks:{defaultSort:"locksCollection",columns:[{field:"own",order:"desc",tooltip:"Sort by Own"},{field:"picked",order:"desc",tooltip:"Sort by Picked"},{field:"wishlist",order:"desc",tooltip:"Sort by Wishlist"},{field:"recordedLocks",order:"desc",tooltip:"Sort by Scorecard"}]},safelocks:{defaultSort:"safelocksCollection",columns:[{field:"safelocksOwn",order:"desc",tooltip:"Sort by Own"},{field:"safelocksCracked",order:"desc",tooltip:"Sort by Cracked"},{field:"safelocksWishlist",order:"desc",tooltip:"Sort by Wishlist"}]},blackBelts:{defaultSort:"danPoints",columns:[{field:"danLevel",order:"desc",tooltip:"Sort by Dan Level"},{field:"danPoints",order:"desc",tooltip:"Sort by Dan Points"},{field:"blackBeltCount",order:"desc",tooltip:"Sort by Black Belt Locks"},{field:"blackBeltAwardedAt",order:"asc",tooltip:"Sort by Date"}]},recent:{defaultSort:"",columns:[]}}),[]),M=S[t].columns.find(x=>x.field===L)?S[t].columns.find(x=>x.field===L).order:"desc",w=n.useMemo(()=>{const x=s?s==null?void 0:s.leaderboardData.data.filter(C=>!C.privacyNoLeaderboard).filter(C=>C[S[t].defaultSort]>0):[];return t==="blackBelts"?x.filter(C=>C.blackBeltAwardedAt>0):x},[s,t,S]),W=n.useMemo(()=>s==null?void 0:s.leaderboardData.data.filter(x=>!x.privacyNoLeaderboard).filter(x=>x.blackBeltAwardedAt>0),[s]),N=n.useMemo(()=>L&&M==="desc"?w.sort((x,C)=>(C[L]||0)-(x[L]||0)):L&&M==="asc"?w.sort((x,C)=>(x[L]||0)-(C[L]||0)):w.sort((x,C)=>(C[S[t].defaultSort]||0)-(x[S[t].defaultSort]||0)),[L,M,w,S,t]),D=j(s==null?void 0:s.leaderboardData.metadata.updatedDateTime).format("MM/DD/YY HH:mm"),r=n.useCallback(x=>{f(!1),x&&x!==t&&u("/leaderboard/"+x)},[u,t]),m=p?null:e.jsxs(A.Fragment,{children:[e.jsx(xt,{data:N}),e.jsx(ht,{}),e.jsx(bt,{tab:t}),!o&&e.jsx("div",{style:{flexGrow:1}})]}),T=d?"Loading...":"Leaderboard",q=o?"Safes":"Safe Locks",E=t==="blackBelts"?"100%":"78vh";if(d)return e.jsx(tt,{});if(l)return e.jsx(rt,{errorMessage:a});if(s&&!l)return e.jsxs(A.Fragment,{children:[e.jsx(Oe,{title:T,extras:m}),e.jsxs("div",{style:{maxWidth:700,padding:8,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",marginTop:16},children:[e.jsx("div",{style:{flexGrow:1,textAlign:"center",marginBottom:10},children:e.jsxs(ot,{variant:"outlined",size:"large",children:[e.jsx(F,{onClick:()=>r("locks"),selected:t==="locks",disabled:t==="locks",value:"collection",style:{padding:"2px 12px 2px 12px"},children:"Locks"}),e.jsx(F,{onClick:()=>r("safelocks"),selected:t==="safelocks",disabled:t==="safelocks",value:"safelocks",style:{padding:"2px 12px 2px 12px"},children:q}),e.jsx(F,{onClick:()=>r("blackBelts"),selected:t==="blackBelts",disabled:t==="blackBelts",value:"scorecard",style:{padding:"2px 12px 2px 12px"},children:"Black Belts"}),e.jsx(F,{onClick:()=>r("recent"),selected:t==="recent",disabled:t==="recent",value:"recent",style:{padding:"2px 12px 2px 12px"},children:"Recent"})]})}),t==="blackBelts"&&e.jsx(St,{blackBeltData:W,compare:p,setCompare:f}),!p&&t!=="recent"&&e.jsxs(A.Fragment,{children:[e.jsx(Z,{sx:{height:E,backgroundColor:"#111"},id:"scrollable",ref:i,children:e.jsxs(ee,{stickyHeader:!0,children:[e.jsx(ut,{columns:S[t].columns}),e.jsx(te,{children:N.map((x,C)=>{const y=!!B&&(B==="me"&&x.id===(g==null?void 0:g.uid)||B===x.displayName);return e.jsx(pt,{index:C,leader:x,scrollableRef:i,highlighted:y,columns:S[t].columns,tab:t},x.id)})})]})}),e.jsxs("div",{style:{width:"100%",marginTop:12,fontSize:"0.8rem",textAlign:"center"},children:["Last update: ",D," GMT"]})]}),t==="recent"&&e.jsx(Lt,{data:s.recentAwardsEvidence})]})]})}const wt={leaderboardData:Ye,recentAwardsEvidence:Ke},Bt=["own","picked","recordedLocks","wishlist","safelocksOwn","safelocksCracked","safelocksWishlist","danLevel","danPoints","blackBeltCount","blackBeltAwardedAt"];export{ts as default};
