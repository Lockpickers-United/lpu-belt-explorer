import{b as N,r as a,j as t,J as $,I as V,O as z,P as B,d as H,a9 as xe,R as W,F as fe,Z as ue,ag as me,u as he,a8 as ge,M as je,aS as ye}from"./index-32cc7736.js";import{d as be}from"./ExpandMore-b4916ea4.js";import{B as ve}from"./BeltStripe-b8dc6610.js";import{F as A}from"./FieldValue-61a3a607.js";import{S as ke,E as Ce}from"./EvidenceForm-c022f22f.js";import{e as S}from"./entryName-eb0f9d82.js";import{d as we}from"./Link-7c794a0d.js";import{D as Se}from"./DataContext-dd5ea814.js";import"./index-134dd2ba.js";import{B as Te}from"./BeltIcon-f5d14c1f.js";import{A as Ie,a as Ee,b as Le}from"./AccordionSummary-dd0f2c6a.js";import{L as _e}from"./Link-66ddd479.js";function De({entry:s,color:e}){const o=N(),r=S(s).replace(/[\s/]/g,"_").replace(/\W/g,""),p=e||"#fff",x=a.useCallback(f=>{f.preventDefault(),f.stopPropagation(),o(`/locks?id=${s.id}&name=${r}`)},[s.id,o,r]);return t.jsx($,{title:"View Lock Details",arrow:!0,disableFocusListener:!0,children:t.jsx(V,{onClick:x,children:t.jsx(we,{style:{width:18,height:18,color:p}})})})}var T={},Me=B;Object.defineProperty(T,"__esModule",{value:!0});var O=T.default=void 0,Fe=Me(z()),Re=t;O=T.default=(0,Fe.default)((0,Re.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents");var I={},Ae=B;Object.defineProperty(I,"__esModule",{value:!0});var q=I.default=void 0,Ne=Ae(z()),$e=t;q=I.default=(0,Ne.default)((0,$e.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print");H.extend(xe);function Ve({owner:s,activity:e,expanded:o,onExpand:i,merged:r}){const p=N(),{setFilters:x}=a.useContext(fe),{cardActivity:f,getEntryFromId:y,getProjectEntryFromId:U,getAwardEntryFromId:K}=a.useContext(Se),{admin:J}=a.useContext(ue),b=y(e.matchId),Y=U(e.matchId),u=K(e.matchId),n=b||Y||u;if(!n)return;const[E,L]=a.useState(!1),v=a.useRef(null);a.useEffect(()=>{if(o&&v&&!E){const w=window.innerWidth<=600?70:74,{id:pe}=me.parse(location.search),R=pe===e.id;L(!0),setTimeout(()=>{window.scrollTo({left:0,top:v.current.offsetTop-w,behavior:R?"auto":"smooth"})},R?0:100)}else o||L(!1)},[o,n,E,e.id]);let d=n?S(n):e.evidenceNotes;const _=e.exceptionType&&e.evidenceNotes&&e.evidenceNotes.toLowerCase()!==d.toLowerCase()?e.evidenceNotes:null;d=e.exceptionType==="nomatch"?`[ ${e.evidenceNotes} ]`:d,d=e.exceptionType&&s&&r&&!u?d+" *":d;const D=["nomatch","duplicate","upgraded"].includes(e.exceptionType)?.5:1,m=e.exceptionId,k=m?f.find(l=>l.id===m):{},M=k?a.useMemo(()=>y(k.matchId),[y,k.matchId]):{},Z=M?S(M,"short"):"",G=m?t.jsx(_e,{style:{color:"#99c2e5"},onClick:()=>{Q(m)},children:Z}):null;let C=e.exceptionType==="nomatch"?"Could not be matched to a lock or project":e.exceptionType==="badlink"&&!u?"You must provide a valid link.":e.exceptionType==="duplicate"?"Duplicate of ":e.exceptionType==="upgraded"?"Upgraded to ":null;const Q=a.useCallback(l=>{x({id:l})},[x]),X=e.points===1?"pt":"pts";let c=e.date?H(e.date).format("L"):"(no date)";c=c.replace("/202","/2"),c=c.replace("/201","/1");const P=e.date?"#fff":"#aaa",h=["belt","dan","hof"].includes(e.awardType),g=s&&!h||J,F=a.useCallback((l,w)=>{g&&i(w?e.id:!1)},[e,g,i]),ee=a.useCallback(l=>{l.preventDefault(),l.stopPropagation(),p("/award")},[p]),te=g?{}:{cursor:"default"},ne=g?t.jsx(be,{}):t.jsx("div",{style:{width:24}}),{isMobile:j}=he(),se=j?"block":"flex",oe=j?{display:"block",marginLeft:0,placeItems:"center"}:{display:"flex",margin:"0px 0px 0px 20px"},re=j?"65%":"56%",ae=j?"-2px 0px 3px 0px":"3px 0px 3px 0px",le=h?"1.1rem":"1rem",ie=h?"#121212":"",de=e.name==="Dan 20"?"ffff2c":"#87c048",ce={maxWidth:700,marginLeft:"auto",marginRight:"auto",display:"flex",placeItems:"center",backgroundColor:ie};return t.jsxs(Ie,{expanded:o,onChange:F,ref:v,children:[t.jsxs(Ee,{expandIcon:ne,style:{...ce,...te},children:[t.jsx(ve,{value:n?n.belt:""}),t.jsxs("div",{style:{margin:"8px 0px 0px 8px",width:re,flexShrink:0,flexDirection:"column",opacity:D},children:[t.jsxs("div",{style:{display:"flex"},children:[e.awardType==="belt"&&t.jsx("div",{style:{marginTop:-4,marginRight:10},children:t.jsx(Te,{value:n.belt,style:{paddingTop:2}})}),e.awardType==="dan"&&t.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:t.jsx(ge,{style:{color:de}})}),e.awardType==="hof"&&t.jsx("div",{style:{margin:"0px 12px 0px 5px"},children:t.jsx(O,{style:{color:"#f8f52f"}})}),t.jsx(A,{value:d,textStyle:{marginLeft:"0px",fontWeight:700,fontSize:le},style:{marginBottom:"2px"}})]}),!!_&&!u&&t.jsx("span",{style:{margin:"0px 0px 0px 15px",fontSize:"0.95rem",lineHeight:1.25,color:"#bbb"},children:_}),!!n&&!!(n!=null&&n.version)&&t.jsx(A,{name:"Version",value:t.jsx(je,{style:{fontSize:"0.95rem",lineHeight:1.25},children:n==null?void 0:n.version}),textStyle:(n==null?void 0:n.belt)==="Unranked"?{color:"#aaa"}:{}})]}),t.jsxs("div",{style:{display:se,placeItems:"center",marginLeft:10,opacity:D},children:[t.jsxs("div",{style:{display:"flex",width:76},children:[t.jsx("div",{style:{margin:"2px 0px 0px 6px",width:30,flexShrink:0,flexDirection:"column"},children:b&&t.jsx(De,{entry:b})}),t.jsx("div",{style:{margin:"0px 0px 0px 6px",flexShrink:0,flexDirection:"column"},children:(s||!h)&&t.jsx(ke,{activity:e,handleChange:F,exceptionType:e.exceptionType,owner:s})})]}),t.jsxs("div",{style:oe,children:[t.jsx("div",{style:{margin:ae,color:P,width:90,textAlign:"center"},children:c}),!["belt","dan"].includes(e.awardType)&&t.jsx("div",{style:{margin:"1px 0px 0px 22px"},children:t.jsxs("nobr",{children:[t.jsxs("span",{style:{fontWeight:700},children:[e.points," "]}),t.jsx("span",{style:{color:"#666"},children:X})]})}),s&&e.matchId===ye&&t.jsx($,{title:"Print Certificate",arrow:!0,disableFocusListener:!0,children:t.jsx(V,{onClick:ee,style:{marginLeft:30},children:t.jsx(q,{})})})]})]})]}),o&&t.jsx(W.Fragment,{children:t.jsxs(Le,{sx:{padding:"4px 16px 0px 26px"},children:[(C||e.evidenceModifier)&&t.jsxs("div",{style:{margin:"0px 0px 20px 20px",fontWeight:600,fontSize:".95rem"},children:[e.evidenceModifier&&t.jsxs("span",{children:[e.evidenceModifier,"     "]}),C&&t.jsxs("span",{children:["* ",C," ",G]})]}),t.jsx(Ce,{activity:e,handleUpdate:()=>{}})]})})]},e.id)}const Qe=W.memo(Ve,(s,e)=>{const o=Object.keys(s.activity),i=Object.keys(e.activity);if(o.length!==i.length)return!1;for(let r=0;r<o.length;r++)if(o[r]!==i[r]||s.activity[o[r]]!==e.activity[i[r]])return!1;return s.owner===e.owner&&s.expanded===e.expanded&&s.onExpand===e.onExpand&&s.merged===e.merged});export{Qe as S,De as V};
