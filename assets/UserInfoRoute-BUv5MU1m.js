import{r as c,A as J,D as Q,F as et,S as nt,ao as dt,aE as rt,j as t,d as it,h as ct,e as lt,N as at}from"./index-DgUxZ_7x.js";import{c as ot}from"./dataUrls-DkJe4Pqg.js";import{a as ht,b as xt}from"./ScorecardListContext-Ds2Z4Jks.js";import{L as X}from"./LoadingDisplay-CDBgZDGk.js";import{u as H}from"./useData-PoAbwwKH.js";import{L as jt,A as ut}from"./LocalizationProvider-6wvh14ir.js";import{M as yt}from"./MustBeLoggedIn-Dsjx0vx4.js";import"./DataContext-C8Dearks.js";import"./index-CioIqPiT.js";import"./filterEntriesAdvanced-B_LinbMH.js";import"./Box-CI7vk0yg.js";import"./CircularProgress-U9qTZFEc.js";function mt(){var O,W,q,M,T,z,$,K,V,G;const{user:d,userClaims:a}=c.useContext(J),{getProfile:o,getPickerActivity:l}=c.useContext(Q),{filters:h={},addFilters:m}=c.useContext(et),{uid:L,name:b}=h,{scoredActivity:D,bbCount:p,danPoints:A,eligibleDan:v,nextDanPoints:f,nextDanLocks:w,uniqueLocks:B,maxBelt:P}=c.useContext(nt),x=d==null?void 0:d.uid,Y=c.useCallback(async()=>{var i;try{const r=await o(x);if(r){const C=r.displayName&&!r.privacyAnonymous?(i=r==null?void 0:r.displayName)!=null&&i.toLowerCase().endsWith("s")?`${r.displayName}'`:`${r.displayName}'s`:"Anonymous";document.title=`LPU Belt Explorer - ${C} User Info`}if((d==null?void 0:d.uid)!==x){const C=await l(x);return{profile:r,...dt(C)}}else return{profile:r,scoredActivity:D,bbCount:p,danPoints:A,eligibleDan:v,nextDanPoints:f,nextDanLocks:w,uniqueLocks:B,maxBelt:P}}catch(r){return console.error("Error loading profile and activity.",r),null}},[o,x,d,l,D,p,A,v,f,w,B,P]),{data:n={},loading:j,error:g}=H({loadFn:Y}),s=c.useMemo(()=>n?n.profile:{},[n]);c.useEffect(()=>{d&&!L&&m([{key:"uid",value:d.uid}],!0),s&&!b&&m([{key:"name",value:encodeURIComponent(s==null?void 0:s.displayName)}],!0)},[m,h,b,s,L,d]);const Z=n?n.scoredActivity:[],S=n?n.bbCount:0,I=n?n.danPoints:0,N=n?n.eligibleDan:0,U=n?n.nextDanPoints:0,E=n?n.nextDanLocks:0,F=n?n.uniqueLocks:0,R=n?n.scoredActivity.filter(i=>i.collectionDB==="awards").map(i=>rt[i.matchId]).filter(i=>i.awardType==="belt").sort((i,r)=>i.rank-r.rank):[],u=n?R[R.length-1]:{},y=H({url:ot}),_=y.data?y.data.blackBeltOnly.listStats.recordedLocks.topItems:[],tt=y.data?y.data.allUsers.listStats.recordedLocks.topItems:[],st=void 0;if(j||g)return null;const k={fontWeight:700,backgroundColor:"#333",padding:2,textAlign:"left",marginTop:10},e={fontWeight:700,paddingRight:10};return t.jsx(ht,{cardActivity:Z,cardBBCount:S,cardDanPoints:I,cardEligibleDan:N,cardNextDanPoints:U,cardNextDanLocks:E,cardUniqueLocks:F,cardMaxBelt:u,popularLocks:tt,popularLocksBB:_,children:t.jsx(xt,{children:t.jsxs(jt,{adapterLocale:it.locale(),dateAdapter:ut,children:[j&&t.jsx(X,{}),!j&&n&&!g&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem"},children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{style:k,children:[t.jsx("th",{children:"Parameter"}),t.jsx("th",{children:"Value"})]})}),t.jsxs("tbody",{children:[t.jsx("tr",{style:{height:10}}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"display name"}),t.jsx("td",{children:s==null?void 0:s.displayName})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user id"}),t.jsx("td",{children:d.uid})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"user claims"}),t.jsx("td",{children:a.join(", ")})]}),(s==null?void 0:s.admin)&&t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"profile.admin"}),t.jsx("td",{children:"true"})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:k,colSpan:2,children:"SCORECARD"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"blackBeltAwarded"}),t.jsx("td",{children:s!=null&&s.blackBeltAwardedAt?"true":""})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardMaxBelt"}),t.jsx("td",{children:u==null?void 0:u.name})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardBBCount"}),t.jsx("td",{children:S})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardDanPoints"}),t.jsx("td",{children:I})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardEligibleDan"}),t.jsx("td",{children:N})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanPoints"}),t.jsx("td",{children:U})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardNextDanLocks"}),t.jsx("td",{children:E})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"cardUniqueLocks"}),t.jsx("td",{children:F})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"projects"}),t.jsx("td",{children:(O=s==null?void 0:s.projects)==null?void 0:O.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"tabClaimed"}),t.jsx("td",{children:s==null?void 0:s.tabClaimed})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"redditUsername"}),t.jsx("td",{children:s==null?void 0:s.redditUsername})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"discordUsername"}),t.jsx("td",{children:s==null?void 0:s.discordUsername})]}),t.jsx("tr",{style:{height:10}}),t.jsx("tr",{children:t.jsx("td",{style:k,colSpan:2,children:"LOCK COLLECTION"})}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"any"}),t.jsx("td",{children:(W=s==null?void 0:s.any)==null?void 0:W.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"own"}),t.jsx("td",{children:(q=s==null?void 0:s.own)==null?void 0:q.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"picked"}),t.jsx("td",{children:(M=s==null?void 0:s.picked)==null?void 0:M.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"recorded"}),t.jsx("td",{children:(T=s==null?void 0:s.recorded)==null?void 0:T.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"wishlist"}),t.jsx("td",{children:(z=s==null?void 0:s.wishlist)==null?void 0:z.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksAny"}),t.jsx("td",{children:($=s==null?void 0:s.safelocksAny)==null?void 0:$.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksCracked"}),t.jsx("td",{children:(K=s==null?void 0:s.safelocksCracked)==null?void 0:K.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksOwn"}),t.jsx("td",{children:(V=s==null?void 0:s.safelocksOwn)==null?void 0:V.length})]}),t.jsxs("tr",{children:[t.jsx("td",{style:e,children:"safelocksWishlist"}),t.jsx("td",{children:(G=s==null?void 0:s.safelocksWishlist)==null?void 0:G.length})]})]})]})}),!j&&(!n||g)&&t.jsx("div",{style:{minWidth:"320px",height:"100%",padding:20,backgroundColor:"#000",marginLeft:"auto",marginRight:"auto",justifyItems:"center",fontSize:"0.95rem",textalign:"center"},children:"no user"}),t.jsx(ct,{before:st})]})})})}function Pt(){const{authLoaded:d,isLoggedIn:a,user:o}=c.useContext(J),{dbLoaded:l}=c.useContext(Q),h=!d||!l?"Loading...":"User Info";return t.jsxs(lt,{filterFields:[],children:[t.jsx(at,{title:h}),(!d||!l)&&t.jsx(X,{}),d&&!a&&t.jsx(yt,{actionText:"view user information"}),d&&a&&l&&t.jsx(mt,{user:o})]})}export{Pt as default};
