import{Y as W,Z as F,$ as L,a0 as B,j as e,r as s,ad as z,a5 as q,R as b,U as R,W as I,bs as N,B as m,b as T,u as A,bL as O}from"./index-HTC1xzYF.js";import{R as w}from"./RaffleContext-BMn8S4Ac.js";import{C as D}from"./Cached-DtNvr4Dy.js";import{E as V}from"./ExpandMore-CimHUkDx.js";import{C as H,c as Z}from"./CircularProgress-ufc04rer.js";import{n as _}from"./dataUrls-CThgH6Wi.js";import{B as k}from"./Box-BFx6uxMw.js";import{A as G,a as U,b as J}from"./AccordionSummary-BwHw08zp.js";var S={},E;function $(){if(E)return S;E=1;var t=W();Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var l=t(F()),i=L();return S.default=(0,l.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),S}var Y=$();const P=B(Y);function K({diameter:t=40}){return e.jsx("div",{style:{display:"flex",placeItems:"center",justifyContent:"center",width:t,height:t},children:e.jsx(H,{variant:"indeterminate",disableShrink:!0,sx:{color:l=>(l.palette.mode==="light","#fff"),animationDuration:"550ms",[`& .${Z.circle}`]:{strokeLinecap:"round"}},size:18,thickness:5})})}function Q({refresh:t,page:l}){const[i,r]=s.useState(!1),[d,f]=s.useState(""),[o,h]=s.useState(!1),{preview:u,setPreview:x}=s.useContext(w),[n,c]=z(),p=n.has("preview"),a=u||p,g=s.useCallback(async()=>{const M=`${_}/refresh-preview`;r(!0),await fetch(M,{cache:"no-store"}).then(async C=>(r(!1),await C.json())).then(async C=>{f(C),console.log(`preview response
`,JSON.stringify(C,null,2))}),await t()},[t]),y=s.useRef(null),v=s.useCallback(()=>{p?(n.delete("preview"),c(n),x(!1)):x(!u)},[u,p,n,x,c]);q("p",()=>v(),{preventDefault:!0});const j=a?"#983de6":"#fff";return e.jsxs(b.Fragment,{children:[l!=="pots"?e.jsx(k,{ref:y,style:{display:"flex",alignItems:"center",overflow:"hidden"},children:e.jsx(R,{style:{padding:8},disabled:!0,children:e.jsx(P,{style:{color:j,opacity:.5},fontSize:"small"})})}):e.jsx(k,{ref:y,style:{display:"flex",alignItems:"center",overflow:"hidden"},children:a?e.jsx(N,{in:a,direction:"left",appear:!1,children:e.jsxs("div",{style:{display:"flex",flexGrow:1,marginRight:0},children:[e.jsx(m,{onClick:v,style:{padding:"0px 8px 0px 0px",marginRight:0,color:"#8830d3",fontSize:"1.0rem",lineHeight:"1.2rem",whiteSpace:"nowrap"},children:"PREVIEW MODE ON"}),i?e.jsx("div",{style:{marginRight:0},children:e.jsx(K,{diameter:36})}):e.jsx(I,{title:"Refresh From Sheet",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:g,style:{marginRight:0},children:e.jsx(D,{fontSize:"small"})})}),e.jsx(R,{onClick:v,style:{padding:8},children:e.jsx(P,{style:{color:j},fontSize:"small"})})]})}):e.jsx(I,{title:"Toggle Preview Mode",arrow:!0,disableFocusListener:!0,children:e.jsx(R,{onClick:v,style:{padding:8},children:e.jsx(P,{style:{color:j},fontSize:"small"})})})}),(d==null?void 0:d.status)==="Errors"&&e.jsxs(G,{expanded:o,onChange:()=>h(!o),sx:{".MuiAccordionSummary-content":{margin:0}},children:[e.jsx(U,{expandIcon:e.jsx(V,{}),style:{maxWidth:700,margin:"0px auto 10px auto",paddingLeft:20,fontWeight:700,fontSize:"1rem",backgroundColor:"#e34141"},children:"There were errors trying to import"}),e.jsx(J,{style:{maxWidth:700,margin:"20px auto 10px auto",padding:10,fontWeight:400,fontSize:"0.8rem",backgroundColor:"#e34141",display:"flex",alignItems:"center"},children:e.jsx("pre",{children:JSON.stringify(d,null,2)})})]})]})}function X({page:t,width:l=700}){const{preview:i,setPreview:r,refresh:d}=s.useContext(w),[f,o]=z(),h=f.has("preview"),u=i||h,x=T(),{setAnimateTotal:n}=s.useContext(w),c=s.useCallback(j=>{x(j),n(!1)},[x,n]),p=s.useCallback(()=>{u&&t==="pots"&&(f.delete("preview"),o(f),r(!1))},[t,f,r,o,u]),{isMobile:a}=A(),g=a?"1.0rem":"1.03rem",y=!i||t!=="pots"||!a,v={maxWidth:l,marginLeft:"auto",marginRight:"auto",display:"flex",alignItems:"center",height:40};return e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:v,children:[e.jsx(R,{style:{padding:4},onClick:p,disabled:t!=="pots",children:e.jsx(O,{fontSize:"medium",style:{color:"#4c82fd"}})}),y&&e.jsxs(b.Fragment,{children:[e.jsx(m,{onClick:()=>c("/rafl/admin"),style:{padding:"0px 8px",marginRight:10,marginLeft:10,color:t==="entries"?"#48adf1":"#ccc",fontSize:g},sx:{":hover":{bgcolor:"#333",color:"#fff"}},disabled:t==="entries",children:"ENTRIES"}),e.jsx(m,{onClick:()=>c("/rafl/reports"),style:{padding:"0px 8px",marginRight:10,color:t==="reports"?"#48adf1":"#ccc",fontSize:g},sx:{":hover":{bgcolor:"#333",color:"#fff"}},disabled:t==="reports",children:"REPORTS"})]}),e.jsx("div",{style:{display:"flex",flexGrow:1,justifyContent:"right"},children:e.jsx(Q,{page:t,refresh:d})})]}),e.jsx("div",{style:{height:2}})]})}function le({page:t,width:l=700}){const{raflState:i,raffleAdminRole:r}=s.useContext(w),d=T(),{setAnimateTotal:f}=s.useContext(w),o=s.useCallback(y=>{d(y),f(!1)},[d,f]),{isMobile:h,flexStyle:u}=A(),x=h?0:4,n=h?"1.0rem":"1.03rem",c=h?3:10,p={maxWidth:l,marginLeft:"auto",marginRight:"auto",marginTop:10,padding:"0px 0px 0px 0px",fontWeight:700,display:u};let a=i!=="preview"||r||h?"PRIZES":"PRIZE PREVIEW";a=["hidden","post"].includes(i)?a.replace("PRIZES","2026 PRIZES"):a;const g=i==="live"||r?"ENTER":"INFO";return e.jsxs(b.Fragment,{children:[e.jsxs("div",{style:p,children:[e.jsx("div",{style:{flexGrow:1,fontSize:"1.7rem",marginTop:0},children:"LPU Annual Raffle"}),e.jsxs("div",{style:{marginTop:x,justifyItems:"right"},children:[e.jsx("div",{style:{flexGrow:1}}),e.jsx(m,{onClick:()=>o("/rafl"),style:{marginRight:c,color:t==="pots"?"#fff":"#ccc",fontSize:n},disabled:t==="pots",children:a}),i==="preview"&&!r&&e.jsx(m,{onClick:()=>o("/rafl/announce"),style:{marginRight:c,color:t==="announce"?"#fff":"#ccc",fontSize:n},disabled:t==="announce",children:"CONTRIBUTE"}),(i!=="hidden"||r)&&e.jsx(m,{onClick:()=>o("/rafl/charities"),style:{marginRight:c,color:t==="charities"?"#fff":"#ccc",fontSize:n},disabled:t==="charities",children:"CHARITIES"}),(["preview","live","post"].includes(i)||r)&&e.jsx(m,{onClick:()=>o("/rafl/enter"),style:{marginRight:0,color:t==="enter"?"#fff":"#ccc",fontSize:n},children:g}),(["live","post"].includes(i)||r)&&e.jsx(m,{onClick:()=>o("/rafl/stats"),style:{marginLeft:c,color:t==="stats"?"#fff":"#ccc",fontSize:n},children:"STATS"})]})]}),r&&e.jsx(X,{page:t,width:l}),e.jsx("div",{style:{height:8}})]})}export{le as R};
